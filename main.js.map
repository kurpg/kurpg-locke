{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.html","./src/app/component/badge/badge.component.html","./src/app/component/card-stack-list/card-stack-list.component.html","./src/app/component/card-stack/card-stack.component.html","./src/app/component/card/card.component.html","./src/app/component/chat-message/chat-message.component.html","./src/app/component/chat-palette/chat-palette.component.html","./src/app/component/chat-tab-setting/chat-tab-setting.component.html","./src/app/component/chat-tab/chat-tab.component.html","./src/app/component/chat-window/chat-window.component.html","./src/app/component/context-menu/context-menu.component.html","./src/app/component/dice-symbol/dice-symbol.component.html","./src/app/component/file-selecter/file-selecter.component.html","./src/app/component/file-storage/file-storage.component.html","./src/app/component/game-character-generator/game-character-generator.component.html","./src/app/component/game-character-sheet/game-character-sheet.component.html","./src/app/component/game-character/game-character.component.html","./src/app/component/game-data-element/game-data-element.component.html","./src/app/component/game-object-inventory/game-object-inventory.component.html","./src/app/component/game-table-mask/game-table-mask.component.html","./src/app/component/game-table-setting/game-table-setting.component.html","./src/app/component/game-table/game-table.component.html","./src/app/component/jukebox/jukebox.component.html","./src/app/component/lobby/lobby.component.html","./src/app/component/modal/modal.component.html","./src/app/component/network-indicator/network-indicator.component.html","./src/app/component/overview-panel/overview-panel.component.html","./src/app/component/password-check/password-check.component.html","./src/app/component/peer-cursor/peer-cursor.component.html","./src/app/component/peer-menu/peer-menu.component.html","./src/app/component/room-setting/room-setting.component.html","./src/app/component/terrain/terrain.component.html","./src/app/component/text-note/text-note.component.html","./src/app/component/text-view/text-view.component.html","./src/app/component/ui-panel/ui-panel.component.html","./node_modules/tslib/tslib.es6.js","./src/app/app.component.css","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/class/Jukebox.ts","./src/app/class/card-stack.ts","./src/app/class/card.ts","./src/app/class/chat-message.ts","./src/app/class/chat-palette.ts","./src/app/class/chat-tab-list.ts","./src/app/class/chat-tab.ts","./src/app/class/core/file-storage/audio-file.ts","./src/app/class/core/file-storage/audio-player.ts","./src/app/class/core/file-storage/audio-sharing-system.ts","./src/app/class/core/file-storage/audio-storage.ts","./src/app/class/core/file-storage/buffer-sharing-task.ts","./src/app/class/core/file-storage/canvas-util.ts","./src/app/class/core/file-storage/file-archiver.ts","./src/app/class/core/file-storage/file-reader-util.ts","./src/app/class/core/file-storage/image-file.ts","./src/app/class/core/file-storage/image-sharing-system.ts","./src/app/class/core/file-storage/image-storage.ts","./src/app/class/core/file-storage/mime-type.ts","./src/app/class/core/synchronize-object/decorator-core.ts","./src/app/class/core/synchronize-object/decorator.ts","./src/app/class/core/synchronize-object/game-object.ts","./src/app/class/core/synchronize-object/object-factory.ts","./src/app/class/core/synchronize-object/object-node.ts","./src/app/class/core/synchronize-object/object-serializer.ts","./src/app/class/core/synchronize-object/object-store.ts","./src/app/class/core/synchronize-object/object-synchronizer.ts","./src/app/class/core/synchronize-object/synchronize-task.ts","./src/app/class/core/system/event/event-system.ts","./src/app/class/core/system/event/event.ts","./src/app/class/core/system/event/listener.ts","./src/app/class/core/system/index.ts","./src/app/class/core/system/network/connection.ts","./src/app/class/core/system/network/network.ts","./src/app/class/core/system/network/peer-context.ts","./src/app/class/core/system/network/skyway-connection.ts","./src/app/class/core/system/network/skyway-data-connection.ts","./src/app/class/core/system/util/compress.ts","./src/app/class/core/system/util/promise-queue.ts","./src/app/class/core/system/util/string-util.ts","./src/app/class/core/system/util/uuid.ts","./src/app/class/core/system/util/xml-util.ts","./src/app/class/core/system/util/zero-timeout.ts","./src/app/class/data-element.ts","./src/app/class/data-summary-setting.ts","./src/app/class/database/database.ts","./src/app/class/dice-bot.ts","./src/app/class/dice-symbol.ts","./src/app/class/game-character.ts","./src/app/class/game-table-mask.ts","./src/app/class/game-table.ts","./src/app/class/peer-cursor.ts","./src/app/class/room.ts","./src/app/class/sound-effect.ts","./src/app/class/table-selecter.ts","./src/app/class/tabletop-object-util.ts","./src/app/class/tabletop-object.ts","./src/app/class/terrain.ts","./src/app/class/text-note.ts","./src/app/class/transform/css-number.ts","./src/app/class/transform/matrix-3d.ts","./src/app/class/transform/transform.ts","./src/app/component/badge/badge.component.css","./src/app/component/badge/badge.component.ts","./src/app/component/card-stack-list/card-stack-list.component.css","./src/app/component/card-stack-list/card-stack-list.component.ts","./src/app/component/card-stack/card-stack.component.css","./src/app/component/card-stack/card-stack.component.ts","./src/app/component/card/card.component.css","./src/app/component/card/card.component.ts","./src/app/component/chat-message/chat-message.component.css","./src/app/component/chat-message/chat-message.component.ts","./src/app/component/chat-palette/chat-palette.component.css","./src/app/component/chat-palette/chat-palette.component.ts","./src/app/component/chat-tab-setting/chat-tab-setting.component.css","./src/app/component/chat-tab-setting/chat-tab-setting.component.ts","./src/app/component/chat-tab/chat-tab.component.css","./src/app/component/chat-tab/chat-tab.component.ts","./src/app/component/chat-window/chat-window.component.css","./src/app/component/chat-window/chat-window.component.ts","./src/app/component/context-menu/context-menu.component.css","./src/app/component/context-menu/context-menu.component.ts","./src/app/component/dice-symbol/dice-symbol.component.css","./src/app/component/dice-symbol/dice-symbol.component.ts","./src/app/component/file-selecter/file-selecter.component.css","./src/app/component/file-selecter/file-selecter.component.ts","./src/app/component/file-storage/file-storage.component.css","./src/app/component/file-storage/file-storage.component.ts","./src/app/component/game-character-generator/game-character-generator.component.css","./src/app/component/game-character-generator/game-character-generator.component.ts","./src/app/component/game-character-sheet/game-character-sheet.component.css","./src/app/component/game-character-sheet/game-character-sheet.component.ts","./src/app/component/game-character/game-character.component.css","./src/app/component/game-character/game-character.component.ts","./src/app/component/game-data-element/game-data-element.component.css","./src/app/component/game-data-element/game-data-element.component.ts","./src/app/component/game-object-inventory/game-object-inventory.component.css","./src/app/component/game-object-inventory/game-object-inventory.component.ts","./src/app/component/game-table-mask/game-table-mask.component.css","./src/app/component/game-table-mask/game-table-mask.component.ts","./src/app/component/game-table-setting/game-table-setting.component.css","./src/app/component/game-table-setting/game-table-setting.component.ts","./src/app/component/game-table/game-table.component.css","./src/app/component/game-table/game-table.component.ts","./src/app/component/jukebox/jukebox.component.css","./src/app/component/jukebox/jukebox.component.ts","./src/app/component/lobby/lobby.component.css","./src/app/component/lobby/lobby.component.ts","./src/app/component/modal/modal.component.css","./src/app/component/modal/modal.component.ts","./src/app/component/network-indicator/network-indicator.component.css","./src/app/component/network-indicator/network-indicator.component.ts","./src/app/component/overview-panel/overview-panel.component.css","./src/app/component/overview-panel/overview-panel.component.ts","./src/app/component/password-check/password-check.component.css","./src/app/component/password-check/password-check.component.ts","./src/app/component/peer-cursor/peer-cursor.component.css","./src/app/component/peer-cursor/peer-cursor.component.ts","./src/app/component/peer-menu/peer-menu.component.css","./src/app/component/peer-menu/peer-menu.component.ts","./src/app/component/room-setting/room-setting.component.css","./src/app/component/room-setting/room-setting.component.ts","./src/app/component/terrain/terrain.component.css","./src/app/component/terrain/terrain.component.ts","./src/app/component/text-note/text-note.component.css","./src/app/component/text-note/text-note.component.ts","./src/app/component/text-view/text-view.component.css","./src/app/component/text-view/text-view.component.ts","./src/app/component/ui-panel/ui-panel.component.css","./src/app/component/ui-panel/ui-panel.component.ts","./src/app/directive/draggable.directive.ts","./src/app/directive/input-handler.ts","./src/app/directive/movable.directive.ts","./src/app/directive/resizable.directive.ts","./src/app/directive/resize-handler.ts","./src/app/directive/rotable.directive.ts","./src/app/directive/tooltip.directive.ts","./src/app/pipe/safe.pipe.ts","./src/app/service/app-config.service.ts","./src/app/service/chat-message.service.ts","./src/app/service/context-menu.service.ts","./src/app/service/game-object-inventory.service.ts","./src/app/service/modal.service.ts","./src/app/service/panel.service.ts","./src/app/service/pointer-device.service.ts","./src/app/service/save-data.service.ts","./src/app/service/tabletop.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAA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GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QAExE,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"<div id=\\\"app-table-layer\\\" style=\\\"position: absolute; width: 100%; height: 100%; overflow: hidden;\\\">\\n  <game-table></game-table>\\n</div>\\n<ui-panel [top]=\\\"0\\\" [left]=\\\"0\\\" [width]=\\\"100\\\" [height]=\\\"470\\\" [title]=\\\"'メニュー'\\\">\\n  <nav>\\n    <ul>\\n      <li (click)=\\\"open('PeerMenuComponent')\\\">\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <div><i class=\\\"material-icons icon-size\\\">people</i></div>\\n          <div>接続</div>\\n        </a>\\n      </li>\\n      <li (click)=\\\"open('ChatWindowComponent')\\\">\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <div><i class=\\\"material-icons icon-size\\\">speaker_notes</i></div>\\n          <div>チャット画面</div>\\n        </a>\\n      </li>\\n      <li (click)=\\\"open('GameTableSettingComponent')\\\">\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <div><i class=\\\"material-icons icon-size\\\">layers</i></div>\\n          <div>テーブル設定</div>\\n        </a>\\n      </li>\\n      <li (click)=\\\"open('FileStorageComponent')\\\">\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <div><i class=\\\"material-icons icon-size\\\">photo_library</i></div>\\n          <div>画像</div>\\n        </a>\\n      </li>\\n      <li (click)=\\\"open('JukeboxComponent')\\\">\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <div><i class=\\\"material-icons\\\">queue_music</i></div>\\n          <div>音楽</div>\\n        </a>\\n      </li>\\n      <li (click)=\\\"open('GameObjectInventoryComponent')\\\">\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <div><i class=\\\"material-icons icon-size\\\">folder_shared</i></div>\\n          <div>インベントリ</div>\\n        </a>\\n      </li>\\n      <li>\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <label>\\n            <div><i class=\\\"material-icons\\\">open_in_browser</i></div>\\n            <div>ZIP読込</div>\\n            <input type=\\\"file\\\" style=\\\"display: none;\\\" (change)=\\\"handleFileSelect($event)\\\" multiple\\n              accept=\\\"application/xml,text/xml,application/zip\\\" />\\n          </label>\\n        </a>\\n      </li>\\n      <li (click)=\\\"save()\\\">\\n        <a routerLink=\\\"/\\\" routerLinkActive=\\\"active\\\">\\n          <div><i class=\\\"material-icons\\\">sd_storage</i></div>\\n          <div>保存</div>\\n        </a>\\n      </li>\\n    </ul>\\n  </nav>\\n</ui-panel>\\n<div #modalLayer></div>\\n<network-indicator class=\\\"networkIndicator\\\"></network-indicator>\\n\"","export default \"<div class=\\\"badge\\\" [@bounce]=\\\"animeState\\\">{{count}}</div>\\n\"","export default \"<div>\\n  <button (click)=\\\"close(true)\\\">シャッフルしてウィンドウを閉じる</button>\\n  <hr/>\\n  <div *ngFor=\\\"let card of cardStack.cards; trackBy: trackByCard\\\" class=\\\"box\\\">\\n    <div class=\\\"image-box\\\" [appTooltip]=\\\"card\\\">\\n      <div class=\\\"image contain\\\" [style.background-image]=\\\"'url(' + card?.frontImage?.url + ')' | safe: 'style' \\\"></div>\\n      <div class=\\\"image contain\\\" [style.background-image]=\\\"'url(' + card?.backImage?.url + ')' | safe: 'style' \\\"></div>\\n    </div>\\n    <div style=\\\"display: inline-block;\\\">\\n      <button type=\\\"submit\\\" (click)=\\\"drawCard(card)\\\">山札から出す</button>\\n      <button (click)=\\\"showDetail(card)\\\"><i class=\\\"material-icons\\\" style=\\\"font-size: 1.1em; vertical-align: text-bottom;\\\">settings</i>編集</button>\\n      <br>\\n      <button (click)=\\\"up(card)\\\">↑</button>\\n      <button (click)=\\\"down(card)\\\">↓</button>\\n      <br>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<div class=\\\"component is-3d is-pointer-events-none\\\" [ngClass]=\\\"{'is-empty': isEmpty}\\\"\\n  [style.width.px]=\\\"size * gridSize\\\"\\n  appMovable [movable.option]=\\\"movableOption\\\" (movable.ondragstart)=\\\"onMove()\\\" (movable.ondragend)=\\\"onMoved()\\\">\\n  <div class=\\\"component-content is-pointer-events-auto is-grab\\\"\\n    appRotable [rotable.option]=\\\"rotableOption\\\" (rotable.ondragstart)=\\\"onMove()\\\" (rotable.ondragend)=\\\"onMoved()\\\">\\n    <div *ngIf=\\\"imageFile\\\" (@shuffle.start)=\\\"animationShuffleStarted($event)\\\" (@shuffle.done)=\\\"animationShuffleDone($event)\\\"\\n      [@shuffle]=\\\"animeState\\\">\\n      <img class=\\\"card-image\\\" [ngStyle]=\\\"{'transform': 'rotateZ(' + topCard.rotate +'deg)'}\\\" [src]=\\\"imageFile.url | safe: 'resourceUrl'\\\">\\n    </div>\\n    <ng-container *ngIf=\\\"!isIconHidden\\\">\\n      <div class=\\\"rotate-grab of-left-top\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-left-bottom\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-right-bottom\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-right-top\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n    </ng-container>\\n    <div *ngIf=\\\"isShowTotal\\\" class=\\\"name-tag is-nowrap is-black-background\\\" [ngStyle]=\\\"{'transform': 'translateY(-50%) translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\\\">\\n      <span>{{cards.length}}枚</span>\\n    </div>\\n    <div *ngIf=\\\"hasOwner\\\" class=\\\"name-tag has-length-limit is-nowrap is-black-background\\\" [ngStyle]=\\\"{'transform': 'translateY(50%) translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\\\">\\n      <span>{{ownerName}} が確認中</span>\\n    </div>\\n  </div>\\n</div>\"","export default \"<div class=\\\"component is-3d is-pointer-events-none is-grab\\\" [style.width.px]=\\\"size * gridSize\\\"\\n  appMovable [movable.option]=\\\"movableOption\\\" (movable.ondragstart)=\\\"onMove()\\\" (movable.ondragend)=\\\"onMoved()\\\">\\n  <div class=\\\"component-content is-pointer-events-auto\\\"\\n    appRotable [rotable.option]=\\\"rotableOption\\\" (rotable.ondragstart)=\\\"onMove()\\\" (rotable.ondragend)=\\\"onMoved()\\\">\\n    <img *ngIf=\\\"imageFile\\\" class=\\\"card-image\\\" [src]=\\\"(isFront ? frontImage.url : backImage.url) | safe: 'resourceUrl'\\\">\\n    <div *ngIf=\\\"!isFront && hasOwner\\\" class=\\\"name-tag is-nowrap has-length-limit is-black-background\\\" [ngStyle]=\\\"{'transform': 'translateY(-75%) translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\\\">\\n      <span>{{ownerName}}</span>\\n    </div>\\n    <img *ngIf=\\\"isHand && frontImage\\\" class=\\\"card-image thumbnail-transform is-translucent\\\" [src]=\\\"frontImage.url | safe: 'resourceUrl'\\\">\\n    <ng-container *ngIf=\\\"!isIconHidden\\\">\\n      <div class=\\\"rotate-grab of-left-top\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-left-bottom\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-right-bottom\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-right-top\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"border-bg is-pointer-events-none\\\"></div>\\n    </ng-container>\\n  </div>\\n</div>\"","export default \"<div class=\\\"container\\\">\\n  <div class=\\\"message\\\" [ngClass]=\\\"{'direct-message': (chatMessage.isDirect || chatMessage.isSecret), 'system-message':chatMessage.isSystem, 'dicebot-message': chatMessage.isDicebot}\\\"\\n    [@flyInOut]=\\\"'in'\\\">\\n    <div class=\\\"image\\\">\\n      <img *ngIf=\\\"0 < imageFile?.url?.length\\\" [src]=\\\"imageFile?.url | safe: 'resourceUrl'\\\" />\\n    </div>\\n    <div class=\\\"body\\\">\\n      <div class=\\\"title\\\">\\n        <span class=\\\"msg-name\\\">{{chatMessage.name}}</span>\\n        <span class='tip msg-from'>{{chatMessage.from}}</span>\\n        <span class='tip msg-timestamp'>{{chatMessage.timestamp | date:'y/M/d H:mm'}}</span>\\n      </div>\\n      <div class=\\\"text msg-text\\\">\\n        <ng-container *ngIf=\\\"!chatMessage.isSecret || chatMessage.isSendFromSelf; then visible; else secret\\\"></ng-container>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<ng-template #visible>\\n  <span>{{chatMessage.text}}</span>\\n  <button *ngIf=\\\"chatMessage.isSecret\\\" (click)=\\\"discloseMessage()\\\">結果を公開</button>\\n</ng-template>\\n<ng-template #secret>\\n  <span>（シークレットダイス）</span>\\n</ng-template>\\n\"","export default \"<div class=\\\"flex-container\\\">\\n  <div style=\\\"flex-grow: 0;\\\">\\n    <form>\\n      <div class=\\\"chat-tab\\\">\\n        <label *ngFor=\\\"let chatTab of chatMessageService.chatTabs\\\">\\n          <input name=\\\"chat-tab\\\" type=\\\"radio\\\" value=\\\"{{chatTab.identifier}}\\\" ng-control=\\\"options\\\" [(ngModel)]=\\\"chatTabidentifier\\\">\\n          <div>{{chatTab.name}}<badge *ngIf=\\\"chatTab.hasUnread\\\" class=\\\"badge\\\" [count]=\\\"chatTab.unreadLength\\\"></badge></div>\\n        </label>\\n      </div>\\n    </form>\\n    <div class=\\\"table\\\" [ngClass]=\\\"{ 'direct-message': isDirect }\\\">\\n      <div class=\\\"table-cell imagebox\\\">\\n        <img class=\\\"image\\\" *ngIf=\\\"character && character.imageFile != null && 0 < character.imageFile.url.length\\\" [src]=\\\"character.imageFile.url | safe: 'resourceUrl'\\\"\\n        />\\n      </div>\\n      <div class=\\\"table-cell\\\">\\n        <div>\\n          <select style=\\\"width: 12em;\\\" (change)=\\\"onSelectedCharacter($event.target.value)\\\"  [ngModel]=\\\"character.identifier\\\">\\n            <option *ngFor=\\\"let gameCharacter of gameCharacters\\\" value=\\\"{{gameCharacter.identifier}}\\\">{{gameCharacter.name}}</option>\\n          </select> ＞\\n          <select style=\\\"width: 10em;\\\" [(ngModel)]=\\\"sendTo\\\">\\n            <option value=\\\"\\\">全員</option>\\n            <option *ngFor=\\\"let peer of otherPeers\\\" value=\\\"{{peer.identifier}}\\\">{{peer.name}}<ng-container *ngIf=\\\"peer === myPeer\\\">（あなた）</ng-container></option>\\n          </select>\\n          <select style=\\\"width: 12em;\\\" (change)=\\\"onChangeGameType($event.target.value)\\\" [(ngModel)]=\\\"gameType\\\" [ngModelOptions]=\\\"{standalone: true}\\\">\\n            <option value=\\\"\\\">ダイスボット指定なし</option>\\n            <option *ngFor=\\\"let diceBotInfo of diceBotInfos\\\" value=\\\"{{diceBotInfo.script}}\\\">{{diceBotInfo.game}}</option>\\n          </select>\\n          <button (click)=\\\"showDicebotHelp()\\\">?</button>\\n        </div>\\n        <div>\\n          <form>\\n            <!--<input [(ngModel)]=\\\"text\\\" placeholder=\\\"message\\\" [ngModelOptions]=\\\"{standalone: true}\\\" style=\\\"width: 25em;\\\">-->\\n            <textarea #textArea [(ngModel)]=\\\"text\\\" placeholder=\\\"Enterで送信  Shift+Enterで改行\\\" [ngModelOptions]=\\\"{standalone: true}\\\" class=\\\"chat-input\\\" (input)=\\\"onInput()\\\" (keydown.enter)=\\\"sendChat($event)\\\"></textarea>\\n            <button type=\\\"submit\\\" (click)=\\\"sendChat(null)\\\">SEND</button>\\n          </form>\\n        </div>\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"isEdit\\\" class=\\\"edit-info\\\"><i class=\\\"material-icons\\\" style=\\\"vertical-align: bottom; size:0.8rem;\\\">info_outline</i> チャットパレット編集中です</div>\\n  </div>\\n  <div *ngIf=\\\"!isEdit\\\" style=\\\"flex-grow: 1; height: 0; min-height: 100px;\\\">\\n    <select class=\\\"palette\\\" style=\\\"overflow-y: auto;\\\" size=\\\"5\\\" (input)=\\\"selectPalette($event.target.value)\\\" (click)=\\\"clickPalette($event.target.value)\\\" #chatPlette>\\n      <ng-container *ngIf=\\\"palette\\\">\\n        <option *ngFor=\\\"let palette of palette.getPalette()\\\" value=\\\"{{palette}}\\\">{{palette}}</option>\\n      </ng-container>\\n    </select>\\n  </div>\\n  <div *ngIf=\\\"isEdit\\\" style=\\\"flex-grow: 1; height: 0; min-height: 100px;\\\">\\n    <textarea class=\\\"palette\\\" style=\\\"resize: none;\\\" [(ngModel)]=\\\"editPalette\\\" placeholder=\\\"チャットパレット\\\"></textarea>\\n  </div>\\n  <div style=\\\"flex-grow: 0;\\\">\\n    <button type=\\\"submit\\\" (click)=\\\"toggleEditMode()\\\">\\n      <span *ngIf=\\\"!isEdit\\\">チャットパレットの編集</span>\\n      <span *ngIf=\\\"isEdit\\\">チャットパレットを確定</span>\\n    </button>\\n  </div>\\n</div>\\n\"","export default \"<div class=\\\"flex-container\\\">\\n  <div class=\\\"flex-item no-grow\\\">\\n    <div>\\n      <button (click)=\\\"create()\\\">チャットタブを作る</button>\\n    </div>\\n    <select style=\\\"width: 10em;\\\" size=\\\"10\\\" (change)=\\\"onChangeSelectTab($event.target.value)\\\" [ngModel]=\\\"selectedTab?.identifier\\\">\\n      <option *ngFor=\\\"let chatTab of chatTabs\\\" value=\\\"{{chatTab.identifier}}\\\">{{chatTab.name}}</option>\\n    </select>\\n  </div>\\n  <div class=\\\"flex-item\\\">\\n    <ng-container *ngIf=\\\"!isEmpty && selectedTab\\\">\\n      <div>タブ名 :\\n        <input [(ngModel)]=\\\"tabName\\\" placeholder=\\\"Name\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\" />\\n      </div>\\n      <hr/>\\n      <div>\\n        <ng-container *ngIf=\\\"!isDeleted\\\">\\n          <button (click)=\\\"save()\\\">保存</button>\\n          <button class=\\\"danger\\\" (click)=\\\"delete()\\\" [attr.disabled]=\\\"chatTabs.length <= 1 ? '' : null\\\">削除</button>\\n        </ng-container>\\n        <ng-container *ngIf=\\\"isDeleted\\\">\\n          <button (click)=\\\"restore()\\\">元に戻す</button>\\n        </ng-container>\\n      </div>\\n    </ng-container>\\n  </div>\\n</div>\\n<ng-container *ngIf=\\\"isEmpty\\\">\\n  <div style=\\\"font-size: 12px;\\\">※チャットタブが１つも作成されていません。「チャットタブを作る」からチャットタブを作成することができます。</div>\\n</ng-container>\"","export default \"<div class=\\\"log\\\" *ngIf=\\\"0 < chatMessages.length\\\">\\n  <button *ngIf=\\\"hasMany\\\" (click)=\\\"moreMessages()\\\">さらに古いログを見る</button>\\n  <ng-container *ngFor=\\\"let chatMessage of chatMessages; trackBy: trackByChatMessage\\\">\\n    <chat-message *ngIf=\\\"chatMessage.isDisplayable\\\" [chatMessage]=\\\"chatMessage\\\" (onInit)=\\\"onMessageInit()\\\"></chat-message>\\n  </ng-container>\\n</div>\\n<div class=\\\"log\\\" *ngIf=\\\"chatMessages.length < 1\\\">\\n  <chat-message *ngFor=\\\"let chatMessage of sampleMessages\\\" [chatMessage]=\\\"chatMessage\\\" (onInit)=\\\"onMessageInit()\\\"></chat-message>\\n</div>\"","export default \"<!--<h2>チャットシステム</h2>-->\\n<div class=\\\"component\\\">\\n<div class=\\\"log\\\">\\n  <chat-tab *ngIf=\\\"chatTab\\\" [chatTab]=\\\"chatTab\\\" (onAddMessage)=\\\"scrollToBottom()\\\"></chat-tab>\\n  <div *ngIf=\\\"!chatTab\\\">※チャットタブの内容が更新されました。チャットタブを選択しなおすか、このチャットウィンドウを開きなおしてください。</div>\\n</div>\\n<div class=\\\"sticky-bottom\\\">\\n  <form>\\n    <div class=\\\"chat-tab\\\">\\n      <label *ngFor=\\\"let chatTab of chatMessageService.chatTabs; trackBy: trackByChatTab\\\">\\n        <input name=\\\"chat-tab\\\" type=\\\"radio\\\" value=\\\"{{chatTab.identifier}}\\\" ng-control=\\\"options\\\" [(ngModel)]=\\\"chatTabidentifier\\\">\\n        <div>{{chatTab.name}}<badge *ngIf=\\\"chatTab.hasUnread\\\" class=\\\"badge\\\" [count]=\\\"chatTab.unreadLength\\\"></badge></div>\\n      </label>\\n      <button class=\\\"tab-setting small-font\\\" (click)=\\\"showTabSetting()\\\"><i class=\\\"material-icons small-font\\\">settings</i>タブ設定</button>\\n    </div>\\n  </form>\\n<div class=\\\"table\\\" [ngClass]=\\\"{'direct-message': isDirect}\\\">\\n  <div class=\\\"table-cell imagebox\\\">\\n    <img class=\\\"image\\\" *ngIf=\\\"gameCharacter && gameCharacter.imageFile != null && 0 < gameCharacter.imageFile?.url?.length\\\" [src]=\\\"gameCharacter.imageFile?.url | safe: 'resourceUrl'\\\"\\n    />\\n    <img class=\\\"image\\\" *ngIf=\\\"!gameCharacter && myPeer && myPeer?.image != null\\\" [src]=\\\"myPeer?.image?.url | safe: 'resourceUrl'\\\"\\n    />\\n  </div>\\n  <div class=\\\"table-cell\\\">\\n    <div>\\n      <select style=\\\"width: 12em;\\\" (change)=\\\"onSelectedCharacter($event.target.value)\\\">\\n        <option value=\\\"{{myPeer?.identifier}}\\\">{{myPeer?.name}}（あなた）</option>\\n        <option *ngFor=\\\"let gameCharacter of gameCharacters\\\" value=\\\"{{gameCharacter.identifier}}\\\">{{gameCharacter.name}}</option>\\n      </select> ＞\\n      <select style=\\\"width: 10em;\\\" [(ngModel)]=\\\"sendTo\\\">\\n        <option value=\\\"\\\">全員</option>\\n        <option *ngFor=\\\"let peer of otherPeers\\\" value=\\\"{{peer.identifier}}\\\">{{peer.name}}<ng-container *ngIf=\\\"peer === myPeer\\\">（あなた）</ng-container></option>\\n      </select>\\n      <select style=\\\"width: 12em;\\\" (change)=\\\"onChangeGameType($event.target.value)\\\" [(ngModel)]=\\\"gameType\\\" [ngModelOptions]=\\\"{standalone: true}\\\">\\n        <option value=\\\"\\\">ダイスボット指定なし</option>\\n        <option *ngFor=\\\"let diceBotInfo of diceBotInfos\\\" value=\\\"{{diceBotInfo.script}}\\\">{{diceBotInfo.game}}</option>\\n      </select>\\n      <button (click)=\\\"showDicebotHelp()\\\">?</button>\\n    </div>\\n    <div>\\n      <form #chatWindowForm=\\\"ngForm\\\">\\n        <textarea #textArea [(ngModel)]=\\\"text\\\" placeholder=\\\"Enterで送信  Shift+Enterで改行\\\" [ngModelOptions]=\\\"{standalone: true}\\\" class=\\\"chat-input\\\" (input)=\\\"onInput()\\\" (keydown.enter)=\\\"sendChat($event)\\\"></textarea>\\n        <button type=\\\"submit\\\" (click)=\\\"sendChat(null)\\\">SEND</button>\\n      </form>\\n    </div>\\n    <div class=\\\"writing-info\\\">\\n      <ng-container *ngIf=\\\"0 < writingPeerNames.length\\\" >\\n        <span *ngFor=\\\"let peerName of writingPeerNames; index as i\\\" style=\\\"font-weight: bold;\\\">{{peerName}}<span *ngIf=\\\"writingPeerNames.length !== (i + 1)\\\">, </span></span>\\n        <span> が入力中...</span>\\n      </ng-container>\\n    </div>\\n  </div>\\n</div>\\n</div>\\n<!--<div style=\\\"white-space:pre-wrap; font-size: 8px;\\\"><span>{{gameHelp}}</span></div>-->\"","export default \"<div class=\\\"component\\\" [ngClass]=\\\"{'submenu-panel': isSubmenu, 'is-max-limit': !isSubmenu, 'pointer-events-none': isPointerDragging}\\\" (mouseleave)=\\\"hideSubMenu()\\\" #root>\\n  <div *ngIf=\\\"0 < title.length\\\" class=\\\"title\\\">{{title}}</div>\\n  <ul>\\n    <ng-container *ngFor=\\\"let action of actions\\\">\\n      <ng-container *ngTemplateOutlet=\\\"action?.type === 'separator' ? separator : actionMenu; context: { action: action }\\\"></ng-container>\\n    </ng-container>\\n  </ul>\\n</div>\\n<ng-template #actionMenu let-action=\\\"action\\\">\\n  <li class=\\\"hasHighlight\\\" (click)=\\\"doAction(action)\\\" (mouseenter)=\\\"showSubMenu(action)\\\">\\n    <div class=\\\"menu-title\\\">{{action.name}}</div>\\n    <div *ngIf=\\\"action.subActions\\\" class=\\\"sub-menu-arrow\\\">\\n      <i class=\\\"material-icons\\\" style=\\\"font-size: 1em; vertical-align: bottom;\\\">arrow_forward_ios</i>\\n    </div>\\n    <context-menu *ngIf=\\\"subMenu && parentMenu === action\\\" [title]=\\\"action.name\\\" [actions]=\\\"subMenu\\\" [isSubmenu]=\\\"true\\\"></context-menu>\\n  </li>\\n</ng-template>\\n<ng-template #separator let-action=\\\"action\\\">\\n  <li>\\n    <hr class=\\\"separator\\\" />\\n  </li>\\n</ng-template>\"","export default \"<div class=\\\"component is-3d is-grab is-pointer-events-none\\\" [style.width.px]=\\\"size * gridSize\\\" [style.height.px]=\\\"size * gridSize\\\"\\n  appMovable [movable.option]=\\\"movableOption\\\" (movable.ondragstart)=\\\"onMove()\\\" (movable.ondragend)=\\\"onMoved()\\\">\\n  <div class=\\\"component-content is-3d\\\" [@bounceInOut]=\\\"'in'\\\">\\n    <div appRotable [rotable.option]=\\\"rotableOption\\\" (rotable.ondragstart)=\\\"onMove()\\\" (rotable.ondragend)=\\\"onMoved()\\\"\\n      class=\\\"component-content is-3d is-pointer-events-auto\\\">\\n      <div class=\\\"pedestal-inner\\\" [ngClass]=\\\"{'is-gray-border': hasOwner}\\\"></div>\\n      <div class=\\\"pedestal-outer\\\"></div>\\n      <ng-container *ngIf=\\\"!isIconHidden\\\">\\n      <div class=\\\"pedestal-grab rotate-grab\\\">\\n        <div class=\\\"pedestal-grab-border\\\">\\n          <div class=\\\"material-icons of-front\\\">autorenew</div>\\n          <div class=\\\"material-icons of-back\\\">autorenew</div>\\n        </div>\\n      </div>\\n      </ng-container>\\n      <div class=\\\"component-content is-3d\\\" [@diceRoll]=\\\"animeState\\\" (@diceRoll.done)=\\\"animationShuffleDone($event)\\\">\\n        <div class=\\\"upright-transform is-fit-width is-3d\\\">\\n          <div class=\\\"rotate-frame is-3d\\\" [style.width.px]=\\\"size * gridSize\\\" [style.height.px]=\\\"size * gridSize\\\">\\n            <div class=\\\"rotate-inner is-3d\\\">\\n              <div *ngIf=\\\"0 < name.length\\\" class=\\\"name-tag is-nowrap is-black-background is-3d\\\" [ngStyle]=\\\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\\\">\\n                <div class=\\\"fornt-tag is-3d\\\">{{name}}:<span *ngIf=\\\"isVisible\\\">{{face}}</span><span *ngIf=\\\"!isVisible\\\">???</span></div>\\n                <div class=\\\"back-tag is-3d\\\">{{name}}:<span *ngIf=\\\"isVisible\\\">{{face}}</span><span *ngIf=\\\"!isVisible\\\">???</span></div>\\n              </div>\\n              <div *ngIf=\\\"hasOwner\\\" class=\\\"owner-tag is-nowrap is-black-background is-3d\\\" [ngStyle]=\\\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\\\">\\n                <div class=\\\"fornt-tag has-length-limit is-3d\\\">{{ownerName}}</div>\\n                <div class=\\\"back-tag has-length-limit is-3d\\\">{{ownerName}}</div>\\n              </div>\\n              <img class=\\\"image\\\" *ngIf=\\\"0 < imageFile.url.length\\\" [src]=\\\"imageFile.url | safe: 'resourceUrl'\\\" [ngClass]=\\\"{'is-black-mask': !isVisible, 'is-harf-black-mask': isMine}\\\">\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","export default \"<div id=\\\"file-list\\\">\\n  <span class=\\\"empty\\\" *ngIf=\\\"isAllowedEmpty\\\">\\n    <button (click)=\\\"onSelectedFile(empty)\\\">画像なし</button>\\n  </span>\\n  <span *ngFor=\\\"let file of images\\\" class=\\\"image\\\">\\n    <img *ngIf=\\\"0 < file.url.length\\\" [src]=\\\"file.url | safe: 'resourceUrl'\\\" [alt]=\\\"file.name\\\" height=\\\"120\\\" (click)=\\\"onSelectedFile(file)\\\">\\n    <img *ngIf=\\\"file.url.length <= 0\\\" src=\\\"./assets/images/loading.gif\\\" alt=\\\"{{file.name}}\\\">\\n  </span>\\n</div>\"","export default \"<label>\\n  <div class=\\\"drop-zone\\\">\\n    <div>\\n      <i class=\\\"material-icons large-font\\\">add_photo_alternate</i>\\n    </div>\\n    <div>ここに画像をドロップ</div>\\n    <div class=\\\"small-font\\\">またはここをクリックして選択</div>\\n    <input type=\\\"file\\\" style=\\\"display: none;\\\" (change)=\\\"handleFileSelect($event)\\\" multiple accept=\\\"image/*\\\"/>\\n    <div class=\\\"small-font\\\">\\n      <br>１ファイルにつき2MBまで</div>\\n  </div>\\n</label>\\n<div id=\\\"file-list\\\">\\n  <span *ngFor=\\\"let file of fileStorageService.images\\\" class=\\\"image\\\">\\n    <img *ngIf=\\\"0 < file.url.length\\\" [src]=\\\"file.url | safe: 'resourceUrl'\\\" [alt]=\\\"file.name\\\" height=\\\"120\\\" (click)=\\\"onSelectedFile(file)\\\">\\n    <img *ngIf=\\\"file.url.length <= 0\\\" src=\\\"assets/images/loading.gif\\\" alt=\\\"{{file.name}}\\\">\\n  </span>\\n</div>\\n\"","export default \"<button (click)=\\\"openModal()\\\">画像を選ぶ</button>\\n<div>\\n  <img height=\\\"120\\\" [src]=\\\"tableBackgroundImage.url | safe: 'resourceUrl'\\\">\\n</div>\\n<input [(ngModel)]=\\\"name\\\" placeholder=\\\"Name\\\" name=\\\"name\\\" />\\n<div>\\n  <div>\\n    <input [(ngModel)]=\\\"size\\\" type=\\\"range\\\" min=\\\"{{minSize}}\\\" max=\\\"{{maxSize}}\\\" name=\\\"size\\\" /> Size : <input [(ngModel)]=\\\"size\\\"\\n      type=\\\"number\\\" min=\\\"{{minSize}}\\\" max=\\\"{{maxSize}}\\\">\\n  </div>\\n  <button (click)=\\\"createGameCharacter()\\\">キャラクターを作る</button>\\n  <button (click)=\\\"createGameTableMask()\\\">マップマスクを作る</button>\\n  <!--\\n  <div>\\n    <button (click)=\\\"createGameCharacterForXML(xml)\\\">↓のXMLからキャラクターを作る</button>\\n    <textarea style=\\\"width:100%; height:5em; resize: none;\\\" [(ngModel)]=\\\"xml\\\" placeholder=\\\"XML\\\"></textarea>\\n  </div>\\n  -->\\n</div>\"","export default \"<button (click)=\\\"toggleEditMode()\\\">編集切り替え</button>\\n<ng-container [ngSwitch]=\\\"tabletopObject.aliasName\\\">\\n  <ng-container *ngSwitchCase=\\\"'numberResource'\\\">\\n  </ng-container>\\n  <ng-container *ngSwitchCase=\\\"'card'\\\">\\n    <button (click)=\\\"openModal('front')\\\">表面の画像を変更</button>\\n    <button (click)=\\\"openModal('back')\\\">裏面の画像を変更</button>\\n  </ng-container>\\n  <ng-container *ngSwitchCase=\\\"'card-stack'\\\">\\n  </ng-container>\\n  <ng-container *ngSwitchCase=\\\"'terrain'\\\">\\n    <button (click)=\\\"openModal('floor')\\\">床の画像を変更</button>\\n    <button (click)=\\\"openModal('wall')\\\">壁の画像を変更</button>\\n  </ng-container>\\n  <ng-container *ngSwitchCase=\\\"'dice-symbol'\\\">\\n    <button (click)=\\\"openModal(tabletopObject['face'])\\\" [disabled]=\\\"!tabletopObject['isVisible']\\\">ダイス目の画像を変更</button>\\n  </ng-container>\\n  <ng-container *ngSwitchDefault>\\n    <button (click)=\\\"openModal('imageIdentifier', true)\\\">画像変更</button>\\n  </ng-container>\\n</ng-container>\\n<button (click)=\\\"clone()\\\">コピーを作る</button>\\n<button (click)=\\\"saveToXML()\\\">保存</button>\\n<ng-container *ngIf=\\\"tabletopObject.aliasName === 'character'\\\">\\n  <select *ngIf=\\\"tabletopObject\\\" (change)=\\\"setLocation($event.target.value)\\\" [ngModel]=\\\"tabletopObject.location.name\\\">\\n    <option value=\\\"table\\\">テーブル</option>\\n    <option value=\\\"common\\\">共有インベントリ</option>\\n    <option value=\\\"{{networkService.peerId}}\\\">個人インベントリ</option>\\n    <option value=\\\"graveyard\\\">墓地</option>\\n  </select>\\n</ng-container>\\n<div *ngIf=\\\"tabletopObject\\\" class=\\\"flex-container\\\">\\n  <div *ngIf=\\\"0 < tabletopObject.imageFile?.url.length\\\" class=\\\"box main-image-box\\\">\\n    <img class=\\\"main-image\\\" [src]=\\\"tabletopObject.imageFile.url | safe: 'resourceUrl'\\\" [alt]=\\\"tabletopObject.imageFile.name\\\"\\n    />\\n  </div>\\n  <ng-container *ngIf=\\\"tabletopObject.commonDataElement\\\">\\n    <div class=\\\"flex-item\\\">\\n      <div class=\\\"table\\\">\\n        <div class=\\\"table-row\\\" game-data-element [gameDataElement]=\\\"tabletopObject.commonDataElement\\\" [isTagLocked]=\\\"true\\\"></div>\\n      </div>\\n    </div>\\n  </ng-container>\\n\\n  <ng-container *ngIf=\\\"tabletopObject.detailDataElement\\\">\\n    <div class=\\\"flex-item\\\" *ngFor=\\\"let childElement of tabletopObject.detailDataElement.children\\\">\\n      <div class=\\\"table\\\">\\n        <div class=\\\"table-row\\\" game-data-element [gameDataElement]=\\\"childElement\\\" [isEdit]=\\\"isEdit\\\"></div>\\n      </div>\\n    </div>\\n  </ng-container>\\n\\n  <ng-container *ngIf=\\\"isEdit\\\">\\n    <div class=\\\"flex-item\\\">\\n      <button style=\\\"width:100%; color: #555;\\\" (click)=\\\"addDataElement()\\\">新しい項目を追加</button>\\n    </div>\\n  </ng-container>\\n</div>\"","export default \"<div class=\\\"component is-3d is-grab is-pointer-events-none\\\" [style.width.px]=\\\"size * gridSize\\\"\\n  [style.height.px]=\\\"size * gridSize\\\" appMovable [movable.option]=\\\"movableOption\\\" (movable.ondragstart)=\\\"onMove()\\\"\\n  (movable.ondragend)=\\\"onMoved()\\\">\\n  <div class=\\\"component-content is-3d\\\" [@bounceInOut]=\\\"'in'\\\">\\n    <div class=\\\"component-content is-3d is-pointer-events-auto\\\" appRotable [rotable.option]=\\\"rotableOption\\\"\\n      (rotable.ondragstart)=\\\"onMove()\\\" (rotable.ondragend)=\\\"onMoved()\\\">\\n      <div class=\\\"pedestal-inner\\\"></div>\\n      <div class=\\\"pedestal-outer\\\"></div>\\n      <div class=\\\"pedestal-grab rotate-grab\\\">\\n        <div class=\\\"pedestal-grab-border\\\">\\n          <div class=\\\"material-icons of-front\\\">autorenew</div>\\n          <div class=\\\"material-icons of-back\\\">autorenew</div>\\n        </div>\\n      </div>\\n      <div class=\\\"upright-transform is-fit-width is-3d\\\">\\n        <div class=\\\"rotate-frame is-3d\\\" [style.width.px]=\\\"size * gridSize\\\" [style.height.px]=\\\"size * gridSize\\\"\\n          appRotable [(rotable.value)]=\\\"roll\\\" (rotable.ondragstart)=\\\"onMove()\\\" (rotable.ondragend)=\\\"onMoved()\\\">\\n          <div class=\\\"rotate-inner is-3d\\\">\\n            <div *ngIf=\\\"0 < name.length\\\" class=\\\"name-tag is-nowrap is-black-background is-3d\\\"\\n              [ngStyle]=\\\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\\\">\\n              <div class=\\\"fornt-tag has-length-limit is-3d\\\">{{name}}</div>\\n              <div class=\\\"back-tag has-length-limit is-3d\\\">{{name}}</div>\\n            </div>\\n            <img class=\\\"image\\\" *ngIf=\\\"0 < imageFile.url.length\\\" [src]=\\\"imageFile.url | safe: 'resourceUrl'\\\">\\n            <div class=\\\"grab-group\\\">\\n              <div class=\\\"rotate-grab rotate-grab-icon of-top\\\"\\n                [ngStyle]=\\\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\\\">\\n                <i class=\\\"material-icons\\\">autorenew</i>\\n              </div>\\n              <div class=\\\"rotate-grab rotate-grab-icon of-bottom\\\"\\n                [ngStyle]=\\\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px'}\\\">\\n                <i class=\\\"material-icons\\\">autorenew</i>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","export default \"<ng-container *ngIf=\\\"gameDataElement\\\">\\n  <ng-container *ngIf=\\\"gameDataElement.children.length < 1\\\">\\n    <div *ngIf=\\\"isEdit\\\" class=\\\"table-cell table-cell_solid\\\">\\n      <ng-container *ngTemplateOutlet=\\\"editButtons\\\"></ng-container>\\n      <select (change)=\\\"setElementType($event.target.value)\\\" [ngModel]=\\\"gameDataElement.type\\\">\\n        <option value=\\\"\\\">通常</option>\\n        <option value=\\\"numberResource\\\">リソース</option>\\n        <option value=\\\"note\\\">ノート</option>\\n      </select>\\n    </div>\\n    <div class=\\\"table-cell table-cell_solid\\\">\\n      <ng-container *ngIf=\\\"isTagLocked\\\">\\n        <div style=\\\"font-family: Cambria, Georgia; font-size: 0.9rem;\\\">{{name}}</div>\\n      </ng-container>\\n      <ng-container *ngIf=\\\"!isTagLocked\\\">\\n        <div class=\\\"hidden-spacer\\\" style=\\\"font-family: Cambria, Georgia; font-size: 0.9rem;\\\">{{name}}</div>\\n        <input style=\\\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 0.9rem;\\\" size=\\\"1\\\"\\n          [(ngModel)]=\\\"name\\\" placeholder=\\\"Value\\\" />\\n      </ng-container>\\n    </div>\\n    <div class=\\\"table-cell\\\">\\n      <ng-container [ngSwitch]=\\\"gameDataElement.type\\\">\\n        <ng-container *ngSwitchCase=\\\"'numberResource'\\\">\\n          <input [style]=\\\"'font-size: 1.0em; min-width: 90px; width: 90%; --min: 0; --max: ' + value + '; --val:' + currentValue +';' | safe: 'style'\\\"\\n            [(ngModel)]=\\\"currentValue\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"{{value}}\\\" />\\n          <br>\\n          <input style=\\\"width: 5em; text-align: right;\\\" size=\\\"1\\\" type=\\\"number\\\" [(ngModel)]=\\\"currentValue\\\" placeholder=\\\"Value\\\" />\\n          /\\n          <input style=\\\"width: 5em;\\\" size=\\\"1\\\" type=\\\"number\\\" [(ngModel)]=\\\"value\\\" placeholder=\\\"Value\\\" />\\n        </ng-container>\\n        <ng-container *ngSwitchCase=\\\"'note'\\\">\\n          <textarea style=\\\"width:100%; height:5em; min-width:50px; resize: none; font-size: 0.8em;\\\" [(ngModel)]=\\\"value\\\" placeholder=\\\"Note\\\"></textarea>\\n        </ng-container>\\n        <ng-container *ngSwitchDefault>\\n          <!-- size属性がないと小さくならない -->\\n          <div class=\\\"hidden-spacer\\\" style=\\\"font-size: 1.0em; font-family: Cambria, Georgia;\\\">{{value}}</div>\\n          <input style=\\\"width:100%; min-width:10px;\\\" size=\\\"1\\\" [(ngModel)]=\\\"value\\\" placeholder=\\\"Value\\\" />\\n        </ng-container>\\n      </ng-container>\\n    </div>\\n  </ng-container>\\n  <ng-container *ngIf=\\\"0 < gameDataElement.children.length\\\">\\n    <div *ngIf=\\\"isEdit\\\" class=\\\"table-cell table-cell_solid\\\" style=\\\"vertical-align: top;\\\">\\n      <ng-container *ngTemplateOutlet=\\\"editButtons\\\"></ng-container>\\n    </div>\\n    <div class=\\\"table-cell table-cell_inner-table\\\" style=\\\"padding:0; width:0;\\\"></div>\\n    <div class=\\\"table-cell_inner-table\\\">\\n      <div class=\\\"table-cell_inner-table-title\\\">\\n        <ng-container *ngIf=\\\"isTagLocked\\\">\\n          <div style=\\\"padding: 2px; font-family: Cambria, Georgia; font-size: 1.0rem; font-weight: bold;\\\">{{name}}</div>\\n        </ng-container>\\n        <ng-container *ngIf=\\\"!isTagLocked\\\">\\n          <input style=\\\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 1.0rem; font-weight: bold;\\\"\\n            size=\\\"1\\\" [(ngModel)]=\\\"name\\\" placeholder=\\\"Value\\\" />\\n        </ng-container>\\n      </div>\\n      <div class=\\\"table\\\" *ngIf=\\\"0 < gameDataElement.children.length\\\">\\n        <div game-data-element class=\\\"table-row\\\" *ngFor=\\\"let childElement of gameDataElement.children\\\"\\n          [gameDataElement]=\\\"childElement\\\" [isEdit]=\\\"isEdit\\\" [isTagLocked]=\\\"isTagLocked\\\"></div>\\n      </div>\\n    </div>\\n  </ng-container>\\n</ng-container>\\n<ng-template #editButtons>\\n  <button (click)=\\\"addElement()\\\"><i class=\\\"material-icons\\\">add_circle</i></button>\\n  <button (click)=\\\"upElement()\\\"><i class=\\\"material-icons\\\">arrow_upward</i></button>\\n  <br>\\n  <button (click)=\\\"deleteElement()\\\"><i class=\\\"material-icons\\\">remove_circle_outline</i></button>\\n  <button (click)=\\\"downElement()\\\"><i class=\\\"material-icons\\\">arrow_downward</i></button>\\n</ng-template>\"","export default \"<div class=\\\"component\\\">\\n  <ng-container *ngTemplateOutlet=\\\"inventoryTab\\\"></ng-container>\\n  <ng-container *ngTemplateOutlet=\\\"inventoryViewSetting\\\"></ng-container>\\n  <div *ngIf=\\\"getGameObjects(selectTab).length < 1\\\">{{getTabTitle(selectTab)}}インベントリは空です</div>\\n  <div (contextmenu)=\\\"onContextMenu($event, gameObject)\\\" *ngFor=\\\"let gameObject of getGameObjects(selectTab); trackBy: trackByGameObject\\\"\\n    (click)=\\\"selectGameObject(gameObject)\\\" [ngClass]=\\\"{'box': true, 'selected': (selectedIdentifier === gameObject.identifier)}\\\">\\n    <ng-container *ngTemplateOutlet=\\\"gameObjectTags; context:{ gameObject: gameObject}\\\"></ng-container>\\n  </div>\\n  <div *ngIf=\\\"selectTab === 'graveyard'\\\" style=\\\"padding-top: 6px;\\\">\\n    <button class=\\\"danger\\\" (click)=\\\"cleanInventory()\\\" [attr.disabled]=\\\"getGameObjects(selectTab).length < 1 ? '' : null\\\">墓場を空にする</button>\\n  </div>\\n</div>\\n<ng-template #inventoryTab>\\n  <form class=\\\"is-sticky-top\\\">\\n    <div class=\\\"tab\\\">\\n      <label *ngFor=\\\"let inventoryType of inventoryTypes\\\">\\n        <input name=\\\"tab\\\" type=\\\"radio\\\" value=\\\"{{inventoryType}}\\\" ng-control=\\\"options\\\" [(ngModel)]=\\\"selectTab\\\">\\n        <div>{{getTabTitle(inventoryType)}} ({{getInventory(inventoryType).length}})</div>\\n      </label>\\n    </div>\\n  </form>\\n</ng-template>\\n<ng-template #inventoryViewSetting>\\n  <ng-container *ngIf=\\\"isEdit\\\">\\n    <div>\\n      <div style=\\\"font-size: 12px;\\\">並び順</div>\\n      <input [(ngModel)]=\\\"sortTag\\\" placeholder=\\\"タグ名\\\" />\\n      <select [(ngModel)]=\\\"sortOrder\\\">\\n        <option value=\\\"ASC\\\">昇順</option>\\n        <option value=\\\"DESC\\\">降順</option>\\n      </select>\\n    </div>\\n    <div style=\\\"font-size: 12px; padding-top: 6px;\\\">表示項目</div>\\n    <input style=\\\"width: 100%; box-sizing: border-box;\\\" [(ngModel)]=\\\"dataTag\\\" placeholder=\\\"スペース区切りでタグ名 スラッシュで改行 ex.「HP MP / メモ」\\\" />\\n    <div style=\\\"padding-top: 6px;\\\">\\n      <button class=\\\"tab-setting small-font\\\" (click)=\\\"toggleEdit()\\\"><i class=\\\"material-icons small-font\\\">settings</i>完了</button>\\n    </div>\\n  </ng-container>\\n  <ng-container *ngIf=\\\"!isEdit\\\">\\n    <table style=\\\"font-size: 0.8em;\\\">\\n      <tr>\\n        <th style=\\\" vertical-align:middle;\\\">並び順:</th>\\n        <td style=\\\" vertical-align:middle;\\\">\\n          <ng-container *ngIf=\\\"0 < sortTag.length\\\">{{sortTag}} ({{sortOrderName}})</ng-container>\\n          <ng-container *ngIf=\\\"sortTag.length < 1\\\">-</ng-container>\\n        </td>\\n        <td><button class=\\\"tab-setting small-font\\\" (click)=\\\"toggleEdit()\\\"><i class=\\\"material-icons small-font\\\">settings</i>設定</button></td>\\n      </tr>\\n    </table>\\n  </ng-container>\\n</ng-template>\\n<ng-template #gameObjectTags let-gameObject=\\\"gameObject\\\">\\n  <div class=\\\"inventory-object\\\">\\n    <div class=\\\"object-name\\\">{{gameObject.name}}\\n      <button style=\\\"font-size: 0.8em; padding: 2px 5px;\\\" *ngIf=\\\"selectedIdentifier === gameObject.identifier\\\" (click)=\\\"onContextMenu($event, gameObject)\\\">\\n        <i class=\\\"material-icons\\\" style=\\\"font-size: 1em;\\\">settings</i>\\n      </button>\\n    </div>\\n    <div class=\\\"object-tags-box\\\">\\n      <div class=\\\"table-cell image-box\\\">\\n        <img *ngIf=\\\"gameObject.imageFile.url\\\" [src]=\\\"gameObject.imageFile.url | safe: 'resourceUrl'\\\" />\\n      </div>\\n      <div class=\\\"table-cell\\\">\\n        <div *ngIf=\\\"gameObject.rootDataElement\\\">\\n          <ng-container *ngFor=\\\"let dataElm of getInventoryTags(gameObject); trackBy: trackByGameObject\\\">\\n            <ng-container *ngTemplateOutlet=\\\"dataElmTag; context:{ dataElm: dataElm}\\\"></ng-container>\\n          </ng-container>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-template>\\n<ng-template #dataElmTag let-dataElm=\\\"dataElm\\\">\\n  <ng-container *ngIf=\\\"dataElm?.name === newLineString\\\"><br></ng-container>\\n  <div *ngIf=\\\"dataElm && dataElm.name !== newLineString\\\" class=\\\"object-tag\\\">\\n    <ng-container [ngSwitch]=\\\"dataElm.attributes['type']\\\">\\n      <ng-container *ngSwitchCase=\\\"'numberResource'\\\">\\n        <div class=\\\"resource-tag\\\">\\n          <div style=\\\"font-size: 0.8em; display: inline-block; margin-right: 0.5em;\\\">{{dataElm.name}}</div>\\n          <input class=\\\"input resource-value\\\" type=\\\"number\\\" size=\\\"1\\\" [(ngModel)]=\\\"dataElm.currentValue\\\" placeholder=\\\"Value\\\" />\\n        </div>\\n        <div class=\\\"resource-tag\\\">\\n          <input type=\\\"range\\\" [style]=\\\"'font-size: 0.8em; min-width: 1em; width:' + (dataElm.name.length + 4.5) + 'em; --min: 0; --max: ' + dataElm.value + '; --val:' + dataElm.currentValue +';' | safe: 'style'\\\"\\n            min=\\\"0\\\" max=\\\"{{dataElm.value}}\\\" [ngStyle]=\\\"{'background-color':'green'}\\\" [(ngModel)]=\\\"dataElm.currentValue\\\" />\\n        </div>\\n      </ng-container>\\n      <ng-container *ngSwitchDefault>\\n        <div class=\\\"tag-name\\\">{{dataElm.name}}</div>\\n        <div style=\\\"text-align: center;\\\">\\n          <div style=\\\"display: inline-block;\\\">\\n            <div class=\\\"tag-value-box\\\">\\n              <div class=\\\"hidden-spacer\\\" style=\\\"font-weight: bold;\\\">{{dataElm.value}}</div>\\n              <input class=\\\"input tag-value\\\" size=\\\"1\\\" [(ngModel)]=\\\"dataElm.value\\\" placeholder=\\\"\\\" />\\n            </div>\\n          </div>\\n        </div>\\n      </ng-container>\\n    </ng-container>\\n  </div>\\n</ng-template>\\n\"","export default \"<div class=\\\"component\\\" [ngClass]=\\\"{'is-grab': !isLock}\\\"\\n  [style.width.px]=\\\"width * gridSize\\\" [style.height.px]=\\\"height * gridSize\\\"\\n  appMovable [movable.option]=\\\"movableOption\\\" [movable.disable]=\\\"isLock\\\" (movable.ondragstart)=\\\"onMove()\\\" (movable.ondragend)=\\\"onMoved()\\\">\\n  <div *ngIf=\\\"imageFile.url.length < 1; then blackMask; else imageMask\\\"></div>\\n  <ng-template #blackMask>\\n    <div class=\\\"border is-fit-full\\\" [style.background-color]=\\\"'rgba(10, 10, 10,' + opacity +')'\\\"></div>\\n  </ng-template>\\n  <ng-template #imageMask>\\n    <div class=\\\"border is-fit-full\\\">\\n      <img class=\\\"image is-fit-full\\\" [style.opacity]=\\\"opacity\\\" [src]=\\\"imageFile.url | safe: 'resourceUrl'\\\">\\n    </div>\\n  </ng-template>\\n  <div *ngIf=\\\"isLock\\\" class=\\\"lock-icon is-center\\\">\\n    <i class=\\\"material-icons\\\">lock</i>\\n  </div>\\n</div>\"","export default \"<div class=\\\"flex-container\\\">\\n  <div class=\\\"flex-item no-grow\\\">\\n    <div>\\n      <button (click)=\\\"createGameTable()\\\">新しいテーブルを作る</button>\\n    </div>\\n    <select style=\\\"width: 10em;\\\" size=\\\"10\\\" (change)=\\\"selectGameTable($event.target.value)\\\" [ngModel]=\\\"selectedTable?.identifier\\\">\\n      <option *ngFor=\\\"let gameTable of getGameTables()\\\" value=\\\"{{gameTable.identifier}}\\\">{{gameTable.name}}</option>\\n    </select>\\n  </div>\\n  <div class=\\\"flex-item\\\">\\n    <ng-container *ngIf=\\\"!isEmpty || selectedTable\\\">\\n      <div class=\\\"images-select\\\">\\n        <div>\\n          画像\\n          <div (click)=\\\"openBgImageModal()\\\">\\n            <img height=\\\"120\\\" [src]=\\\"tableBackgroundImage.url | safe: 'resourceUrl'\\\">\\n          </div>\\n        </div>\\n        <div>\\n          背景\\n          <div *ngIf=\\\"!tableDistanceviewImage.url\\\">\\n            <button (click)=\\\"openDistanceViewImageModal()\\\" style=\\\"height: 120px;\\\">背景画像を追加</button>\\n          </div>\\n          <div *ngIf=\\\"tableDistanceviewImage.url\\\" (click)=\\\"openDistanceViewImageModal()\\\">\\n            <img height=\\\"120\\\" [src]=\\\"tableDistanceviewImage.url | safe: 'resourceUrl'\\\">\\n          </div>\\n        </div>\\n      </div>\\n      <div>Name :\\n        <input [(ngModel)]=\\\"tableName\\\" placeholder=\\\"Name\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\" />\\n      </div>\\n      <div>\\n        <input [(ngModel)]=\\\"tableWidth\\\" type=\\\"range\\\" min=\\\"{{minSize}}\\\" max=\\\"{{maxSize}}\\\" name=\\\"tableWidth\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\"\\n        /> Width :\\n        <input [(ngModel)]=\\\"tableWidth\\\" type=\\\"number\\\" min=\\\"{{minSize}}\\\" max=\\\"{{maxSize}}\\\" style=\\\"width: 5em;\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\">\\n      </div>\\n      <div>\\n        <input [(ngModel)]=\\\"tableHeight\\\" type=\\\"range\\\" min=\\\"{{minSize}}\\\" max=\\\"{{maxSize}}\\\" name=\\\"tableHeight\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\"\\n        /> Height :\\n        <input [(ngModel)]=\\\"tableHeight\\\" type=\\\"number\\\" min=\\\"{{minSize}}\\\" max=\\\"{{maxSize}}\\\" style=\\\"width: 5em;\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\">\\n      </div>\\n      <div>\\n        グリッド:\\n        <select [(ngModel)]=\\\"tableGridType\\\" name=\\\"tableGridType\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\">\\n          <option value=\\\"0\\\">スクエア</option>\\n          <option value=\\\"1\\\">ヘクス（縦揃え）</option>\\n          <option value=\\\"2\\\">ヘクス（横揃え）</option>\\n        </select>\\n        色:\\n        <select [(ngModel)]=\\\"tableGridColor\\\" name=\\\"tableGridColor\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\">\\n          <option value=\\\"#000000e6\\\">黒</option>\\n          <option value=\\\"#dddddde6\\\">白</option>\\n        </select>\\n      </div>\\n      <div>\\n        背景フィルタ\\n        <select [(ngModel)]=\\\"tableDistanceviewFilter\\\" name=\\\"tableDistanceviewFilter\\\" [attr.disabled]=\\\"!isEditable ? '' : null\\\">\\n          <option value=\\\"\\\">なし</option>\\n          <option value=\\\"white\\\">ホワイト</option>\\n          <option value=\\\"black\\\">ブラック</option>\\n        </select>\\n      </div>\\n      <hr/>\\n      <div>\\n        <label>グリッドを常に表示:\\n          <input type=\\\"checkbox\\\" [(ngModel)]=\\\"tableGridShow\\\" name=\\\"tableGridShow\\\" />\\n        </label>\\n        <label>スナップ:\\n          <input type=\\\"checkbox\\\" [(ngModel)]=\\\"tableGridSnap\\\" name=\\\"tableGridSnap\\\" />\\n        </label>\\n        <ng-container *ngIf=\\\"!isDeleted\\\">\\n          <button (click)=\\\"save()\\\">保存</button>\\n          <button class=\\\"danger\\\" (click)=\\\"delete()\\\" [attr.disabled]=\\\"getGameTables().length <= 1 ? '' : null\\\">削除</button>\\n        </ng-container>\\n        <ng-container *ngIf=\\\"isDeleted\\\">\\n          <button (click)=\\\"restore()\\\">元に戻す</button>\\n        </ng-container>\\n      </div>\\n    </ng-container>\\n  </div>\\n</div>\\n<ng-container *ngIf=\\\"isEmpty\\\">\\n  <div style=\\\"font-size: 12px;\\\">※テーブルが１つも作成されていません。「新しいテーブルを作る」から新しいテーブルを作成することができます。</div>\\n</ng-container>\\n\"","export default \"<div class=\\\"background-image is-pointer-events-none\\\" [ngClass]=\\\"[(backgroundFilterType ? 'is-filter' : ''), backgroundFilterType]\\\" \\n[style.background-image]=\\\"'url(' + backgroundImage.url + ')' | safe: 'style'\\\"></div>\\n<div class=\\\"component is-fill is-perspective\\\" [ngClass]=\\\"{'is-grabbing': isPointerDragging}\\\" #root>\\n  <div class=\\\"component-content is-fill is-3d\\\" #gameTable>\\n    <div id=\\\"app-game-table\\\" class=\\\"game-table table-image is-3d\\\" [style.background-image]=\\\"'url(' + tableImage.url + ')' | safe: 'style'\\\" #gameObjects>\\n      <canvas class=\\\"grid-canvas is-fill is-pointer-events-none\\\" #gridCanvas></canvas>\\n      <terrain class=\\\"is-3d\\\" *ngFor=\\\"let terrain of terrains; trackBy: trackByGameObject\\\" [terrain]=\\\"terrain\\\"></terrain>\\n      <game-table-mask class=\\\"is-3d\\\" *ngFor=\\\"let mask of tableMasks; trackBy: trackByGameObject\\\" [gameTableMask]=\\\"mask\\\"></game-table-mask>\\n      <text-note class=\\\"is-3d\\\" *ngFor=\\\"let textNote of textNotes; trackBy: trackByGameObject\\\" [textNote]=\\\"textNote\\\" [appTooltip]=\\\"textNote\\\" [ngStyle]=\\\"{'z-index' : textNote.zindex}\\\"></text-note>\\n      <card-stack class=\\\"is-3d\\\" *ngFor=\\\"let cardStack of cardStacks; trackBy: trackByGameObject\\\" [cardStack]=\\\"cardStack\\\" [appTooltip]=\\\"cardStack\\\" [ngStyle]=\\\"{'z-index' : cardStack.zindex, 'transform': 'translateZ(' + (cardStack.zindex * 0.001) +'px)'}\\\"></card-stack>\\n      <card class=\\\"is-3d\\\" *ngFor=\\\"let card of cards; trackBy: trackByGameObject\\\" [card]=\\\"card\\\" [appTooltip]=\\\"card\\\" [ngStyle]=\\\"{'z-index' : card.zindex, 'transform': 'translateZ(' + (card.zindex * 0.001) +'px)'}\\\"></card>\\n      <dice-symbol class=\\\"is-3d\\\" *ngFor=\\\"let diceSymbol of diceSymbols; trackBy: trackByGameObject\\\" [diceSymbol]=\\\"diceSymbol\\\" [appTooltip]=\\\"diceSymbol\\\"></dice-symbol>\\n      <game-character class=\\\"is-3d\\\" *ngFor=\\\"let character of characters; trackBy: trackByGameObject\\\" [gameCharacter]=\\\"character\\\" [appTooltip]=\\\"character\\\"></game-character>\\n      <peer-cursor class=\\\"is-3d\\\" *ngFor=\\\"let cursor of peerCursors; trackBy: trackByGameObject\\\" [cursor]=\\\"cursor\\\"></peer-cursor>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<div>試聴音量：<input [(ngModel)]=\\\"auditionVolume\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.01\\\" /></div>\\n<div>BGM音量：<input [(ngModel)]=\\\"volume\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.01\\\" /></div>\\n<hr/>\\n<div>\\n  <div *ngFor=\\\"let audio of audios\\\" class=\\\"box\\\">\\n    <button *ngIf=\\\"audio !== auditionPlayer?.audio || auditionPlayer?.paused\\\" (click)=\\\"play(audio)\\\" [disabled]=\\\"!audio.isReady\\\" >試聴/再生</button>\\n    <button *ngIf=\\\"audio === auditionPlayer?.audio && !auditionPlayer?.paused\\\" (click)=\\\"stop()\\\" [disabled]=\\\"!audio.isReady\\\" >試聴/停止</button>\\n    <button *ngIf=\\\"audio !== jukebox?.audio\\\" (click)=\\\"playBGM(audio)\\\" [disabled]=\\\"!audio.isReady\\\" >BGM/再生</button>\\n    <button *ngIf=\\\"audio === jukebox?.audio\\\" (click)=\\\"stopBGM(audio)\\\" [disabled]=\\\"!audio.isReady\\\" >BGM/停止</button>\\n    <span *ngIf=\\\"audio === auditionPlayer?.audio && !auditionPlayer?.paused\\\">【試聴中】</span>\\n    <span *ngIf=\\\"audio === jukebox?.audio\\\">【BGM】</span>\\n    <span>{{audio.name}}</span>\\n  </div>\\n  <div *ngIf=\\\"audios.length < 1\\\" >アップロードされた音楽ファイルはここに表示されます。</div>\\n</div>\\n\\n<label>\\n  <div class=\\\"drop-zone\\\">\\n    <div>\\n      <i class=\\\"material-icons large-font\\\">playlist_add</i>\\n    </div>\\n    <div>ここに音楽をドロップ</div>\\n    <div class=\\\"small-font\\\">またはここをクリックして選択</div>\\n    <input type=\\\"file\\\" style=\\\"display: none;\\\" (change)=\\\"handleFileSelect($event)\\\" multiple accept=\\\"audio/*\\\"/>\\n    <div class=\\\"small-font\\\">\\n      <br>１ファイルにつき10MBまで</div>\\n  </div>\\n</label>\\n<div style=\\\"font-size: 12px;\\\">※「試聴」は自分のスピーカーだけで音楽を1回再生します。</div>\\n<div style=\\\"font-size: 12px;\\\">※「BGM」はルーム内の全員で1つの音楽をループ再生します。</div>\\n<div style=\\\"font-size: 12px;\\\">※現行バージョンのセーブデータ（zip）には音楽ファイルは含まれません。（毎回アップロードが必要です）</div>\"","export default \"<div *ngIf=\\\"!isConnected;else other_content\\\">\\n  <button (click)=\\\"reload()\\\" [disabled]=\\\"isReloading\\\">一覧を更新</button>\\n  <button (click)=\\\"showRoomSetting()\\\">新しいルームを作成する</button>\\n  <hr/>\\n  <ng-container *ngIf=\\\"rooms.length\\\">\\n    <table style=\\\"font-size:12px; border: 0; border-spacing: 0; width: 100%;\\\">\\n      <tr>\\n        <th style=\\\"padding: 0 1em;\\\">ルームID</th>\\n        <th style=\\\"padding: 0 1em; min-width: 50%;\\\">ルーム名</th>\\n        <th style=\\\"padding: 0 1em;\\\">パスワード</th>\\n        <th style=\\\"padding: 0 1em;\\\">参加者</th>\\n        <th style=\\\"padding: 0 1em;\\\"></th>\\n      </tr>\\n      <ng-container *ngFor=\\\"let room of rooms\\\">\\n        <!--\\n    <div *ngIf=\\\"!room.isPrivate\\\" class=\\\"box\\\">\\n      <div style=\\\"display: inline-block;\\\">\\n        <i *ngIf=\\\"0 < room.peers[0].password.length\\\" class=\\\"material-icons\\\" style=\\\"vertical-align: middle; size:0.6rem;\\\">lock</i>\\n        <span>{{room.roomName}}</span>/<span>{{room.room}}</span>/<span>({{room.peers.length}})</span>\\n        <button [disabled]=\\\"room.room === currentRoom\\\" *ngIf=\\\"0 < room.room.length\\\" type=\\\"submit\\\" (click)=\\\"connect(room.peers[0].fullstring)\\\">接続する</button>\\n      </div>\\n    </div>\\n    -->\\n        <tr>\\n          <td style=\\\"font-size:0.5rem; text-align: center; padding: 0 1em;\\\">{{room.peers[0]?.room}}</td>\\n          <td style=\\\"text-align: center; padding: 0 1em;\\\">{{room.roomName}}</td>\\n          <td *ngIf=\\\"0 < room.peers[0].password.length\\\" style=\\\"text-align: center; padding: 0 1em;\\\"><i class=\\\"material-icons\\\" style=\\\"vertical-align: middle; font-size:0.9rem;\\\">lock</i></td>\\n          <td *ngIf=\\\"room.peers[0].password.length < 1\\\" style=\\\"text-align: center; padding: 0 1em;\\\">-</td>\\n          <td style=\\\"text-align: center; padding: 0 1em;\\\">{{room.peers.length}}人</td>\\n          <td><button [disabled]=\\\"room.peers[0]?.room === currentRoom\\\" *ngIf=\\\"0 < room.alias.length\\\" type=\\\"submit\\\" (click)=\\\"connect(room.peers)\\\">接続</button></td>\\n        </tr>\\n      </ng-container>\\n    </table>\\n  </ng-container>\\n  <span *ngIf=\\\"rooms.length < 1\\\" style=\\\"font-size: 12px;\\\">{{help}}</span>\\n</div>\\n<ng-template #other_content><span style=\\\"font-size: 12px;\\\">別のルームに接続したい場合は、他の参加者との接続を切ってください。<br>（※ページリロードで切断できます。）</span></ng-template>\\n\"","export default \"<div class=\\\"component\\\">\\n  <div [@bgInOut]=\\\"'in'\\\" class=\\\"modal-background\\\" (click)=\\\"clickBackground($event)\\\"></div>\\n  <div [@flyInOut]=\\\"'in'\\\" class=\\\"modal-panel\\\">\\n    <div class=\\\"title\\\">\\n      <div class=\\\"title-button\\\">\\n        <button (click)=\\\"resolve()\\\"><i class=\\\"material-icons\\\" style=\\\"font-size: 14px;\\\">close</i></button>\\n      </div>\\n      {{modalService.title}}\\n    </div>\\n    <div class=\\\"scrollable-panel\\\">\\n      <ng-content></ng-content>\\n      <div #content></div>\\n    </div>\\n    <!--<div class=\\\"footer\\\"><button (click)=\\\"resolve()\\\">OK</button><button (click)=\\\"resolve()\\\">CANCEL</button></div>-->\\n  </div>\\n</div>\"","export default \"<div class=\\\"sk-cube-grid\\\">\\n  <div class=\\\"sk-cube sk-cube1\\\"></div>\\n  <div class=\\\"sk-cube sk-cube2\\\"></div>\\n  <div class=\\\"sk-cube sk-cube3\\\"></div>\\n  <div class=\\\"sk-cube sk-cube4\\\"></div>\\n  <div class=\\\"sk-cube sk-cube5\\\"></div>\\n  <div class=\\\"sk-cube sk-cube6\\\"></div>\\n  <div class=\\\"sk-cube sk-cube7\\\"></div>\\n  <div class=\\\"sk-cube sk-cube8\\\"></div>\\n  <div class=\\\"sk-cube sk-cube9\\\"></div>\\n  <div class=\\\"sk-title\\\">sync</div>\\n</div>\"","export default \"<div class=\\\"component is-pointer-events-none\\\" [@fadeInOut]=\\\"'in'\\\" appDraggable #draggablePanel>\\n  <ng-container [ngSwitch]=\\\"tabletopObject.aliasName\\\">\\n    <ng-container *ngSwitchCase=\\\"'numberResource'\\\">\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"'card'\\\">\\n      <ng-container *ngTemplateOutlet=\\\"overviewCard; context: { card: tabletopObject }\\\"></ng-container>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"'card-stack'\\\">\\n      <ng-container *ngTemplateOutlet=\\\"overviewCard; context: { card: tabletopObject }\\\"></ng-container>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"'text-note'\\\">\\n      <ng-container *ngTemplateOutlet=\\\"overviewNote; context: { note: tabletopObject }\\\"></ng-container>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"'character'\\\">\\n      <ng-container *ngTemplateOutlet=\\\"overviewCharacter; context: { character: tabletopObject }\\\"></ng-container>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"'dice-symbol'\\\">\\n      <ng-container *ngTemplateOutlet=\\\"overviewDiceSymbol; context: { dice: tabletopObject }\\\"></ng-container>\\n    </ng-container>\\n    <ng-container *ngSwitchDefault>\\n      <ng-container *ngTemplateOutlet=\\\"overviewCharacter; context: { character: tabletopObject }\\\"></ng-container>\\n    </ng-container>\\n  </ng-container>\\n</div>\\n\\n<ng-container *ngIf=\\\"isOpenImageView\\\">\\n  <ng-container *ngTemplateOutlet=\\\"imageView\\\"></ng-container>\\n</ng-container>\\n\\n<ng-template #overviewCard let-card=\\\"card\\\">\\n  <div class=\\\"component-content is-small-size\\\"\\n    [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n    <div *ngIf=\\\"hasImage\\\" style=\\\"position: relative;\\\">\\n      <img class=\\\"card-image\\\" [src]=\\\"imageUrl | safe: 'resourceUrl'\\\" />\\n      <button class=\\\"zoom-button\\\" (click)=\\\"chanageImageView(true)\\\">\\n        <i class=\\\"material-icons\\\">zoom_in</i>\\n      </button>\\n      <div *ngIf=\\\"card.hasOwner\\\" class=\\\"component-owner position-right-bottom\\\"\\n        [ngClass]=\\\"{'with-button-marign': hasImage}\\\">\\n        <div class=\\\"owner-tag\\\">{{card.ownerName}}</div>\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"0 < card?.name?.length\\\" class=\\\"component-title title-background\\\"\\n      [ngClass]=\\\"{'with-button-marign': hasImage}\\\">\\n      <ng-container *ngIf=\\\"card.isVisible == null || card.isVisible\\\">{{card.name}}</ng-container>\\n      <ng-container *ngIf=\\\"card.isVisible != null && !card.isVisible\\\">カード</ng-container>\\n    </div>\\n    <div class=\\\"component-background\\\">\\n      <div class=\\\"grid-container-root\\\" *ngIf=\\\"hasDataElms && card.isVisible\\\">\\n        <div class=\\\"grid-container\\\">\\n          <ng-container *ngFor=\\\"let dataElm of dataElms\\\">\\n            <ng-container *ngTemplateOutlet=\\\"dataElement; context: { dataElm: dataElm }\\\"></ng-container>\\n          </ng-container>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #overviewNote let-note=\\\"note\\\">\\n  <div class=\\\"component-content is-large-size\\\"\\n    [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n    <div class=\\\"component-title title-background\\\">{{note.title}}</div>\\n    <div class=\\\"component-background text-note-container\\\">\\n      <div style=\\\"position: relative;\\\">\\n        <div class=\\\"is-fill\\\">\\n          <textarea class=\\\"textarea\\\" [(ngModel)]=\\\"note.text\\\" spellcheck=\\\"false\\\"></textarea>\\n        </div>\\n        <div class=\\\"textarea-spacer\\\">{{note.text}}</div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #overviewCharacter let-character=\\\"character\\\">\\n  <div class=\\\"component-content character-grid-container is-middle-size\\\">\\n    <div class=\\\"title-bg-area title-background\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n    </div>\\n    <div class=\\\"image-area character-image-box\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\"\\n      *ngIf=\\\"hasImage\\\">\\n      <img class=\\\"character-image\\\" [src]=\\\"imageUrl | safe: 'resourceUrl'\\\" />\\n    </div>\\n    <div class=\\\"title-area component-title\\\" [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging,\\n    'pointer-events-none': this.isPointerDragging }\\\">{{character.name}}</div>\\n    <div class=\\\"void-area is-pointer-events-none\\\"></div>\\n    <div class=\\\"dataElm-area component-background\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n      <div class=\\\"grid-container-root\\\" *ngIf=\\\"hasDataElms\\\">\\n        <!--<ng-container *ngFor=\\\"let dataElm of dataElms\\\">-->\\n        <ng-container *ngFor=\\\"let dataElm of inventoryDataElms\\\">\\n          <ng-container *ngIf=\\\"dataElm && dataElm.name !== newLineString\\\">\\n            <div class=\\\"grid-container\\\">\\n              <ng-container *ngTemplateOutlet=\\\"dataElement; context: { dataElm: dataElm }\\\"></ng-container>\\n            </div>\\n          </ng-container>\\n        </ng-container>\\n      </div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #overviewDiceSymbol let-dice=\\\"dice\\\">\\n  <div class=\\\"component-content character-grid-container is-middle-size\\\">\\n    <div class=\\\"title-bg-area title-background\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n    </div>\\n    <div class=\\\"title-area component-title\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n      {{dice.name}}:\\n      <ng-container *ngIf=\\\"dice.isVisible\\\">{{dice.face}}</ng-container>\\n      <ng-container *ngIf=\\\"!dice.isVisible\\\">???</ng-container>\\n    </div>\\n    <div *ngIf=\\\"dice.hasOwner\\\" class=\\\"owner-name-area component-owner\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n      <div class=\\\"owner-tag\\\">{{dice.ownerName}}\\n      </div>\\n    </div>\\n    <div class=\\\"image-area character-image-box\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\"\\n      *ngIf=\\\"hasImage\\\">\\n      <img class=\\\"character-image\\\" [ngClass]=\\\"{'is-black-mask': !dice.isVisible, 'is-harf-black-mask': dice.isMine}\\\"\\n        [src]=\\\"imageUrl | safe: 'resourceUrl'\\\" />\\n    </div>\\n    <div class=\\\"void-area is-pointer-events-none\\\"></div>\\n    <div class=\\\"dataElm-area component-background\\\"\\n      [ngClass]=\\\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\\\">\\n      <div class=\\\"grid-container-root\\\" *ngIf=\\\"hasDataElms && dice.isVisible\\\">\\n        <div class=\\\"grid-container\\\">\\n          <ng-container *ngFor=\\\"let dataElm of dataElms\\\">\\n            <ng-container *ngIf=\\\"dataElm && dataElm.name !== newLineString\\\">\\n              <ng-container *ngTemplateOutlet=\\\"dataElement; context: { dataElm: dataElm }\\\"></ng-container>\\n            </ng-container>\\n          </ng-container>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #dataElement let-dataElm=\\\"dataElm\\\">\\n  <ng-container *ngIf=\\\"0 < dataElm.children.length; then thenBlock; else elseBlock\\\"></ng-container>\\n  <ng-template #thenBlock>\\n    <div class=\\\"section\\\" style=\\\"padding-top: 0.5em;\\\">\\n      <div class=\\\"section-text\\\" *ngIf=\\\"0 < dataElm.name.trim().length\\\">{{dataElm.name}}</div>\\n      <div class=\\\"grid-container indetnt\\\">\\n        <ng-container *ngFor=\\\"let childElm of dataElm.children\\\">\\n          <ng-container *ngTemplateOutlet=\\\"dataElement; context: { dataElm: childElm }\\\"></ng-container>\\n        </ng-container>\\n      </div>\\n    </div>\\n  </ng-template>\\n  <ng-template #elseBlock>\\n    <ng-container [ngSwitch]=\\\"dataElm.type\\\">\\n      <ng-container *ngSwitchCase=\\\"'note'\\\">\\n        <div class=\\\"section\\\">\\n          <div>{{dataElm.name}}</div>\\n          <div class=\\\"note\\\" style=\\\"position: relative;\\\">\\n            <div class=\\\"is-fill\\\">\\n              <textarea class=\\\"textarea\\\" [(ngModel)]=\\\"dataElm.value\\\" spellcheck=\\\"false\\\"></textarea>\\n            </div>\\n            <div class=\\\"textarea-spacer\\\">{{dataElm.value}}</div>\\n          </div>\\n        </div>\\n      </ng-container>\\n      <ng-container *ngSwitchCase=\\\"'numberResource'\\\">\\n        <div class=\\\"tag\\\">{{dataElm.name}}</div>\\n        <div class=\\\"value\\\">\\n          <div style=\\\"display: inline-block; width: min-content;\\\">\\n            <div class=\\\"hidden-spacer\\\" style=\\\"margin-right: 2em;\\\">{{dataElm.currentValue}}</div>\\n            <input class=\\\"input\\\" type=\\\"number\\\" size=\\\"1\\\" [(ngModel)]=\\\"dataElm.currentValue\\\" />\\n          </div>\\n          <div style=\\\"display: inline;\\\"> / {{dataElm.value}}</div>\\n        </div>\\n        <div class=\\\"section\\\" style=\\\"line-height: 1em;\\\">\\n          <input type=\\\"range\\\"\\n            [style]=\\\"'font-size: 0.8em; width: 100%; --min: 0; --max:' + dataElm.value + '; --val:' + dataElm.currentValue +';' | safe: 'style'\\\"\\n            min=\\\"0\\\" max=\\\"{{dataElm.value}}\\\" [(ngModel)]=\\\"dataElm.currentValue\\\" />\\n        </div>\\n      </ng-container>\\n      <ng-container *ngSwitchDefault>\\n        <div class=\\\"tag\\\">{{dataElm.name}}</div>\\n        <div class=\\\"value\\\">\\n          <div class=\\\"hidden-spacer\\\">{{dataElm.value}}</div>\\n          <input class=\\\"input\\\" size=\\\"1\\\" [(ngModel)]=\\\"dataElm.value\\\" />\\n        </div>\\n      </ng-container>\\n    </ng-container>\\n    <div class=\\\"section border\\\"></div>\\n  </ng-template>\\n</ng-template>\\n\\n<ng-template #imageView>\\n  <div class=\\\"image-view-background is-fill\\\" (click)=\\\"chanageImageView(false)\\\" [@fadeInOut]=\\\"'in'\\\">\\n    <div class=\\\"close-button is-pointer-events-none\\\"><i class=\\\"material-icons\\\">close</i></div>\\n    <img class=\\\"contain-image\\\" [src]=\\\"imageUrl | safe: 'resourceUrl'\\\" />\\n  </div>\\n</ng-template>\"","export default \"<form #passwordForm=\\\"ngForm\\\">\\n  <div>パスワード: <input [(ngModel)]=\\\"password\\\" (input)=\\\"onInputChange($event.target.value)\\\" [ngModelOptions]=\\\"{standalone: true}\\\" placeholder=\\\"パスワード\\\" /></div>\\n  <button type=\\\"submit\\\" (click)=\\\"submit()\\\">入室</button>\\n</form>\\n<div>\\n  <span style=\\\"font-size: 12px;\\\">{{help}}</span>\\n</div>\"","export default \"<div *ngIf=\\\"!isMine\\\" #cursor class=\\\"component is-3d is-transition is-pointer-events-none\\\">\\n  <div #opacity class=\\\"peer-cursor is-3d is-transition\\\">\\n    <div class=\\\"icon\\\" [style.background-image]=\\\"'url(' + iconUrl + ')' | safe: 'style'\\\">\\n      <div class=\\\"name is-center\\\">\\n        <span style=\\\"white-space: nowrap;\\\">{{name}}</span>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","export default \"<div *ngIf=\\\"myPeer\\\">\\n  <button (click)=\\\"changeIcon()\\\">アイコンを変更する</button>\\n  <div *ngIf=\\\"myPeer.image\\\" class=\\\"image cover\\\" [style.background-image]=\\\"'url(' + myPeer.image.url + ')' | safe: 'style' \\\"\\n    (click)=\\\"changeIcon()\\\">\\n    <!--<img *ngIf=\\\"myPeer.image\\\" [src]=\\\"myPeer.image.url | safe: 'resourceUrl'\\\" />-->\\n  </div>\\n  <span>あなたのニックネーム：  <input [(ngModel)]=\\\"myPeer.name\\\"  placeholder=\\\"ニックネーム\\\" /></span>\\n</div>\\n<div>\\n  <span>あなたのID：<span *ngIf=\\\"networkService.isOpen\\\" style=\\\"font-weight: bold;\\\">{{networkService.peerContext.id}}</span>\\n  <span *ngIf=\\\"!networkService.isOpen\\\" style=\\\"font-weight: bold;\\\">???</span>\\n  </span>\\n</div>\\n<!--<div>host ID:{{networkService.hostPeerID}}</div>-->\\n<ng-container *ngIf=\\\"18 < networkService.peerId.length\\\">\\n  <hr/>\\n  <div>\\n    <span>ルーム名：<span *ngIf=\\\"networkService.isOpen\\\" style=\\\"font-weight: bold;\\\">{{networkService.peerContext.roomName}}/{{networkService.peerContext.room}}</span></span>\\n  </div>\\n  <div>\\n    <span>パスワード：<span *ngIf=\\\"networkService.isOpen\\\" style=\\\"font-weight: bold;\\\">{{networkService.peerContext.password}}</span></span>\\n  </div>\\n</ng-container>\\n<hr/>\\n<div *ngFor=\\\"let conn of networkService.peerContexts\\\">\\n  <div>\\n    <span *ngIf=\\\"!conn.isOpen\\\">[接続中]</span>\\n    <span>他の参加者：{{conn.id}} [{{findPeerName(conn.fullstring)}}]</span>\\n  </div>\\n</div>\\n<div>\\n  <ng-container *ngIf=\\\"networkService.peerId.length <= 18\\\">\\n    <input [(ngModel)]=\\\"targetPeerId\\\" placeholder=\\\"接続したい相手のID\\\" name=\\\"targetPeerId\\\" />\\n    <button (click)=\\\"connectPeer()\\\" [disabled]=\\\"!networkService.isOpen\\\">プライベート接続</button><br>\\n  </ng-container>\\n  <button *ngIf=\\\"networkService.peerIds.length <= 1\\\" (click)=\\\"showLobby()\\\" [disabled]=\\\"!networkService.isOpen\\\">ロビー（ルーム一覧）を表示</button>\\n</div>\\n<div><span style=\\\"font-size: 12px;\\\">{{help}}</span></div>\\n<ng-container *ngIf=\\\"networkService.peerId.length <= 18\\\">\\n  <div style=\\\"font-size: 12px;\\\" *ngIf=\\\"networkService.peerContexts.length < 1\\\">※プライベート接続を使用する場合は、お互いのIDをユドナリウム外で共有してください。</div>\\n  <div style=\\\"font-size: 12px;\\\" *ngIf=\\\"networkService.peerContexts.length < 1\\\">※一人で動作確認を行いたい場合はブラウザを2つ開くと良いと思います。</div>\\n</ng-container>\\n<ng-container *ngIf=\\\"18 < networkService.peerId.length\\\">\\n  <div style=\\\"font-size: 12px;\\\">※ルーム機能を利用している時はプライベート接続を利用できません。</div>\\n</ng-container>\\n\"","export default \"<div *ngIf=\\\"!isConnected;else other_content\\\">\\n  <div>ルーム名 : <input class=\\\"input\\\" (input)=\\\"calcPeerId($event.target.value, password)\\\" [(ngModel)]=\\\"roomName\\\" required minlength=\\\"1\\\" maxlength=\\\"128\\\" #roomNameValidation=\\\"ngModel\\\"\\n      placeholder=\\\"ルームの名前は必須\\\" /></div>\\n  <div>パスワード: <input class=\\\"input\\\" (input)=\\\"calcPeerId(roomName, $event.target.value)\\\" [(ngModel)]=\\\"password\\\" maxlength=\\\"12\\\" #passwordValidation=\\\"ngModel\\\" placeholder=\\\"空ならパスワードなし\\\"\\n    /></div>\\n  <hr/>\\n  <div *ngIf=\\\"roomNameValidation.errors && (roomNameValidation.dirty || roomNameValidation.touched)\\\">\\n    <div [hidden]=\\\"!roomNameValidation.errors.required\\\">\\n      ルームの名前は必須です。\\n    </div>\\n    <div [hidden]=\\\"!roomNameValidation.errors.minlength\\\">\\n      ルームの名前は必須です。\\n    </div>\\n    <div [hidden]=\\\"!roomNameValidation.errors.maxlength\\\">\\n      ルーム名前の長さは128以内にしてください。\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"passwordValidation.errors && (passwordValidation.dirty || passwordValidation.touched)\\\">\\n    <div [hidden]=\\\"!passwordValidation.errors.maxlength\\\">\\n      パスワードの長さは12以内にしてください。\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"!validateLength\\\">\\n    ルームの名前とパスワードの合計が長すぎるようです。どちらかを少し短くしてみてください。\\n  </div>\\n  <div>\\n    <button [disabled]=\\\"!roomNameValidation.valid || !passwordValidation.valid || !validateLength\\\" (click)=\\\"createRoom()\\\">新しいルームを作成</button>\\n  </div>\\n</div>\\n<div><span style=\\\"font-size: 12px;\\\">※作成したルームは参加者が0人になった時点で解散します。ルームの状態を次回に持ち越したい場合は必ず「保存」してください。</span></div>\\n<ng-template #other_content>\\n  <span style=\\\"font-size: 12px;\\\">他の参加者と接続したままではルーム作成を行えません。<br>別のルームに接続したい場合は、他の参加者との接続を切ってください。<br>（※ページリロードで切断できます。）</span>\\n</ng-template>\\n\"","export default \"<div class=\\\"component is-3d is-pointer-events-none\\\"\\n  [style.width.px]=\\\"width * gridSize\\\" [style.height.px]=\\\"depth * gridSize\\\"\\n  appMovable [movable.option]=\\\"movableOption\\\" [movable.disable]=\\\"isLocked\\\" (movable.ondragstart)=\\\"onMove()\\\" (movable.ondragend)=\\\"onMoved()\\\">\\n  <div class=\\\"component-content is-3d is-pointer-events-auto\\\" [ngClass]=\\\"{'is-grab': !isLocked}\\\"\\n    appRotable [rotable.option]=\\\"rotableOption\\\" (rotable.ondragstart)=\\\"onMove()\\\" (rotable.ondragend)=\\\"onMoved()\\\" [rotable.disable]=\\\"isLocked\\\">\\n    <ng-container *ngIf=\\\"hasFloor && 0 < floorImage?.url.length\\\">\\n      <div class=\\\"texture\\\" [ngClass]=\\\"{'blinking-animation': !isLocked}\\\" [ngStyle]=\\\"{'transform': 'translateZ(' + height * gridSize +'px)'}\\\"\\n        [style.background-image]=\\\"'url(' + floorImage.url + ')' | safe: 'style'\\\"></div>\\n    </ng-container>\\n    <ng-container *ngIf=\\\"hasWall && 0 < wallImage?.url.length\\\">\\n      <div [ngClass]=\\\"{'blinking-animation': !isLocked}\\\" class=\\\"texture of-wall-top\\\" [style.background-image]=\\\"'url(' + wallImage.url + ')' | safe: 'style'\\\"\\n        [style.width.px]=\\\"width * gridSize\\\" [style.height.px]=\\\"height * gridSize\\\"></div>\\n      <div [ngClass]=\\\"{'blinking-animation': !isLocked}\\\" class=\\\"texture of-wall-bottom\\\" [style.background-image]=\\\"'url(' + wallImage.url + ')' | safe: 'style'\\\"\\n        [style.width.px]=\\\"width * gridSize\\\" [style.height.px]=\\\"height * gridSize\\\"></div>\\n      <div [ngClass]=\\\"{'blinking-animation': !isLocked}\\\" class=\\\"texture of-wall-left\\\" [style.background-image]=\\\"'url(' + wallImage.url + ')' | safe: 'style'\\\"\\n        [style.width.px]=\\\"depth * gridSize\\\" [style.height.px]=\\\"height * gridSize\\\"></div>\\n      <div [ngClass]=\\\"{'blinking-animation': !isLocked}\\\" class=\\\"texture of-wall-right\\\" [style.background-image]=\\\"'url(' + wallImage.url + ')' | safe: 'style'\\\"\\n        [style.width.px]=\\\"depth * gridSize\\\" [style.height.px]=\\\"height * gridSize\\\"></div>\\n    </ng-container>\\n    <ng-container *ngIf=\\\"!isLocked\\\">\\n      <div class=\\\"pedestal-grab rotate-grab\\\"></div>\\n      <div class=\\\"rotate-grab of-left-top rotate-grab-icon\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-left-bottom rotate-grab-icon\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-right-bottom rotate-grab-icon\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n      <div class=\\\"rotate-grab of-right-top rotate-grab-icon\\\">\\n        <i class=\\\"material-icons\\\">autorenew</i>\\n      </div>\\n    </ng-container>\\n  </div>\\n</div>\"","export default \"<div class=\\\"component is-3d is-pointer-events-none\\\"\\n  appMovable [movable.option]=\\\"movableOption\\\" [movable.disable]=\\\"isSelected\\\" (movable.ondragstart)=\\\"onMove()\\\" (movable.ondragend)=\\\"onMoved()\\\">\\n  <div class=\\\"is-3d\\\" appRotable [rotable.option]=\\\"rotableOption\\\" (rotable.ondragstart)=\\\"onMove()\\\" (rotable.ondragend)=\\\"onMoved()\\\">\\n  <div class=\\\"component-content is-3d is-pointer-events-auto\\\"\\n    [style.width.px]=\\\"width * gridSize\\\">\\n    <div class=\\\"upright-transform is-3d is-bg-color is-bg-texture\\\"\\n      [style.background-image]=\\\"'url(' + imageFile?.url + ')' | safe: 'style'\\\" [style.width.px]=\\\"width * gridSize\\\" [style.min-height.px]=\\\"height * gridSize\\\">\\n      <div *ngIf=\\\"title.length\\\" class=\\\"title is-black-background is-pointer-events-none\\\">{{title}}</div>\\n      <textarea (input)=\\\"calcFitHeight();\\\" #textArea [ngClass]=\\\"{'is-pointer-events-none': !isSelected, 'is-pointer-events-auto': isSelected, 'is-outline-text': !isSelected}\\\"\\n        [style.font-size.px]=\\\"fontSize + 9\\\" [(ngModel)]=\\\"text\\\" spellcheck=\\\"false\\\"></textarea>\\n    </div>\\n    <div class=\\\"rotate-grab of-left-top\\\">\\n      <i class=\\\"material-icons\\\">autorenew</i>\\n    </div>\\n    <div class=\\\"rotate-grab of-right-top\\\">\\n      <i class=\\\"material-icons\\\">autorenew</i>\\n    </div>\\n  </div>\\n</div>\\n</div>\\n\"","export default \"<span><pre class=\\\"text\\\">{{text}}</pre></span>\"","export default \"<div [@flyInOut]=\\\"'in'\\\" [ngClass]=\\\"{'pointer-events-none': isPointerDragging}\\\" class=\\\"draggable-panel\\\"\\n  [style.left.px]=\\\"left\\\" [style.top.px]=\\\"top\\\" [style.width.px]=\\\"width\\\" [style.height.px]=\\\"height\\\"\\n  [draggable.stack]=\\\"'.draggable-panel'\\\" appDraggable appResizable #draggablePanel>\\n  <div class=\\\"title\\\">\\n    <div class=\\\"title-button\\\">\\n      <button (click)=\\\"toggleFullScreen()\\\"><i class=\\\"material-icons\\\" style=\\\"font-size: 14px;\\\">fullscreen</i></button>\\n      <button (click)=\\\"close()\\\"><i class=\\\"material-icons\\\" style=\\\"font-size: 14px;\\\">close</i></button>\\n    </div>\\n    {{panelService.title}}\\n  </div>\\n  <div class=\\\"scrollable-panel\\\" #scrollablePanel>\\n    <ng-content></ng-content>\\n    <div #content></div>\\n  </div>\\n</div>\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export default \"nav ul {\\n    list-style:none;\\n    padding: 0px;\\n    margin: 0px;\\n  /*\\n  border: 1px solid #bbb;\\n  border-radius: 5px;\\n  padding: 5px;\\n  background-color: rgba(30, 30, 30, 0.8);\\n  */\\n}\\n\\nnav ul > li {\\n  text-align: center;\\n  padding: 5px;\\n  color: #CCC;\\n  color: #444;\\n\\n  cursor: -moz-pointer;\\n  cursor: -webkit-pointer;\\n  cursor: pointer;\\n}\\n\\nnav ul > li:hover {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\nnav ul > li > a {\\n  height: 128px;\\n  width: 128px;\\n  font-size: 8px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n\\nnav ul > li > a > label {\\n  cursor: -moz-pointer;\\n  cursor: -webkit-pointer;\\n  cursor: pointer;\\n}\\n\\nnav ul i {\\n  font-size: 24px;\\n}\\n\\nnav ul a, nav ul a:hover, nav ul a:active, nav ul a:visited {\\n  text-decoration: none;\\n}\\n\\n.icon-size {\\n  font-size: 40px;\\n}\\n\\n.side-menu {\\n  top: 0px;\\n  left: 0px;\\n  box-sizing: border-box;\\n  overflow: auto;\\n  position: absolute;\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n  border:solid 1px #999;\\n  padding: 0px;\\n  height: 100%;\\n  width: 300px;\\n}\\n\\n.networkIndicator {\\n  display: none;\\n  z-index: 9999;\\n  pointer-events: none;\\n  position: absolute;\\n  top: 3px;\\n  right: 3px;\\n  height: 30px;\\n  width: 30px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxlQUFlO0lBQ2YsWUFBWTtJQUNaLFdBQVc7RUFDYjs7Ozs7R0FLQztBQUNIOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsV0FBVzs7RUFFWCxvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDOztBQUNBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixjQUFjO0VBQ2QseUJBQWlCO0tBQWpCLHNCQUFpQjtNQUFqQixxQkFBaUI7VUFBakIsaUJBQWlCO0FBQ25COztBQUNBO0VBQ0Usb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0FBQ2pCOztBQUNBO0VBQ0UsZUFBZTtBQUNqQjs7QUFDQTtFQUNFLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxRQUFRO0VBQ1IsU0FBUztFQUNULHNCQUFzQjtFQUN0QixjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCx1Q0FBdUM7RUFDdkMscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWixZQUFZO0VBQ1osWUFBWTtBQUNkOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGFBQWE7RUFDYixvQkFBb0I7RUFDcEIsa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixVQUFVO0VBQ1YsWUFBWTtFQUNaLFdBQVc7QUFDYiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsibmF2IHVsIHtcbiAgICBsaXN0LXN0eWxlOm5vbmU7XG4gICAgcGFkZGluZzogMHB4O1xuICAgIG1hcmdpbjogMHB4O1xuICAvKlxuICBib3JkZXI6IDFweCBzb2xpZCAjYmJiO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHBhZGRpbmc6IDVweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xuICAqL1xufVxuXG5uYXYgdWwgPiBsaSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogNXB4O1xuICBjb2xvcjogI0NDQztcbiAgY29sb3I6ICM0NDQ7XG5cbiAgY3Vyc29yOiAtbW96LXBvaW50ZXI7XG4gIGN1cnNvcjogLXdlYmtpdC1wb2ludGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbm5hdiB1bCA+IGxpOmhvdmVyIHtcbiAgY29sb3I6ICNDQ0M7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcbn1cbm5hdiB1bCA+IGxpID4gYSB7XG4gIGhlaWdodDogMTI4cHg7XG4gIHdpZHRoOiAxMjhweDtcbiAgZm9udC1zaXplOiA4cHg7XG4gIHVzZXItc2VsZWN0OiBub25lO1xufVxubmF2IHVsID4gbGkgPiBhID4gbGFiZWwge1xuICBjdXJzb3I6IC1tb3otcG9pbnRlcjtcbiAgY3Vyc29yOiAtd2Via2l0LXBvaW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbm5hdiB1bCBpIHtcbiAgZm9udC1zaXplOiAyNHB4O1xufVxubmF2IHVsIGEsIG5hdiB1bCBhOmhvdmVyLCBuYXYgdWwgYTphY3RpdmUsIG5hdiB1bCBhOnZpc2l0ZWQge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbi5pY29uLXNpemUge1xuICBmb250LXNpemU6IDQwcHg7XG59XG5cbi5zaWRlLW1lbnUge1xuICB0b3A6IDBweDtcbiAgbGVmdDogMHB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogYXV0bztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xuICBib3JkZXI6c29saWQgMXB4ICM5OTk7XG4gIHBhZGRpbmc6IDBweDtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMzAwcHg7XG59XG5cbi5uZXR3b3JrSW5kaWNhdG9yIHtcbiAgZGlzcGxheTogbm9uZTtcbiAgei1pbmRleDogOTk5OTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAzcHg7XG4gIHJpZ2h0OiAzcHg7XG4gIGhlaWdodDogMzBweDtcbiAgd2lkdGg6IDMwcHg7XG59XG4iXX0= */\"","import { AfterViewInit, Component, NgZone, OnDestroy, ViewChild, ViewContainerRef } from '@angular/core';\n\nimport { ChatTab } from '@udonarium/chat-tab';\nimport { AudioPlayer } from '@udonarium/core/file-storage/audio-player';\nimport { AudioSharingSystem } from '@udonarium/core/file-storage/audio-sharing-system';\nimport { AudioStorage } from '@udonarium/core/file-storage/audio-storage';\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { FileSharingSystem } from '@udonarium/core/file-storage/image-sharing-system';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { ObjectFactory } from '@udonarium/core/synchronize-object/object-factory';\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { ObjectSynchronizer } from '@udonarium/core/synchronize-object/object-synchronizer';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { DataSummarySetting } from '@udonarium/data-summary-setting';\nimport { DiceBot } from '@udonarium/dice-bot';\nimport { Jukebox } from '@udonarium/Jukebox';\nimport { PeerCursor } from '@udonarium/peer-cursor';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\n\nimport { ChatWindowComponent } from 'component/chat-window/chat-window.component';\nimport { FileStorageComponent } from 'component/file-storage/file-storage.component';\nimport { GameCharacterGeneratorComponent } from 'component/game-character-generator/game-character-generator.component';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { GameObjectInventoryComponent } from 'component/game-object-inventory/game-object-inventory.component';\nimport { GameTableSettingComponent } from 'component/game-table-setting/game-table-setting.component';\nimport { JukeboxComponent } from 'component/jukebox/jukebox.component';\nimport { PeerMenuComponent } from 'component/peer-menu/peer-menu.component';\nimport { TextViewComponent } from 'component/text-view/text-view.component';\nimport { AppConfig, AppConfigService } from 'service/app-config.service';\nimport { ChatMessageService } from 'service/chat-message.service';\nimport { ContextMenuService } from 'service/context-menu.service';\nimport { ModalService } from 'service/modal.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\nimport { SaveDataService } from 'service/save-data.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements AfterViewInit, OnDestroy {\n\n  @ViewChild('modalLayer', { read: ViewContainerRef, static: true }) modalLayerViewContainerRef: ViewContainerRef;\n  private immediateUpdateTimer: NodeJS.Timer = null;\n  private lazyUpdateTimer: NodeJS.Timer = null;\n  private openPanelCount: number = 0;\n\n  constructor(\n    private modalService: ModalService,\n    private panelService: PanelService,\n    private pointerDeviceService: PointerDeviceService,\n    private chatMessageService: ChatMessageService,\n    private appConfigService: AppConfigService,\n    private saveDataService: SaveDataService,\n    private ngZone: NgZone\n  ) {\n\n    this.ngZone.runOutsideAngular(() => {\n      EventSystem;\n      Network;\n      FileArchiver.instance.initialize();\n      FileSharingSystem.instance.initialize();\n      ImageStorage.instance;\n      AudioSharingSystem.instance.initialize();\n      AudioStorage.instance;\n      ObjectFactory.instance;\n      ObjectSerializer.instance;\n      ObjectStore.instance;\n      ObjectSynchronizer.instance.initialize();\n    });\n    this.appConfigService.initialize();\n    this.pointerDeviceService.initialize();\n\n    DataSummarySetting.instance.initialize();\n\n    let diceBot: DiceBot = new DiceBot('DiceBot');\n    diceBot.initialize();\n\n    let jukebox: Jukebox = new Jukebox('Jukebox');\n    jukebox.initialize();\n\n    let soundEffect: SoundEffect = new SoundEffect('SoundEffect');\n    soundEffect.initialize();\n\n    let chatTab: ChatTab = new ChatTab('MainTab');\n    chatTab.name = 'メインタブ';\n    chatTab.initialize();\n\n    chatTab = new ChatTab('SubTab');\n    chatTab.name = 'サブタブ';\n    chatTab.initialize();\n\n    let fileContext = ImageFile.createEmpty('none_icon').toContext();\n    fileContext.url = './assets/images/ic_account_circle_black_24dp_2x.png';\n    let noneIconImage = ImageStorage.instance.add(fileContext);\n\n    AudioPlayer.resumeAudioContext();\n    PresetSound.dicePick = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;\n    PresetSound.dicePut = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;\n    PresetSound.diceRoll1 = AudioStorage.instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu01.mp3').identifier;\n    PresetSound.diceRoll2 = AudioStorage.instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu02.mp3').identifier;\n    PresetSound.cardDraw = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/card-turn-over1.mp3').identifier;\n    PresetSound.cardPick = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;\n    PresetSound.cardPut = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;\n    PresetSound.cardShuffle = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/card-open1.mp3').identifier;\n    PresetSound.piecePick = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;\n    PresetSound.piecePut = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;\n    PresetSound.blockPick = AudioStorage.instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;\n    PresetSound.blockPut = AudioStorage.instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;\n    PresetSound.lock = AudioStorage.instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;\n    PresetSound.unlock = AudioStorage.instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;\n    PresetSound.sweep = AudioStorage.instance.add('./assets/sounds/tm2/tm2_swing003.wav').identifier;\n\n    AudioStorage.instance.get(PresetSound.dicePick).isHidden = true;\n    AudioStorage.instance.get(PresetSound.dicePut).isHidden = true;\n    AudioStorage.instance.get(PresetSound.diceRoll1).isHidden = true;\n    AudioStorage.instance.get(PresetSound.diceRoll2).isHidden = true;\n    AudioStorage.instance.get(PresetSound.cardDraw).isHidden = true;\n    AudioStorage.instance.get(PresetSound.cardPick).isHidden = true;\n    AudioStorage.instance.get(PresetSound.cardPut).isHidden = true;\n    AudioStorage.instance.get(PresetSound.cardShuffle).isHidden = true;\n    AudioStorage.instance.get(PresetSound.piecePick).isHidden = true;\n    AudioStorage.instance.get(PresetSound.piecePut).isHidden = true;\n    AudioStorage.instance.get(PresetSound.blockPick).isHidden = true;\n    AudioStorage.instance.get(PresetSound.blockPut).isHidden = true;\n    AudioStorage.instance.get(PresetSound.lock).isHidden = true;\n    AudioStorage.instance.get(PresetSound.unlock).isHidden = true;\n    AudioStorage.instance.get(PresetSound.sweep).isHidden = true;\n\n    PeerCursor.createMyCursor();\n    PeerCursor.myCursor.name = 'プレイヤー';\n    PeerCursor.myCursor.imageIdentifier = noneIconImage.identifier;\n\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', event => { this.lazyNgZoneUpdate(event.isSendFromSelf); })\n      .on('DELETE_GAME_OBJECT', event => { this.lazyNgZoneUpdate(event.isSendFromSelf); })\n      .on('SYNCHRONIZE_AUDIO_LIST', event => { if (event.isSendFromSelf) this.lazyNgZoneUpdate(false); })\n      .on('SYNCHRONIZE_FILE_LIST', event => { if (event.isSendFromSelf) this.lazyNgZoneUpdate(false); })\n      .on<AppConfig>('LOAD_CONFIG', event => {\n        console.log('LOAD_CONFIG !!!', event.data);\n        Network.setApiKey(event.data.webrtc.key);\n        Network.open();\n      })\n      .on<File>('FILE_LOADED', event => {\n        this.lazyNgZoneUpdate(false);\n      })\n      .on('OPEN_NETWORK', event => {\n        console.log('OPEN_NETWORK', event.data.peer);\n        PeerCursor.myCursor.peerId = event.data.peer;\n      })\n      .on('CLOSE_NETWORK', event => {\n        console.log('CLOSE_NETWORK', event.data.peer);\n        this.ngZone.run(async () => {\n          if (1 < Network.peerIds.length) {\n            await this.modalService.open(TextViewComponent, { title: 'ネットワークエラー', text: 'ネットワーク接続に何らかの異常が発生しました。\\nこの表示以後、接続が不安定であれば、ページリロードと再接続を試みてください。' });\n          } else {\n            await this.modalService.open(TextViewComponent, { title: 'ネットワークエラー', text: '接続情報が破棄されました。\\nこのウィンドウを閉じると再接続を試みます。' });\n            Network.open();\n          }\n        });\n      })\n      .on('CONNECT_PEER', event => {\n        if (event.isSendFromSelf) this.chatMessageService.calibrateTimeOffset();\n      })\n      .on('DISCONNECT_PEER', event => {\n        //\n      });\n  }\n\n  ngAfterViewInit() {\n    PanelService.defaultParentViewContainerRef = ModalService.defaultParentViewContainerRef = ContextMenuService.defaultParentViewContainerRef = this.modalLayerViewContainerRef;\n    setTimeout(() => {\n      this.panelService.open(PeerMenuComponent, { width: 500, height: 450, left: 100 });\n      this.panelService.open(ChatWindowComponent, { width: 700, height: 400, left: 100, top: 450 });\n    }, 0);\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  open(componentName: string) {\n    let component: { new(...args: any[]): any } = null;\n    let option: PanelOption = { width: 450, height: 600, left: 100 }\n    switch (componentName) {\n      case 'PeerMenuComponent':\n        component = PeerMenuComponent;\n        break;\n      case 'ChatWindowComponent':\n        component = ChatWindowComponent;\n        option.width = 700;\n        break;\n      case 'GameTableSettingComponent':\n        component = GameTableSettingComponent;\n        option = { width: 630, height: 400, left: 100 };\n        break;\n      case 'FileStorageComponent':\n        component = FileStorageComponent;\n        break;\n      case 'GameCharacterSheetComponent':\n        component = GameCharacterSheetComponent;\n        break;\n      case 'JukeboxComponent':\n        component = JukeboxComponent;\n        break;\n      case 'GameCharacterGeneratorComponent':\n        component = GameCharacterGeneratorComponent;\n        option = { width: 500, height: 300, left: 100 };\n        break;\n      case 'GameObjectInventoryComponent':\n        component = GameObjectInventoryComponent;\n        break;\n    }\n    if (component) {\n      option.top = (this.openPanelCount % 10 + 1) * 20;\n      option.left = 100 + (this.openPanelCount % 20 + 1) * 5;\n      this.openPanelCount = this.openPanelCount + 1;\n      this.panelService.open(component, option);\n    }\n  }\n\n  save() {\n    let roomName = Network.peerContext && 0 < Network.peerContext.roomName.length\n      ? Network.peerContext.roomName\n      : 'ルームデータ';\n    this.saveDataService.saveRoom(roomName);\n  }\n\n  handleFileSelect(event: Event) {\n    let files = (<HTMLInputElement>event.target).files;\n    if (files.length) FileArchiver.instance.load(files);\n  }\n\n  private lazyNgZoneUpdate(isImmediate: boolean) {\n    if (isImmediate) {\n      if (this.immediateUpdateTimer !== null) return;\n      this.immediateUpdateTimer = setTimeout(() => {\n        this.immediateUpdateTimer = null;\n        if (this.lazyUpdateTimer != null) {\n          clearTimeout(this.lazyUpdateTimer);\n          this.lazyUpdateTimer = null;\n        }\n        this.ngZone.run(() => { });\n      }, 0);\n    } else {\n      if (this.lazyUpdateTimer !== null) return;\n      this.lazyUpdateTimer = setTimeout(() => {\n        this.lazyUpdateTimer = null;\n        if (this.immediateUpdateTimer != null) {\n          clearTimeout(this.immediateUpdateTimer);\n          this.immediateUpdateTimer = null;\n        }\n        this.ngZone.run(() => { });\n      }, 100);\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { BadgeComponent } from 'component/badge/badge.component';\nimport { CardStackListComponent } from 'component/card-stack-list/card-stack-list.component';\nimport { CardStackComponent } from 'component/card-stack/card-stack.component';\nimport { CardComponent } from 'component/card/card.component';\nimport { ChatMessageComponent } from 'component/chat-message/chat-message.component';\nimport { ChatPaletteComponent } from 'component/chat-palette/chat-palette.component';\nimport { ChatTabSettingComponent } from 'component/chat-tab-setting/chat-tab-setting.component';\nimport { ChatTabComponent } from 'component/chat-tab/chat-tab.component';\nimport { ChatWindowComponent } from 'component/chat-window/chat-window.component';\nimport { ContextMenuComponent } from 'component/context-menu/context-menu.component';\nimport { DiceSymbolComponent } from 'component/dice-symbol/dice-symbol.component';\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\nimport { FileStorageComponent } from 'component/file-storage/file-storage.component';\nimport { GameCharacterGeneratorComponent } from 'component/game-character-generator/game-character-generator.component';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { GameCharacterComponent } from 'component/game-character/game-character.component';\nimport { GameDataElementComponent } from 'component/game-data-element/game-data-element.component';\nimport { GameObjectInventoryComponent } from 'component/game-object-inventory/game-object-inventory.component';\nimport { GameTableMaskComponent } from 'component/game-table-mask/game-table-mask.component';\nimport { GameTableSettingComponent } from 'component/game-table-setting/game-table-setting.component';\nimport { GameTableComponent } from 'component/game-table/game-table.component';\nimport { JukeboxComponent } from 'component/jukebox/jukebox.component';\nimport { LobbyComponent } from 'component/lobby/lobby.component';\nimport { ModalComponent } from 'component/modal/modal.component';\nimport { NetworkIndicatorComponent } from 'component/network-indicator/network-indicator.component';\nimport { OverviewPanelComponent } from 'component/overview-panel/overview-panel.component';\nimport { PasswordCheckComponent } from 'component/password-check/password-check.component';\nimport { PeerCursorComponent } from 'component/peer-cursor/peer-cursor.component';\nimport { PeerMenuComponent } from 'component/peer-menu/peer-menu.component';\nimport { RoomSettingComponent } from 'component/room-setting/room-setting.component';\nimport { TerrainComponent } from 'component/terrain/terrain.component';\nimport { TextNoteComponent } from 'component/text-note/text-note.component';\nimport { TextViewComponent } from 'component/text-view/text-view.component';\nimport { UIPanelComponent } from 'component/ui-panel/ui-panel.component';\nimport { DraggableDirective } from 'directive/draggable.directive';\nimport { MovableDirective } from 'directive/movable.directive';\nimport { ResizableDirective } from 'directive/resizable.directive';\nimport { RotableDirective } from 'directive/rotable.directive';\nimport { TooltipDirective } from 'directive/tooltip.directive';\nimport { SafePipe } from 'pipe/safe.pipe';\n\nimport { AppConfigService } from 'service/app-config.service';\nimport { ChatMessageService } from 'service/chat-message.service';\nimport { ContextMenuService } from 'service/context-menu.service';\nimport { GameObjectInventoryService } from 'service/game-object-inventory.service';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    BadgeComponent,\n    CardComponent,\n    CardStackComponent,\n    CardStackListComponent,\n    ChatMessageComponent,\n    ChatPaletteComponent,\n    ChatTabComponent,\n    ChatTabSettingComponent,\n    ChatWindowComponent,\n    ContextMenuComponent,\n    FileSelecterComponent,\n    FileStorageComponent,\n    GameCharacterGeneratorComponent,\n    GameCharacterSheetComponent,\n    GameCharacterComponent,\n    GameDataElementComponent,\n    GameObjectInventoryComponent,\n    GameTableMaskComponent,\n    GameTableSettingComponent,\n    GameTableComponent,\n    JukeboxComponent,\n    LobbyComponent,\n    ModalComponent,\n    OverviewPanelComponent,\n    PasswordCheckComponent,\n    PeerMenuComponent,\n    RoomSettingComponent,\n    UIPanelComponent,\n    SafePipe,\n    ChatPaletteComponent,\n    TextViewComponent,\n    TerrainComponent,\n    PeerCursorComponent,\n    TextNoteComponent,\n    MovableDirective,\n    RotableDirective,\n    NetworkIndicatorComponent,\n    DiceSymbolComponent,\n    TooltipDirective,\n    DraggableDirective,\n    ResizableDirective,\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    CommonModule,\n    FormsModule\n  ],\n  providers: [\n    AppConfigService,\n    ChatMessageService,\n    ContextMenuService,\n    ModalService,\n    GameObjectInventoryService,\n    PanelService,\n    PointerDeviceService,\n    TabletopService,\n  ],\n  entryComponents: [\n    ModalComponent,\n    UIPanelComponent,\n    PasswordCheckComponent,\n    PeerMenuComponent,\n    GameObjectInventoryComponent,\n    ChatPaletteComponent,\n    CardStackListComponent,\n    ChatTabSettingComponent,\n    ChatWindowComponent,\n    ContextMenuComponent,\n    GameTableSettingComponent,\n    FileSelecterComponent,\n    FileStorageComponent,\n    GameCharacterSheetComponent,\n    GameCharacterGeneratorComponent,\n    JukeboxComponent,\n    LobbyComponent,\n    RoomSettingComponent,\n    TextViewComponent,\n    TextNoteComponent,\n    OverviewPanelComponent,\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { AudioFile } from './core/file-storage/audio-file';\nimport { AudioPlayer } from './core/file-storage/audio-player';\nimport { AudioStorage } from './core/file-storage/audio-storage';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { GameObject, ObjectContext } from './core/synchronize-object/game-object';\nimport { EventSystem } from './core/system';\n\n@SyncObject('jukebox')\nexport class Jukebox extends GameObject {\n  @SyncVar() audioIdentifier: string = '';\n  @SyncVar() startTime: number = 0;\n  @SyncVar() isLoop: boolean = false;\n  @SyncVar() isPlaying: boolean = false;\n\n  get audio(): AudioFile { return AudioStorage.instance.get(this.audioIdentifier); }\n\n  private audioPlayer: AudioPlayer = new AudioPlayer();\n\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    this.unlockAfterUserInteraction();\n  }\n\n  // GameObject Lifecycle\n  onStoreRemoved() {\n    super.onStoreRemoved();\n    this._stop();\n  }\n\n  play(identifier: string, isLoop: boolean = false) {\n    let audio = AudioStorage.instance.get(identifier);\n    if (!audio || !audio.isReady) return;\n    this.audioIdentifier = identifier;\n    this.isPlaying = true;\n    this.isLoop = isLoop;\n    this._play();\n  }\n\n  private _play() {\n    this._stop();\n    if (!this.audio || !this.audio.isReady) {\n      this.playAfterFileUpdate();\n      return;\n    }\n    this.audioPlayer.loop = true;\n    this.audioPlayer.play(this.audio);\n  }\n\n  stop() {\n    this.audioIdentifier = '';\n    this.isPlaying = false;\n    this._stop();\n  }\n\n  private _stop() {\n    this.unregisterEvent()\n    this.audioPlayer.stop();\n  }\n\n  private playAfterFileUpdate() {\n    EventSystem.register(this)\n      .on('UPDATE_AUDIO_RESOURE', -100, event => {\n        this._play();\n      });\n  }\n\n  private unlockAfterUserInteraction() {\n    let callback = () => {\n      document.body.removeEventListener('touchstart', callback, true);\n      document.body.removeEventListener('mousedown', callback, true);\n      this.audioPlayer.stop();\n      if (this.isPlaying) this._play();\n    }\n    document.body.addEventListener('touchstart', callback, true);\n    document.body.addEventListener('mousedown', callback, true);\n  }\n\n  private unregisterEvent() {\n    EventSystem.unregister(this, 'UPDATE_AUDIO_RESOURE');\n  }\n\n  // override\n  apply(context: ObjectContext) {\n    let audioIdentifier = this.audioIdentifier;\n    let isPlaying = this.isPlaying;\n    super.apply(context);\n    if ((audioIdentifier !== this.audioIdentifier || !isPlaying) && this.isPlaying) {\n      this._play();\n    } else if (isPlaying !== this.isPlaying && !this.isPlaying) {\n      this._stop();\n    }\n  }\n}\n","import { Card } from './card';\nimport { ImageFile } from './core/file-storage/image-file';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { ObjectNode } from './core/synchronize-object/object-node';\nimport { EventSystem } from './core/system';\nimport { DataElement } from './data-element';\nimport { PeerCursor } from './peer-cursor';\nimport { TabletopObject } from './tabletop-object';\nimport { moveToTopmost } from './tabletop-object-util';\n\n@SyncObject('card-stack')\nexport class CardStack extends TabletopObject {\n  @SyncVar() rotate: number = 0;\n  @SyncVar() zindex: number = 0;\n  @SyncVar() owner: string = '';\n  @SyncVar() isShowTotal: boolean = true;\n\n  get name(): string { return this.getCommonValue('name', ''); }\n  get ownerName(): string {\n    let object = PeerCursor.find(this.owner);\n    return object ? object.name : '';\n  }\n  get hasOwner(): boolean { return PeerCursor.find(this.owner) != null; }\n\n  private get cardRoot(): ObjectNode {\n    for (let node of this.children) {\n      if (node.getAttribute('name') === 'cardRoot') return node;\n    }\n    return null;\n  }\n  get cards(): Card[] { return this.cardRoot ? <Card[]>this.cardRoot.children : []; }\n  get topCard(): Card { return this.isEmpty ? null : this.cards[0]; }\n  get isEmpty(): boolean { return this.cards.length < 1 }\n  get imageFile(): ImageFile { return this.topCard ? this.topCard.imageFile : null; }\n\n  // ObjectNode Lifecycle\n  onChildRemoved(child: ObjectNode) {\n    super.onChildRemoved(child);\n    if (child instanceof Card) {\n      EventSystem.trigger('CARD_STACK_DECREASED', { cardStackIdentifier: this.identifier, cardIdentifier: child.identifier });\n    }\n  }\n\n  shuffle(): Card[] {\n    if (!this.cardRoot) return;\n    let length = this.cardRoot.children.length;\n    for (let card of this.cards) {\n      card.index = Math.random() * length;\n      card.rotate = Math.floor(Math.random() * 2) * 180;\n      this.setSamePositionFor(card);\n    }\n    return this.cards;\n  }\n\n  drawCard(): Card {\n    let card = this.topCard ? <Card>this.cardRoot.removeChild(this.topCard) : null;\n    if (card) {\n      card.rotate += this.rotate;\n      if (360 < card.rotate) card.rotate -= 360;\n      this.setSamePositionFor(card);\n      card.toTopmost();\n    }\n    return card;\n  }\n\n  drawCardAll(): Card[] {\n    let cards = this.cards;\n    for (let card of cards) {\n      this.cardRoot.removeChild(card);\n      card.rotate += this.rotate;\n      this.setSamePositionFor(card);\n      if (360 < card.rotate) card.rotate -= 360;\n    }\n    return cards;\n  }\n\n  faceUp() {\n    if (this.topCard) {\n      this.topCard.faceUp();\n      this.setSamePositionFor(this.topCard);\n    }\n  }\n\n  faceDown() {\n    if (this.topCard) {\n      this.topCard.faceDown();\n      this.setSamePositionFor(this.topCard);\n    }\n  }\n\n  faceUpAll() {\n    for (let card of this.cards) {\n      card.faceUp();\n      this.setSamePositionFor(card);\n    }\n  }\n\n  faceDownAll() {\n    for (let card of this.cards) {\n      card.faceDown();\n      this.setSamePositionFor(card);\n    }\n  }\n\n  uprightAll() {\n    for (let card of this.cards) {\n      card.rotate = 0;\n      this.setSamePositionFor(card);\n    }\n  }\n\n  unifyCardsSize(size: number): void {\n    for (const card of this.cards) {\n      if (card.size !== size) card.size = size;\n    }\n  }\n\n  putOnTop(card: Card): Card {\n    if (!this.cardRoot) return null;\n    if (!this.topCard) return this.putOnBottom(card);\n    card.owner = '';\n    card.zindex = 0;\n    let delta = Math.abs(card.rotate - this.rotate);\n    if (180 < delta) delta = 360 - delta;\n    card.rotate = delta <= 90 ? 0 : 180;\n    this.setSamePositionFor(card);\n    return <Card>this.cardRoot.insertBefore(card, this.topCard);\n  }\n\n  putOnBottom(card: Card): Card {\n    if (!this.cardRoot) return null;\n    card.owner = '';\n    card.zindex = 0;\n    let delta = Math.abs(card.rotate - this.rotate);\n    if (180 < delta) delta = 360 - delta;\n    card.rotate = delta <= 90 ? 0 : 180;\n    this.setSamePositionFor(card);\n    return <Card>this.cardRoot.appendChild(card);\n  }\n\n  toTopmost() {\n    moveToTopmost(this, ['card']);\n  }\n\n  // override\n  setLocation(location: string) {\n    super.setLocation(location);\n    let cards = this.cards;\n    for (let card of cards) card.setLocation(location);\n  }\n\n  private setSamePositionFor(card: Card) {\n    card.location.name = this.location.name;\n    card.location.x = this.location.x;\n    card.location.y = this.location.y;\n    card.posZ = this.posZ;\n  }\n\n  static create(name: string, identifier?: string): CardStack {\n    let object: CardStack = null;\n\n    if (identifier) {\n      object = new CardStack(identifier);\n    } else {\n      object = new CardStack();\n    }\n    object.createDataElements();\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\n    let cardRoot = new ObjectNode('cardRoot_' + object.identifier);\n    cardRoot.setAttribute('name', 'cardRoot');\n    cardRoot.initialize();\n    object.appendChild(cardRoot);\n    object.initialize();\n\n    return object;\n  }\n}","import { ImageFile } from './core/file-storage/image-file';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { Network } from './core/system';\nimport { DataElement } from './data-element';\nimport { PeerCursor } from './peer-cursor';\nimport { TabletopObject } from './tabletop-object';\nimport { moveToTopmost } from './tabletop-object-util';\n\nexport enum CardState {\n  FRONT,\n  BACK,\n}\n\n@SyncObject('card')\nexport class Card extends TabletopObject {\n  @SyncVar() state: CardState = CardState.FRONT;\n  @SyncVar() rotate: number = 0;\n  @SyncVar() owner: string = '';\n  @SyncVar() zindex: number = 0;\n\n  get name(): string { return this.getCommonValue('name', ''); }\n  get size(): number { return this.getCommonValue('size', 2); }\n  set size(size: number) { this.setCommonValue('size', size); }\n  get frontImage(): ImageFile { return this.getImageFile('front'); }\n  get backImage(): ImageFile { return this.getImageFile('back'); }\n\n  get imageFile(): ImageFile { return this.isVisible ? this.frontImage : this.backImage; }\n\n  get ownerName(): string {\n    let object = PeerCursor.find(this.owner);\n    return object ? object.name : '';\n  }\n\n  get hasOwner(): boolean { return PeerCursor.find(this.owner) != null; }\n  get isHand(): boolean { return Network.peerId === this.owner; }\n  get isFront(): boolean { return this.state === CardState.FRONT; }\n  get isVisible(): boolean { return this.isHand || this.isFront; }\n\n  faceUp() {\n    this.state = CardState.FRONT;\n    this.owner = '';\n  }\n\n  faceDown() {\n    this.state = CardState.BACK;\n    this.owner = '';\n  }\n\n  toTopmost() {\n    moveToTopmost(this, ['card-stack']);\n  }\n\n  static create(name: string, fornt: string, back: string, size: number = 2, identifier?: string): Card {\n    let object: Card = null;\n\n    if (identifier) {\n      object = new Card(identifier);\n    } else {\n      object = new Card();\n    }\n    object.createDataElements();\n\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('size', size, {}, 'size_' + object.identifier));\n    object.imageDataElement.appendChild(DataElement.create('front', fornt, { type: 'image' }, 'front_' + object.identifier));\n    object.imageDataElement.appendChild(DataElement.create('back', back, { type: 'image' }, 'back_' + object.identifier));\n    object.initialize();\n\n    return object;\n  }\n}","import { ImageFile } from './core/file-storage/image-file';\nimport { ImageStorage } from './core/file-storage/image-storage';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { ObjectNode } from './core/synchronize-object/object-node';\nimport { Network } from './core/system';\n\nexport interface ChatMessageContext {\n  identifier?: string;\n  tabIdentifier?: string;\n  originFrom?: string;\n  from?: string;\n  to?: string;\n  name?: string;\n  text?: string;\n  timestamp?: number;\n  tag?: string;\n  dicebot?: string;\n  imageIdentifier?: string;\n}\n\n@SyncObject('chat')\nexport class ChatMessage extends ObjectNode implements ChatMessageContext {\n  @SyncVar() originFrom: string;\n  @SyncVar() from: string;\n  @SyncVar() to: string;\n  @SyncVar() name: string;\n  @SyncVar() tag: string;\n  @SyncVar() dicebot: string;\n  @SyncVar() imageIdentifier: string;\n\n  get tabIdentifier(): string { return this.parent.identifier; }\n  get text(): string { return <string>this.value }\n  get timestamp(): number {\n    let timestamp = this.getAttribute('timestamp');\n    let num = timestamp ? +timestamp : 0;\n    return Number.isNaN(num) ? 1 : num;\n  }\n  private _to: string;\n  private _sendTo: string[] = [];\n  get sendTo(): string[] {\n    if (this._to !== this.to) {\n      this._to = this.to;\n      this._sendTo = this.to != null && 0 < this.to.trim().length ? this.to.trim().split(/\\s+/) : [];\n    }\n    return this._sendTo;\n  }\n  private _tag: string;\n  private _tags: string[] = [];\n  get tags(): string[] {\n    if (this._tag !== this.tag) {\n      this._tag = this.tag;\n      this._tags = this.tag != null && 0 < this.tag.trim().length ? this.tag.trim().split(/\\s+/) : [];\n    }\n    return this._tags;\n  }\n  get image(): ImageFile { return ImageStorage.instance.get(this.imageIdentifier); }\n  get index(): number { return this.minorIndex + this.timestamp; }\n  get isDirect(): boolean { return 0 < this.sendTo.length ? true : false; }\n  get isSendFromSelf(): boolean { return this.from === Network.peerContext.id || this.originFrom === Network.peerContext.id; }\n  get isRelatedToMe(): boolean { return (-1 < this.sendTo.indexOf(Network.peerContext.id)) || this.isSendFromSelf ? true : false; }\n  get isDisplayable(): boolean { return this.isDirect ? this.isRelatedToMe : true; }\n  get isSystem(): boolean { return -1 < this.tags.indexOf('system') ? true : false; }\n  get isDicebot(): boolean { return this.isSystem && this.from === 'System-BCDice' ? true : false; }\n  get isSecret(): boolean { return -1 < this.tags.indexOf('secret') ? true : false; }\n}\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { ObjectContext } from './core/synchronize-object/game-object';\nimport { ObjectNode } from './core/synchronize-object/object-node';\nimport { StringUtil } from './core/system/util/string-util';\nimport { DataElement } from './data-element';\n\nexport interface PaletteLine {\n  palette: string;\n}\n\nexport interface PaletteVariable {\n  name: string;\n  value: string;\n}\n\n@SyncObject('chat-palette')\nexport class ChatPalette extends ObjectNode {\n  @SyncVar() dicebot: string = '';\n  //TODO: キャラシ項目のコピー\n\n  get paletteLines(): PaletteLine[] {\n    if (!this.isAnalized) this.parse(<string>this.value);\n    return this._paletteLines;\n  }\n\n  get paletteVariables(): PaletteVariable[] {\n    if (!this.isAnalized) this.parse(<string>this.value);\n    return this._paletteVariables;\n  }\n\n  private _palettes: string[] = [];\n  private _paletteLines: PaletteLine[] = [];\n  private _paletteVariables: PaletteVariable[] = [];\n  private isAnalized: boolean = false;\n\n  getPalette(): string[] {\n    if (!this.isAnalized) this.parse(<string>this.value);\n    return this._palettes;\n  }\n\n  setPalette(paletteSource: string) {\n    this.value = paletteSource;\n    this.isAnalized = false;\n  }\n\n  evaluate(line: PaletteLine, extendVariables?: DataElement): string\n  evaluate(line: string, extendVariables?: DataElement): string\n  evaluate(line: any, extendVariables?: DataElement): string {\n    let evaluate: string = '';\n    if (typeof line === 'string') {\n      evaluate = line;\n    } else {\n      evaluate = line.palette;\n    }\n    evaluate = StringUtil.toHalfWidth(evaluate);\n\n    console.log(evaluate);\n    let limit = 128;\n    let loop = 0;\n    let isContinue = true;\n    while (isContinue) {\n      loop++;\n      isContinue = false;\n      evaluate = evaluate.replace(/\\{\\s*([^\\{\\}]+)\\s*\\}/g, (match, name) => {\n        console.log(name);\n        isContinue = true;\n        for (let variable of this.paletteVariables) {\n          if (variable.name == name) return variable.value;\n        }\n        if (extendVariables) {\n          let element = extendVariables.getFirstElementByName(name);\n          if (element) return element.isNumberResource ? element.currentValue + '' : element.value + '';\n        }\n        return '';\n      });\n      if (limit < loop) isContinue = false;\n    }\n    return evaluate;\n  }\n\n  private parse(paletteSource: string) {\n    this._palettes = paletteSource.split('\\n');\n\n    this._paletteLines = [];\n    this._paletteVariables = [];\n\n    for (let palette of this._palettes) {\n      let variable = this.parseVariable(palette);\n      if (variable) {\n        this._paletteVariables.push(variable);\n        continue;\n      }\n      let line: PaletteLine = { palette: palette };\n      this._paletteLines.push(line);\n    }\n    this.isAnalized = true;\n  }\n\n  private parseVariable(palette: string): PaletteVariable {\n    palette = StringUtil.toHalfWidth(palette);\n    let array = /^\\s*\\/\\/([^=\\{\\}\\s]+)\\s*=\\s*(.+)\\s*/gi.exec(palette);\n    if (!array) return null;\n    let variable: PaletteVariable = {\n      name: array[1],\n      value: array[2]\n    }\n    return variable;\n  }\n\n  // override\n  apply(context: ObjectContext) {\n    super.apply(context);\n    this.isAnalized = false;\n  }\n}","import { ChatTab } from './chat-tab';\nimport { SyncObject } from './core/synchronize-object/decorator';\nimport { GameObject } from './core/synchronize-object/game-object';\nimport { ObjectNode } from './core/synchronize-object/object-node';\nimport { InnerXml } from './core/synchronize-object/object-serializer';\nimport { ObjectStore } from './core/synchronize-object/object-store';\n\n@SyncObject('chat-tab-list')\nexport class ChatTabList extends ObjectNode implements InnerXml {\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    ObjectStore.instance.remove(this); // ObjectStoreには登録しない\n  }\n\n  innerXml(): string {\n    let xml = '';\n    let gameObjects: GameObject[] = ObjectStore.instance.getObjects(ChatTab);\n    for (let gameObject of gameObjects.concat()) {\n      xml += gameObject.toXml();\n    }\n    return xml;\n  }\n\n  parseInnerXml(element: Element) {\n    let gameObjects: GameObject[] = ObjectStore.instance.getObjects(ChatTab);\n    for (let gameObject of gameObjects.concat()) {\n      gameObject.destroy();\n    }\n    super.parseInnerXml(element);\n  }\n}","import { ChatMessage, ChatMessageContext } from './chat-message';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { ObjectNode } from './core/synchronize-object/object-node';\nimport { InnerXml, ObjectSerializer } from './core/synchronize-object/object-serializer';\nimport { EventSystem } from './core/system';\n\n@SyncObject('chat-tab')\nexport class ChatTab extends ObjectNode implements InnerXml {\n  @SyncVar() name: string = 'タブ';\n  get chatMessages(): ChatMessage[] { return <ChatMessage[]>this.children; }\n\n  private _unreadLength: number = 0;\n  get unreadLength(): number { return this._unreadLength; }\n  get hasUnread(): boolean { return 0 < this.unreadLength; }\n\n  get latestTimeStamp(): number {\n    let lastIndex = this.chatMessages.length - 1;\n    return lastIndex < 0 ? 0 : this.chatMessages[lastIndex].timestamp;\n  }\n\n  // ObjectNode Lifecycle\n  onChildAdded(child: ObjectNode) {\n    super.onChildAdded(child);\n    if (child.parent === this && child instanceof ChatMessage && child.isDisplayable) {\n      this._unreadLength++;\n      EventSystem.trigger('MESSAGE_ADDED', { tabIdentifier: this.identifier, messageIdentifier: child.identifier });\n    }\n  }\n\n  addMessage(message: ChatMessageContext): ChatMessage {\n    message.tabIdentifier = this.identifier;\n\n    let chat = new ChatMessage();\n    for (let key in message) {\n      if (key === 'identifier') continue;\n      if (key === 'tabIdentifier') continue;\n      if (key === 'text') {\n        chat.value = message[key];\n        continue;\n      }\n      if (message[key] == null || message[key] === '') continue;\n      chat.setAttribute(key, message[key]);\n    }\n    chat.initialize();\n    EventSystem.trigger('SEND_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });\n    this.appendChild(chat);\n    return chat;\n  }\n\n  markForRead() {\n    this._unreadLength = 0;\n  }\n\n  innerXml(): string {\n    let xml = '';\n    for (let child of this.children) {\n      if (child instanceof ChatMessage && !child.isDisplayable) continue;\n      xml += ObjectSerializer.instance.toXml(child);\n    }\n    return xml;\n  };\n\n  parseInnerXml(element: Element) {\n    return super.parseInnerXml(element);\n  };\n}","import { FileReaderUtil } from './file-reader-util';\n\nexport enum AudioState {\n  NULL = 0,\n  THUMBNAIL = 1,\n  COMPLETE = 2,\n  URL = 1000,\n}\n\nexport interface AudioFileContext {\n  identifier: string;\n  name: string;\n  type: string;\n  blob: Blob;\n  url: string;\n}\n\nexport class AudioFile {\n  private context: AudioFileContext = {\n    identifier: '',\n    name: '',\n    blob: null,\n    type: '',\n    url: ''\n  };\n\n  get identifier(): string { return this.context.identifier };\n  get name(): string { return this.context.name };\n  get blob(): Blob { return this.context.blob; };\n  get url(): string { return this.context.url; };\n  get isReady(): boolean { return AudioState.NULL < this.state; }\n  get state(): AudioState {\n    if (!this.url && !this.blob) return AudioState.NULL;\n    if (this.url && !this.blob) return AudioState.URL;\n    return AudioState.COMPLETE;\n  }\n\n  isHidden: boolean = false;\n\n  private constructor() { }\n\n  static createEmpty(identifier: string): AudioFile {\n    let audio = new AudioFile();\n    audio.context.identifier = identifier;\n\n    return audio;\n  }\n\n  static create(url: string): AudioFile\n  static create(context: AudioFileContext): AudioFile\n  static create(arg: any): AudioFile {\n    if (typeof arg === 'string') {\n      let audio = new AudioFile();\n      audio.context.identifier = arg;\n      audio.context.name = arg;\n      audio.context.url = arg;\n      return audio;\n    } else {\n      let audio = new AudioFile();\n      audio.apply(arg);\n      return audio;\n    }\n  }\n\n  static async createAsync(file: File): Promise<AudioFile>\n  static async createAsync(blob: Blob): Promise<AudioFile>\n  static async createAsync(arg: any): Promise<AudioFile> {\n    if (arg instanceof File) {\n      return await AudioFile._createAsync(arg, arg.name);\n    } else if (arg instanceof Blob) {\n      return await AudioFile._createAsync(arg);\n    }\n  }\n\n  private static async _createAsync(blob: Blob, name?: string): Promise<AudioFile> {\n    let arrayBuffer = await FileReaderUtil.readAsArrayBufferAsync(blob);\n\n    let audio = new AudioFile();\n    audio.context.identifier = await FileReaderUtil.calcSHA256Async(arrayBuffer);\n    audio.context.name = name;\n    audio.context.blob = new Blob([arrayBuffer], { type: blob.type });\n    audio.context.type = audio.context.blob.type;\n    audio.context.url = window.URL.createObjectURL(audio.context.blob);\n\n    if (!audio.context.name) audio.context.name = audio.context.identifier;\n\n    return audio;\n  }\n\n  destroy() {\n    this.revokeURLs();\n  }\n\n  apply(context: AudioFileContext) {\n    if (!this.context.identifier && context.identifier) this.context.identifier = context.identifier;\n    if (context.name) this.context.name = context.name;\n    if (!this.context.blob && context.blob) this.context.blob = context.blob;\n    if (!this.context.type && context.type) this.context.type = context.type;\n    if (!this.context.url && context.url) {\n      if (this.state !== AudioState.URL) window.URL.revokeObjectURL(this.context.url);\n      this.context.url = context.url;\n    }\n    this.createURLs();\n  }\n\n  private createURLs() {\n    if (this.state === AudioState.URL) return;\n    if (this.context.blob && this.context.url === '') this.context.url = window.URL.createObjectURL(this.context.blob);\n  }\n\n  private revokeURLs() {\n    if (this.state === AudioState.URL) return;\n    window.URL.revokeObjectURL(this.context.url);\n  }\n\n  toContext(): AudioFileContext {\n    return {\n      identifier: this.context.identifier,\n      name: this.context.name,\n      blob: this.context.blob,\n      type: this.context.type,\n      url: this.context.url\n    }\n  }\n}","import { AudioFile, AudioState } from './audio-file';\nimport { FileReaderUtil } from './file-reader-util';\n\nexport enum VolumeType {\n  MASTER,\n  AUDITION,\n}\n\ndeclare global {\n  interface Window {\n    AudioContext: typeof AudioContext;\n    webkitAudioContext: typeof AudioContext;\n  }\n}\n\ntype AudioCache = { url: string, blob: Blob };\n\nexport class AudioPlayer {\n  private static _audioContext: AudioContext\n  static get audioContext(): AudioContext {\n    if (!AudioPlayer._audioContext) AudioPlayer._audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    return AudioPlayer._audioContext;\n  }\n\n  private static _volume: number = 0.5;\n  static get volume(): number { return AudioPlayer._volume; }\n  static set volume(volume: number) {\n    AudioPlayer._volume = volume;\n    AudioPlayer.masterGainNode.gain.setTargetAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime, 0.01);\n  }\n\n  private static _auditionVolume: number = 0.5;\n  static get auditionVolume(): number { return AudioPlayer._auditionVolume; }\n  static set auditionVolume(auditionVolume: number) {\n    AudioPlayer._auditionVolume = auditionVolume;\n    AudioPlayer.auditionGainNode.gain.setTargetAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime, 0.01);\n  }\n\n  private static _masterGainNode: GainNode\n  private static get masterGainNode(): GainNode {\n    if (!AudioPlayer._masterGainNode) {\n      let masterGain = AudioPlayer.audioContext.createGain();\n      masterGain.gain.setValueAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime);\n      masterGain.connect(AudioPlayer.audioContext.destination);\n      AudioPlayer._masterGainNode = masterGain;\n    }\n    return AudioPlayer._masterGainNode;\n  }\n\n  private static _auditionGainNode: GainNode\n  private static get auditionGainNode(): GainNode {\n    if (!AudioPlayer._auditionGainNode) {\n      let auditionGain = AudioPlayer.audioContext.createGain();\n      auditionGain.gain.setValueAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime);\n      auditionGain.connect(AudioPlayer.audioContext.destination);\n      AudioPlayer._auditionGainNode = auditionGain;\n    }\n    return AudioPlayer._auditionGainNode;\n  }\n\n  static get rootNode(): AudioNode { return AudioPlayer.masterGainNode; }\n  static get auditionNode(): AudioNode { return AudioPlayer.auditionGainNode; }\n\n  private _audioElm: HTMLAudioElement;\n  private get audioElm(): HTMLAudioElement {\n    if (!this._audioElm) {\n      this._audioElm = new Audio();\n      this._audioElm.onplay = () => { }\n      this._audioElm.onpause = () => { this.mediaElementSource.disconnect(); }\n      this._audioElm.onended = () => { this.mediaElementSource.disconnect(); }\n    }\n    return this._audioElm;\n  }\n\n  private _mediaElementSource: MediaElementAudioSourceNode;\n  private get mediaElementSource(): MediaElementAudioSourceNode {\n    if (!this._mediaElementSource) this._mediaElementSource = AudioPlayer.audioContext.createMediaElementSource(this.audioElm);\n    return this._mediaElementSource;\n  }\n\n  audio: AudioFile;\n  volumeType: VolumeType = VolumeType.MASTER;\n\n  get volume(): number { return this.audioElm.volume; }\n  set volume(volume) { this.audioElm.volume = volume; }\n  get loop(): boolean { return this.audioElm.loop; }\n  set loop(loop) { this.audioElm.loop = loop; }\n  get paused(): boolean { return this.audioElm.paused; }\n\n  private static cacheMap: Map<string, AudioCache> = new Map();\n\n  constructor(audio?: AudioFile) {\n    this.audio = audio;\n  }\n\n  static play(audio: AudioFile, volume: number = 1.0) {\n    this.playBufferAsync(audio, volume);\n  }\n\n  play(audio: AudioFile = this.audio) {\n    this.stop();\n    this.audio = audio;\n    if (!this.audio) return;\n\n    let url = this.audio.url;\n\n    if (audio.state === AudioState.URL) {\n      if (AudioPlayer.cacheMap.has(audio.identifier)) {\n        url = AudioPlayer.cacheMap.get(audio.identifier).url;\n      } else {\n        AudioPlayer.createCacheAsync(audio);\n      }\n    }\n\n    this.mediaElementSource.connect(this.getConnectingAudioNode());\n    this.audioElm.src = url;\n    this.audioElm.load();\n    this.audioElm.play().catch(reason => { console.warn(reason); });\n  }\n\n  pause() {\n    this.audioElm.pause();\n  }\n\n  stop() {\n    if (!this.audioElm) return;\n    this.pause();\n    this.audioElm.currentTime = 0;\n    this.audioElm.src = '';\n    this.audioElm.load();\n    this.mediaElementSource.disconnect();\n  }\n\n  private getConnectingAudioNode() {\n    switch (this.volumeType) {\n      case VolumeType.AUDITION:\n        return AudioPlayer.auditionNode;\n      default:\n        return AudioPlayer.rootNode;\n    }\n  }\n\n  private static async playBufferAsync(audio: AudioFile, volume: number = 1.0) {\n    let source = await AudioPlayer.createBufferSourceAsync(audio);\n    if (!source) return;\n\n    let gain = AudioPlayer.audioContext.createGain();\n    gain.gain.setValueAtTime(volume, AudioPlayer.audioContext.currentTime);\n\n    gain.connect(AudioPlayer.rootNode);\n    source.connect(gain);\n\n    source.onended = () => {\n      source.stop();\n      source.disconnect();\n      gain.disconnect();\n      source.buffer = null;\n    };\n\n    source.start();\n  }\n\n  private static async createBufferSourceAsync(audio: AudioFile): Promise<AudioBufferSourceNode> {\n    if (!audio) return null;\n    try {\n      let blob = audio.blob;\n      if (audio.state === AudioState.URL) {\n        if (AudioPlayer.cacheMap.has(audio.identifier)) {\n          blob = AudioPlayer.cacheMap.get(audio.identifier).blob;\n        } else {\n          let cache = await AudioPlayer.createCacheAsync(audio);\n          blob = cache && cache.blob ? cache.blob : null;\n        }\n      }\n      if (!blob) return null;\n      let decodedData = await this.decodeAudioDataAsync(blob);\n      let source = AudioPlayer.audioContext.createBufferSource();\n      source.buffer = decodedData;\n      return source;\n    } catch (reason) {\n      console.warn(reason);\n      return null;\n    }\n  }\n\n  private static decodeAudioDataAsync(blob: Blob): Promise<AudioBuffer> {\n    return new Promise(async (resolve, reject) => {\n      AudioPlayer.audioContext.decodeAudioData(\n        await FileReaderUtil.readAsArrayBufferAsync(blob),\n        decodedData => resolve(decodedData),\n        error => reject(error));\n    });\n  }\n\n  private static async getBlobAsync(audio: AudioFile): Promise<Blob> {\n    if (audio.blob) return audio.blob;\n    if (audio.url.length < 1) throw new Error('えっ なにそれ怖い');\n\n    try {\n      let response = await fetch(audio.url);\n      if (!response.ok) throw new Error('Network response was not ok.');\n      let blob = await response.blob();\n      return blob;\n    } catch (error) {\n      console.warn('There has been a problem with your fetch operation: ', error.message);\n      throw error;\n    }\n  }\n\n  private static async createCacheAsync(audio: AudioFile): Promise<AudioCache> {\n    let cache = { url: audio.url, blob: null };\n    try {\n      cache.blob = await AudioPlayer.getBlobAsync(audio);\n    } catch (e) {\n      console.error(e);\n      return cache;\n    }\n\n    if (AudioPlayer.cacheMap.has(audio.identifier)) {\n      return AudioPlayer.cacheMap.get(audio.identifier);\n    }\n\n    cache.url = URL.createObjectURL(cache.blob);\n    AudioPlayer.cacheMap.set(audio.identifier, cache);\n    return cache;\n  }\n\n  static resumeAudioContext() {\n    AudioPlayer.audioContext.resume();\n    let callback = () => {\n      AudioPlayer.audioContext.resume();\n      document.removeEventListener('touchstart', callback, true);\n      document.removeEventListener('mousedown', callback, true);\n      console.log('resumeAudioContext');\n    }\n    document.addEventListener('touchstart', callback, true);\n    document.addEventListener('mousedown', callback, true);\n  }\n}\n","import { EventSystem, Network } from '../system';\nimport { AudioFile, AudioFileContext, AudioState } from './audio-file';\nimport { AudioStorage, CatalogItem } from './audio-storage';\nimport { BufferSharingTask } from './buffer-sharing-task';\nimport { FileReaderUtil } from './file-reader-util';\n\nexport class AudioSharingSystem {\n  private static _instance: AudioSharingSystem\n  static get instance(): AudioSharingSystem {\n    if (!AudioSharingSystem._instance) AudioSharingSystem._instance = new AudioSharingSystem();\n    return AudioSharingSystem._instance;\n  }\n\n  private taskMap: Map<string, BufferSharingTask<AudioFileContext>> = new Map();\n  private maxTransmission: number = 1;\n\n  private constructor() { }\n\n  initialize() {\n    console.log('AudioSharingSystem ready...');\n    this.destroy();\n    EventSystem.register(this)\n      .on('CONNECT_PEER', -1, event => {\n        if (!event.isSendFromSelf) return;\n        console.log('CONNECT_PEER AudioStorageService !!!', event.data.peer);\n        AudioStorage.instance.synchronize();\n      })\n      .on('SYNCHRONIZE_AUDIO_LIST', event => {\n        if (event.isSendFromSelf) return;\n        console.log('SYNCHRONIZE_AUDIO_LIST ' + event.sendFrom);\n\n        let otherCatalog: CatalogItem[] = event.data;\n        let request: CatalogItem[] = [];\n\n        console.log('SYNCHRONIZE_AUDIO_LIST active tasks ', this.taskMap.size);\n        for (let item of otherCatalog) {\n          let audio: AudioFile = AudioStorage.instance.get(item.identifier);\n          if (audio === null) {\n            audio = AudioFile.createEmpty(item.identifier);\n            AudioStorage.instance.add(audio);\n          }\n          if (audio.state < AudioState.COMPLETE && !this.taskMap.has[item.identifier]) {\n            request.push({ identifier: item.identifier, state: audio.state });\n          }\n        }\n\n        if (request.length < 1 && otherCatalog.length < AudioStorage.instance.getCatalog().length) {\n          AudioStorage.instance.synchronize(event.sendFrom);\n        }\n\n        if (request.length < 1 || this.isTransmission()) {\n          return;\n        }\n        let index = Math.floor(Math.random() * request.length);\n        this.request([request[index]], event.sendFrom);\n      })\n      .on('REQUEST_AUDIO_RESOURE', event => {\n        if (event.isSendFromSelf) return;\n\n        let request: CatalogItem[] = event.data.identifiers;\n        let randomRequest: CatalogItem[] = [];\n\n        for (let item of request) {\n          let audio: AudioFile = AudioStorage.instance.get(item.identifier);\n          if (item.state < audio.state) randomRequest.push({ identifier: item.identifier, state: item.state });\n        }\n\n        if (this.isTransmission() === false && 0 < randomRequest.length) {\n          // 送信\n          console.log('REQUEST_AUDIO_RESOURE Send!!! ' + event.data.receiver + ' -> ' + randomRequest);\n          let index = Math.floor(Math.random() * randomRequest.length);\n          let item: { identifier: string, state: number } = randomRequest[index];\n          let audio: AudioFile = AudioStorage.instance.get(item.identifier);\n          this.startSendTransmission(audio, event.data.receiver);\n        } else {\n          // 中継\n          let candidatePeers: string[] = event.data.candidatePeers;\n          let index = candidatePeers.indexOf(Network.peerId);\n          if (-1 < index) candidatePeers.splice(index, 1);\n\n          for (let peer of candidatePeers) {\n            console.log('REQUEST_AUDIO_RESOURE AudioStorageService Relay!!! ' + peer + ' -> ' + event.data.identifiers);\n            EventSystem.call(event, peer);\n            return;\n          }\n          console.log('REQUEST_FILE_RESOURE ImageStorageService あぶれた...' + event.data.receiver, randomRequest.length, this.taskMap);\n        }\n      })\n      .on('STOP_AUDIO_TRANSMISSION', event => {\n        let identifier: string = event.data.identifier;\n        this.stopTransmission(identifier);\n        AudioStorage.instance.synchronize();\n        console.log('STOP_AUDIO_TRANSMISSION ' + identifier, this.taskMap.size);\n      })\n      .on('UPDATE_AUDIO_RESOURE', event => {\n        let updateAudios: AudioFileContext[] = event.data;\n        console.log('UPDATE_AUDIO_RESOURE AudioStorageService ' + event.sendFrom + ' -> ', updateAudios);\n        for (let context of updateAudios) {\n          if (context.blob) context.blob = new Blob([context.blob], { type: context.type });\n          AudioStorage.instance.add(context);\n        }\n      })\n      .on('START_AUDIO_TRANSMISSION', event => {\n        console.log('START_AUDIO_TRANSMISSION ' + event.data.fileIdentifier, this.isTransmission());\n        let identifier: string = event.data.fileIdentifier;\n        if (this.isTransmission() || this.taskMap.has(identifier)) {\n          EventSystem.call('STOP_AUDIO_TRANSMISSION', { identifier: identifier }, event.sendFrom);\n        } else {\n          this.startReceiveTransmission(identifier);\n        }\n      });\n  }\n\n  private destroy() {\n    EventSystem.unregister(this);\n  }\n\n  private async startSendTransmission(audio: AudioFile, sendTo: string) {\n    this.taskMap.set(audio.identifier, null);\n\n    EventSystem.call('START_AUDIO_TRANSMISSION', { fileIdentifier: audio.identifier }, sendTo);\n\n    let context: AudioFileContext = {\n      identifier: audio.identifier,\n      name: audio.name,\n      blob: null,\n      type: '',\n      url: null\n    };\n\n    if (audio.state === AudioState.URL) {\n      context.url = audio.url;\n    } else {\n      context.blob = <any>await FileReaderUtil.readAsArrayBufferAsync(audio.blob);\n      context.type = audio.blob.type;\n    }\n\n    let task = await BufferSharingTask.createSendTask(context, sendTo, audio.identifier);\n    this.taskMap.set(audio.identifier, task);\n\n    task.onfinish = () => {\n      this.stopTransmission(task.identifier);\n      AudioStorage.instance.synchronize();\n    }\n    task.ontimeout = () => {\n      this.stopTransmission(task.identifier);\n      AudioStorage.instance.synchronize();\n    }\n  }\n\n  private startReceiveTransmission(identifier: string) {\n    this.stopTransmission(identifier);\n    if (this.taskMap.has(identifier)) return;\n\n    let audio: AudioFile = AudioStorage.instance.get(identifier);\n    let task = BufferSharingTask.createReceiveTask<AudioFileContext>(identifier);\n    this.taskMap.set(identifier, task);\n\n    task.onprogress = (task, loded, total) => {\n      let context = audio.toContext();\n      context.name = (loded * 100 / total).toFixed(1) + '%';\n      audio.apply(context);\n    }\n    task.onfinish = (task, data) => {\n      this.stopTransmission(task.identifier);\n      EventSystem.trigger('UPDATE_AUDIO_RESOURE', [data]);\n      AudioStorage.instance.synchronize();\n    }\n    task.ontimeout = () => {\n      this.stopTransmission(task.identifier);\n      AudioStorage.instance.synchronize();\n    }\n    console.log('startFileTransmission => ', this.taskMap.size);\n  }\n\n  private stopTransmission(identifier: string) {\n    let task = this.taskMap.get(identifier);\n    if (task) { task.cancel(); }\n    this.taskMap.delete(identifier);\n\n    console.log('stopFileTransmission => ', this.taskMap.size);\n  }\n\n  private request(request: CatalogItem[], peer: string) {\n    console.log('requestFile() ' + peer);\n    let peers = Network.peerIds;\n    peers.splice(peers.indexOf(Network.peerId), 1);\n    EventSystem.call('REQUEST_AUDIO_RESOURE', { identifiers: request, receiver: Network.peerId, candidatePeers: peers }, peer);\n  }\n\n  private isTransmission(): boolean {\n    if (this.maxTransmission <= this.taskMap.size) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n","import { EventSystem } from '../system';\nimport { AudioFile, AudioFileContext, AudioState } from './audio-file';\n\nexport type CatalogItem = { identifier: string, state: number };\n\nexport class AudioStorage {\n  private static _instance: AudioStorage\n  static get instance(): AudioStorage {\n    if (!AudioStorage._instance) AudioStorage._instance = new AudioStorage();\n    return AudioStorage._instance;\n  }\n\n  private lazyTimer: NodeJS.Timer;\n  private hash: { [identifier: string]: AudioFile } = {};\n\n  get audios(): AudioFile[] {\n    let audios: AudioFile[] = [];\n    for (let identifier in this.hash) {\n      audios.push(this.hash[identifier]);\n    }\n    return audios;\n  }\n\n  private constructor() {\n    console.log('AudioStorage ready...');\n  }\n\n  private destroy() {\n    for (let identifier in this.hash) {\n      this.delete(identifier);\n    }\n  }\n\n  async addAsync(file: File): Promise<AudioFile>\n  async addAsync(blob: Blob): Promise<AudioFile>\n  async addAsync(arg: any): Promise<AudioFile> {\n    let audio: AudioFile = await AudioFile.createAsync(arg);\n\n    return this._add(audio);\n  }\n\n  add(url: string): AudioFile\n  add(audio: AudioFile): AudioFile\n  add(context: AudioFileContext): AudioFile\n  add(arg: any): AudioFile {\n    let audio: AudioFile\n    if (typeof arg === 'string') {\n      audio = AudioFile.create(arg);\n    } else if (arg instanceof AudioFile) {\n      audio = arg;\n    } else {\n      if (this.update(arg)) return this.hash[arg.identifier];\n      audio = AudioFile.create(arg);\n    }\n    return this._add(audio);\n  }\n\n  private _add(audio: AudioFile): AudioFile {\n    this.lazySynchronize(100);\n    if (this.update(audio)) return this.hash[audio.identifier];\n    this.hash[audio.identifier] = audio;\n    console.log('addNewFile()', audio);\n    return audio;\n  }\n\n  private update(audio: AudioFile): boolean\n  private update(audio: AudioFileContext): boolean\n  private update(audio: any): boolean {\n    let context: AudioFileContext;\n    if (audio instanceof AudioFile) {\n      context = audio.toContext();\n    } else {\n      context = audio;\n    }\n    let updateAudio: AudioFile = this.hash[audio.identifier];\n    if (updateAudio) {\n      updateAudio.apply(audio);\n      return true;\n    }\n    return false;\n  }\n\n  delete(identifier: string): boolean {\n    let audio: AudioFile = this.hash[identifier];\n    if (audio) {\n      audio.destroy();\n      delete this.hash[identifier];\n      return true;\n    }\n    return false;\n  }\n\n  get(identifier: string): AudioFile {\n    let audio: AudioFile = this.hash[identifier];\n    if (audio) return audio;\n    return null;\n  }\n\n  synchronize(peer?: string) {\n    clearTimeout(this.lazyTimer);\n    this.lazyTimer = null;\n    EventSystem.call('SYNCHRONIZE_AUDIO_LIST', this.getCatalog(), peer);\n  }\n\n  lazySynchronize(ms: number, peer?: string) {\n    clearTimeout(this.lazyTimer);\n    this.lazyTimer = setTimeout(() => {\n      this.synchronize(peer);\n    }, ms);\n  }\n\n  getCatalog(): CatalogItem[] {\n    let catalog: CatalogItem[] = [];\n    for (let audio of AudioStorage.instance.audios) {\n      if (AudioState.COMPLETE <= audio.state) {\n        catalog.push({ identifier: audio.identifier, state: audio.state });\n      }\n    }\n    return catalog;\n  }\n}\n","import * as MessagePack from 'msgpack-lite';\n\nimport { EventSystem } from '../system';\nimport { setZeroTimeout } from '../system/util/zero-timeout';\nimport { FileReaderUtil } from './file-reader-util';\n\ninterface ChankData {\n  index: number;\n  length: number;\n  chank: Uint8Array;\n}\n\nexport class BufferSharingTask<T> {\n  private _identifier: string;\n  get identifier(): string { return this._identifier };\n  private _sendTo: string;\n  get sendTo(): string { return this._sendTo };\n\n  private data: T;\n  private uint8Array: Uint8Array;\n  private chanks: Uint8Array[] = [];\n  private chankSize: number = 32 * 1024;\n  private chankReceiveCount: number = 0;\n  private sendChankTimer: number;\n\n  private sentChankIndex = 0;\n  private completedChankIndex = 0;\n\n  private startTime = 0;\n\n  onprogress: (task: BufferSharingTask<T>, loded: number, total: number) => void;\n  onfinish: (task: BufferSharingTask<T>, data: T) => void;\n  ontimeout: (task: BufferSharingTask<T>) => void;\n  oncancel: (task: BufferSharingTask<T>) => void;\n\n  private timeoutTimer: NodeJS.Timer;\n\n  private constructor(data?: T, sendTo?: string) {\n    this.data = data;\n    this.uint8Array = MessagePack.encode(data);\n    this._sendTo = sendTo;\n  }\n\n  static async createSendTask<T>(data: T, sendTo: string, identifier?: string): Promise<BufferSharingTask<T>> {\n    let task = new BufferSharingTask(data, sendTo);\n    task._identifier = identifier != null ? identifier : await FileReaderUtil.calcSHA256Async(task.uint8Array);\n    task.initializeSend();\n    return task;\n  }\n\n  static createReceiveTask<T>(identifier: string): BufferSharingTask<T> {\n    let task = new BufferSharingTask<T>();\n    task._identifier = identifier;\n    task.initializeReceive();\n    return task;\n  }\n\n  cancel() {\n    this.dispose();\n    if (this.oncancel) this.oncancel(this);\n  }\n\n  private dispose() {\n    EventSystem.unregister(this);\n    clearTimeout(this.sendChankTimer);\n    clearTimeout(this.timeoutTimer);\n    this.onprogress = this.onfinish = this.ontimeout = this.oncancel = null;\n  }\n\n  private initializeSend() {\n    let total = Math.ceil(this.uint8Array.byteLength / this.chankSize);\n    this.chanks = new Array(total);\n\n    console.log('チャンク分割 ' + this.identifier, this.chanks.length);\n\n    EventSystem.register(this)\n      .on<number>('FILE_MORE_CHANK_' + this.identifier, event => {\n        if (this.sendTo !== event.sendFrom) return;\n        this.completedChankIndex = event.data;\n        if (this.sendChankTimer == null) {\n          clearTimeout(this.timeoutTimer);\n          this.sendChank(this.sentChankIndex + 1);\n        }\n      })\n      .on('DISCONNECT_PEER', event => {\n        if (event.data.peer !== this.sendTo) return;\n        console.warn('送信キャンセル', this, event.data.peer);\n        if (this.ontimeout) this.ontimeout(this);\n        if (this.onfinish) this.onfinish(this, this.data);\n        this.dispose();\n      });\n    this.sentChankIndex = this.completedChankIndex = 0;\n    setZeroTimeout(() => this.sendChank(0));\n  }\n\n  private sendChank(index: number) {\n    let chank = this.uint8Array.slice(index * this.chankSize, (index + 1) * this.chankSize);\n    let data = { index: index, length: this.chanks.length, chank: chank };\n    EventSystem.call('FILE_SEND_CHANK_' + this.identifier, data, this.sendTo);\n    this.sentChankIndex = index;\n    if (this.chanks.length <= index + 1) {\n      EventSystem.call('FILE_SEND_END_' + this.identifier, null, this.sendTo);\n      console.log('バッファ送信完了', this.identifier);\n      if (this.onfinish) this.onfinish(this, this.data);\n      this.dispose();\n    } else if (this.completedChankIndex + 4 <= index) {\n      this.sendChankTimer = null;\n      this.resetTimeout();\n    } else {\n      this.sendChankTimer = setZeroTimeout(() => { this.sendChank(this.sentChankIndex + 1); });\n    }\n  }\n\n  private initializeReceive() {\n    this.resetTimeout();\n    this.startTime = performance.now();\n    this.chankReceiveCount = 0;\n    EventSystem.register(this)\n      .on<ChankData>('FILE_SEND_CHANK_' + this.identifier, event => {\n        if (this.chanks.length < 1) this.chanks = new Array(event.data.length);\n\n        if (this.chanks[event.data.index] != null) {\n          console.log(`already received. [${event.data.index}] <${this.identifier}>`);\n          return;\n        }\n        this.chankReceiveCount++;\n        this.chanks[event.data.index] = event.data.chank;\n        if (this.onprogress) this.onprogress(this, event.data.index, event.data.length);\n        if (this.chanks.length <= this.chankReceiveCount) {\n          this.finishReceive();\n        } else {\n          this.resetTimeout();\n          if ((event.data.index + 1) % 1 === 0) {\n            EventSystem.call('FILE_MORE_CHANK_' + this.identifier, event.data.index, event.sendFrom);\n          }\n        }\n      });\n  }\n\n  private finishReceive() {\n    console.log('バッファ受信完了', this.identifier);\n    if (this.timeoutTimer) clearTimeout(this.timeoutTimer);\n    EventSystem.unregister(this);\n\n    let sumLength = 0;\n    for (let chank of this.chanks) { sumLength += chank.byteLength; }\n\n    let time = performance.now() - this.startTime;\n    let rate = (sumLength / 1024 / 1024) / (time / 1000);\n    console.log(`${(sumLength / 1024).toFixed(2)}KB ${(time / 1000).toFixed(2)}秒 転送速度: ${rate.toFixed(2)}MB/s`);\n\n    let uint8Array = new Uint8Array(sumLength);\n    let pos = 0;\n\n    for (let chank of this.chanks) {\n      uint8Array.set(chank, pos);\n      pos += chank.byteLength;\n    }\n\n    this.data = MessagePack.decode(uint8Array);\n    if (this.onfinish) this.onfinish(this, this.data);\n    this.dispose();\n  }\n\n  private resetTimeout() {\n    clearTimeout(this.timeoutTimer);\n    this.timeoutTimer = setTimeout(() => {\n      if (this.ontimeout) this.ontimeout(this);\n      if (this.onfinish) this.onfinish(this, this.data);\n      this.dispose();\n    }, 15 * 1000);\n  }\n}\n","export namespace CanvasUtil {\n  /**\n   * https://github.com/viliusle/Hermite-resize\n   * Hermite resize - fast image resize/resample using Hermite filter. 1 cpu version!\n   * \n   * @param {HtmlElement} canvas\n   * @param {int} width\n   * @param {int} height\n   * @param {boolean} resize_canvas if true, canvas will be resized. Optional.\n   */\n  export function resize(canvas: HTMLCanvasElement, width: number, height: number, resize_canvas?: boolean) {\n    let width_source = canvas.width;\n    let height_source = canvas.height;\n    width = Math.round(width);\n    height = Math.round(height);\n\n    let ratio_w = width_source / width;\n    let ratio_h = height_source / height;\n    let ratio_w_half = Math.ceil(ratio_w / 2);\n    let ratio_h_half = Math.ceil(ratio_h / 2);\n\n    let ctx = canvas.getContext('2d');\n    let img = ctx.getImageData(0, 0, width_source, height_source);\n    let img2 = ctx.createImageData(width, height);\n    let data = img.data;\n    let data2 = img2.data;\n\n    for (let j = 0; j < height; j++) {\n      for (let i = 0; i < width; i++) {\n        let x2 = (i + j * width) * 4;\n        let weight = 0;\n        let weights = 0;\n        let weights_alpha = 0;\n        let gx_r = 0;\n        let gx_g = 0;\n        let gx_b = 0;\n        let gx_a = 0;\n        let center_y = (j + 0.5) * ratio_h;\n        let yy_start = Math.floor(j * ratio_h);\n        let yy_stop = Math.ceil((j + 1) * ratio_h);\n        for (let yy = yy_start; yy < yy_stop; yy++) {\n          let dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;\n          let center_x = (i + 0.5) * ratio_w;\n          let w0 = dy * dy; //pre-calc part of w\n          let xx_start = Math.floor(i * ratio_w);\n          let xx_stop = Math.ceil((i + 1) * ratio_w);\n          for (let xx = xx_start; xx < xx_stop; xx++) {\n            let dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;\n            let w = Math.sqrt(w0 + dx * dx);\n            if (w >= 1) {\n              //pixel too far\n              continue;\n            }\n            //hermite filter\n            weight = 2 * w * w * w - 3 * w * w + 1;\n            let pos_x = 4 * (xx + yy * width_source);\n            //alpha\n            gx_a += weight * data[pos_x + 3];\n            weights_alpha += weight;\n            //colors\n            if (data[pos_x + 3] < 255)\n              weight = weight * data[pos_x + 3] / 250;\n            gx_r += weight * data[pos_x];\n            gx_g += weight * data[pos_x + 1];\n            gx_b += weight * data[pos_x + 2];\n            weights += weight;\n          }\n        }\n        data2[x2] = gx_r / weights;\n        data2[x2 + 1] = gx_g / weights;\n        data2[x2 + 2] = gx_b / weights;\n        data2[x2 + 3] = gx_a / weights_alpha;\n      }\n    }\n    //clear and resize canvas\n    if (resize_canvas === true) {\n      canvas.width = width;\n      canvas.height = height;\n    } else {\n      ctx.clearRect(0, 0, width_source, height_source);\n    }\n\n    //draw\n    ctx.putImageData(img2, 0, 0);\n  }\n}\n","import { saveAs } from 'file-saver';\nimport * as JSZip from 'jszip/dist/jszip.min.js';\n\nimport { EventSystem } from '../system';\nimport { XmlUtil } from '../system/util/xml-util';\nimport { AudioStorage } from './audio-storage';\nimport { FileReaderUtil } from './file-reader-util';\nimport { ImageStorage } from './image-storage';\nimport { MimeType } from './mime-type';\n\nexport class FileArchiver {\n  private static _instance: FileArchiver\n  static get instance(): FileArchiver {\n    if (!FileArchiver._instance) FileArchiver._instance = new FileArchiver();\n    return FileArchiver._instance;\n  }\n\n  private callbackOnDragEnter;\n  private callbackOnDragOver;\n  private callbackOnDrop;\n\n  private constructor() {\n    console.log('FileArchiver ready...');\n  }\n\n  initialize() {\n    this.destroy();\n    this.addEventListeners();\n  }\n\n  private destroy() {\n    this.removeEventListeners();\n  }\n\n  private addEventListeners() {\n    this.removeEventListeners();\n    this.callbackOnDragEnter = (e) => this.onDragEnter(e);\n    this.callbackOnDragOver = (e) => this.onDragOver(e);\n    this.callbackOnDrop = (e) => this.onDrop(e);\n    document.body.addEventListener('dragenter', this.callbackOnDragEnter, false);\n    document.body.addEventListener('dragover', this.callbackOnDragOver, false);\n    document.body.addEventListener('drop', this.callbackOnDrop, false);\n  }\n\n  private removeEventListeners() {\n    document.body.removeEventListener('dragenter', this.callbackOnDragEnter, false);\n    document.body.removeEventListener('dragover', this.callbackOnDragOver, false);\n    document.body.removeEventListener('drop', this.callbackOnDrop, false);\n    this.callbackOnDragEnter = null;\n    this.callbackOnDragOver = null;\n    this.callbackOnDrop = null;\n  }\n\n  private onDragEnter(event: DragEvent) {\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  private onDragOver(event: DragEvent) {\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  private onDrop(event: DragEvent) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    console.log('onDrop', event.dataTransfer);\n    let files = event.dataTransfer.files\n    this.load(files);\n  };\n\n  async load(files: File[])\n  async load(files: FileList)\n  async load(files: any) {\n    let length = files.length;\n    for (let i = 0; i < length; i++) {\n      await this.handleImage(files[i]);\n      await this.handleAudio(files[i]);\n      await this.handleText(files[i]);\n      await this.handleZip(files[i]);\n      EventSystem.trigger('FILE_LOADED', { file: files[i] });\n    }\n  }\n\n  private async handleImage(file: File) {\n    if (file.type.indexOf('image/') < 0) return;\n    console.log(file.name + ' type:' + file.type);\n    if (2 * 1024 * 1024 < file.size) return;\n    await ImageStorage.instance.addAsync(file);\n  }\n\n  private async handleAudio(file: File) {\n    if (file.type.indexOf('audio/') < 0) return;\n    console.log(file.name + ' type:' + file.type);\n    if (10 * 1024 * 1024 < file.size) return;\n    await AudioStorage.instance.addAsync(file);\n  }\n\n  private async handleText(file: File): Promise<void> {\n    if (file.type.indexOf('text/') < 0) return;\n    console.log(file.name + ' type:' + file.type);\n    try {\n      let xmlElement: Element = XmlUtil.xml2element(await FileReaderUtil.readAsTextAsync(file));\n      if (xmlElement) EventSystem.trigger('XML_LOADED', { xmlElement: xmlElement });\n    } catch (reason) {\n      console.warn(reason);\n    }\n  }\n\n  private async handleZip(file: File) {\n    if (!(0 <= file.type.indexOf('application/') || file.type.length < 1)) return;\n    let zip = new JSZip();\n    try {\n      zip = await zip.loadAsync(file);\n    } catch (reason) {\n      console.warn(reason);\n      return;\n    }\n    let zipEntries = [];\n    zip.forEach((relativePath, zipEntry) => zipEntries.push(zipEntry));\n    for (let zipEntry of zipEntries) {\n      try {\n        let arraybuffer = await zipEntry.async('arraybuffer');\n        console.log(zipEntry.name + ' 解凍...', arraybuffer);\n        await this.load([new File([arraybuffer], zipEntry.name, { type: MimeType.type(zipEntry.name) })]);\n      } catch (reason) {\n        console.warn(reason);\n      }\n    }\n  }\n\n  save(files: File[], zipName: string)\n  save(files: FileList, zipName: string)\n  save(files: any, zipName: string) {\n    if (!files) return;\n\n    let zip = new JSZip();\n    let length = files.length;\n    for (let i = 0; i < length; i++) {\n      let file = files[i]\n      zip.file(file.name, file);\n    }\n\n    zip.generateAsync({\n      type: 'blob',\n      compression: 'DEFLATE',\n      compressionOptions: {\n        level: 6\n      }\n    }).then(blob => saveAs(blob, zipName + '.zip'));\n  }\n}\n","import * as CryptoJS from 'crypto-js/core.js';\nimport * as WordArray from 'crypto-js/lib-typedarrays.js';\nimport * as SHA256 from 'crypto-js/sha256.js';\n\nexport namespace FileReaderUtil {\n  export function readAsArrayBufferAsync(blob: Blob): Promise<ArrayBuffer> {\n    return new Promise<ArrayBuffer>((resolve, reject) => {\n      let reader = new FileReader();\n      reader.onload = event => { resolve(reader.result as ArrayBuffer); }\n      reader.onabort = reader.onerror = (e) => { reject(e); }\n      reader.readAsArrayBuffer(blob);\n    });\n  }\n\n  export function readAsTextAsync(blob: Blob): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n      let reader = new FileReader();\n      reader.onload = event => { resolve(reader.result as string); }\n      reader.onabort = reader.onerror = (e) => { reject(e); }\n      reader.readAsText(blob);\n    });\n  }\n\n  export async function calcSHA256Async(arrayBuffer: ArrayBuffer): Promise<string>\n  export async function calcSHA256Async(blob: Blob): Promise<string>\n  export async function calcSHA256Async(arg: any): Promise<string> {\n    if (arg instanceof Blob) {\n      return _calcSHA256Async(arg);\n    } else {\n      return _calcSHA256(arg);\n    }\n  }\n\n  async function _calcSHA256Async(blob: Blob): Promise<string> {\n    return _calcSHA256(await FileReaderUtil.readAsArrayBufferAsync(blob));\n  }\n\n  function _calcSHA256(arrayBuffer: ArrayBuffer): string {\n    let wordArray = WordArray.create(arrayBuffer);\n    return SHA256(<any>wordArray).toString();\n  }\n}\n","import { CanvasUtil } from './canvas-util';\nimport { FileReaderUtil } from './file-reader-util';\n\nexport enum ImageState {\n  NULL = 0,\n  THUMBNAIL = 1,\n  COMPLETE = 2,\n  URL = 1000,\n}\n\nexport interface ImageContext {\n  identifier: string;\n  name: string;\n  type: string;\n  blob: Blob;\n  url: string;\n  thumbnail: ThumbnailContext;\n}\n\nexport interface ThumbnailContext {\n  type: string;\n  blob: Blob;\n  url: string;\n}\n\nexport class ImageFile {\n  private context: ImageContext = {\n    identifier: '',\n    name: '',\n    blob: null,\n    type: '',\n    url: '',\n    thumbnail: {\n      blob: null,\n      type: '',\n      url: '',\n    }\n  };\n\n  get identifier(): string { return this.context.identifier };\n  get name(): string { return this.context.name };\n  get blob(): Blob { return this.context.blob ? this.context.blob : this.context.thumbnail.blob; };\n  get url(): string { return this.context.url ? this.context.url : this.context.thumbnail.url; };\n  get thumbnail(): ThumbnailContext { return this.context.thumbnail };\n\n  get state(): ImageState {\n    if (!this.url && !this.blob) return ImageState.NULL;\n    if (this.url && !this.blob) return ImageState.URL;\n    if (this.blob === this.thumbnail.blob) return ImageState.THUMBNAIL;\n    return ImageState.COMPLETE;\n  }\n\n  private constructor() { }\n\n  static createEmpty(identifier: string): ImageFile {\n    let imageFile = new ImageFile();\n    imageFile.context.identifier = identifier;\n\n    return imageFile;\n  }\n\n  static create(url: string): ImageFile\n  static create(context: ImageContext): ImageFile\n  static create(arg: any): ImageFile {\n    if (typeof arg === 'string') {\n      let imageFile = new ImageFile();\n      imageFile.context.identifier = arg;\n      imageFile.context.name = arg;\n      imageFile.context.url = arg;\n      return imageFile;\n    } else {\n      let imageFile = new ImageFile();\n      imageFile.apply(arg);\n      return imageFile;\n    }\n  }\n\n  static async createAsync(file: File): Promise<ImageFile>\n  static async createAsync(blob: Blob): Promise<ImageFile>\n  static async createAsync(arg: any): Promise<ImageFile> {\n    if (arg instanceof File) {\n      return await ImageFile._createAsync(arg, arg.name);\n    } else if (arg instanceof Blob) {\n      return await ImageFile._createAsync(arg);\n    }\n  }\n\n  private static async _createAsync(blob: Blob, name?: string): Promise<ImageFile> {\n    let arrayBuffer = await FileReaderUtil.readAsArrayBufferAsync(blob);\n\n    let imageFile = new ImageFile();\n    imageFile.context.identifier = await FileReaderUtil.calcSHA256Async(arrayBuffer);\n    imageFile.context.name = name;\n    imageFile.context.blob = new Blob([arrayBuffer], { type: blob.type });\n    imageFile.context.url = window.URL.createObjectURL(imageFile.context.blob);\n\n    try {\n      imageFile.context.thumbnail = await ImageFile.createThumbnailAsync(imageFile.context);\n    } catch (e) {\n      throw e;\n    }\n\n    if (imageFile.context.name != null) imageFile.context.name = imageFile.context.identifier;\n\n    return imageFile;\n  }\n\n  destroy() {\n    this.revokeURLs();\n  }\n\n  apply(context: ImageContext) {\n    if (!this.context.identifier && context.identifier) this.context.identifier = context.identifier;\n    if (!this.context.name && context.name) this.context.name = context.name;\n    if (!this.context.blob && context.blob) this.context.blob = context.blob;\n    if (!this.context.type && context.type) this.context.type = context.type;\n    if (!this.context.url && context.url) {\n      if (this.state !== ImageState.URL) window.URL.revokeObjectURL(this.context.url);\n      this.context.url = context.url;\n    }\n    if (!this.context.thumbnail.blob && context.thumbnail.blob) this.context.thumbnail.blob = context.thumbnail.blob;\n    if (!this.context.thumbnail.type && context.thumbnail.type) this.context.thumbnail.type = context.thumbnail.type;\n    if (!this.context.thumbnail.url && context.thumbnail.url) {\n      if (this.state !== ImageState.URL) window.URL.revokeObjectURL(this.context.thumbnail.url);\n      this.context.thumbnail.url = context.thumbnail.url;\n    }\n    this.createURLs();\n  }\n\n  toContext(): ImageContext {\n    return {\n      identifier: this.context.identifier,\n      name: this.context.name,\n      blob: this.context.blob,\n      type: this.context.type,\n      url: this.context.url,\n      thumbnail: {\n        blob: this.context.thumbnail.blob,\n        type: this.context.thumbnail.type,\n        url: this.context.thumbnail.url,\n      }\n    }\n  }\n\n  private createURLs() {\n    if (this.state === ImageState.URL) return;\n    if (this.context.blob && this.context.url === '') this.context.url = window.URL.createObjectURL(this.context.blob);\n    if (this.context.thumbnail.blob && this.context.thumbnail.url === '') this.context.thumbnail.url = window.URL.createObjectURL(this.context.thumbnail.blob);\n  }\n\n  private revokeURLs() {\n    if (this.state === ImageState.URL) return;\n    window.URL.revokeObjectURL(this.context.url);\n    window.URL.revokeObjectURL(this.context.thumbnail.url);\n  }\n\n  private static createThumbnailAsync(context: ImageContext): Promise<ThumbnailContext> {\n    return new Promise((resolve, reject) => {\n      let canvas: HTMLCanvasElement = document.createElement('canvas');\n      let render: CanvasRenderingContext2D = canvas.getContext('2d');\n      let image: HTMLImageElement = new Image();\n      image.onload = (event) => {\n        let scale: number = 128 / (image.width < image.height ? image.height : image.width);\n        scale = scale < 1 ? scale : 1.0;\n        var dstWidth = image.width * scale;\n        var dstHeight = image.height * scale;\n        canvas.width = image.width;//dstWidth;\n        canvas.height = image.height;//dstHeight;\n        //render.drawImage(image, 0, 0, image.width, image.height, 0, 0, dstWidth, dstHeight);\n\n        render.drawImage(image, 0, 0);\n        CanvasUtil.resize(canvas, dstWidth, dstHeight, true);\n\n        canvas.toBlob(blob => {\n          let thumbnail: ThumbnailContext = {\n            type: blob.type,\n            blob: blob,\n            url: window.URL.createObjectURL(blob),\n          };\n          resolve(thumbnail);\n        }, context.blob.type);\n      };\n      image.onabort = image.onerror = () => {\n        reject();\n      }\n      image.src = context.url;\n    });\n  }\n\n  static Empty: ImageFile = ImageFile.createEmpty('null');\n}\n","import { EventSystem, Network } from '../system';\nimport { UUID } from '../system/util/uuid';\nimport { BufferSharingTask } from './buffer-sharing-task';\nimport { FileReaderUtil } from './file-reader-util';\nimport { ImageContext, ImageFile, ImageState } from './image-file';\nimport { CatalogItem, ImageStorage } from './image-storage';\nimport { MimeType } from './mime-type';\n\nexport class FileSharingSystem {\n  private static _instance: FileSharingSystem\n  static get instance(): FileSharingSystem {\n    if (!FileSharingSystem._instance) FileSharingSystem._instance = new FileSharingSystem();\n    return FileSharingSystem._instance;\n  }\n\n  private taskMap: Map<string, BufferSharingTask<ImageContext[]>> = new Map();\n  private maxTransmission: number = 1;\n\n  private constructor() {\n    console.log('FileSharingSystem ready...');\n  }\n\n  initialize() {\n    EventSystem.register(this)\n      .on('CONNECT_PEER', 1, event => {\n        if (!event.isSendFromSelf) return;\n        console.log('CONNECT_PEER ImageStorageService !!!', event.data.peer);\n        ImageStorage.instance.synchronize();\n      })\n      .on('XML_LOADED', event => {\n        convertUrlImage(event.data.xmlElement);\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        if (event.isSendFromSelf) return;\n        console.log('SYNCHRONIZE_FILE_LIST ImageStorageService ' + event.sendFrom);\n\n        let otherCatalog: CatalogItem[] = event.data;\n        let request: CatalogItem[] = [];\n\n        for (let item of otherCatalog) {\n          let image: ImageFile = ImageStorage.instance.get(item.identifier);\n          if (image === null) {\n            image = ImageFile.createEmpty(item.identifier);\n            ImageStorage.instance.add(image);\n          }\n          if (image.state < ImageState.COMPLETE) {\n            request.push({ identifier: item.identifier, state: image.state });\n          }\n        }\n\n        if (request.length < 1 && otherCatalog.length < ImageStorage.instance.getCatalog().length) {\n          ImageStorage.instance.synchronize(event.sendFrom);\n        }\n\n        if (request.length < 1 || this.isTransmission()) {\n          return;\n        }\n        this.request(request, event.sendFrom);\n      })\n      .on('REQUEST_FILE_RESOURE', async event => {\n        if (event.isSendFromSelf) return;\n\n        let request: CatalogItem[] = event.data.identifiers;\n        let randomRequest: CatalogItem[] = [];\n\n        for (let item of request) {\n          let image: ImageFile = ImageStorage.instance.get(item.identifier);\n          if (item.state < image.state)\n            randomRequest.push({ identifier: item.identifier, state: item.state });\n        }\n\n        if (this.isTransmission() === false && 0 < randomRequest.length) {\n          // 送信\n          let updateImages: ImageContext[] = this.makeSendUpdateImages(randomRequest);\n          console.log('REQUEST_FILE_RESOURE ImageStorageService Send!!! ' + event.data.receiver + ' -> ' + updateImages.length);\n          this.startSendTransmission(updateImages, event.data.receiver);\n        } else {\n          // 中継\n          let candidatePeers: string[] = event.data.candidatePeers;\n          let index = candidatePeers.indexOf(Network.peerId);\n          if (-1 < index) candidatePeers.splice(index, 1);\n\n          for (let peer of candidatePeers) {\n            console.log('REQUEST_FILE_RESOURE ImageStorageService Relay!!! ' + peer + ' -> ' + event.data.identifiers);\n            EventSystem.call(event, peer);\n            return;\n          }\n          console.log('REQUEST_FILE_RESOURE ImageStorageService あぶれた...' + event.data.receiver, randomRequest.length, this.taskMap);\n        }\n      })\n      .on('UPDATE_FILE_RESOURE', event => {\n        let updateImages: ImageContext[] = event.data.updateImages;\n        console.log('UPDATE_FILE_RESOURE ImageStorageService ' + event.sendFrom + ' -> ', updateImages);\n        for (let context of updateImages) {\n          if (context.blob) context.blob = new Blob([context.blob], { type: context.type });\n          if (context.thumbnail.blob) context.thumbnail.blob = new Blob([context.thumbnail.blob], { type: context.thumbnail.type });\n          ImageStorage.instance.add(context);\n        }\n      })\n      .on('START_FILE_TRANSMISSION', event => {\n        let identifier = event.data.taskIdentifier\n        console.log('START_FILE_TRANSMISSION ' + identifier);\n        this.startReceiveTransmission(identifier);\n      });\n  }\n\n  private destroy() {\n    EventSystem.unregister(this);\n  }\n\n  private async startSendTransmission(updateImages: ImageContext[], sendTo: string) {\n    let identifier = UUID.generateUuid();\n    this.taskMap.set(identifier, null);\n    EventSystem.call('START_FILE_TRANSMISSION', { taskIdentifier: identifier }, sendTo);\n\n    /* hotfix issue #1 */\n    for (let context of updateImages) {\n      if (context.thumbnail.blob) {\n        context.thumbnail.blob = <any>await FileReaderUtil.readAsArrayBufferAsync(context.thumbnail.blob);\n      } else if (context.blob) {\n        context.blob = <any>await FileReaderUtil.readAsArrayBufferAsync(context.blob);\n      }\n    }\n    /* */\n\n    let task = await BufferSharingTask.createSendTask(updateImages, sendTo, identifier);\n    this.taskMap.set(task.identifier, task);\n\n    task.onfinish = (task, data) => {\n      this.stopTransmission(task.identifier);\n      ImageStorage.instance.synchronize();\n    }\n    task.ontimeout = (task) => {\n      this.stopTransmission(task.identifier);\n      ImageStorage.instance.synchronize();\n    }\n  }\n\n  private startReceiveTransmission(identifier: string) {\n    this.stopTransmission(identifier);\n    if (this.taskMap.has(identifier)) return;\n\n    let task = BufferSharingTask.createReceiveTask<ImageContext[]>(identifier);\n    this.taskMap.set(identifier, task);\n    task.onfinish = (task, data) => {\n      this.stopTransmission(task.identifier);\n      EventSystem.trigger('UPDATE_FILE_RESOURE', { identifier: task.identifier, updateImages: data });\n      ImageStorage.instance.synchronize();\n    }\n    task.ontimeout = (task) => {\n      this.stopTransmission(task.identifier);\n      ImageStorage.instance.synchronize();\n    }\n    console.log('startFileTransmission => ', this.taskMap.size);\n  }\n\n  private stopTransmission(identifier: string) {\n    let task = this.taskMap.get(identifier);\n    if (task) { task.cancel(); }\n    this.taskMap.delete(identifier);\n\n    console.log('stopFileTransmission => ', this.taskMap.size);\n  }\n\n  private request(request: CatalogItem[], peer: string) {\n    console.log('requestFile() ' + peer);\n    let peers = Network.peerIds;\n    peers.splice(peers.indexOf(Network.peerId), 1);\n    EventSystem.call('REQUEST_FILE_RESOURE', { identifiers: request, receiver: Network.peerId, candidatePeers: peers }, peer);\n  }\n\n  private makeSendUpdateImages(catalog: CatalogItem[], maxSize: number = 1024 * 1024 * 0.5): ImageContext[] {\n    let updateImages: ImageContext[] = [];\n    let byteSize: number = 0;\n\n    // Fisher-Yates\n    for (let i = catalog.length - 1; 0 <= i; i--) {\n      let rand = Math.floor(Math.random() * (i + 1));\n      [catalog[i], catalog[rand]] = [catalog[rand], catalog[i]];\n    }\n\n    catalog.sort((a, b) => {\n      if (a.state < b.state) return -1;\n      if (a.state > b.state) return 1;\n      return 0;\n    });\n\n    for (let i = 0; i < catalog.length; i++) {\n      let item: { identifier: string, state: number } = catalog[i];\n      let image: ImageFile = ImageStorage.instance.get(item.identifier);\n\n      let context: ImageContext = {\n        identifier: image.identifier,\n        name: image.name,\n        type: '',\n        blob: null,\n        url: null,\n        thumbnail: { type: '', blob: null, url: null, }\n      };\n\n      if (image.state === ImageState.URL) {\n        context.url = image.url;\n      } else if (item.state === ImageState.NULL) {\n        context.thumbnail.blob = image.thumbnail.blob;//\n        context.thumbnail.type = image.thumbnail.type;\n      } else {\n        context.blob = image.blob;//\n        context.type = image.blob.type;\n      }\n\n      let size = context.blob\n        ? context.blob.size\n        : context.thumbnail.blob\n          ? context.thumbnail.blob.size\n          : 100;\n\n      if (0 < byteSize && maxSize < byteSize + size) break;\n\n      updateImages.push(context);\n      byteSize += size;\n    }\n    return updateImages;\n  }\n\n  private isTransmission(): boolean {\n    if (this.maxTransmission <= this.taskMap.size) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nfunction convertUrlImage(xmlElement: Element) {\n  let urls: string[] = [];\n\n  let imageElements = xmlElement.querySelectorAll('*[type=\"image\"]');\n  for (let i = 0; i < imageElements.length; i++) {\n    let url = imageElements[i].innerHTML;\n    if (!ImageStorage.instance.get(url) && 0 < MimeType.type(url).length) {\n      urls.push(url);\n    }\n  }\n\n  imageElements = xmlElement.querySelectorAll('*[imageIdentifier]');\n  for (let i = 0; i < imageElements.length; i++) {\n    let url = imageElements[i].getAttribute('imageIdentifier');\n    if (!ImageStorage.instance.get(url) && 0 < MimeType.type(url).length) {\n      urls.push(url);\n    }\n  }\n  for (let url of urls) {\n    ImageStorage.instance.add(url)\n  }\n}\n","import { EventSystem } from '../system';\nimport { ImageContext, ImageFile, ImageState } from './image-file';\n\nexport type CatalogItem = { identifier: string, state: number };\n\nexport class ImageStorage {\n  private static _instance: ImageStorage\n  static get instance(): ImageStorage {\n    if (!ImageStorage._instance) ImageStorage._instance = new ImageStorage();\n    return ImageStorage._instance;\n  }\n\n  private imageHash: { [identifier: string]: ImageFile } = {};\n\n  get images(): ImageFile[] {\n    let images: ImageFile[] = [];\n    for (let identifier in this.imageHash) {\n      images.push(this.imageHash[identifier]);\n    }\n    return images;\n  }\n\n  private lazyTimer: NodeJS.Timer;\n\n  private constructor() {\n    console.log('ImageStorage ready...');\n  }\n\n  private destroy() {\n    for (let identifier in this.imageHash) {\n      this.delete(identifier);\n    }\n  }\n\n  async addAsync(file: File): Promise<ImageFile>\n  async addAsync(blob: Blob): Promise<ImageFile>\n  async addAsync(arg: any): Promise<ImageFile> {\n    let image: ImageFile = await ImageFile.createAsync(arg);\n\n    return this._add(image);\n  }\n\n  add(url: string): ImageFile\n  add(image: ImageFile): ImageFile\n  add(context: ImageContext): ImageFile\n  add(arg: any): ImageFile {\n    let image: ImageFile\n    if (typeof arg === 'string') {\n      image = ImageFile.create(arg);\n    } else if (arg instanceof ImageFile) {\n      image = arg;\n    } else {\n      if (this.update(arg)) return this.imageHash[arg.identifier];\n      image = ImageFile.create(arg);\n    }\n    return this._add(image);\n  }\n\n  private _add(image: ImageFile): ImageFile {\n    this.lazySynchronize(100);\n    if (this.update(image)) return this.imageHash[image.identifier];\n    this.imageHash[image.identifier] = image;\n    console.log('addNewFile()', image);\n    return image;\n  }\n\n  private update(image: ImageFile): boolean\n  private update(image: ImageContext): boolean\n  private update(image: any): boolean {\n    let context: ImageContext;\n    if (image instanceof ImageFile) {\n      context = image.toContext();\n    } else {\n      context = image;\n    }\n    let updatingImage: ImageFile = this.imageHash[image.identifier];\n    if (updatingImage) {\n      updatingImage.apply(image);\n      return true;\n    }\n    return false;\n  }\n\n  delete(identifier: string): boolean {\n    let deleteImage: ImageFile = this.imageHash[identifier];\n    if (deleteImage) {\n      deleteImage.destroy();\n      delete this.imageHash[identifier];\n      return true;\n    }\n    return false;\n  }\n\n  get(identifier: string): ImageFile {\n    let image: ImageFile = this.imageHash[identifier];\n    if (image) return image;\n    return null;\n  }\n\n  synchronize(peer?: string) {\n    clearTimeout(this.lazyTimer);\n    this.lazyTimer = null;\n    EventSystem.call('SYNCHRONIZE_FILE_LIST', this.getCatalog(), peer);\n  }\n\n  lazySynchronize(ms: number, peer?: string) {\n    clearTimeout(this.lazyTimer);\n    this.lazyTimer = setTimeout(() => {\n      this.synchronize(peer);\n    }, ms);\n  }\n\n  getCatalog(): CatalogItem[] {\n    let catalog: CatalogItem[] = [];\n    for (let image of this.images) {\n      if (ImageState.COMPLETE <= image.state) {\n        catalog.push({ identifier: image.identifier, state: image.state });\n      }\n    }\n    return catalog;\n  }\n}\n","export namespace MimeType {\n  const types = {\n    gif: 'image/gif',\n    jpg: 'image/jpeg',\n    jpeg: 'image/jpeg',\n    jpe: 'image/jpeg',\n    png: 'image/png',\n    apng: 'image/apng',\n    webp: 'image/webp',\n    svg: 'image/svg+xml',\n    svgz: 'image/svg+xml',\n    ico: 'image/x-icon',\n    cur: 'image/x-icon',\n    bmp: 'image/bmp',\n    html: 'text/html',\n    htm: 'text/html',\n    shtml: 'text/html',\n    xml: 'text/xml',\n    yml: 'text/yaml',\n    yaml: 'text/yaml',\n    json: 'application/json',\n    map: 'application/json',\n    zip: 'application/zip',\n    mp3: 'audio/mp3',\n    wav: 'audio/wav',\n    m4a: 'audio/aac',\n    ogg: 'audio/ogg',\n    mpg: 'video/mpeg',\n    mpeg: 'video/mpeg',\n    mp4: 'video/mp4',\n    webm: 'video/webm'\n  };\n\n  export function type(fileName: string): string {\n    let ext = fileName.replace(/.*[\\.\\/\\\\]/, '').toLowerCase();\n    return types[ext] ? types[ext] : '';\n  }\n\n  export function extension(mimeType: string): string {\n    for (let key in types) {\n      if (types[key] === mimeType) {\n        return key;\n      }\n    }\n    return mimeType.split('/')[1];\n  }\n}","import { GameObject } from './game-object';\nimport { ObjectFactory, Type } from './object-factory';\nimport { ObjectNode } from './object-node';\n\nexport function defineSyncObject(alias: string) {\n  return <T extends GameObject>(constructor: Type<T>) => {\n    ObjectFactory.instance.register(constructor, alias);\n  }\n}\n\nexport function defineSyncVariable() {\n  return <T extends GameObject>(target: T, key: string | symbol) => {\n    function getter() {\n      return this.context.syncData[key];\n    }\n\n    function setter(value: any) {\n      this.context.syncData[key] = value;\n      this.update();\n    }\n\n    Object.defineProperty(target, key, {\n      get: getter,\n      set: setter,\n      enumerable: true,\n      configurable: true\n    });\n  }\n}\n\nexport function defineSyncAttribute() {\n  return <T extends ObjectNode>(target: T, key: string | symbol) => {\n    function getter() {\n      return this.getAttribute(key);\n    }\n\n    function setter(value: any) {\n      this.setAttribute(key, value);\n    }\n\n    Object.defineProperty(target, key, {\n      get: getter,\n      set: setter,\n      enumerable: true,\n      configurable: true\n    });\n  }\n}\n","import { defineSyncAttribute, defineSyncObject, defineSyncVariable } from './decorator-core';\nimport { GameObject } from './game-object';\nimport { Type } from './object-factory';\nimport { ObjectNode } from './object-node';\n\nexport function SyncObject(alias: string) {\n  return <T extends GameObject>(constructor: Type<T>) => {\n    defineSyncObject(alias)(constructor);\n  }\n}\n\nexport function SyncVar() {\n  return <T extends GameObject>(target: T, key: string | symbol) => {\n    if (target instanceof ObjectNode) {\n      defineSyncAttribute()(target, key);\n    } else {\n      defineSyncVariable()(target, key);\n    }\n  }\n}\n","import { UUID } from '../system/util/uuid';\nimport { ObjectFactory } from './object-factory';\nimport { ObjectSerializer } from './object-serializer';\nimport { ObjectStore } from './object-store';\n\nexport interface ObjectContext {\n  aliasName: string;\n  identifier: string;\n  majorVersion: number;\n  minorVersion: number;\n  syncData: Object;\n}\n\nexport class GameObject {\n  private context: ObjectContext = {\n    aliasName: (<typeof GameObject>this.constructor).aliasName,\n    identifier: '',\n    majorVersion: 0,\n    minorVersion: 0,\n    syncData: {}\n  }\n\n  static get aliasName() { return ObjectFactory.instance.getAlias(this); }\n  get aliasName() { return this.context.aliasName; }\n  get identifier() { return this.context.identifier; }\n  get version() { return this.context.majorVersion + this.context.minorVersion; }\n\n  constructor(identifier: string = UUID.generateUuid()) {\n    this.context.identifier = identifier;\n  }\n\n  initialize() {\n    ObjectStore.instance.add(this);\n  }\n\n  destroy() {\n    ObjectStore.instance.delete(this);\n  }\n\n  // GameObject Lifecycle\n  onStoreAdded() { }\n\n  // GameObject Lifecycle\n  onStoreRemoved() { }\n\n  update() {\n    this.versionUp();\n    ObjectStore.instance.update(this.identifier);\n  }\n\n  private versionUp() {\n    this.context.majorVersion += 1;\n    this.context.minorVersion = Math.random();\n  }\n\n  apply(context: ObjectContext) {\n    if (context !== null && this.identifier === context.identifier) {\n      this.context.majorVersion = context.majorVersion;\n      this.context.minorVersion = context.minorVersion;\n      this.context.syncData = context.syncData;\n    }\n  }\n\n  clone(): this {\n    let xmlString = this.toXml();\n    return <this>ObjectSerializer.instance.parseXml(xmlString);\n  }\n\n  toContext(): ObjectContext {\n    return {\n      aliasName: this.context.aliasName,\n      identifier: this.context.identifier,\n      majorVersion: this.context.majorVersion,\n      minorVersion: this.context.minorVersion,\n      syncData: JSON.parse(JSON.stringify(this.context.syncData))\n    }\n  }\n\n  toXml(): string {\n    return ObjectSerializer.instance.toXml(this);\n  }\n}","import { GameObject } from './game-object';\n\nexport declare var Type: FunctionConstructor;\nexport interface Type<T> extends Function {\n  new(...args: any[]): T;\n}\n\nexport class ObjectFactory {\n  private static _instance: ObjectFactory\n  static get instance(): ObjectFactory {\n    if (!ObjectFactory._instance) ObjectFactory._instance = new ObjectFactory();\n    return ObjectFactory._instance;\n  }\n\n  private constructorMap: Map<string, Type<GameObject>> = new Map();\n  private aliasMap: Map<Type<GameObject>, string> = new Map();\n\n  private constructor() { console.log('ObjectFactory ready...'); };\n\n  register<T extends GameObject>(constructor: Type<T>, alias?: string) {\n    if (!alias) alias = constructor.name || constructor.toString().match(/function\\s*([^(]*)\\(/)[1];\n    if (this.constructorMap.has(alias)) {\n      console.error('その alias<' + alias + '> はすでに割り当て済みじゃねー？');\n      return;\n    }\n    if (this.aliasMap.has(constructor)) {\n      console.error('その constructor はすでに登録済みじゃねー？', constructor);\n      return;\n    }\n    console.log('addGameObjectFactory -> ' + alias);\n    this.constructorMap.set(alias, constructor);\n    this.aliasMap.set(constructor, alias);\n  }\n\n  create<T extends GameObject>(alias: string, identifer?: string): T {\n    let classConstructor = this.constructorMap.get(alias);\n    if (!classConstructor) {\n      console.error(alias + 'という名のＧameObjectクラスは定義されていません');\n      return null;\n    }\n    let gameObject: GameObject = new classConstructor(identifer);\n    return <T>gameObject;\n  }\n\n  getAlias<T extends GameObject>(constructor: Type<T>): string {\n    return this.aliasMap.get(constructor);\n  }\n}\n","import { XmlUtil } from '../system/util/xml-util';\nimport { Attributes } from './attributes';\nimport { defineSyncObject as SyncObject, defineSyncVariable as SyncVar } from './decorator-core';\nimport { GameObject, ObjectContext } from './game-object';\nimport { InnerXml, ObjectSerializer, XmlAttributes } from './object-serializer';\nimport { ObjectStore } from './object-store';\n\n@SyncObject('node')\nexport class ObjectNode extends GameObject implements XmlAttributes, InnerXml {\n  @SyncVar() value: number | string = '';\n  @SyncVar() protected attributes: Attributes = {};\n  @SyncVar() private parentIdentifier: string = '';\n  @SyncVar() protected majorIndex: number = 0;\n  @SyncVar() protected minorIndex: number = Math.random();\n\n  get index(): number { return this.majorIndex + this.minorIndex; }\n  set index(index: number) {\n    this.majorIndex = index | 0;\n    this.minorIndex = index - this.majorIndex;\n    if (this.parent) this.parent.needsSort = true;\n  }\n\n  get parent(): ObjectNode { return ObjectStore.instance.get<ObjectNode>(this.parentIdentifier); }\n  get parentId(): string { return this.parentIdentifier; }\n  get parentIsAssigned(): boolean { return 0 < this.parentIdentifier.length; }\n  get parentIsUnknown(): boolean { return this.parentIsAssigned && ObjectStore.instance.get(this.parentIdentifier) == null; }\n  get parentIsDestroyed(): boolean { return this.parentIsAssigned && ObjectStore.instance.isDeleted(this.parentIdentifier); }\n\n  private _children: ObjectNode[] = [];\n  get children(): ObjectNode[] {\n    if (this.needsSort) {\n      this.needsSort = false;\n      this._children.sort((a, b) => a.index - b.index);\n    }\n    return this._children.concat();\n  }\n\n  // TODO 名前　親Nodeの存在が未知の状態であるNode\n  private static unknownNodes: { [identifier: string]: ObjectNode[] } = {};\n  private needsSort: boolean = true;\n\n  // override\n  destroy() {\n    super.destroy();\n    for (let child of this._children.concat()) {\n      child.destroy();\n    }\n    this._children = [];\n  }\n\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    this.initializeChildren();\n  }\n\n  // GameObject Lifecycle\n  onStoreRemoved() {\n    super.onStoreRemoved();\n    if (this.parent) this.parent.removeChild(this);\n  }\n\n  // ObjectNode Lifecycle\n  onChildAdded(child: ObjectNode) { }\n\n  // ObjectNode Lifecycle\n  onChildRemoved(child: ObjectNode) { }\n\n  private _onChildAdded(child: ObjectNode) {\n    let node: ObjectNode = this;\n    while (node) {\n      node.onChildAdded(child);\n      node = node.parent;\n      if (node === this) break;\n    }\n  }\n\n  private _onChildRemoved(child: ObjectNode) {\n    let node: ObjectNode = this;\n    while (node) {\n      node.onChildRemoved(child);\n      node = node.parent;\n      if (node === this) break;\n    }\n  }\n\n  private initializeChildren() {\n    if (ObjectNode.unknownNodes[this.identifier] == null) return;\n    let objects = ObjectNode.unknownNodes[this.identifier];\n    for (let object of objects) {\n      if (object.parent === this) this.updateChildren(object);\n    }\n    if (ObjectNode.unknownNodes[this.identifier]) {\n      delete ObjectNode.unknownNodes[this.identifier];\n    }\n  }\n\n  private updateChildren(child: ObjectNode = this) {\n    let index = this._children.indexOf(child);\n    let isAdded = false;\n    let isMyChild = child.parent === this;\n\n    if (index < 0 && isMyChild) {\n      this._children.push(child);\n      index = this._children.length - 1;\n      isAdded = true;\n    } else if (0 <= index && !isMyChild) {\n      this._children.splice(index, 1);\n      this._onChildRemoved(child);\n      return;\n    } else if (index < 0 && !isMyChild) {\n      return;\n    }\n\n    if (!this._children.length) return;\n    let prevIndex = index - 1 < 0 ? 0 : index - 1;\n    let nextIndex = this._children.length - 1 < index + 1 ? this._children.length - 1 : index + 1;\n\n    if (this._children[prevIndex].index > child.index || child.index > this._children[nextIndex].index) this.needsSort = true;\n    if (isAdded) this._onChildAdded(child);\n  }\n\n  private updateIndexs() {\n    let children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      children[i].majorIndex = i;\n      children[i].minorIndex = Math.random();\n    }\n  }\n\n  appendChild(child: ObjectNode): ObjectNode {\n    if (child.contains(this)) return null;\n    if (child.parent && child.parent !== this) child.parent.removeChild(child);\n\n    let lastIndex = 0 < this.children.length ? this.children[this.children.length - 1].majorIndex + 1 : 0;\n\n    child.parentIdentifier = this.identifier;\n    child.majorIndex = lastIndex;\n    child.minorIndex = Math.random();\n\n    this.updateChildren(child);\n\n    return child;\n  }\n\n  insertBefore(child: ObjectNode, reference: ObjectNode): ObjectNode {\n    if (child.contains(this)) return null;\n    if (child === reference && child.parent === this) return child;\n\n    if (child.parent && child.parent !== this) child.parent.removeChild(child);\n\n    let index = this.children.indexOf(reference);\n    if (index < 0) return this.appendChild(child);\n\n    child.parentIdentifier = this.identifier;\n\n    let prevIndex = 0 < index ? this.children[index - 1].index : 0;\n    let diff = reference.index - prevIndex;\n    let insertIndex = prevIndex + diff * (0.45 + 0.1 * Math.random());\n    child.majorIndex = insertIndex | 0;\n    child.minorIndex = insertIndex - child.majorIndex;\n\n    this.updateChildren(child);\n    if (diff < 1e-7) {\n      this.updateIndexs();\n    }\n\n    return child;\n  }\n\n  removeChild(child: ObjectNode): ObjectNode {\n    let children = this.children;\n    let index: number = children.indexOf(child);\n    if (index < 0) return null;\n\n    child.parentIdentifier = '';\n    child.majorIndex = 0;\n    child.minorIndex = Math.random();\n\n    this.updateChildren(child);\n    return child;\n  }\n\n  contains(child: ObjectNode): boolean {\n    let parent = child.parent;\n    while (parent) {\n      if (parent === child) {\n        console.error('あ やっべ、循環参照', child);\n        return false;\n      }\n      if (parent === this) return true;\n      parent = parent.parent;\n    }\n    return false;\n  }\n\n  setAttribute(name: string, value: number | string) {\n    this.attributes[name] = value;\n    this.update();\n  }\n\n  getAttribute(name: string): string {\n    if (this.attributes[name] == null) {\n      return '';\n    }\n    return <string>this.attributes[name];\n  }\n\n  removeAttribute(name: string) {\n    delete this.attributes[name];\n    this.update();\n  }\n\n  toAttributes(): Attributes {\n    return ObjectSerializer.toAttributes(this.attributes);\n  };\n\n  parseAttributes(attributes: NamedNodeMap) {\n    ObjectSerializer.parseAttributes(this.attributes, attributes);\n  };\n\n  innerXml(): string {\n    let xml = '';\n    xml += XmlUtil.encodeEntityReference(this.value + '');\n    for (let child of this.children) {\n      xml += ObjectSerializer.instance.toXml(child);\n    }\n    return xml;\n  };\n\n  parseInnerXml(element: Element) {\n    let children = element.children;\n    if (0 < children.length) {\n      for (let i = 0; i < children.length; i++) {\n        let child = ObjectSerializer.instance.parseXml(children[i]);\n        if (child instanceof ObjectNode) this.appendChild(child);\n      }\n    } else {\n      this.value = XmlUtil.decodeEntityReference(element.innerHTML);\n    }\n  };\n\n  // override\n  apply(context: ObjectContext) {\n    let oldParent = this.parent;\n    super.apply(context);\n    if (oldParent && this.parent !== oldParent) oldParent.updateChildren(this);\n    if (this.parent) {\n      this.parent.updateChildren(this);\n    } else if (this.parentIsAssigned) {\n      if (!(this.parentIdentifier in ObjectNode.unknownNodes)) {\n        ObjectNode.unknownNodes[this.parentIdentifier] = [];\n      }\n      ObjectNode.unknownNodes[this.parentIdentifier].push(this);\n    }\n  }\n}\n","import { XmlUtil } from '../system/util/xml-util';\nimport { Attributes } from './attributes';\nimport { GameObject, ObjectContext } from './game-object';\nimport { ObjectFactory } from './object-factory';\n\nexport interface XmlAttributes extends GameObject {\n  toAttributes(): Attributes;\n  parseAttributes(attributes: NamedNodeMap);\n}\n\nexport interface InnerXml extends GameObject {\n  innerXml(): string;\n  parseInnerXml(element: Element);\n}\n\nexport class ObjectSerializer {\n  private static _instance: ObjectSerializer\n  static get instance(): ObjectSerializer {\n    if (!ObjectSerializer._instance) ObjectSerializer._instance = new ObjectSerializer();\n    return ObjectSerializer._instance;\n  }\n\n  private constructor() {\n    console.log('ObjectSerializer ready...');\n  };\n\n  toXml(gameObject: GameObject): string {\n    let xml = '';\n    let attributes = 'toAttributes' in gameObject ? (<XmlAttributes>gameObject).toAttributes() : ObjectSerializer.toAttributes(gameObject.toContext().syncData);\n    let tagName = gameObject.aliasName;\n\n    let attrStr = '';\n    for (let name in attributes) {\n      let attribute = XmlUtil.encodeEntityReference(attributes[name] + '');\n      if (attribute == null) continue;\n      attrStr += ' ' + name + '=\"' + attribute + '\"';\n    }\n    xml += `<${tagName + attrStr}>`;\n    xml += 'innerXml' in gameObject ? (<InnerXml>gameObject).innerXml() : '';\n    xml += `</${tagName}>`;\n    return xml;\n  }\n\n  static toAttributes(syncData: Object): Attributes {\n    let attributes = {};\n    for (let syncVar in syncData) {\n      let item = syncData[syncVar];\n      let key = syncVar;\n      let childAttr = ObjectSerializer.make2Attributes(item, key);\n      for (let name in childAttr) {\n        attributes[name] = childAttr[name];\n      }\n    }\n    return attributes;\n  }\n\n  private static make2Attributes(item: any, key: string): Attributes {\n    let attributes = {};\n    if (Array.isArray(item)) {\n      let arrayAttributes = ObjectSerializer.array2attributes(item, key);\n      for (let name in arrayAttributes) {\n        attributes[name] = arrayAttributes[name];\n      }\n    } else if (typeof item === 'object') {\n      let objAttributes = ObjectSerializer.object2attributes(item, key);\n      for (let name in objAttributes) {\n        attributes[name] = objAttributes[name];\n      }\n    } else {\n      attributes[key] = item;\n    }\n    return attributes;\n  }\n\n  private static object2attributes(obj: any, rootKey: string): Attributes {\n    let attributes = {};\n    for (let objKey in obj) {\n      let item = obj[objKey];\n      let key = rootKey + '.' + objKey;\n      let childAttr = ObjectSerializer.make2Attributes(item, key);\n      for (let name in childAttr) {\n        attributes[name] = childAttr[name];\n      }\n    }\n    return attributes;\n  }\n\n  private static array2attributes(array: Array<any>, rootKey: string): Attributes {\n    let attributes = {};\n    for (let i = 0; i < array.length; i++) {\n      let item = array[i];\n      let key = rootKey + '.' + i;\n      let childAttr = ObjectSerializer.make2Attributes(item, key);\n      for (let name in childAttr) {\n        attributes[name] = childAttr[name];\n      }\n    }\n    return attributes;\n  }\n\n  parseXml(xml: string | Element): GameObject {\n    let xmlElement: Element = null;\n    if (typeof xml === 'string') {\n      xmlElement = XmlUtil.xml2element(xml);\n    } else {\n      xmlElement = xml;\n    }\n    if (!xmlElement) {\n      console.error('xmlElementが空です');\n      return null;\n    }\n\n    let gameObject: GameObject = ObjectFactory.instance.create(xmlElement.tagName);\n    if (!gameObject) return null;\n\n    if ('parseAttributes' in gameObject) {\n      (<XmlAttributes>gameObject).parseAttributes(xmlElement.attributes);\n    } else {\n      let context: ObjectContext = gameObject.toContext();\n      ObjectSerializer.parseAttributes(context.syncData, xmlElement.attributes);\n      gameObject.apply(context);\n    }\n\n    gameObject.initialize();\n    if ('parseInnerXml' in gameObject) {\n      (<InnerXml>gameObject).parseInnerXml(xmlElement);\n    }\n    return gameObject;\n  }\n\n  static parseAttributes(syncData: Object, attributes: NamedNodeMap): Object {\n    for (let i = 0; i < attributes.length; i++) {\n      let value = attributes[i].value;\n      value = XmlUtil.decodeEntityReference(value);\n\n      let split: string[] = attributes[i].name.split('.');\n      let key: string | number = split[0];\n      let obj: Object | Array<any> = syncData;\n\n      if (1 < split.length) {\n        ({ obj, key } = ObjectSerializer.attributes2object(split, obj, key));\n      }\n\n      let type = typeof obj[key];\n      if (type !== 'string' && obj[key] != null) {\n        value = JSON.parse(value);\n      }\n      obj[key] = value;\n    }\n    return syncData;\n  }\n\n  private static attributes2object(split: string[], obj: Object | any[], key: string | number) {\n    // 階層構造の解析 foo.bar.0=\"abc\" 等\n    // 処理として実装こそしているが、xmlの仕様としては良くないので使用するべきではない.\n    let parentObj: Object | Array<any> = null;\n    for (let i = 0; i < split.length; i++) {\n      let index = parseInt(split[i]);\n      if (parentObj && !Number.isNaN(index) && !Array.isArray(obj) && Object.keys(parentObj).length) {\n        parentObj[key] = [];\n        obj = parentObj[key];\n      }\n      key = Number.isNaN(index) ? split[i] : index;\n      if (i + 1 < split.length) {\n        if (obj[key] === undefined)\n          obj[key] = typeof key === 'number' ? [] : {};\n        parentObj = obj;\n        obj = obj[key];\n      }\n    }\n    return { obj, key };\n  }\n\n  private static parseInnerXml(element: Element): GameObject {\n    return null;\n  }\n}\n","import { EventSystem } from '../system';\nimport { setZeroTimeout } from '../system/util/zero-timeout';\nimport { GameObject, ObjectContext } from './game-object';\nimport { Type } from './object-factory';\n\ntype ObjectAliasName = string;\ntype ObjectIdentifier = string;\ntype TimeStamp = number;\n\nexport type CatalogItem = { identifier: string, version: number };\n\nexport class ObjectStore {\n  private static _instance: ObjectStore\n  static get instance(): ObjectStore {\n    if (!ObjectStore._instance) ObjectStore._instance = new ObjectStore();\n    return ObjectStore._instance;\n  }\n\n  private identifierMap: Map<ObjectIdentifier, GameObject> = new Map();\n  private aliasNameMap: Map<ObjectAliasName, Map<ObjectIdentifier, GameObject>> = new Map();\n  private garbageMap: Map<ObjectIdentifier, TimeStamp> = new Map();\n\n  private queueMap: Map<ObjectIdentifier, ObjectContext> = new Map();\n  private updateInterval: number = null;\n  private garbageCollectionInterval: NodeJS.Timer = null;\n  private updateCallback = () => { this.updateQueue(); }\n\n  private constructor() { console.log('ObjectStore ready...'); };\n\n  add(object: GameObject, shouldBroadcast: boolean = true): GameObject {\n    if (this.get(object.identifier) != null || this.isDeleted(object.identifier)) return null;\n    this.identifierMap.set(object.identifier, object);\n    let objectsMap = this.aliasNameMap.has(object.aliasName) ? this.aliasNameMap.get(object.aliasName) : this.aliasNameMap.set(object.aliasName, new Map()).get(object.aliasName);\n    objectsMap.set(object.identifier, object);\n    object.onStoreAdded();\n    if (shouldBroadcast) this.update(object.toContext());\n    return object;\n  }\n\n  remove(object: GameObject): GameObject {\n    if (!this.identifierMap.has(object.identifier)) return null;\n\n    this.identifierMap.delete(object.identifier);\n    let objectsMap = this.aliasNameMap.get(object.aliasName);\n    if (objectsMap) objectsMap.delete(object.identifier);\n    object.onStoreRemoved();\n    return object;\n  }\n\n  delete(object: GameObject, shouldBroadcast?: boolean): GameObject\n  delete(identifier: string, shouldBroadcast?: boolean): GameObject\n  delete(arg: any, shouldBroadcast: boolean = true) {\n    let object: GameObject = null;\n    let identifier: string = null;\n    if (typeof arg === 'string') {\n      object = this.get(arg);\n      identifier = arg;\n    } else {\n      object = arg;\n      identifier = arg.identifier;\n    }\n    this.markForDelete(identifier);\n    return object == null ? null : this._delete(object, shouldBroadcast);\n  }\n\n  private _delete(object: GameObject, shouldBroadcast: boolean): GameObject {\n    if (this.remove(object) === null) return null;\n    if (shouldBroadcast) EventSystem.call('DELETE_GAME_OBJECT', { identifier: object.identifier });\n\n    return object;\n  }\n\n  private markForDelete(identifier: string) {\n    this.garbageMap.set(identifier, performance.now());\n    this.garbageCollection(10 * 60 * 1000);\n  }\n\n  get<T extends GameObject>(identifier: string): T {\n    return this.identifierMap.has(identifier) ? <T>this.identifierMap.get(identifier) : null;\n  }\n\n  getObjects<T extends GameObject>(constructor: Type<T>): T[]\n  getObjects<T extends GameObject>(aliasName: string): T[]\n  getObjects<T extends GameObject>(): T[]\n  getObjects<T extends GameObject>(arg?: any): T[] {\n    if (arg == null) {\n      return <T[]>Array.from(this.identifierMap.values());\n    }\n    let aliasName = '';\n    if (typeof arg === 'string') {\n      aliasName = arg;\n    } else {\n      aliasName = arg.aliasName;\n    }\n\n    return this.aliasNameMap.has(aliasName) ? <T[]>Array.from(this.aliasNameMap.get(aliasName).values()) : [];\n  }\n\n  update(identifier: string)\n  update(context: ObjectContext)\n  update(arg: any) {\n    let context: ObjectContext = null;\n    if (typeof arg === 'string') {\n      let object: GameObject = this.get(arg);\n      if (object) context = object.toContext();\n    } else {\n      context = arg;\n    }\n    if (!context) return;\n\n    if (this.queueMap.has(context.identifier)) {\n      let queue = this.queueMap.get(context.identifier);\n      for (let key in context) {\n        queue[key] = context[key];\n      }\n      return;\n    }\n    EventSystem.call('UPDATE_GAME_OBJECT', context);\n    this.queueMap.set(context.identifier, context);\n    if (this.updateInterval === null) {\n      this.updateInterval = setZeroTimeout(this.updateCallback);\n    }\n  }\n\n  private updateQueue() {\n    this.queueMap.clear();\n    this.updateInterval = null;\n  }\n\n  isDeleted(identifier: string) {\n    let timeStamp = this.garbageMap.get(identifier);\n    return timeStamp != null;\n  }\n\n  getCatalog(): CatalogItem[] {\n    let catalog: CatalogItem[] = [];\n    for (let object of this.identifierMap.values()) {\n      catalog.push({ identifier: object.identifier, version: object.version });\n    }\n    return catalog;\n  }\n\n  clearDeleteHistory() {\n    this.garbageMap.clear();\n  }\n\n  private garbageCollection(garbage: ObjectContext)\n  private garbageCollection(ms: number)\n  private garbageCollection(arg: any) {\n    if (typeof arg === 'number') {\n      if (this.garbageCollectionInterval === null) {\n        this.garbageCollectionInterval = setTimeout(() => { this.garbageCollectionInterval = null }, 1000);\n        this._garbageCollection(arg);\n      }\n    } else {\n      this.garbageMap.delete(arg.identifier);\n    }\n  }\n\n  private _garbageCollection(ms: number) {\n    let nowDate = performance.now();\n\n    let checkLength = this.garbageMap.size - 100000;\n    if (checkLength < 1) return;\n\n    let entries = this.garbageMap.entries();\n    while (checkLength < 1) {\n      checkLength--;\n      let item = entries.next();\n      if (item.done) break;\n\n      let identifier = item.value[0];\n      let timeStamp = item.value[1];\n\n      if (timeStamp + ms < nowDate) continue;\n      this.garbageMap.delete(identifier);\n    }\n  }\n}\n","import { EventSystem } from '../system';\nimport { GameObject, ObjectContext } from './game-object';\nimport { ObjectFactory } from './object-factory';\nimport { CatalogItem, ObjectStore } from './object-store';\nimport { SynchronizeRequest, SynchronizeTask } from './synchronize-task';\n\nexport class ObjectSynchronizer {\n  private static _instance: ObjectSynchronizer\n  static get instance(): ObjectSynchronizer {\n    if (!ObjectSynchronizer._instance) ObjectSynchronizer._instance = new ObjectSynchronizer();\n    return ObjectSynchronizer._instance;\n  }\n\n  private requestMap: Map<string, SynchronizeRequest> = new Map();\n  private tasks: SynchronizeTask[] = [];\n\n  private constructor() { }\n\n  initialize() {\n    this.destroy();\n    console.log('ObjectSynchronizer ready...');\n    EventSystem.register(this)\n      .on('CONNECT_PEER', 2, event => {\n        if (!event.isSendFromSelf) return;\n        console.log('CONNECT_PEER GameRoomService !!!', event.data.peer);\n        this.sendCatalog(event.data.peer);\n      })\n      .on<CatalogItem[]>('SYNCHRONIZE_GAME_OBJECT', event => {\n        if (event.isSendFromSelf) return;\n        console.log('SYNCHRONIZE_GAME_OBJECT ' + event.sendFrom);\n        let catalog: CatalogItem[] = event.data;\n        for (let item of catalog) {\n          if (ObjectStore.instance.isDeleted(item.identifier)) {\n            EventSystem.call('DELETE_GAME_OBJECT', { identifier: item.identifier }, event.sendFrom);\n          } else {\n            this.addRequestMap(item, event.sendFrom);\n          }\n        }\n        this.synchronize();\n      })\n      .on('REQUEST_GAME_OBJECT', event => {\n        if (event.isSendFromSelf) return;\n        if (ObjectStore.instance.isDeleted(event.data)) {\n          EventSystem.call('DELETE_GAME_OBJECT', { identifier: event.data }, event.sendFrom);\n        } else {\n          let object: GameObject = ObjectStore.instance.get(event.data);\n          if (object) EventSystem.call('UPDATE_GAME_OBJECT', object.toContext(), event.sendFrom);\n        }\n      })\n      .on('UPDATE_GAME_OBJECT', event => {\n        let context: ObjectContext = event.data;\n        let object: GameObject = ObjectStore.instance.get(context.identifier);\n        if (object) {\n          if (!event.isSendFromSelf) this.updateObject(object, context);\n        } else if (ObjectStore.instance.isDeleted(context.identifier)) {\n          EventSystem.call('DELETE_GAME_OBJECT', { identifier: context.identifier }, event.sendFrom);\n        } else {\n          this.createObject(context);\n        }\n      })\n      .on('DELETE_GAME_OBJECT', event => {\n        let context: ObjectContext = event.data;\n        ObjectStore.instance.delete(context.identifier, false);\n      });\n  }\n\n  destroy() {\n    EventSystem.unregister(this);\n  }\n\n  private updateObject(object: GameObject, context: ObjectContext) {\n    if (context.majorVersion + context.minorVersion > object.version) {\n      object.apply(context);\n    }\n  }\n\n  private createObject(context: ObjectContext) {\n    let newObject: GameObject = ObjectFactory.instance.create(context.aliasName, context.identifier);\n    if (!newObject) {\n      console.warn(context.aliasName + ' is Unknown...?', context);\n      return;\n    }\n    ObjectStore.instance.add(newObject, false);\n    newObject.apply(context);\n  }\n\n  private sendCatalog(sendTo: string) {\n    let catalog = ObjectStore.instance.getCatalog();\n    let interval = setInterval(() => {\n      let count = catalog.length < 2048 ? catalog.length : 2048;\n      EventSystem.call('SYNCHRONIZE_GAME_OBJECT', catalog.splice(0, count), sendTo);\n      if (catalog.length < 1) clearInterval(interval);\n    });\n  }\n\n  private addRequestMap(item: CatalogItem, sendFrom: string) {\n    let request = this.requestMap.get(item.identifier);\n    if (request && request.version === item.version) {\n      request.holderIds.push(sendFrom);\n    } else if (!request || request.version < item.version) {\n      this.requestMap.set(item.identifier, { identifier: item.identifier, version: item.version, holderIds: [sendFrom], ttl: 2 });\n    }\n  }\n\n  private synchronize() {\n    while (0 < this.requestMap.size && this.tasks.length < 32) this.runSynchronizeTask();\n  }\n\n  private runSynchronizeTask() {\n    let requests: SynchronizeRequest[] = this.makeRequestList();\n\n    if (requests.length < 1) return;\n    let task = SynchronizeTask.create(requests);\n    this.tasks.push(task);\n\n    task.onfinish = task => {\n      this.tasks.splice(this.tasks.indexOf(task), 1);\n      this.synchronize();\n    }\n\n    task.ontimeout = (task, remainedRequests) => {\n      console.log('GameObject synchronize タイムアウト');\n      remainedRequests.forEach(request => this.requestMap.set(request.identifier, request));\n    }\n  }\n\n  private makeRequestList(maxRequest: number = 32): SynchronizeRequest[] {\n    let entries = this.requestMap.entries();\n    let requests: SynchronizeRequest[] = [];\n\n    while (requests.length < maxRequest) {\n      let item = entries.next();\n      if (item.done) break;\n\n      let identifier = item.value[0];\n      let request = item.value[1];\n\n      let gameObject = ObjectStore.instance.get(request.identifier);\n      if (!gameObject || gameObject.version < request.version) requests.push(request);\n\n      this.requestMap.delete(identifier);\n    }\n    return requests;\n  }\n}\n","import { EventSystem, Network } from '../system';\n\nexport interface SynchronizeRequest {\n  identifier: string;\n  version: number;\n  holderIds: string[];\n  ttl: number;\n}\n\nexport class SynchronizeTask {\n  private static key: any = {};\n  private static tasksMap: Map<string, SynchronizeTask[]> = new Map();\n\n  onsynchronize: (task: SynchronizeTask, identifier: string) => void;\n  onfinish: (task: SynchronizeTask) => void;\n  ontimeout: (task: SynchronizeTask, remainedRequests: SynchronizeRequest[]) => void;\n\n  private requestMap: Map<string, SynchronizeRequest> = new Map();\n  private timeoutTimer: NodeJS.Timer;\n\n  private constructor() { }\n\n  static create(requests: SynchronizeRequest[]): SynchronizeTask {\n    if (SynchronizeTask.tasksMap.size < 1) {\n      EventSystem.register(SynchronizeTask.key)\n        .on('UPDATE_GAME_OBJECT', event => {\n          if (event.isSendFromSelf) return;\n          SynchronizeTask.onUpdate(event.data.identifier);\n        })\n        .on('DELETE_GAME_OBJECT', event => {\n          if (event.isSendFromSelf) return;\n          SynchronizeTask.onUpdate(event.data.identifier);\n        });\n    }\n    let task = new SynchronizeTask();\n    task.initialize(requests);\n    return task;\n  }\n\n  private cancel() {\n    clearTimeout(this.timeoutTimer);\n    this.onfinish = this.ontimeout = null;\n  }\n\n  private initialize(requests: SynchronizeRequest[]) {\n    for (let request of requests) {\n      request.ttl--;\n      this.requestMap.set(request.identifier, request);\n      let tasks: SynchronizeTask[] = SynchronizeTask.tasksMap.get(request.identifier);\n      if (tasks == null) tasks = [];\n      tasks.push(this);\n      SynchronizeTask.tasksMap.set(request.identifier, tasks);\n      EventSystem.call('REQUEST_GAME_OBJECT', request.identifier, this.randomChoice(request.holderIds));\n    }\n\n    if (this.requestMap.size < 1) {\n      setTimeout(() => {\n        if (this.onfinish) this.onfinish(this);\n        this.cancel();\n      });\n      return;\n    }\n\n    this.resetTimeout();\n  }\n\n  private static onUpdate(identifier: string) {\n    if (!SynchronizeTask.tasksMap.has(identifier)) return;\n    let tasks = SynchronizeTask.tasksMap.get(identifier);\n    for (let task of tasks.concat()) {\n      task.onUpdate(identifier);\n      if (task.requestMap.size < 1) tasks.splice(tasks.indexOf(task), 1);\n    }\n    if (tasks.length < 1) SynchronizeTask.tasksMap.delete(identifier);\n    if (SynchronizeTask.tasksMap.size < 1) EventSystem.unregister(SynchronizeTask.key);\n  }\n\n  private onUpdate(identifier: string) {\n    this.requestMap.delete(identifier);\n    if (this.onsynchronize) this.onsynchronize(this, identifier);\n    if (this.requestMap.size < 1) {\n      if (this.onfinish) this.onfinish(this);\n      this.cancel();\n    } else {\n      this.resetTimeout();\n    }\n  }\n\n  private randomChoice(peers: string[]): string {\n    let peerContexts = Network.peerContexts.filter(peerContext => peerContext.isOpen && -1 < peers.indexOf(peerContext.fullstring));\n    if (peerContexts.length < 1) return null;\n    let min = 0;\n    let max = peerContexts.length;\n    let index = Math.floor(Math.random() * (max - min)) + min;\n    let peerId = peerContexts[index].fullstring;\n    return peerId;\n  }\n\n  private resetTimeout() {\n    clearTimeout(this.timeoutTimer);\n    this.timeoutTimer = setTimeout(() => {\n      if (this.ontimeout) this.ontimeout(this, Array.from(this.requestMap.values()).filter(request => 0 <= request.ttl));\n      if (this.onfinish) this.onfinish(this);\n      this.cancel();\n    }, 30 * 1000);\n  }\n}\n","import { Network } from '../network/network';\nimport { Event, EventContext } from './event';\nimport { Listener } from './listener';\nimport { Callback } from './observer';\nimport { Subject } from './subject';\n\ntype EventName = string;\n\nexport class EventSystem implements Subject {\n  private static _instance: EventSystem\n  static get instance(): EventSystem {\n    if (!EventSystem._instance) {\n      EventSystem._instance = new EventSystem();\n      EventSystem._instance.initializeNetworkEvent();\n    }\n    return EventSystem._instance;\n  }\n\n  private listenerMap: Map<EventName, Listener[]> = new Map();\n  private constructor() {\n    console.log('EventSystem ready...');\n  }\n\n  register(key: any): Listener {\n    let listener: Listener = new Listener(this, key);\n    return listener;\n  }\n\n  unregister(key: any)\n  unregister(key: any, eventName: string)\n  unregister(key: any, callback: Callback<any>)\n  unregister(key: any, eventName: string, callback: Callback<any>)\n  unregister(...args: any[]) {\n    if (args.length === 1) {\n      return this._unregister(args[0], null, null);\n    } else if (args.length === 2) {\n      if (typeof args[1] === 'string') {\n        return this._unregister(args[0], args[1], null);\n      } else {\n        return this._unregister(args[0], null, args[1]);\n      }\n    } else {\n      return this._unregister(args[0], args[1], args[2]);\n    }\n  }\n\n  private _unregister(key: any = this, eventName: string, callback: Callback<any>) {\n    let listenersIterator = this.listenerMap.values();\n    for (let listeners of listenersIterator) {\n      for (let listener of listeners.concat()) {\n        if (listener.isEqual(key, eventName, callback)) {\n          listener.unregister();\n        }\n      }\n    }\n  }\n\n  registerListener(listener: Listener): Listener {\n    let listeners: Listener[] = this.getListeners(listener.eventName);\n\n    listeners.push(listener);\n    listeners.sort((a, b) => b.priority - a.priority);\n    this.listenerMap.set(listener.eventName, listeners);\n    return listener;\n  }\n\n  unregisterListener(listener: Listener): Listener {\n    let listeners = this.getListeners(listener.eventName);\n    let index = listeners.indexOf(listener);\n    if (index < 0) return null;\n    listeners.splice(index, 1);\n    listener.unregister();\n    if (listeners.length < 1) this.listenerMap.delete(listener.eventName);\n    return listener;\n  }\n\n  call<T>(eventName: string, data: T, sendTo?: string)\n  call<T>(event: Event<T>, sendTo?: string)\n  call<T>(...args: any[]) {\n    if (typeof args[0] === 'string') {\n      this._call(new Event(args[0], args[1]), args[2]);\n    } else {\n      this._call(args[0], args[1]);\n    }\n  }\n\n  private _call(event: Event<any>, sendTo?: string) {\n    let context = event.toContext();\n    Network.instance.send(context, sendTo);\n  }\n\n  trigger<T>(eventName: string, data: T): Event<T>\n  trigger<T>(event: Event<T>): Event<T>\n  trigger<T>(event: EventContext<T>): Event<T>\n  trigger<T>(...args: any[]): Event<T> {\n    if (args.length === 2) {\n      this._trigger(new Event(args[0], args[1]));\n    } else if (args[0] instanceof Event) {\n      return this._trigger(args[0]);\n    } else {\n      return this._trigger(new Event(args[0].eventName, args[0].data, args[0].sendFrom));\n    }\n  }\n\n  private _trigger<T>(event: Event<T>): Event<T> {\n    let listeners = this.getListeners(event.eventName).concat(this.getListeners('*'));\n    for (let listener of listeners) {\n      listener.trigger(event);\n    }\n    return event;\n  }\n\n  private getListeners(eventName: string): Listener[] {\n    return this.listenerMap.has(eventName) ? this.listenerMap.get(eventName) : [];\n  }\n\n  private initializeNetworkEvent() {\n    let callback = Network.instance.callback;\n\n    callback.onOpen = (peerId) => {\n      this.trigger('OPEN_NETWORK', { peer: peerId });\n    }\n    callback.onClose = (peerId) => {\n      this.trigger('CLOSE_NETWORK', { peer: peerId });\n    }\n\n    callback.onConnect = (peerId) => {\n      this.sendSystemMessage('<' + peerId + '> connect <DataConnection>');\n      this.trigger('CONNECT_PEER', { peer: peerId });\n    }\n\n    callback.onDisconnect = (peerId) => {\n      this.sendSystemMessage('<' + peerId + '> disconnect <DataConnection>');\n      this.trigger('DISCONNECT_PEER', { peer: peerId });\n    }\n\n    callback.onData = (peerId, data: EventContext<never>[]) => {\n      for (let event of data) {\n        this.trigger(event);\n      }\n    }\n\n    callback.onError = (peerId, err) => {\n      this.sendSystemMessage('<' + peerId + '> ' + err);\n    }\n  }\n\n  private sendSystemMessage(message: string) {\n    console.log(message);\n  }\n}\n","import { Network } from '../network/network';\n\nexport class Event<T> implements EventContext<T>{\n  readonly isSendFromSelf: boolean = false;\n\n  constructor(\n    readonly eventName: string,\n    public data: T,\n    readonly sendFrom: string = Network.instance.peerId) {\n    this.isSendFromSelf = this.sendFrom === Network.instance.peerId;\n  }\n\n  toContext(): EventContext<T> {\n    return {\n      sendFrom: this.sendFrom,\n      eventName: this.eventName,\n      data: this.data,\n    };\n  }\n}\n\nexport interface EventContext<T> {\n  sendFrom: string;\n  eventName: string;\n  data: T;\n}\n","import { Event } from './event';\nimport { Callback, EventMap, Observer } from './observer';\nimport { Subject } from './subject';\n\nexport class Listener implements Observer {\n  private _subject: Subject;\n  private _key: any;\n  private _eventName: string;\n  private _priority: number = 0;\n  private _callback: Callback<any>;\n  private _isOnlyOnce: boolean;\n  private _isRegistered: boolean = false;\n\n  get subject() { return this._subject; }\n  get key() { return this._key; }\n  get eventName() { return this._eventName; }\n  get priority() { return this._priority; }\n  get callback() { return this._callback; }\n  get isOnlyOnce() { return this._isOnlyOnce; }\n  get isRegistered() { return this._isRegistered; }\n\n  constructor(subject: Subject, key: any) {\n    this._subject = subject;\n    this._key = key;\n  }\n\n  on<K extends keyof EventMap>(eventName: K, callback: Callback<EventMap[K]>): Listener\n  on<K extends keyof EventMap>(eventName: K, priority: number, callback: Callback<EventMap[K]>): Listener\n  on(eventName: string, callback: Callback<any>): Listener\n  on(eventName: string, priority: number, callback: Callback<any>): Listener\n  on<T>(eventName: string, callback: Callback<T>): Listener\n  on<T>(eventName: string, priority: number, callback: Callback<T>): Listener\n  on(...args: any[]): Listener {\n    this._isOnlyOnce = false;\n    if (args.length === 2) {\n      return this.register(args[0], 0, args[1]);\n    } else {\n      return this.register(args[0], args[1], args[2]);\n    }\n  }\n\n  once<K extends keyof EventMap>(eventName: K, callback: Callback<EventMap[K]>): Listener\n  once<K extends keyof EventMap>(eventName: K, priority: number, callback: Callback<EventMap[K]>): Listener\n  once(eventName: string, callback: Callback<any>): Listener\n  once(eventName: string, priority: number, callback: Callback<any>): Listener\n  once<T>(eventName: string, callback: Callback<T>): Listener\n  once<T>(eventName: string, priority: number, callback: Callback<T>): Listener\n  once(...args: any[]): Listener {\n    let listener = this.on.apply(this, args);\n    this._isOnlyOnce = true;\n    return listener;\n  }\n\n  private register(eventName: string, priority: number, callback: Callback<any>): Listener {\n    if (this.isRegistered) this.unregister();\n    this._eventName = eventName ? eventName : '*';\n    this._priority = priority;\n    this._callback = callback;\n\n    this.subject.registerListener(this);\n    this._isRegistered = true;\n    return new Listener(this.subject, this.key);\n  }\n\n  unregister(): this {\n    this.subject.unregisterListener(this);\n    this._callback = null;\n    this._isRegistered = false;\n    return this;\n  }\n\n  trigger(event: Event<any>) {\n    if (this.callback && this.isRegistered) {\n      this.callback.apply(this.key, [event, this]);\n      if (this.isOnlyOnce) this.unregister();\n    }\n  }\n\n  isEqual(key: any, eventName: string, callback: Callback<any>) {\n    let matchTarget = (key == null || key === this.key);\n    let matchEventName = (eventName == null || eventName === this.eventName);\n    let matchCallback = (callback == null || callback === this.callback);\n\n    return matchTarget && matchEventName && matchCallback;\n  }\n}\n","import { EventSystem as _EventSystem } from './event/event-system';\nimport { Network as _Network } from './network/network';\n\nexport { Event } from './event/event';\nexport { Listener } from './event/listener';\n\nexport const EventSystem = _EventSystem.instance;\nexport const Network = _Network.instance;\n","import { IPeerContext } from './peer-context';\n\nexport class ConnectionCallback {\n  onOpen: (peerId: string) => void;\n  onClose: (peerId: string) => void;\n  onConnect: (peerId: string) => void;\n  onDisconnect: (peerId: string) => void;\n  onData: (peerId: string, data: any) => void;\n  onError: (peerId: string, err: any) => void;\n}\n\nexport interface Connection {\n  readonly peerId: string;\n  readonly peerIds: string[];\n  readonly peerContext: IPeerContext;\n  readonly peerContexts: IPeerContext[];\n  readonly callback: ConnectionCallback;\n  readonly bandwidthUsage: number;\n\n  open(peerId: string)\n  open(peerId: string, roomId: string, roomName: string, password: string)\n  close()\n  connect(peerId: string): boolean\n  disconnect(peerId: string): boolean\n  disconnectAll()\n  send(data: any, sendTo?: string)\n  setApiKey(key: string);\n  listAllPeers(): Promise<string[]>\n}\n","import { setZeroTimeout } from '../util/zero-timeout';\nimport { Connection, ConnectionCallback } from './connection';\nimport { IPeerContext } from './peer-context';\nimport { SkyWayConnection } from './skyway-connection';\n\ntype QueueItem = { data: any, sendTo: string };\n\nexport class Network {\n  private static _instance: Network\n  static get instance(): Network {\n    if (!Network._instance) Network._instance = new Network();\n    return Network._instance;\n  }\n\n  get peerId(): string { return this.connection ? this.connection.peerId : '???'; }\n  get peerIds(): string[] { return this.connection ? this.connection.peerIds.concat() : []; }\n\n  get peerContexts(): IPeerContext[] { return this.connection ? this.connection.peerContexts.concat() : []; }\n  get peerContext(): IPeerContext { return this.connection ? this.connection.peerContext : null; }\n\n  get isOpen(): boolean { return this.connection && this.connection.peerContext ? this.connection.peerContext.isOpen : false; }\n\n  readonly callback: ConnectionCallback = new ConnectionCallback();\n  get bandwidthUsage(): number { return this.connection ? this.connection.bandwidthUsage : 0; }\n\n  private key: string = '';\n  private connection: Connection;\n\n  private queue: QueueItem[] = [];\n  private sendInterval: number = null;\n  private sendCallback = () => { this.sendQueue(); }\n  private callbackUnload: any = (e) => { this.close(); };\n\n  private constructor() {\n    console.log('Network ready...');\n  }\n\n  open(peerId?: string)\n  open(peerId: string, roomId: string, roomName: string, password: string)\n  open(...args: any[]) {\n    if (this.connection && this.connection.peerContext) {\n      console.warn('It is already opened.');\n      this.close();\n    }\n\n    console.log('PeerRoom ready...', args);\n    this.connection = this.initializeConnection();\n    this.connection.open.apply(this.connection, args);\n\n    window.addEventListener('unload', this.callbackUnload, false);\n  }\n\n  private close() {\n    if (this.connection) this.connection.close();\n    this.connection = null;\n    window.removeEventListener('unload', this.callbackUnload, false);\n    console.log('Network close...');\n  }\n\n  connect(peerId: string): boolean {\n    if (this.connection) return this.connection.connect(peerId);\n    return false;\n  }\n\n  disconnect(peerId: string) {\n    if (!this.connection) return;\n    if (this.connection.disconnect(peerId)) {\n      console.log('<disconnectPeer()> Peer:' + peerId);\n      this.disconnect(peerId);\n    }\n  }\n\n  send(data: any, sendTo?: string) {\n    this.queue.push({ data: data, sendTo: sendTo });\n    if (this.sendInterval === null) {\n      this.sendInterval = setZeroTimeout(this.sendCallback);\n    }\n  }\n\n  private sendQueue() {\n    let broadcast: any[] = [];\n    let unicast: { [sendTo: string]: any[] } = {};\n    let echocast: any[] = [];\n\n    let length = this.queue.length < 128 ? this.queue.length : 128;\n    let items = this.queue.splice(0, length);\n    for (let item of items) {\n      if (item.sendTo == null) {\n        broadcast.push(item.data);\n      } else if (item.sendTo === this.peerId) {\n        echocast.push(item.data);\n      } else {\n        if (!(item.sendTo in unicast)) unicast[item.sendTo] = [];\n        unicast[item.sendTo].push(item.data);\n      }\n    }\n\n    // できるだけ一纏めにして送る\n    if (this.connection) {\n      if (broadcast.length) this.connection.send(broadcast);\n      for (let sendTo in unicast) this.connection.send(unicast[sendTo], sendTo);\n    }\n\n    // 自分自身への送信\n    if (this.callback.onData) {\n      this.callback.onData(null, broadcast);\n      this.callback.onData(this.peerId, echocast);\n    }\n\n    if (0 < this.queue.length) {\n      this.sendInterval = setZeroTimeout(this.sendCallback);\n    } else {\n      this.sendInterval = null;\n    }\n  }\n\n  setApiKey(key: string) {\n    if (this.key !== key) console.log('Key Change');\n    this.key = key;\n  }\n\n  listAllPeers(): Promise<string[]> {\n    return this.connection ? this.connection.listAllPeers() : Promise.resolve([]);\n  }\n\n  private initializeConnection(): Connection {\n    let store = new SkyWayConnection();\n    store.setApiKey(this.key);\n\n    store.callback.onOpen = (peerId) => { if (this.callback.onOpen) this.callback.onOpen(peerId); }\n    store.callback.onClose = (peerId) => { if (this.callback.onClose) this.callback.onClose(peerId); }\n    store.callback.onConnect = (peerId) => { if (this.callback.onConnect) this.callback.onConnect(peerId); }\n    store.callback.onDisconnect = (peerId) => { if (this.callback.onDisconnect) this.callback.onDisconnect(peerId); }\n    store.callback.onData = (peerId, data: any[]) => { if (this.callback.onData) this.callback.onData(peerId, data); }\n    store.callback.onError = (peerId, err) => { if (this.callback.onError) this.callback.onError(peerId, err); }\n\n    if (0 < this.queue.length && this.sendInterval === null) this.sendInterval = setZeroTimeout(this.sendCallback);\n\n    return store;\n  }\n}\n","import * as lzbase62 from 'lzbase62/lzbase62.min.js';\n\nexport interface IPeerContext {\n  readonly fullstring: string;\n  readonly id: string;\n  readonly room: string;\n  readonly roomName: string;\n  readonly password: string;\n  readonly isOpen: boolean;\n}\n\nexport class PeerContext implements IPeerContext {\n  fullstring: string = '';\n  id: string = '';\n  room: string = '';\n  roomName: string = '';\n  password: string = '';\n  isOpen: boolean = false;\n\n  get isRoom(): boolean { return 0 < this.room.length ? true : false; }\n\n  constructor(fullstring: string) {\n    this.parse(fullstring);\n  }\n\n  private parse(fullstring) {\n    try {\n      this.fullstring = fullstring;\n      let array = /^(\\w{6})((\\w{3})(\\w*)-(\\w*))?/ig.exec(fullstring);\n      this.id = array[1];\n      if (array[2] == null) return;\n      this.room = array[3];\n      this.roomName = lzbase62.decompress(array[4]);\n      this.password = lzbase62.decompress(array[5]);\n    } catch (e) {\n      this.id = fullstring;\n      console.warn(e);\n    }\n  }\n\n  static create(peerId: string): PeerContext\n  static create(peerId: string, roomId: string, roomName: string, password: string): PeerContext\n  static create(...args: any[]): PeerContext {\n    console.log('create', args);\n    if (args.length <= 1) {\n      return PeerContext._create.apply(this, args);\n    } else {\n      return PeerContext._createRoom.apply(this, args);\n    }\n  }\n\n  private static _create(peerId: string = '') {\n    return new PeerContext(peerId);\n  }\n\n  private static _createRoom(peerId: string = '', roomId: string = '', roomName: string = '', password: string = ''): PeerContext {\n    let fullstring: string = peerId + roomId + lzbase62.compress(roomName) + '-' + lzbase62.compress(password);\n    try {\n      console.log(fullstring);\n    } catch (e) {\n      console.error(e);\n      return null;\n    }\n    return new PeerContext(fullstring);\n  }\n\n  static generateId(format: string = '******'): string {\n    const h: string = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n    let k: string = format;\n    k = format.replace(/\\*/g, function (c) {\n      let r: number = Math.floor(Math.random() * (h.length));\n      return h[r];\n    });\n\n    return k;\n  }\n}","import * as MessagePack from 'msgpack-lite';\n\nimport { compressAsync, decompressAsync } from '../util/compress';\nimport { setZeroTimeout } from '../util/zero-timeout';\nimport { Connection, ConnectionCallback } from './connection';\nimport { PeerContext } from './peer-context';\nimport { SkyWayDataConnection } from './skyway-data-connection';\n\n// @types/skywayを使用すると@types/webrtcが定義エラーになるので代替定義\ndeclare var Peer;\ndeclare module PeerJs {\n  export type Peer = any;\n  export type DataConnection = any;\n}\n\ninterface DataContainer {\n  data: Uint8Array;\n  peers?: string[];\n  ttl: number;\n  isCompressed?: boolean;\n}\n\nexport class SkyWayConnection implements Connection {\n  get peerId(): string { return this.peerContext ? this.peerContext.fullstring : '???'; }\n\n  private _peerIds: string[] = [];\n  get peerIds(): string[] { return this._peerIds }\n\n  peerContext: PeerContext;\n  readonly peerContexts: PeerContext[] = [];\n  readonly callback: ConnectionCallback = new ConnectionCallback();\n  bandwidthUsage: number = 0;\n\n  private key: string = '';\n  private peer: PeerJs.Peer;\n  private connections: SkyWayDataConnection[] = [];\n\n  private listAllPeersCache: string[] = [];\n  private httpRequestInterval: number = performance.now() + 500;\n\n  private queue: Promise<any> = Promise.resolve();\n\n  private relayingPeerIds: Map<string, string[]> = new Map();\n\n  open(peerId: string)\n  open(peerId: string, roomId: string, roomName: string, password: string)\n  open(...args: any[]) {\n    console.log('open', args);\n    if (args.length === 0) {\n      this.peerContext = PeerContext.create(PeerContext.generateId());\n    } else if (args.length === 1) {\n      this.peerContext = PeerContext.create(args[0]);\n    } else {\n      this.peerContext = PeerContext.create(args[0], args[1], args[2], args[3]);\n    }\n    this.openPeer();\n  }\n\n  close() {\n    if (this.peer) this.peer.destroy();\n    this.disconnectAll();\n    this.peer = null;\n    this.peerContext = null;\n  }\n\n  connect(peerId: string): boolean {\n    if (!this.shouldConnect(peerId)) return false;\n\n    let conn: SkyWayDataConnection = new SkyWayDataConnection(this.peer.connect(peerId, {\n      serialization: 'none',\n      metadata: { sendFrom: this.peerId }\n    }));\n\n    this.openDataConnection(conn);\n    return true;\n  }\n\n  private shouldConnect(peerId: string): boolean {\n    if (!this.peer || !this.peerId) {\n      console.log('connect() is Fail. IDが割り振られるまで待てや');\n      return false;\n    }\n\n    if (this.peerId === peerId) {\n      console.log('connect() is Fail. ' + peerId + ' is me.');\n      return false;\n    }\n\n    if (this.findDataConnection(peerId)) {\n      console.log('connect() is Fail. <' + peerId + '> is already connecting.');\n      return false;\n    }\n\n    if (peerId && peerId.length && peerId !== this.peerId) return true;\n    return false;\n  }\n\n  disconnect(peerId: string): boolean {\n    let conn = this.findDataConnection(peerId)\n    if (!conn) return false;\n    this.closeDataConnection(conn);\n    return true;\n  }\n\n  disconnectAll() {\n    console.log('<closeAllDataConnection()>');\n    for (let conn of this.connections.concat()) {\n      this.closeDataConnection(conn);\n    }\n  }\n\n  send(data: any, sendTo?: string) {\n    if (this.connections.length < 1) return;\n    let container: DataContainer = {\n      data: MessagePack.encode(data),\n      ttl: 1\n    }\n\n    let byteLength = container.data.byteLength;\n    this.bandwidthUsage += byteLength;\n    this.queue = this.queue.then(() => new Promise((resolve, reject) => {\n      setZeroTimeout(async () => {\n        if (1 * 1024 < container.data.byteLength) {\n          let compressed = await compressAsync(container.data);\n          if (compressed.byteLength < container.data.byteLength) {\n            container.data = compressed;\n            container.isCompressed = true;\n          }\n        }\n        if (sendTo) {\n          this.sendUnicast(container, sendTo);\n        } else {\n          this.sendBroadcast(container);\n        }\n        this.bandwidthUsage -= byteLength;\n        return resolve();\n      });\n    }));\n  }\n\n  private sendUnicast(container: DataContainer, sendTo: string) {\n    container.ttl = 0;\n    let conn = this.findDataConnection(sendTo);\n    if (conn && conn.open) conn.send(container);\n  }\n\n  private sendBroadcast(container: DataContainer) {\n    for (let conn of this.connections) {\n      if (conn.open) conn.send(container);\n    }\n  }\n\n  setApiKey(key: string) {\n    if (this.key !== key) console.log('Key Change');\n    this.key = key;\n  }\n\n  listAllPeers(): Promise<string[]> {\n    return new Promise((resolve, reject) => {\n      if (!this.peer) return resolve([]);\n      let now = performance.now();\n      if (now < this.httpRequestInterval) {\n        console.warn('httpRequestInterval... ' + (this.httpRequestInterval - now));\n        resolve(this.listAllPeersCache.concat());\n        return;\n      }\n      this.httpRequestInterval = now + 6000;\n      this.peer.listAllPeers((list) => {\n        this.listAllPeersCache = list.concat();\n        resolve(list);\n      });\n    });\n  }\n\n  private openPeer() {\n    if (this.peer) {\n      console.warn('It is already opened.');\n      this.close();\n    }\n    let peer = new Peer(this.peerContext.fullstring, { key: this.key });// SkyWay\n    peer.on('open', id => {\n      console.log('My peer ID is: ' + id);\n      if (!this.peerContext || this.peerContext.fullstring !== id) {\n        this.peerContext = new PeerContext(id);\n      }\n      this.peerContext.isOpen = true;\n      console.log('My peer Context', this.peerContext);\n      if (this.callback.onOpen) this.callback.onOpen(this.peerId);\n    });\n\n    peer.on('connection', conn => {\n      this.openDataConnection(new SkyWayDataConnection(conn));\n    });\n\n    peer.on('error', err => {\n      console.error('<' + this.peerId + '> ' + err.type + ' => ' + err.message);\n      let errorMessage = this.getSkyWayErrorMessage(err.type);\n      errorMessage += ': ' + err.message;\n      switch (err.type) {\n        case 'peer-unavailable':\n        case 'invalid-id':\n        case 'invalid-key':\n        case 'list-error':\n        case 'server-error':\n          break;\n        case 'disconnected':\n        case 'socket-error':\n        default:\n          if (this.peerContext && this.peerContext.isOpen) {\n            if (this.callback.onClose) this.callback.onClose(this.peerId);\n          }\n          break;\n      }\n      if (this.callback.onError) this.callback.onError(this.peerId, errorMessage);\n    });\n    this.peer = peer;\n  }\n\n  private openDataConnection(conn: SkyWayDataConnection) {\n    if (this.addDataConnection(conn) === false) return;\n\n    let index = this.connections.indexOf(conn);\n    let context: PeerContext = null;\n    if (0 <= index) context = this.peerContexts[index];\n\n    let timeout: NodeJS.Timer = setTimeout(() => {\n      this.closeDataConnection(conn);\n      if (this.callback.onDisconnect) this.callback.onDisconnect(conn.remoteId);\n    }, 15000);\n\n    conn.on('data', data => {\n      this.onData(conn, data);\n    });\n    conn.on('open', () => {\n      if (timeout !== null) clearTimeout(timeout);\n      timeout = null;\n      if (context) context.isOpen = true;\n      this.updatePeerList();\n      if (this.callback.onConnect) this.callback.onConnect(conn.remoteId);\n    });\n    conn.on('close', () => {\n      if (timeout !== null) clearTimeout(timeout);\n      timeout = null;\n      this.closeDataConnection(conn);\n      if (this.callback.onDisconnect) this.callback.onDisconnect(conn.remoteId);\n    });\n    conn.on('error', err => {\n      if (timeout !== null) clearTimeout(timeout);\n      timeout = null;\n      this.closeDataConnection(conn);\n      if (this.callback.onError) this.callback.onError(conn.remoteId, err);\n    });\n  }\n\n  private closeDataConnection(conn: SkyWayDataConnection) {\n    conn.close();\n    let index = this.connections.indexOf(conn);\n    if (0 <= index) {\n      console.log(conn.remoteId + ' is えんいー' + 'index:' + index + ' length:' + this.connections.length);\n      this.connections.splice(index, 1);\n      this.peerContexts.splice(index, 1);\n    }\n    this.relayingPeerIds.delete(conn.remoteId);\n    this.relayingPeerIds.forEach(peerIds => {\n      let index = peerIds.indexOf(conn.remoteId);\n      if (0 <= index) peerIds.splice(index, 1);\n    });\n    console.log('<close()> Peer:' + conn.remoteId + ' length:' + this.connections.length + ':' + this.peerContexts.length);\n    this.updatePeerList();\n  }\n\n  private addDataConnection(conn: SkyWayDataConnection): boolean {\n    let existConn = this.findDataConnection(conn.remoteId);\n    if (existConn !== null) {\n      console.log('add() is Fail. ' + conn.remoteId + ' is already connecting.');\n      if (existConn !== conn) {\n        if (existConn.metadata.sendFrom < conn.metadata.sendFrom) {\n          this.closeDataConnection(conn);\n        } else {\n          this.closeDataConnection(existConn);\n          this.addDataConnection(conn);\n          return true;\n        }\n      }\n      return false;\n    }\n    this.connections.push(conn);\n    this.peerContexts.push(new PeerContext(conn.remoteId));\n    console.log('<add()> Peer:' + conn.remoteId + ' length:' + this.connections.length);\n    return true;\n  }\n\n  private findDataConnection(peerId: string): SkyWayDataConnection {\n    for (let conn of this.connections) {\n      if (conn.remoteId === peerId) {\n        return conn;\n      }\n    }\n    return null;\n  }\n\n  private onData(conn: SkyWayDataConnection, container: DataContainer) {\n    if (container.peers && 0 < container.peers.length) this.onUpdatePeerList(conn, container);\n    if (0 < container.ttl) this.onRelay(conn, container);\n    if (this.callback.onData) {\n      let byteLength = container.data.byteLength;\n      this.bandwidthUsage += byteLength;\n      this.queue = this.queue.then(() => new Promise((resolve, reject) => {\n        setZeroTimeout(async () => {\n          let data = container.isCompressed ? await decompressAsync(container.data) : container.data;\n          this.callback.onData(conn.remoteId, MessagePack.decode(data));\n          this.bandwidthUsage -= byteLength;\n          return resolve();\n        });\n      }));\n    }\n  }\n\n  private onRelay(conn: SkyWayDataConnection, container: DataContainer) {\n    container.ttl--;\n\n    let relayingPeerIds: string[] = this.relayingPeerIds.get(conn.remoteId);\n    if (relayingPeerIds == null) return;\n\n    for (let peerId of relayingPeerIds) {\n      let conn = this.findDataConnection(peerId);\n      if (conn && conn.open) {\n        console.log('<' + peerId + '> 転送しなきゃ・・・');\n        conn.send(container);\n      }\n    }\n  }\n\n  private onUpdatePeerList(conn: SkyWayDataConnection, container: DataContainer) {\n    let relayingPeerIds: string[] = [];\n    let unknownPeerIds: string[] = [];\n\n    let diff = diffArray(this._peerIds, container.peers);\n    relayingPeerIds = diff.diff1;\n    unknownPeerIds = diff.diff2;\n    this.relayingPeerIds.set(conn.remoteId, relayingPeerIds);\n    container.peers = container.peers.concat(relayingPeerIds);\n\n    if (unknownPeerIds.length) {\n      for (let peerId of unknownPeerIds) {\n        if (this.connect(peerId)) console.log('auto connect to unknown Peer <' + peerId + '>');\n      }\n    }\n  }\n\n  private updatePeerList(): string[] {\n    let peers: string[] = [];\n    for (let conn of this.connections) {\n      if (conn.open) peers.push(conn.remoteId);\n    }\n    peers.push(this.peerId);\n    peers.sort(function (a, b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n      return 0;\n    });\n\n    this._peerIds = peers;\n\n    console.log('<update()>', peers);\n    this.notifyPeerList();\n    return peers;\n  }\n\n  private notifyPeerList() {\n    if (this.connections.length < 1) return;\n    let container: DataContainer = {\n      data: MessagePack.encode([]),\n      peers: this._peerIds,\n      ttl: 1\n    }\n    this.sendBroadcast(container);\n  }\n\n  private getSkyWayErrorMessage(errType: string): string {\n    switch (errType) {\n      case 'peer-unavailable':\n        return 'そのPeer IDは存在しません。'\n      case 'invalid-id':\n        return 'Peer IDが不正です。'\n      case 'invalid-key':\n        return 'SkyWay APIキーが無効です。';\n      case 'list-error':\n        return 'SkyWay APIキーのREST APIが許可されてません。';\n      case 'server-error':\n        return 'SkyWayのシグナリングサーバからPeer一覧を取得できませんでした。';\n      case 'disconnected':\n        return 'SkyWayのシグナリングサーバに接続されていません。';\n      case 'socket-error':\n        return 'SkyWayのシグナリングサーバとの接続が失われました。';\n      default:\n        return 'SkyWayに関する不明なエラーが発生しました(' + errType + ')';\n    }\n  }\n}\n\nfunction diffArray<T>(array1: T[], array2: T[]): { diff1: T[], diff2: T[] } {\n  let diff1: T[] = [];\n  let diff2: T[] = [];\n\n  let includesInArray1: boolean = false;\n  let includesInArray2: boolean = false;\n\n  for (let item of array1.concat(array2)) {\n    includesInArray1 = array1.includes(item);\n    includesInArray2 = array2.includes(item);\n    if (includesInArray1 && !includesInArray2) {\n      diff1.push(item);\n    } else if (!includesInArray1 && includesInArray2) {\n      diff2.push(item);\n    }\n  }\n  return { diff1: diff1, diff2: diff2 };\n}\n","import { EventEmitter } from 'events';\nimport * as MessagePack from 'msgpack-lite';\n\nimport { UUID } from '../util/uuid';\nimport { setZeroTimeout } from '../util/zero-timeout';\n\n// @types/skywayを使用すると@types/webrtcが定義エラーになるので代替定義\ndeclare module PeerJs {\n  export type Peer = any;\n  export type DataConnection = any;\n}\n\ninterface DataChank {\n  id: string;\n  data: Uint8Array;\n  index: number;\n  total: number;\n};\n\ninterface ReceivedChank {\n  id: string;\n  chanks: Uint8Array[];\n  length: number;\n  byteLength: number;\n};\n\nexport class SkyWayDataConnection extends EventEmitter {\n  private chunkSize = 15.5 * 1024;\n  private receivedMap: Map<string, ReceivedChank> = new Map();\n\n  get open(): boolean { return this.conn.open; }\n  get remoteId(): string { return this.conn.remoteId; }\n  get metadata(): any { return this.conn.metadata; }\n\n  constructor(private conn: PeerJs.DataConnection) {\n    super();\n    conn.on('data', data => this.onData(data));\n    conn.on('open', () => {\n      exchangeSkyWayImplementation(conn);\n      this.emit('open');\n    });\n    conn.on('close', () => this.emit('close'));\n    conn.on('error', err => this.emit('error', err));\n  }\n\n  close() {\n    this.conn.close();\n  }\n\n  send(data: any) {\n    let encodedData: Uint8Array = MessagePack.encode(data);\n\n    let total = Math.ceil(encodedData.byteLength / this.chunkSize);\n    if (total <= 1) {\n      this.conn.send(encodedData);\n      return;\n    }\n\n    let id = UUID.generateUuid();\n\n    let sliceData: Uint8Array = null;\n    let chank: DataChank = null;\n    for (let sliceIndex = 0; sliceIndex < total; sliceIndex++) {\n      sliceData = encodedData.slice(sliceIndex * this.chunkSize, (sliceIndex + 1) * this.chunkSize);\n      chank = { id: id, data: sliceData, index: sliceIndex, total: total };\n      this.conn.send(MessagePack.encode(chank));\n    }\n  }\n\n  private onData(data: ArrayBuffer) {\n    let chank: DataChank = MessagePack.decode(new Uint8Array(data));\n\n    if (chank.id == null) {\n      this.emit('data', chank);\n      return;\n    }\n\n    let received = this.receivedMap.get(chank.id);\n    if (received == null) {\n      received = { id: chank.id, chanks: new Array(chank.total), length: 0, byteLength: 0 };\n      this.receivedMap.set(chank.id, received);\n    }\n\n    if (received.chanks[chank.index] != null) return;\n\n    received.length++;\n    received.byteLength += chank.data.byteLength;\n    received.chanks[chank.index] = chank.data;\n\n    if (received.length < chank.total) return;\n    this.receivedMap.delete(chank.id);\n\n    let uint8Array = new Uint8Array(received.byteLength);\n\n    let pos = 0;\n    for (let c of received.chanks) {\n      uint8Array.set(c, pos);\n      pos += c.byteLength;\n    }\n\n    let decodedData = MessagePack.decode(uint8Array);\n\n    this.emit('data', decodedData);\n  }\n}\n\n/* \nSkyWay の DataConnection._startSendLoop() を取り替える.\nsetInterval() に由来する遅延を解消するが skyway-js-sdk の更新次第で動作しなくなるので注意.\n\nhttps://github.com/skyway/skyway-js-sdk/blob/master/src/peer/dataConnection.js\n*/\nfunction exchangeSkyWayImplementation(conn: PeerJs.DataConnection) {\n  if (conn._dc && conn._sendBuffer) {\n    conn._startSendLoop = startSendLoopZeroTimeout;\n  }\n}\n\nfunction startSendLoopZeroTimeout() {\n  if (!this.sendInterval) {\n    this.sendInterval = setZeroTimeout(sendBuffertZeroTimeout.bind(this));\n  }\n}\n\nfunction sendBuffertZeroTimeout() {\n  const currMsg = this._sendBuffer.shift();\n  try {\n    this._dc.send(currMsg);\n  } catch (error) {\n    this._sendBuffer.push(currMsg);\n  }\n\n  if (this._sendBuffer.length === 0) {\n    this.sendInterval = undefined;\n  } else {\n    this.sendInterval = setZeroTimeout(sendBuffertZeroTimeout.bind(this));\n  }\n}\n","import * as Pako from 'pako';\n\nimport { setZeroTimeout } from './zero-timeout';\n\nexport async function compressAsync(data: Uint8Array, chunkSize?: number): Promise<Uint8Array> {\n  const deflate = new Pako.Deflate({ level: 2, gzip: true });\n\n  try {\n    await processAsync(deflate, data, chunkSize);\n    return deflate.result as Uint8Array;\n  } catch (e) {\n    console.error(e);\n  }\n  return null;\n}\n\nexport async function decompressAsync(data: Uint8Array, chunkSize?: number): Promise<Uint8Array> {\n  const inflate = new Pako.Inflate();\n\n  try {\n    await processAsync(inflate, data, chunkSize);\n    return inflate.result as Uint8Array;\n  } catch (e) {\n    console.error(e);\n  }\n  return null;\n}\n\nasync function processAsync<T extends Pako.Deflate | Pako.Inflate>(pakoObj: T, data: Uint8Array, chunkSize: number = 16 * 1024): Promise<T> {\n  let total = Math.ceil(data.byteLength / chunkSize);\n  let sliceData: Uint8Array = null;\n\n  for (let sliceIndex = 0; sliceIndex < total; sliceIndex++) {\n    await waitTickAsync();\n    sliceData = data.slice(sliceIndex * chunkSize, (sliceIndex + 1) * chunkSize);\n    pakoObj.push(sliceData, total <= sliceIndex + 1);\n  }\n\n  if (pakoObj.err) throw new Error(`error: ${pakoObj.err}`);\n  return pakoObj;\n}\n\nfunction waitTickAsync() {\n  return new Promise(resolve => setZeroTimeout(resolve));\n}\n","export class PromiseQueue {\n  private queue: Promise<any> = Promise.resolve();\n\n  private _length: number = 0;\n  get length(): number { return this._length; }\n\n  constructor(readonly name: string = 'Queue') { }\n\n  add<T>(task: () => T): Promise<T>\n  add<T>(promise: PromiseLike<T>): Promise<T>\n  add<T>(executor: (resolve: (value?: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void): Promise<T>\n  add<T>(arg: any): Promise<T> {\n    this._length++\n    console.log(`${this.name} add: ${this._length}`);\n    if (typeof arg.then == 'function') {\n      this.queue = this.queue.then(() => arg); // promise\n    } else if (0 < arg.length) {\n      this.queue = this.queue.then(() => new Promise<T>(arg)); // executor\n    } else {\n      this.queue = this.queue.then(arg); // task\n    }\n\n    let ret = this.queue;\n    this.queue = this.queue.catch((reason) => {\n      console.error(reason);\n    });\n    this.queue = this.queue.then(() => {\n      this._length--;\n      console.log(`${this.name} done: ${this._length}`);\n    });\n    return ret;\n  }\n}\n","export namespace StringUtil {\n  export function toHalfWidth(str: String): string {\n    return str.replace(/[！-～]/g, c => String.fromCharCode(c.charCodeAt(0) - 0xFEE0));\n  }\n}\n","export namespace UUID {\n  let lut = [];\n  for (let i = 0; i < 256; i++) {\n    lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\n  }\n  export function generateUuid(): string {\n    const dvals = new Uint32Array(4);\n    window.crypto.getRandomValues(dvals);\n    const d0 = dvals[0];\n    const d1 = dvals[1];\n    const d2 = dvals[2];\n    const d3 = dvals[3];\n    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +\n      lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\n      lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\n  }\n}","export namespace XmlUtil {\n  export function xml2element(xml: string) {\n    let domParser: DOMParser = new DOMParser();\n    let xmlDocument: Document = null;\n    try {\n      xml = sanitizeXml(xml);\n      xmlDocument = domParser.parseFromString(xml, 'application/xml');\n      let parsererror = xmlDocument.getElementsByTagName('parsererror');\n      if (parsererror.length) {\n        console.error('XMLのパースに失敗しました', xmlDocument.documentElement);\n        xmlDocument = null;\n      }\n    } catch (error) {\n      console.error(error);\n    }\n    return xmlDocument ? xmlDocument.documentElement : null;\n  }\n\n  export function encodeEntityReference(string: string): string {\n    return string.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n\n  export function decodeEntityReference(string: string): string {\n    return string.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\\\"').replace(/&amp;/g, '&');\n  }\n\n  function sanitizeXml(xml: string): string {\n    return xml.replace(/([^\\x09\\x0A\\x0D\\x20-\\uD7FF\\uE000-\\uFFFC\\u{10000}-\\u{10FFFF}])/ug, '').trim();\n  }\n}","let i: number = 0;\nconst timeouts = new Map<number, Function>();\nconst channel = new MessageChannel();\n\nexport function setZeroTimeout(fn: Function): number {\n  if (i === 0x100000000) // max queue size\n    i = 0;\n  if (++i in timeouts) throw new Error('setZeroTimeout queue overflow.');\n  timeouts.set(i, fn);\n  channel.port2.postMessage(i);\n  return i;\n}\n\nexport function clearZeroTimeout(id: number) {\n  timeouts.delete(id);\n}\n\nchannel.port1.onmessage = function (ev) {\n  const fn = timeouts.get(ev.data);\n  if (fn) {\n    timeouts.delete(ev.data);\n    fn();\n  }\n}\n\nchannel.port1.start();\nchannel.port2.start();\n","import { Attributes } from './core/synchronize-object/attributes';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { ObjectNode } from './core/synchronize-object/object-node';\n\n@SyncObject('data')\nexport class DataElement extends ObjectNode {\n  @SyncVar() name: string;\n  @SyncVar() type: string;\n  @SyncVar() currentValue: number | string;\n\n  get isNumberResource(): boolean { return this.type != null && this.type === 'numberResource'; }\n  get isNote(): boolean { return this.type != null && this.type === 'note'; }\n\n  public static create(name: string, value: number | string = '', attributes: Attributes = {}, identifier: string = ''): DataElement {\n    let dataElement: DataElement;\n    if (identifier && 0 < identifier.length) {\n      dataElement = new DataElement(identifier);\n    } else {\n      dataElement = new DataElement();\n    }\n    dataElement.attributes = attributes;\n    dataElement.name = name;\n    dataElement.value = value;\n    dataElement.initialize();\n\n    return dataElement;\n  }\n\n  getElementsByName(name: string): DataElement[] {\n    let children: DataElement[] = [];\n    for (let child of this.children) {\n      if (child instanceof DataElement) {\n        if (child.getAttribute('name') === name) children.push(child);\n        Array.prototype.push.apply(children, child.getElementsByName(name));\n      }\n    }\n    return children;\n  }\n\n  getElementsByType(type: string): DataElement[] {\n    let children: DataElement[] = [];\n    for (let child of this.children) {\n      if (child instanceof DataElement) {\n        if (child.getAttribute('type') === type) children.push(child);\n        Array.prototype.push.apply(children, child.getElementsByType(type));\n      }\n    }\n    return children;\n  }\n\n  getFirstElementByName(name: string): DataElement {\n    for (let child of this.children) {\n      if (child instanceof DataElement) {\n        if (child.getAttribute('name') === name) return child;\n        let match = child.getFirstElementByName(name);\n        if (match) return match;\n      }\n    }\n    return null;\n  }\n}\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { GameObject } from './core/synchronize-object/game-object';\nimport { InnerXml } from './core/synchronize-object/object-serializer';\n\nexport enum SortOrder {\n  ASC = 'ASC',\n  DESC = 'DESC'\n}\n\n@SyncObject('summary-setting')\nexport class DataSummarySetting extends GameObject implements InnerXml {\n  // todo:シングルトン化するのは妥当？\n  private static _instance: DataSummarySetting;\n  static get instance(): DataSummarySetting {\n    if (!DataSummarySetting._instance) {\n      DataSummarySetting._instance = new DataSummarySetting('DataSummarySetting');\n      DataSummarySetting._instance.initialize();\n    }\n    return DataSummarySetting._instance;\n  }\n\n  @SyncVar() sortTag: string = 'name';\n  @SyncVar() sortOrder: SortOrder = SortOrder.ASC;\n  @SyncVar() dataTag: string = 'HP MP 敏捷度 生命力 精神力';\n\n  private _dataTag: string;\n  private _dataTags: string[];\n  get dataTags(): string[] {\n    if (this._dataTag !== this.dataTag) {\n      this._dataTag = this.dataTag;\n      this._dataTags = this.dataTag != null && 0 < this.dataTag.trim().length ? this.dataTag.trim().split(/\\s+/) : [];\n    }\n    return this._dataTags;\n  }\n\n  innerXml(): string { return ''; }\n  parseInnerXml(element: Element) {\n    // XMLからの新規作成を許可せず、既存のオブジェクトを更新する\n    let context = DataSummarySetting.instance.toContext();\n    context.syncData = this.toContext().syncData;\n    DataSummarySetting.instance.apply(context);\n    DataSummarySetting.instance.update();\n\n    this.destroy();\n  }\n}\n","import { PromiseQueue } from '../core/system/util/promise-queue';\n\ninterface PeerHistory {\n  peerId: string,\n  timestamp: number,\n  history: string[]\n}\n\n// 試験実装中\nexport class Database {\n  private static DB_NAME: string = 'UdonariumDataBase';\n  private static VERSION: number = 1;\n\n  private queue: PromiseQueue = new PromiseQueue('DatabaseQueue');\n  private db: IDBDatabase;\n\n  constructor() {\n    this.openDB(Database.DB_NAME, Database.VERSION);\n  }\n\n  private openDB(dbName: string, version: number): Promise<IDBDatabase> {\n    return this.queue.add((resolve, reject) => {\n      console.log('openDB');\n      let request = indexedDB.open(dbName, version);\n      request.onerror = (event) => {\n        console.error(request.error, event);\n        if (request.error.name === 'VersionError') {\n          indexedDB.deleteDatabase(dbName);\n          this.openDB(dbName, version);\n        }\n        // request.errorCode に対して行うこと!\n        resolve();\n      };\n      request.onblocked = (event) => {\n        console.warn('openDB onblocked');\n        // 他のタブがデータベースを読み込んでいる場合は、処理を進める前に\n        // それらを閉じなければなりません。\n        alert('このサイトを開いている他のタブをすべて閉じてください!');\n      };\n      request.onupgradeneeded = (event) => {\n        console.log('openDB onupgradeneeded');\n        this.initializeDB(request.result);\n        this.createStores();\n      };\n      request.onsuccess = (event) => {\n        console.log('openDB onsuccess');\n        this.initializeDB(request.result);\n        resolve();\n      };\n    });\n  }\n\n  private createStores() {\n    console.log('createStores');\n    if (this.db.objectStoreNames.contains('PeerHistory')) {\n      this.db.deleteObjectStore('PeerHistory');\n    }\n    let objectStore = this.db.createObjectStore('PeerHistory', { keyPath: 'peerId' });\n    objectStore.createIndex('timestamp', 'timestamp', { unique: false });\n    // データを追加する前に objectStore の作成を完了させるため、 \n    // transaction oncomplete を使用します。\n    objectStore.transaction.oncomplete = (event) => {\n      console.log('createStores oncomplete');\n      // 新たに作成した objectStore に値を保存します。\n      /*\n      var customerObjectStore = db.transaction(\"customers\", \"readwrite\").objectStore(\"customers\");\n      for (var i in customerData) {\n        customerObjectStore.add(customerData[i]);\n      }\n      */\n    };\n  }\n\n  private initializeDB(db: IDBDatabase) {\n    console.log('initializeDB');\n    // 別のページがバージョン変更を求めた場合に、通知されるようにするためのハンドラを追加するようにしてください。\n    // データベースを閉じなければなりません。データベースを閉じると、別のページがデータベースをアップグレードできます。\n    // これを行わなければ、ユーザがタブを閉じるまでデータベースはアップグレードされません。\n    db.onversionchange = (event) => {\n      console.warn('db.onversionchange.');\n      db.close();\n      alert('新しいバージョンのページが使用可能になりました。再読み込みしてください!');\n    };\n    db.onabort = (event) => {\n      console.error(event);\n    };\n    db.onerror = (event) => {\n      console.error(event);\n    };\n    this.db = db;\n    // データベースを使用する処理\n  }\n\n  addPeerHistory(myPeer: string, otherPeers: string[]) {\n    this.queue.add((resolve, reject) => {\n      console.log('addPeerHistory');\n      let transaction = this.db.transaction(['PeerHistory'], 'readwrite');\n      let store = transaction.objectStore('PeerHistory');\n\n      transaction.oncomplete = (event) => {\n        console.log('addPeerHistory done.', 'readwrite');\n        resolve();\n      };\n\n      transaction.onerror = (event) => {\n        console.error(event);\n        resolve();\n      };\n\n      let history: PeerHistory = {\n        peerId: myPeer,\n        timestamp: Date.now(),\n        history: otherPeers\n      }\n\n      store.put(history);\n    });\n  }\n\n  deletePeerHistory(peerId: string) {\n    this.queue.add((resolve, reject) => {\n      let transaction = this.db.transaction(['PeerHistory'], 'readwrite');\n      let store = transaction.objectStore('PeerHistory');\n      transaction.oncomplete = (event) => {\n        console.log('addPeerHistory done.', 'readwrite');\n        resolve();\n      };\n\n      transaction.onerror = (event) => {\n        console.error(event);\n        resolve();\n      };\n\n      store.delete(peerId);\n    });\n  }\n\n  getPeerHistory(): Promise<PeerHistory[]> {\n    return this.queue.add((resolve, reject) => {\n      console.log('getPeerHistory');\n      let transaction = this.db.transaction(['PeerHistory'], 'readonly');\n      let store = transaction.objectStore('PeerHistory');\n      let request = store.openCursor();\n      let history: PeerHistory[] = [];\n\n      transaction.oncomplete = (event) => {\n        console.log('getPeerHistory done.');\n        resolve(history);\n      };\n\n      transaction.onerror = (event) => {\n        console.error(event);\n        resolve(history);\n      };\n\n      request.onerror = (event) => {\n        console.error(event);\n        resolve(history);\n      };\n\n      request.onsuccess = (event) => {\n        let cursor: IDBCursorWithValue = request.result;\n        if (cursor) {\n          console.log('id:' + cursor.key + ' value:', cursor.value);\n          history.push(cursor.value);\n          cursor.continue();\n        } else {\n          console.log('Entries all displayed.');\n        }\n      };\n    });\n  }\n}","import { ChatMessage, ChatMessageContext } from './chat-message';\nimport { ChatTab } from './chat-tab';\nimport { SyncObject } from './core/synchronize-object/decorator';\nimport { GameObject } from './core/synchronize-object/game-object';\nimport { ObjectStore } from './core/synchronize-object/object-store';\nimport { EventSystem } from './core/system';\nimport { PromiseQueue } from './core/system/util/promise-queue';\nimport { StringUtil } from './core/system/util/string-util';\n\ndeclare var Opal\n\ninterface DiceBotInfo {\n  script: string;\n  game: string;\n}\n\ninterface DiceRollResult {\n  result: string;\n  isSecret: boolean;\n}\n\n@SyncObject('dice-bot')\nexport class DiceBot extends GameObject {\n  private static loadedDiceBots: { [gameType: string]: boolean } = {};\n  private static queue: PromiseQueue = new PromiseQueue('DiceBotQueue');\n\n  public static diceBotInfos: DiceBotInfo[] = [\n    { script: 'EarthDawn', game: 'アースドーン' },\n    { script: 'EarthDawn3', game: 'アースドーン3版' },\n    { script: 'EarthDawn4', game: 'アースドーン4版' },\n    { script: 'Airgetlamh', game: '朱の孤塔のエアゲトラム' },\n    { script: 'Amadeus', game: 'アマデウス' },\n    { script: 'Arianrhod', game: 'アリアンロッド' },\n    { script: 'OrgaRain', game: '在りて遍くオルガレイン' },\n    { script: 'Alshard', game: 'アルシャード' },\n    { script: 'ArsMagica', game: 'アルスマギカ' },\n    { script: 'IthaWenUa', game: 'イサー・ウェン＝アー' },\n    { script: 'Insane', game: 'インセイン' },\n    { script: 'WitchQuest', game: 'ウィッチクエスト' },\n    { script: 'Warhammer', game: 'ウォーハンマー' },\n    { script: 'Utakaze', game: 'ウタカゼ' },\n    { script: 'Alsetto', game: '詩片のアルセット' },\n    { script: 'AceKillerGene', game: 'エースキラージーン' },\n    { script: 'EclipsePhase', game: 'エクリプス・フェイズ' },\n    { script: 'Elysion', game: 'エリュシオン' },\n    { script: 'Elric', game: 'エルリック！' },\n    { script: 'EmbryoMachine', game: 'エムブリオマシン' },\n    { script: 'EndBreaker', game: 'エンドブレイカー' },\n    { script: 'Oukahoushin3rd', game: '央華封神RPG第三版' },\n    { script: 'GardenOrder', game: 'ガーデンオーダー' },\n    { script: 'CardRanker', game: 'カードランカー' },\n    { script: 'Gurps', game: 'ガープス' },\n    { script: 'GurpsFW', game: 'ガープスフィルトウィズ' },\n    { script: 'ChaosFlare', game: 'カオスフレア' },\n    { script: 'OneWayHeroics', game: '片道勇者' },\n    { script: 'Kamigakari', game: '神我狩' },\n    { script: 'Garako', game: 'ガラコと破界の塔' },\n    { script: 'KanColle', game: '艦これRPG' },\n    { script: 'Gundog', game: 'ガンドッグ' },\n    { script: 'GundogZero', game: 'ガンドッグ・ゼロ' },\n    { script: 'GundogRevised', game: 'ガンドッグ・リヴァイズド' },\n    { script: 'KillDeathBusiness', game: 'キルデスビジネス' },\n    { script: 'StellarKnights', game: '銀剣のステラナイツ' },\n    { script: 'Cthulhu', game: 'クトゥルフ' },\n    { script: 'CthulhuTech', game: 'クトゥルフテック' },\n    { script: 'KurayamiCrying', game: 'クラヤミクライン' },\n    { script: 'GranCrest', game: 'グランクレスト' },\n    { script: 'GeishaGirlwithKatana', game: 'ゲイシャ・ガール・ウィズ・カタナ' },\n    { script: 'GehennaAn', game: 'ゲヘナ・アナスタシス' },\n    { script: 'Illusio', game: '晃天のイルージオ' },\n    { script: 'CodeLayerd', game: 'コード：レイヤード' },\n    { script: 'Avandner', game: '黒絢のアヴァンドナー' },\n    { script: 'Gorilla', game: 'ゴリラTRPG' },\n    { script: 'ColossalHunter', game: 'コロッサルハンター' },\n    { script: 'Postman', game: '壊れた世界のポストマン' },\n    { script: 'Satasupe', game: 'サタスペ' },\n    { script: 'SharedFantasia', game: 'Shared†Fantasia' },\n    { script: 'JamesBond', game: 'ジェームズ・ボンド007' },\n    { script: 'LiveraDoll', game: '紫縞のリヴラドール' },\n    { script: 'ShinobiGami', game: 'シノビガミ' },\n    { script: 'ShadowRun', game: 'シャドウラン' },\n    { script: 'ShadowRun4', game: 'シャドウラン第４版' },\n    { script: 'ShadowRun5', game: 'シャドウラン第５版' },\n    { script: 'ShoujoTenrankai', game: '少女展爛会' },\n    { script: 'Alter_raise', game: '心衝想機TRPGアルトレイズ' },\n    { script: 'ShinkuuGakuen', game: '真空学園' },\n    { script: 'Cthulhu7th', game: '新クトゥルフ' },\n    { script: 'ShinMegamiTenseiKakuseihen', game: '真・女神転生TRPG　覚醒篇' },\n    { script: 'SRS', game: 'Standard RPG System' },\n    { script: 'ScreamHighSchool', game: 'スクリームハイスクール' },\n    { script: 'SterileLife', game: 'ステラーライフTRPG' },\n    { script: 'StratoShout', game: 'ストラトシャウト' },\n    { script: 'TherapieSein', game: '青春疾患セラフィザイン' },\n    { script: 'EtrianOdysseySRS', game: '世界樹の迷宮SRS' },\n    { script: 'ZettaiReido', game: '絶対隷奴' },\n    { script: 'SevenFortressMobius', game: 'セブン＝フォートレス メビウス' },\n    { script: 'SwordWorld', game: 'ソードワールド' },\n    { script: 'SwordWorld2_0', game: 'ソードワールド2.0' },\n    { script: 'SwordWorld2_5', game: 'ソードワールド2.5' },\n    { script: 'Villaciel', game: '蒼天のヴィラシエル' },\n    { script: 'DarkSouls', game: 'ダークソウルTRPG' },\n    { script: 'DarkDaysDrive', game: 'ダークデイズドライブ' },\n    { script: 'DarkBlaze', game: 'ダークブレイズ' },\n    { script: 'DungeonsAndDoragons', game: 'ダンジョンズ＆ドラゴンズ' },\n    { script: 'DiceOfTheDead', game: 'ダイス・オブ・ザ・デッド' },\n    { script: 'DoubleCross', game: 'ダブルクロス2nd,3rd' },\n    { script: 'Paradiso', game: 'チェレステ色のパラディーゾ' },\n    { script: 'CrashWorld', game: '墜落世界' },\n    { script: 'StrangerOfSwordCity', game: '剣の街の異邦人TRPG' },\n    { script: 'DetatokoSaga', game: 'でたとこサーガ' },\n    { script: 'DeadlineHeroes', game: 'デッドラインヒーローズ' },\n    { script: 'DemonParasite', game: 'デモンパラサイト' },\n    { script: 'TokyoGhostResearch', game: '東京ゴーストリサーチ' },\n    { script: 'TokyoNova', game: 'トーキョーＮ◎ＶＡ' },\n    { script: 'Torg', game: 'トーグ' },\n    { script: 'Torg1_5', game: 'トーグ1.5版' },\n    { script: 'TokumeiTenkousei', game: '特命転攻生' },\n    { script: 'Dracurouge', game: 'ドラクルージュ' },\n    { script: 'TrinitySeven', game: 'トリニティセブンRPG' },\n    { script: 'TwilightGunsmoke', game: 'トワイライト・ガンスモーク' },\n    { script: 'TunnelsAndTrolls', game: 'トンネルズ＆トロールズ' },\n    { script: 'NightWizard', game: 'ナイトウィザード2版' },\n    { script: 'NightWizard3rd', game: 'ナイトウィザード3版' },\n    { script: 'NightmareHunterDeep', game: 'ナイトメアハンター=ディープ' },\n    { script: 'NinjaSlayer', game: 'ニンジャスレイヤーTRPG' },\n    { script: 'Nuekagami', game: '鵺鏡' },\n    { script: 'Nechronica', game: 'ネクロニカ' },\n    { script: 'HarnMaster', game: 'ハーンマスター' },\n    { script: 'Skynauts', game: '歯車の塔の探空士' },\n    { script: 'HatsuneMiku', game: '初音ミクTRPG ココロダンジョン' },\n    { script: 'BattleTech', game: 'バトルテック' },\n    { script: 'ParasiteBlood', game: 'パラサイトブラッド' },\n    { script: 'Paranoia', game: 'パラノイア' },\n    { script: 'BarnaKronika', game: 'バルナ・クロニカ' },\n    { script: 'PulpCthulhu', game: 'パルプ・クトゥルフ' },\n    { script: 'Raisondetre', game: '叛逆レゾンデートル' },\n    { script: 'BadLife', game: '犯罪活劇RPGバッドライフ' },\n    { script: 'HuntersMoon', game: 'ハンターズムーン' },\n    { script: 'Peekaboo', game: 'ピーカーブー' },\n    { script: 'BeastBindTrinity', game: 'ビーストバインド トリニティ' },\n    { script: 'BeginningIdol', game: 'ビギニングアイドル' },\n    { script: 'PhantasmAdventure', game: 'ファンタズムアドベンチャー' },\n    { script: 'FilledWith', game: 'フィルトウィズ' },\n    { script: 'FutariSousa', game: 'フタリソウサ' },\n    { script: 'BlindMythos', game: 'ブラインド・ミトス' },\n    { script: 'BloodCrusade', game: 'ブラッド・クルセイド' },\n    { script: 'BloodMoon', game: 'ブラッド・ムーン' },\n    { script: 'FullMetalPanic', game: 'フルメタル・パニック！' },\n    { script: 'BladeOfArcana', game: 'ブレイド・オブ・アルカナ' },\n    { script: 'Strave', game: '碧空のストレイヴ' },\n    { script: 'Pendragon', game: 'ペンドラゴン' },\n    { script: 'HouraiGakuen', game: '蓬莱学園の冒険!!' },\n    { script: 'MagicaLogia', game: 'マギカロギア' },\n    { script: 'MeikyuDays', game: '迷宮デイズ' },\n    { script: 'MeikyuKingdom', game: '迷宮キングダム' },\n    { script: 'MetallicGuadian', game: 'メタリックガーディアン' },\n    { script: 'MetalHead', game: 'メタルヘッド' },\n    { script: 'MetalHeadExtream', game: 'メタルヘッドエクストリーム' },\n    { script: 'MonotoneMusium', game: 'モノトーン・ミュージアム' },\n    { script: 'YankeeYogSothoth', game: 'ヤンキー＆ヨグ＝ソトース' },\n    { script: 'GoldenSkyStories', game: 'ゆうやけこやけ' },\n    { script: 'Ryutama', game: 'りゅうたま' },\n    { script: 'RuneQuest', game: 'ルーンクエスト' },\n    { script: 'LogHorizon', game: 'ログ・ホライズン' },\n    { script: 'RokumonSekai2', game: '六門世界2nd' },\n    { script: 'RoleMaster', game: 'ロールマスター' },\n    { script: 'LostRecord', game: 'ロストレコード' },\n    { script: 'LostRoyal', game: 'ロストロイヤル' },\n    { script: 'WaresBlade', game: 'ワースブレイド' },\n    { script: 'WorldOfDarkness', game: 'ワールドオブダークネス' },\n    { script: 'WARPS', game: 'ワープス' },\n    { script: 'Hieizan', game: '比叡山炎上' },\n    { script: 'InfiniteFantasia', game: '無限のファンタジア' },\n    { script: 'Chill', game: 'Chill' },\n    { script: 'Chill3', game: 'Chill 3' },\n    { script: 'NjslyrBattle', game: 'NJSLYRBATTLE' },\n    { script: 'Pathfinder', game: 'Pathfinder' }\n  ];\n\n  public static extratablesTables: string[] = [\n    'BloodCrusade_TD2T.txt',\n    'BloodCrusade_TD3T.txt',\n    'BloodCrusade_TD4T.txt',\n    'BloodCrusade_TD5T.txt',\n    'BloodCrusade_TD6T.txt',\n    'BloodCrusade_TDHT.txt',\n    'BloodMoon_ID2T.txt',\n    'BloodMoon_IDT.txt',\n    'BloodMoon_RAT.txt',\n    'CardRanker_BFT.txt',\n    'CardRanker_CDT.txt',\n    'CardRanker_CST.txt',\n    'CardRanker_DT.txt',\n    'CardRanker_GDT.txt',\n    'CardRanker_OST.txt',\n    'CardRanker_SST.txt',\n    'CardRanker_ST.txt',\n    'CardRanker_TDT.txt',\n    'CardRanker_WT.txt',\n    'Elysion_EBT.txt',\n    'Elysion_GIT.txt',\n    'Elysion_HBT.txt',\n    'Elysion_HT.txt',\n    'Elysion_IT.txt',\n    'Elysion_JH.txt',\n    'Elysion_KT.txt',\n    'Elysion_NA.txt',\n    'Elysion_NT.txt',\n    'Elysion_OJ1.txt',\n    'Elysion_OJ2.txt',\n    'Elysion_TBT.txt',\n    'Elysion_UBT.txt',\n    'Elysion_UT1.txt',\n    'Elysion_UT2.txt',\n    'Elysion_UT3.txt',\n    'Elysion_UT4.txt',\n    'HuntersMoon_DS1ET.txt',\n    'HuntersMoon_DS2ET.txt',\n    'HuntersMoon_DS3ET.txt',\n    'HuntersMoon_EE1ET.txt',\n    'HuntersMoon_EE2ET.txt',\n    'HuntersMoon_EE3ET.txt',\n    'HuntersMoon_ERT.txt',\n    'HuntersMoon_ET1ET.txt',\n    'HuntersMoon_ET2ET.txt',\n    'HuntersMoon_ET3ET.txt',\n    'HuntersMoon_MST.txt',\n    'HuntersMoon_TK1ET.txt',\n    'HuntersMoon_TK2ET.txt',\n    'HuntersMoon_TK3ET.txt',\n    'Kamigakari_ET.txt',\n    'Kamigakari_KT.txt',\n    'Kamigakari_NT.txt',\n    'KanColle_BT2.txt',\n    'KanColle_BT3.txt',\n    'KanColle_BT4.txt',\n    'KanColle_BT5.txt',\n    'KanColle_BT6.txt',\n    'KanColle_BT7.txt',\n    'KanColle_BT8.txt',\n    'KanColle_BT9.txt',\n    'KanColle_BT10.txt',\n    'KanColle_BT11.txt',\n    'KanColle_BT12.txt',\n    'KanColle_ETIT.txt',\n    'KanColle_LFDT.txt',\n    'KanColle_LFVT.txt',\n    'KanColle_LSFT.txt',\n    'KanColle_WPCN.txt',\n    'KanColle_WPFA.txt',\n    'KanColle_WPMC.txt',\n    'KanColle_WPMCN.txt',\n    'KillDeathBusiness_ANSPT.txt',\n    'KillDeathBusiness_MASPT.txt',\n    'KillDeathBusiness_MOSPT.txt',\n    'KillDeathBusiness_PASPT.txt',\n    'KillDeathBusiness_POSPT.txt',\n    'KillDeathBusiness_UMSPT.txt',\n    'Oukahoushin3rd_BKT.txt',\n    'Oukahoushin3rd_KKT.txt',\n    'Oukahoushin3rd_NHT.txt',\n    'Oukahoushin3rd_SDT.txt',\n    'Oukahoushin3rd_SKT.txt',\n    'Oukahoushin3rd_STT.txt',\n    'Oukahoushin3rd_UKT.txt',\n    'ShinobiGami_AKST.txt',\n    'ShinobiGami_CLST.txt',\n    'ShinobiGami_DXST.txt',\n    'ShinobiGami_HC.txt',\n    'ShinobiGami_HK.txt',\n    'ShinobiGami_HLST.txt',\n    'ShinobiGami_HM.txt',\n    'ShinobiGami_HO.txt',\n    'ShinobiGami_HR.txt',\n    'ShinobiGami_HS.txt',\n    'ShinobiGami_HT.txt',\n    'ShinobiGami_HY.txt',\n    'ShinobiGami_NTST.txt',\n    'ShinobiGami_OTKRT.txt',\n    'ShinobiGami_PLST.txt',\n    'BloodCrusade_BDST.txt',\n    'BloodCrusade_CYST.txt',\n    'BloodCrusade_DMST.txt',\n    'BloodCrusade_MNST.txt',\n    'BloodCrusade_SLST.txt',\n    'BloodCrusade_TD1T.txt'\n  ];\n\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    DiceBot.queue.add(DiceBot.loadScriptAsync('./assets/cgiDiceBot.js'));\n    EventSystem.register(this)\n      .on('SEND_MESSAGE', async event => {\n        let chatMessage = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\n        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) return;\n\n        let text: string = StringUtil.toHalfWidth(chatMessage.text);\n        let gameType: string = chatMessage.tag;\n\n        try {\n          let regArray = /^((\\d+)?\\s+)?([^\\s]*)?/ig.exec(text);\n          let repeat: number = (regArray[2] != null) ? Number(regArray[2]) : 1;\n          let rollText: string = (regArray[3] != null) ? regArray[3] : text;\n\n          let finalResult: DiceRollResult = { result: '', isSecret: false };\n          for (let i = 0; i < repeat && i < 32; i++) {\n            let rollResult = await DiceBot.diceRollAsync(rollText, gameType);\n            if (rollResult.result.length < 1) break;\n\n            finalResult.result += rollResult.result;\n            finalResult.isSecret = finalResult.isSecret || rollResult.isSecret;\n            if (1 < repeat) finalResult.result += ` #${i + 1}`;\n          }\n          this.sendResultMessage(finalResult, chatMessage);\n        } catch (e) {\n          console.error(e);\n        }\n        return;\n      });\n  }\n\n  // GameObject Lifecycle\n  onStoreRemoved() {\n    super.onStoreRemoved();\n    EventSystem.unregister(this);\n  }\n\n  private sendResultMessage(rollResult: DiceRollResult, originalMessage: ChatMessage) {\n    let result: string = rollResult.result;\n    let isSecret: boolean = rollResult.isSecret;\n\n    if (result.length < 1) return;\n\n    result = result.replace(/[＞]/g, s => '→').trim();\n\n    let diceBotMessage: ChatMessageContext = {\n      identifier: '',\n      tabIdentifier: originalMessage.tabIdentifier,\n      originFrom: originalMessage.from,\n      from: 'System-BCDice',\n      timestamp: originalMessage.timestamp + 1,\n      imageIdentifier: '',\n      tag: isSecret ? 'system secret' : 'system',\n      name: isSecret ? '<Secret-BCDice：' + originalMessage.name + '>' : '<BCDice：' + originalMessage.name + '>',\n      text: result\n    };\n\n    if (originalMessage.to != null && 0 < originalMessage.to.length) {\n      diceBotMessage.to = originalMessage.to;\n      if (originalMessage.to.indexOf(originalMessage.from) < 0) {\n        diceBotMessage.to += ' ' + originalMessage.from;\n      }\n    }\n    let chatTab = ObjectStore.instance.get<ChatTab>(originalMessage.tabIdentifier);\n    if (chatTab) chatTab.addMessage(diceBotMessage);\n  }\n\n  static diceRollAsync(message: string, gameType: string): Promise<DiceRollResult> {\n    DiceBot.queue.add(DiceBot.loadDiceBotAsync(gameType));\n    return DiceBot.queue.add(() => {\n      if ('Opal' in window === false) {\n        console.warn('Opal is not loaded...');\n        return { result: '', isSecret: false };\n      }\n      let result = [];\n      let dir = [];\n      let diceBotTablePrefix = 'diceBotTable_';\n      let isNeedResult = true;\n      try {\n        Opal.gvars.isDebug = false;\n        let cgiDiceBot = Opal.CgiDiceBot.$new();\n        result = cgiDiceBot.$roll(message, gameType, dir, diceBotTablePrefix, isNeedResult);\n        console.log('diceRoll!!!', result);\n        console.log('isSecret!!!', cgiDiceBot.isSecret);\n        return { result: result[0], isSecret: cgiDiceBot.isSecret };\n      } catch (e) {\n        console.error(e);\n      }\n      return { result: '', isSecret: false };\n    });\n  }\n\n  static getHelpMessage(gameType: string): Promise<string> {\n    DiceBot.queue.add(DiceBot.loadDiceBotAsync(gameType));\n    return DiceBot.queue.add(() => {\n      if ('Opal' in window === false) {\n        console.warn('Opal is not loaded...');\n        return '';\n      }\n      let help = '';\n      try {\n        let bcdice = Opal.CgiDiceBot.$new().$newBcDice();\n        bcdice.$setGameByTitle(gameType);\n        help = bcdice.diceBot.$getHelpMessage();\n      } catch (e) {\n        console.error(e);\n      }\n      return help;\n    });\n  }\n\n  static loadDiceBotAsync(gameType: string): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n      console.log('loadDiceBotAsync');\n      gameType = gameType.replace(/\\./g, s => '_');\n\n      if ((!gameType && gameType.length < 1) || DiceBot.loadedDiceBots[gameType]) {\n        console.log(gameType + ' is loaded');\n        resolve();\n        return;\n      }\n\n      DiceBot.loadedDiceBots[gameType] = false;\n\n      let promises: Promise<void>[] = [];\n      let scriptPath = './assets/dicebot/' + gameType + '.js';\n\n      promises.push(DiceBot.loadScriptAsync(scriptPath));\n\n      for (let table of DiceBot.extratablesTables) {\n        if (!table.indexOf(gameType)) {\n          let path = './assets/extratables/' + table;\n          promises.push(DiceBot.loadExtratablesAsync(path, table));\n        }\n      }\n\n      Promise.all(promises).then(() => {\n        DiceBot.loadedDiceBots[gameType] = true;\n        resolve();\n      });\n    });\n  }\n\n  private static loadScriptAsync(path: string): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n      let head = document.head;\n      let script = document.createElement('script');\n      script.src = path;\n      head.appendChild(script);\n\n      script.onload = (e) => {\n        if (head && script.parentNode) head.removeChild(script);\n        console.log(path + ' is loading OK!!!');\n        resolve();\n      };\n\n      script.onabort = script.onerror = (e) => {\n        if (head && script.parentNode) head.removeChild(script);\n        console.error(e);\n        resolve();\n      }\n    });\n  }\n\n  private static loadExtratablesAsync(path: string, table: string): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n      fetch(path)\n        .then(response => {\n          if (response.ok) return response.text();\n          throw new Error('Network response was not ok.');\n        })\n        .then(text => {\n          let array = /((.+)_(.+)).txt$/ig.exec(table);\n          Opal.TableFileData.$setVirtualTableData(array[1], array[2], array[3], text);\n          console.log(table + ' is loading OK!!!');\n          resolve();\n        })\n        .catch(error => {\n          console.warn('There has been a problem with your fetch operation: ', error.message);\n          resolve();\n        });\n    });\n  }\n}\n","import { ImageFile } from './core/file-storage/image-file';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { Network } from './core/system';\nimport { DataElement } from './data-element';\nimport { PeerCursor } from './peer-cursor';\nimport { TabletopObject } from './tabletop-object';\n\nexport enum DiceType {\n  D2,\n  D4,\n  D6,\n  D8,\n  D10,\n  D10_10TIMES,\n  D12,\n  D20\n}\n\n@SyncObject('dice-symbol')\nexport class DiceSymbol extends TabletopObject {\n  @SyncVar() face: string = '0';\n  @SyncVar() owner: string = '';\n  @SyncVar() rotate: number = 0;\n\n  get name(): string { return this.getCommonValue('name', ''); }\n  set name(name: string) { this.setCommonValue('name', name); }\n  get size(): number { return this.getCommonValue('size', 1); }\n  set size(size: number) { this.setCommonValue('size', size); }\n\n  get faces(): string[] { return this.imageDataElement.children.map(element => (element as DataElement).name); }\n  get imageFile(): ImageFile {\n    return this.isVisible ?\n      this.getImageFile(this.face)\n      : this.faces.length\n        ? this.getImageFile(this.faces[0])\n        : null;\n  }\n\n  get ownerName(): string {\n    let object = PeerCursor.find(this.owner);\n    return object ? object.name : '';\n  }\n  get hasOwner(): boolean { return PeerCursor.find(this.owner) != null; }\n  get isMine(): boolean { return Network.peerId === this.owner; }\n  get isVisible(): boolean { return !this.hasOwner || this.isMine; }\n\n  diceRoll(): string {\n    let faces = this.faces;\n    this.face = 0 < faces.length ? faces[Math.floor(Math.random() * faces.length)] : '';\n    return this.face;\n  }\n\n  setDicetype(type: DiceType) {\n    this.makeDiceFace(type);\n  }\n\n  private makeDiceFace(type: DiceType, identifierSuffix?: string): DataElement[] {\n    let sided: number = 1;\n    let faces: DataElement[] = [];\n    let faceGeneratorFunc: (index: number) => string = index => (index + 1) + '';\n\n    switch (type) {\n      case DiceType.D2:\n        sided = 2;\n        break;\n      case DiceType.D4:\n        sided = 4;\n        break;\n      case DiceType.D6:\n        sided = 6;\n        break;\n      case DiceType.D8:\n        sided = 8;\n        break;\n      case DiceType.D10_10TIMES:\n        faceGeneratorFunc = index => (index + 1) + '0';\n      case DiceType.D10:\n        sided = 10;\n        break;\n      case DiceType.D12:\n        sided = 12;\n        break;\n      case DiceType.D20:\n        sided = 20;\n        break;\n      default:\n        sided = 2;\n        break;\n    }\n\n    for (let i = 0; i < sided; i++) {\n      let faceName = faceGeneratorFunc(i);\n      let identifier = identifierSuffix != null ? faceName + '_' + identifierSuffix : null;\n      faces.push(DataElement.create(faceName, '', { type: 'image' }, identifier));\n    }\n\n    this.imageDataElement.children.forEach(element => element.destroy());\n    faces.forEach(element => this.imageDataElement.appendChild(element));\n    this.face = faces[0].name;\n\n    return faces;\n  }\n\n  static create(name: string, type: DiceType, size: number,\n    identifier?: string): DiceSymbol {\n    let object: DiceSymbol = identifier ? new DiceSymbol(identifier) : new DiceSymbol();\n\n    object.createDataElements();\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('size', size, {}, 'size_' + object.identifier));\n\n    object.makeDiceFace(type, object.identifier);\n    object.initialize();\n    return object;\n  }\n}\n","import { ChatPalette } from './chat-palette';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { DataElement } from './data-element';\nimport { TabletopObject } from './tabletop-object';\n\n@SyncObject('character')\nexport class GameCharacter extends TabletopObject {\n  @SyncVar() rotate: number = 0;\n  @SyncVar() roll: number = 0;\n\n  get name(): string { return this.getCommonValue('name', ''); }\n  get size(): number { return this.getCommonValue('size', 1); }\n\n  get chatPalette(): ChatPalette {\n    for (let child of this.children) {\n      if (child instanceof ChatPalette) return child;\n    }\n    return null;\n  }\n\n  static create(name: string, size: number, imageIdentifier: string): GameCharacter {\n    let gameCharacter: GameCharacter = new GameCharacter();\n    gameCharacter.createDataElements();\n    gameCharacter.initialize();\n    gameCharacter.createTestGameDataElement(name, size, imageIdentifier);\n\n    return gameCharacter;\n  }\n\n  createTestGameDataElement(name: string, size: number, imageIdentifier: string) {\n    this.createDataElements();\n\n    let nameElement: DataElement = DataElement.create('name', name, {}, 'name_' + this.identifier);\n    let sizeElement: DataElement = DataElement.create('size', size, {}, 'size_' + this.identifier);\n\n    if (this.imageDataElement.getFirstElementByName('imageIdentifier')) {\n      this.imageDataElement.getFirstElementByName('imageIdentifier').value = imageIdentifier;\n    }\n\n    let resourceElement: DataElement = DataElement.create('リソース', '', {}, 'リソース' + this.identifier);\n    let hpElement: DataElement = DataElement.create('HP', 200, { 'type': 'numberResource', 'currentValue': '200' }, 'HP_' + this.identifier);\n    let mpElement: DataElement = DataElement.create('MP', 100, { 'type': 'numberResource', 'currentValue': '100' }, 'MP_' + this.identifier);\n\n    this.commonDataElement.appendChild(nameElement);\n    this.commonDataElement.appendChild(sizeElement);\n\n    this.detailDataElement.appendChild(resourceElement);\n    resourceElement.appendChild(hpElement);\n    resourceElement.appendChild(mpElement);\n\n    //TEST\n    let testElement: DataElement = DataElement.create('情報', '', {}, '情報' + this.identifier);\n    this.detailDataElement.appendChild(testElement);\n    testElement.appendChild(DataElement.create('説明', 'ここに説明を書く\\nあいうえお', { 'type': 'note' }, '説明' + this.identifier));\n    testElement.appendChild(DataElement.create('メモ', '任意の文字列\\n１\\n２\\n３\\n４\\n５', { 'type': 'note' }, 'メモ' + this.identifier));\n\n    //TEST\n    testElement = DataElement.create('能力', '', {}, '能力' + this.identifier);\n    this.detailDataElement.appendChild(testElement);\n    testElement.appendChild(DataElement.create('器用度', 24, {}, '器用度' + this.identifier));\n    testElement.appendChild(DataElement.create('敏捷度', 24, {}, '敏捷度' + this.identifier));\n    testElement.appendChild(DataElement.create('筋力', 24, {}, '筋力' + this.identifier));\n    testElement.appendChild(DataElement.create('生命力', 24, {}, '生命力' + this.identifier));\n    testElement.appendChild(DataElement.create('知力', 24, {}, '知力' + this.identifier));\n    testElement.appendChild(DataElement.create('精神力', 24, {}, '精神力' + this.identifier));\n\n    //TEST\n    testElement = DataElement.create('戦闘特技', '', {}, '戦闘特技' + this.identifier);\n    this.detailDataElement.appendChild(testElement);\n    testElement.appendChild(DataElement.create('Lv1', '全力攻撃', {}, 'Lv1' + this.identifier));\n    testElement.appendChild(DataElement.create('Lv3', '武器習熟/ソード', {}, 'Lv3' + this.identifier));\n    testElement.appendChild(DataElement.create('Lv5', '武器習熟/ソードⅡ', {}, 'Lv5' + this.identifier));\n    testElement.appendChild(DataElement.create('Lv7', '頑強', {}, 'Lv7' + this.identifier));\n    testElement.appendChild(DataElement.create('Lv9', '薙ぎ払い', {}, 'Lv9' + this.identifier));\n    testElement.appendChild(DataElement.create('自動', '治癒適正', {}, '自動' + this.identifier));\n\n    let domParser: DOMParser = new DOMParser();\n    let gameCharacterXMLDocument: Document = domParser.parseFromString(this.rootDataElement.toXml(), 'application/xml');\n\n    let palette: ChatPalette = new ChatPalette('ChatPalette_' + this.identifier);\n    palette.setPalette(`チャットパレット入力例：\n2d6+1 ダイスロール\n１ｄ２０＋{敏捷}＋｛格闘｝　{name}の格闘！\n//敏捷=10+{敏捷A}\n//敏捷A=10\n//格闘＝１`);\n    palette.initialize();\n    this.appendChild(palette);\n  }\n}\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { DataElement } from './data-element';\nimport { TabletopObject } from './tabletop-object';\n\n@SyncObject('table-mask')\nexport class GameTableMask extends TabletopObject {\n  @SyncVar() isLock: boolean = false;\n\n  get name(): string { return this.getCommonValue('name', ''); }\n  get width(): number { return this.getCommonValue('width', 1); }\n  get height(): number { return this.getCommonValue('height', 1); }\n  get opacity(): number {\n    let element = this.getElement('opacity', this.commonDataElement);\n    let num = element ? <number>element.currentValue / <number>element.value : 1;\n    return Number.isNaN(num) ? 1 : num;\n  }\n\n  static create(name: string, width: number, height: number, opacity: number, identifier?: string): GameTableMask {\n    let object: GameTableMask = null;\n\n    if (identifier) {\n      object = new GameTableMask(identifier);\n    } else {\n      object = new GameTableMask();\n    }\n    object.createDataElements();\n\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('width', width, {}, 'width_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('height', height, {}, 'height_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('opacity', opacity, { type: 'numberResource', currentValue: opacity }, 'opacity_' + object.identifier));\n    object.initialize();\n\n    return object;\n  }\n}\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { ObjectNode } from './core/synchronize-object/object-node';\nimport { EventSystem } from './core/system';\nimport { GameTableMask } from './game-table-mask';\nimport { Terrain } from './terrain';\n\nexport enum GridType {\n  SQUARE = 0,\n  HEX_VERTICAL = 1,\n  HEX_HORIZONTAL = 2,\n}\n\nexport enum FilterType {\n  NONE = '',\n  WHITE = 'white',\n  BLACK = 'black',\n}\n\n@SyncObject('game-table')\nexport class GameTable extends ObjectNode {\n  @SyncVar() name: string = 'テーブル';\n  @SyncVar() width: number = 20;\n  @SyncVar() height: number = 20;\n  @SyncVar() gridSize: number = 50;\n  @SyncVar() imageIdentifier: string = 'imageIdentifier';\n  @SyncVar() backgroundImageIdentifier: string = 'imageIdentifier';\n  @SyncVar() backgroundFilterType: FilterType = FilterType.NONE;\n  @SyncVar() selected: boolean = false;\n  @SyncVar() gridType: GridType = GridType.SQUARE;\n  @SyncVar() gridColor: string = '#000000e6';\n\n  get terrains(): Terrain[] {\n    let terrains: Terrain[] = [];\n    this.children.forEach(object => {\n      if (object instanceof Terrain) terrains.push(object);\n    });\n    return terrains;\n  }\n\n  get masks(): GameTableMask[] {\n    let masks: GameTableMask[] = [];\n    this.children.forEach(object => {\n      if (object instanceof GameTableMask) masks.push(object);\n    });\n    return masks;\n  }\n\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    if (this.selected) EventSystem.trigger('SELECT_GAME_TABLE', { identifier: this.identifier });\n  }\n}\n","import { ImageFile } from './core/file-storage/image-file';\nimport { ImageStorage } from './core/file-storage/image-storage';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { GameObject, ObjectContext } from './core/synchronize-object/game-object';\nimport { ObjectStore } from './core/synchronize-object/object-store';\nimport { EventSystem, Network } from './core/system';\n\n@SyncObject('PeerCursor')\nexport class PeerCursor extends GameObject {\n  @SyncVar() peerId: string = '';\n  @SyncVar() name: string = '';\n  @SyncVar() imageIdentifier: string = '';\n\n  static myCursor: PeerCursor = null;\n  private static hash: { [peerId: string]: string } = {};\n\n  get isMine(): boolean { return (PeerCursor.myCursor && PeerCursor.myCursor === this); }\n  get image(): ImageFile { return ImageStorage.instance.get(this.imageIdentifier); }\n\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    if (!this.isMine) {\n      EventSystem.register(this)\n        .on('DISCONNECT_PEER', -1000, event => {\n          if (event.data.peer !== this.peerId) return;\n          delete PeerCursor.hash[this.peerId];\n          ObjectStore.instance.remove(this);\n        });\n    }\n  }\n\n  // GameObject Lifecycle\n  onStoreRemoved() {\n    super.onStoreRemoved();\n    EventSystem.unregister(this);\n    delete PeerCursor.hash[this.peerId];\n  }\n\n  static find(peerId): PeerCursor {\n    let identifier = PeerCursor.hash[peerId];\n    if (identifier != null && ObjectStore.instance.get(identifier)) return ObjectStore.instance.get<PeerCursor>(identifier);\n    let cursors = ObjectStore.instance.getObjects<PeerCursor>(PeerCursor);\n    for (let cursor of cursors) {\n      if (cursor.peerId === peerId) {\n        PeerCursor.hash[peerId] = cursor.identifier;\n        return cursor;\n      }\n    }\n    return null;\n  }\n\n  static createMyCursor(): PeerCursor {\n    if (PeerCursor.myCursor) {\n      console.warn('It is already created.');\n      return PeerCursor.myCursor;\n    }\n    PeerCursor.myCursor = new PeerCursor();\n    PeerCursor.myCursor.peerId = Network.peerId;\n    PeerCursor.myCursor.initialize();\n    return PeerCursor.myCursor;\n  }\n\n  // override\n  apply(context: ObjectContext) {\n    if (context.syncData['peerId'] !== this.peerId) {\n      PeerCursor.hash[context.syncData['peerId']] = PeerCursor.hash[this.peerId];\n      delete PeerCursor.hash[this.peerId];\n    }\n    super.apply(context);\n  }\n\n  isPeerAUdon() {\n    return /u.*d.*o.*n/ig.exec(this.peerId) != null;\n  }\n}\n","import { Card } from './card';\nimport { CardStack } from './card-stack';\nimport { SyncObject } from './core/synchronize-object/decorator';\nimport { GameObject } from './core/synchronize-object/game-object';\nimport { InnerXml, ObjectSerializer } from './core/synchronize-object/object-serializer';\nimport { ObjectStore } from './core/synchronize-object/object-store';\nimport { DiceSymbol } from './dice-symbol';\nimport { GameCharacter } from './game-character';\nimport { GameTable } from './game-table';\nimport { GameTableMask } from './game-table-mask';\nimport { Terrain } from './terrain';\nimport { TextNote } from './text-note';\n\n@SyncObject('room')\nexport class Room extends GameObject implements InnerXml {\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    ObjectStore.instance.remove(this); // ObjectStoreには登録しない\n  }\n\n  innerXml(): string {\n    let xml = '';\n    let objects: GameObject[] = [];\n    objects = objects.concat(ObjectStore.instance.getObjects(GameTable));\n    objects = objects.concat(ObjectStore.instance.getObjects(GameCharacter));\n    objects = objects.concat(ObjectStore.instance.getObjects(TextNote));\n    objects = objects.concat(ObjectStore.instance.getObjects(CardStack));\n    objects = objects.concat(ObjectStore.instance.getObjects(Card).filter((obj) => { return obj.parent === null }));\n    objects = objects.concat(ObjectStore.instance.getObjects(DiceSymbol));\n    for (let object of objects) {\n      xml += object.toXml();\n    }\n    return xml;\n  }\n\n  parseInnerXml(element: Element) {\n    let objects: GameObject[] = [];\n    objects = objects.concat(ObjectStore.instance.getObjects(GameTable));\n    objects = objects.concat(ObjectStore.instance.getObjects(GameTableMask));\n    objects = objects.concat(ObjectStore.instance.getObjects(Terrain));\n    objects = objects.concat(ObjectStore.instance.getObjects(GameCharacter));\n    objects = objects.concat(ObjectStore.instance.getObjects(TextNote));\n    objects = objects.concat(ObjectStore.instance.getObjects(CardStack));\n    objects = objects.concat(ObjectStore.instance.getObjects(Card));\n    objects = objects.concat(ObjectStore.instance.getObjects(DiceSymbol));\n    for (let object of objects) {\n      object.destroy();\n    }\n    for (let i = 0; i < element.children.length; i++) {\n      ObjectSerializer.instance.parseXml(element.children[i]);\n    }\n  }\n}\n","import { ChatMessage, ChatMessageContext } from './chat-message';\nimport { AudioFile } from './core/file-storage/audio-file';\nimport { AudioPlayer } from './core/file-storage/audio-player';\nimport { AudioStorage } from './core/file-storage/audio-storage';\nimport { SyncObject } from './core/synchronize-object/decorator';\nimport { GameObject } from './core/synchronize-object/game-object';\nimport { ObjectStore } from './core/synchronize-object/object-store';\nimport { EventSystem } from './core/system';\n\nexport class PresetSound {\n  static dicePick: string = '';\n  static dicePut: string = '';\n  static diceRoll1: string = '';\n  static diceRoll2: string = '';\n  static cardDraw: string = '';\n  static cardPick: string = '';\n  static cardPut: string = '';\n  static cardShuffle: string = '';\n  static piecePick: string = '';\n  static piecePut: string = '';\n  static blockPick: string = '';\n  static blockPut: string = '';\n  static lock: string = '';\n  static unlock: string = '';\n  static sweep: string = '';\n}\n\n@SyncObject('sound-effect')\nexport class SoundEffect extends GameObject {\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    EventSystem.register(this)\n      .on<string>('SOUND_EFFECT', event => {\n        AudioPlayer.play(AudioStorage.instance.get(event.data), 0.5);\n      })\n      .on('SEND_MESSAGE', event => {\n        let chatMessage = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\n        if (!chatMessage || !chatMessage.isSendFromSelf || !chatMessage.isDicebot) return;\n        if (Math.random() < 0.5) {\n          SoundEffect.play(PresetSound.diceRoll1);\n        } else {\n          SoundEffect.play(PresetSound.diceRoll2);\n        }\n      });\n  }\n\n  // GameObject Lifecycle\n  onStoreRemoved() {\n    super.onStoreRemoved();\n    EventSystem.unregister(this);\n  }\n\n  play(identifier: string)\n  play(audio: AudioFile)\n  play(arg: any) {\n    SoundEffect.play(arg);\n  }\n\n  static play(identifier: string)\n  static play(audio: AudioFile)\n  static play(arg: any) {\n    let identifier = '';\n    if (typeof arg === 'string') {\n      identifier = arg;\n    } else {\n      identifier = arg.identifier;\n    }\n    SoundEffect._play(identifier);\n  }\n\n  private static _play(identifier: string) {\n    EventSystem.call('SOUND_EFFECT', identifier);\n  }\n}","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { GameObject } from './core/synchronize-object/game-object';\nimport { ObjectStore } from './core/synchronize-object/object-store';\nimport { EventSystem } from './core/system';\nimport { GameTable } from './game-table';\n\n@SyncObject('TableSelecter')\nexport class TableSelecter extends GameObject {\n  @SyncVar() viewTableIdentifier: string = '';\n  gridShow: boolean = false; // true=常時グリッド表示\n  gridSnap: boolean = true;\n\n  // GameObject Lifecycle\n  onStoreAdded() {\n    super.onStoreAdded();\n    EventSystem.register(this)\n      .on('SELECT_GAME_TABLE', event => {\n        console.log('SELECT_GAME_TABLE ' + this.identifier);\n\n        if (this.viewTable) this.viewTable.selected = false;\n        this.viewTableIdentifier = event.data.identifier;\n        if (this.viewTable) this.viewTable.selected = true;\n      });\n  }\n\n  // GameObject Lifecycle\n  onStoreRemoved() {\n    super.onStoreRemoved();\n    EventSystem.unregister(this);\n  }\n\n  get viewTable(): GameTable {\n    let table: GameTable = ObjectStore.instance.get<GameTable>(this.viewTableIdentifier);\n    if (!table) {\n      table = ObjectStore.instance.getObjects<GameTable>(GameTable)[0];\n      if (table && (this.viewTableIdentifier.length < 1 || ObjectStore.instance.isDeleted(this.viewTableIdentifier))) {\n        this.viewTableIdentifier = table.identifier;\n        EventSystem.trigger('SELECT_GAME_TABLE', { identifier: table.identifier });\n      }\n    }\n    return table;\n  }\n}\n","import { ObjectStore } from './core/synchronize-object/object-store';\nimport { TabletopObject } from './tabletop-object';\n\ntype AliasName = string;\n\nexport interface Stackable extends TabletopObject {\n  zindex: number;\n}\n\nexport function moveToTopmost(topmost: Stackable, otherRelatives: AliasName[] = []) {\n  let objects: Stackable[] = ObjectStore.instance.getObjects(topmost.aliasName);\n  otherRelatives.forEach(aliasName => objects = objects.concat(ObjectStore.instance.getObjects(aliasName)));\n  objects = objects.filter(obj => obj.isVisibleOnTable);\n\n  let maxZindex: number = -1;\n  let hasConflict: boolean = false;\n  for (let i = 0; i < objects.length; i++) {\n    if (maxZindex === objects[i].zindex) {\n      hasConflict = true;\n    } else if (maxZindex < objects[i].zindex) {\n      maxZindex = objects[i].zindex;\n      hasConflict = false;\n    }\n  }\n\n  if (maxZindex === topmost.zindex && !hasConflict) return;\n  topmost.zindex = maxZindex + 1;\n\n  if (topmost.zindex < objects.length + 256) return;\n  objects.sort((a, b) => a.zindex - b.zindex);\n\n  for (let i = 0; i < objects.length; i++) {\n    objects[i].zindex = i;\n  }\n}\n","import { ImageFile } from './core/file-storage/image-file';\nimport { ImageStorage } from './core/file-storage/image-storage';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { ObjectNode } from './core/synchronize-object/object-node';\nimport { ObjectStore } from './core/synchronize-object/object-store';\nimport { DataElement } from './data-element';\n\nexport interface TabletopLocation {\n  name: string;\n  x: number;\n  y: number;\n}\n\n@SyncObject('TabletopObject')\nexport class TabletopObject extends ObjectNode {\n  @SyncVar() location: TabletopLocation = {\n    name: 'table',\n    x: 0,\n    y: 0\n  };\n\n  @SyncVar() posZ: number = 0;\n\n  get isVisibleOnTable(): boolean { return this.location.name === 'table' && (!this.parentIsAssigned || this.parentIsDestroyed); }\n\n  private _imageFile: ImageFile = ImageFile.Empty;\n  private _dataElements: { [name: string]: string } = {};\n\n  // GameDataElement getter/setter\n  get rootDataElement(): DataElement {\n    for (let node of this.children) {\n      if (node.getAttribute('name') === this.aliasName) return <DataElement>node;\n    }\n    return null;\n  }\n\n  get imageDataElement(): DataElement { return this.getElement('image'); }\n  get commonDataElement(): DataElement { return this.getElement('common'); }\n  get detailDataElement(): DataElement { return this.getElement('detail'); }\n\n  get imageFile(): ImageFile {\n    if (!this.imageDataElement) return this._imageFile;\n    let imageIdElement: DataElement = this.imageDataElement.getFirstElementByName('imageIdentifier');\n    if (imageIdElement && this._imageFile.identifier !== imageIdElement.value) {\n      let file: ImageFile = ImageStorage.instance.get(<string>imageIdElement.value);\n      this._imageFile = file ? file : ImageFile.Empty;\n    }\n    return this._imageFile;\n  }\n\n  protected createDataElements() {\n    this.initialize();\n    let aliasName: string = this.aliasName;\n    if (!this.rootDataElement) {\n      let rootElement = DataElement.create(aliasName, '', {}, aliasName + '_' + this.identifier);\n      this.appendChild(rootElement);\n    }\n\n    if (!this.imageDataElement) {\n      this.rootDataElement.appendChild(DataElement.create('image', '', {}, 'image_' + this.identifier));\n      this.imageDataElement.appendChild(DataElement.create('imageIdentifier', '', { type: 'image' }, 'imageIdentifier_' + this.identifier));\n    }\n    if (!this.commonDataElement) this.rootDataElement.appendChild(DataElement.create('common', '', {}, 'common_' + this.identifier));\n    if (!this.detailDataElement) this.rootDataElement.appendChild(DataElement.create('detail', '', {}, 'detail_' + this.identifier));\n  }\n\n  getElement(name: string, from: DataElement = this.rootDataElement): DataElement {\n    if (!from) return null;\n    let element: DataElement = this._dataElements[name] ? ObjectStore.instance.get(this._dataElements[name]) : null;\n    if (!element || !from.contains(element)) {\n      element = from.getFirstElementByName(name);\n      this._dataElements[name] = element ? element.identifier : null;\n    }\n    return element;\n  }\n\n  protected getCommonValue<T extends string | number>(elementName: string, defaultValue: T): T {\n    let element = this.getElement(elementName, this.commonDataElement);\n    if (!element) return defaultValue;\n\n    if (typeof defaultValue === 'number') {\n      let number: number = +element.value;\n      return <T>(Number.isNaN(number) ? defaultValue : number);\n    } else {\n      return <T>(element.value + '');\n    }\n  }\n\n  protected setCommonValue(elementName: string, value: any) {\n    let element = this.getElement(elementName, this.commonDataElement);\n    if (!element) { return; }\n    element.value = value;\n  }\n\n  protected getImageFile(elementName: string) {\n    if (!this.imageDataElement) return null;\n    let image = this.getElement(elementName, this.imageDataElement);\n    return image ? ImageStorage.instance.get(<string>image.value) : null;\n  }\n\n  protected setImageFile(elementName: string, imageFile: ImageFile) {\n    let image = imageFile ? this.getElement(elementName, this.imageDataElement) : null;\n    if (!image) return;\n    image.value = imageFile.identifier;\n  }\n\n  setLocation(location: string) {\n    this.location.name = location;\n    this.update();\n  }\n}\n","import { ImageFile } from './core/file-storage/image-file';\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { DataElement } from './data-element';\nimport { TabletopObject } from './tabletop-object';\n\nexport enum TerrainViewState {\n  NULL = 0,\n  FLOOR = 1,\n  WALL = 2,\n  ALL = 3,\n}\n\n@SyncObject('terrain')\nexport class Terrain extends TabletopObject {\n  @SyncVar() isLocked: boolean = false;\n  @SyncVar() mode: TerrainViewState = TerrainViewState.ALL;\n  @SyncVar() rotate: number = 0;\n\n  get width(): number { return this.getCommonValue('width', 1); }\n  set width(width: number) { this.setCommonValue('width', width); }\n  get height(): number { return this.getCommonValue('height', 1); }\n  set height(height: number) { this.setCommonValue('height', height); }\n  get depth(): number { return this.getCommonValue('depth', 1); }\n  set depth(depth: number) { this.setCommonValue('depth', depth); }\n  get name(): string { return this.getCommonValue('name', ''); }\n  set name(name: string) { this.setCommonValue('name', name); }\n\n  get wallImage(): ImageFile { return this.getImageFile('wall'); }\n  get floorImage(): ImageFile { return this.getImageFile('floor'); }\n\n  get hasWall(): boolean { return this.mode & TerrainViewState.WALL ? true : false; }\n  get hasFloor(): boolean { return this.mode & TerrainViewState.FLOOR ? true : false; }\n\n  static create(name: string, width: number, depth: number, height: number, wall: string, floor: string, identifier?: string): Terrain {\n    let object: Terrain = null;\n\n    if (identifier) {\n      object = new Terrain(identifier);\n    } else {\n      object = new Terrain();\n    }\n    object.createDataElements();\n\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('width', width, {}, 'width_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('height', height, {}, 'height_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('depth', depth, {}, 'depth_' + object.identifier));\n    object.imageDataElement.appendChild(DataElement.create('wall', wall, { type: 'image' }, 'wall_' + object.identifier));\n    object.imageDataElement.appendChild(DataElement.create('floor', floor, { type: 'image' }, 'floor_' + object.identifier));\n    object.initialize();\n\n    return object;\n  }\n}\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\nimport { DataElement } from './data-element';\nimport { TabletopObject } from './tabletop-object';\nimport { moveToTopmost } from './tabletop-object-util';\n\n@SyncObject('text-note')\nexport class TextNote extends TabletopObject {\n  @SyncVar() rotate: number = 0;\n  @SyncVar() zindex: number = 0;\n  @SyncVar() password: string = '';\n\n  get width(): number { return this.getCommonValue('width', 1); }\n  get height(): number { return this.getCommonValue('height', 1); }\n  get fontSize(): number { return this.getCommonValue('fontsize', 1); }\n  get title(): string { return this.getCommonValue('title', ''); }\n  get text(): string { return this.getCommonValue('text', ''); }\n  set text(text: string) { this.setCommonValue('text', text); }\n\n  toTopmost() {\n    moveToTopmost(this);\n  }\n\n  static create(title: string, text: string, fontSize: number = 16, width: number = 1, height: number = 1, identifier?: string): TextNote {\n    let object: TextNote = identifier ? new TextNote(identifier) : new TextNote();\n\n    object.createDataElements();\n    object.commonDataElement.appendChild(DataElement.create('width', width, {}, 'width_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('height', height, {}, 'height_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('fontsize', fontSize, {}, 'fontsize_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('title', title, {}, 'title_' + object.identifier));\n    object.commonDataElement.appendChild(DataElement.create('text', text, { type: 'note', currentValue: text }, 'text_' + object.identifier));\n    object.initialize();\n\n    return object;\n  }\n}","export namespace CSSNumber {\n  export function relation(value: any, relativeSize: number, defaultValue: number = 0): number {\n    if (typeof value === 'number') {\n      return value;\n    }\n    else if (typeof value === 'string') {\n      value = (<string>value).trim().toLowerCase();\n      if (value.indexOf('%') > 0) return (parse(value.replace('%', ''), defaultValue) / 100) * relativeSize;\n      else if (value.indexOf('px') > 0 || value.indexOf('pt') > 0) return parse(value.replace('px', ''), defaultValue);\n      else if (value.indexOf('vw') > 0) return (parse(value.replace('vw', ''), defaultValue) / 100) * window.innerWidth;\n      else if (value.indexOf('vh') > 0) return (parse(value.replace('vh', ''), defaultValue) / 100) * window.innerHeight;\n      else if (value.indexOf('vm') > 0) return (parse(value.replace('vm', ''), defaultValue) / 100) * Math.min(window.innerWidth, window.innerHeight);\n      else if (value.indexOf('em') > 0) return parse(value.replace('em', ''), defaultValue);\n      else if (value === 'top' || value === 'left') return 0;\n      else if (value === 'center' || value === 'middle') return relativeSize * 0.5;\n      else if (value === 'bottom' || value === 'right') return relativeSize;\n      return defaultValue;\n    }\n    return defaultValue;\n  }\n\n  export function parse(value: any, defaultValue: number = 0): number {\n    value = parseFloat(value);\n    if (isNaN(value)) return defaultValue;\n    return value;\n  }\n}","import { CSSNumber } from './css-number';\nimport { IPoint2D, IPoint3D } from './transform';\n\nexport interface IMatrix3D {\n  m11: number;\n  m12: number;\n  m13: number;\n  m14: number;\n  m21: number;\n  m22: number;\n  m23: number;\n  m24: number;\n  m31: number;\n  m32: number;\n  m33: number;\n  m34: number;\n  m41: number;\n  m42: number;\n  m43: number;\n  m44: number;\n}\n\nexport class Matrix3D {\n  m11: number = 1;\n  m12: number = 0;\n  m13: number = 0;\n  m14: number = 0;\n  m21: number = 0;\n  m22: number = 1;\n  m23: number = 0;\n  m24: number = 0;\n  m31: number = 0;\n  m32: number = 0;\n  m33: number = 1;\n  m34: number = 0;\n  m41: number = 0;\n  m42: number = 0;\n  m43: number = 0;\n  m44: number = 1;\n\n  constructor() {\n  }\n\n  static create(element: HTMLElement, style: CSSStyleDeclaration = null, ret = new Matrix3D()): Matrix3D {\n    if (element && element.ownerDocument)\n      return ret.setCSS((style || window.getComputedStyle(element)).transform);\n    return ret.identity();\n  }\n\n  setData(data: number[]): Matrix3D {\n    if (data == null)\n      return;\n\n    let l = data.length;\n    if (l == 16) {\n      this.m11 = data[0];\n      this.m12 = data[1];\n      this.m13 = data[2];\n      this.m14 = data[3];\n      this.m21 = data[4];\n      this.m22 = data[5];\n      this.m23 = data[6];\n      this.m24 = data[7];\n      this.m31 = data[8];\n      this.m32 = data[9];\n      this.m33 = data[10];\n      this.m34 = data[11];\n      this.m41 = data[12];\n      this.m42 = data[13];\n      this.m43 = data[14];\n      this.m44 = data[15];\n    } else if (l == 6) {\n      this.m11 = data[0];\n      this.m12 = data[1];\n      this.m13 = 0;\n      this.m14 = 0;\n      this.m21 = data[2];\n      this.m22 = data[3];\n      this.m23 = 0;\n      this.m24 = 0;\n      this.m31 = 0;\n      this.m32 = 0;\n      this.m33 = 1;\n      this.m34 = 0;\n      this.m41 = data[4];\n      this.m42 = data[5];\n      this.m43 = 0;\n      this.m44 = 1;\n    } else if (l == 9) {\n      this.m11 = data[0];\n      this.m12 = data[1];\n      this.m13 = 0;\n      this.m14 = data[2];\n      this.m21 = data[3];\n      this.m22 = data[4];\n      this.m23 = 0;\n      this.m24 = data[5];\n      this.m31 = 0;\n      this.m32 = 0;\n      this.m33 = 1;\n      this.m34 = 0;\n      this.m41 = data[6];\n      this.m42 = data[7];\n      this.m43 = 0;\n      this.m44 = data[8];\n    }\n\n    return this;\n  }\n\n  identity(): Matrix3D {\n    this.m11 = 1;\n    this.m12 = 0;\n    this.m13 = 0;\n    this.m14 = 0;\n    this.m21 = 0;\n    this.m22 = 1;\n    this.m23 = 0;\n    this.m24 = 0;\n    this.m31 = 0;\n    this.m32 = 0;\n    this.m33 = 1;\n    this.m34 = 0;\n    this.m41 = 0;\n    this.m42 = 0;\n    this.m43 = 0;\n    this.m44 = 1;\n    return this;\n  }\n\n  scalar(scalar: number): Matrix3D {\n    this.m11 *= scalar;\n    this.m12 *= scalar;\n    this.m13 *= scalar;\n    this.m14 *= scalar;\n    this.m21 *= scalar;\n    this.m22 *= scalar;\n    this.m23 *= scalar;\n    this.m24 *= scalar;\n    this.m31 *= scalar;\n    this.m32 *= scalar;\n    this.m33 *= scalar;\n    this.m34 *= scalar;\n    this.m41 *= scalar;\n    this.m42 *= scalar;\n    this.m43 *= scalar;\n    this.m44 *= scalar;\n\n    return this;\n  }\n\n  //based on http://code.metager.de/source/xref/mozilla/B2G/gecko/gfx/thebes/gfx3DMatrix.cpp#651\n  unproject(point: IPoint2D, ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 }): IPoint3D {\n    let x = point.x * this.m11 + point.y * this.m21 + this.m41;\n    let y = point.x * this.m12 + point.y * this.m22 + this.m42;\n    let z = point.x * this.m13 + point.y * this.m23 + this.m43;\n    let w = point.x * this.m14 + point.y * this.m24 + this.m44;\n\n    let qx = x + this.m31;\n    let qy = y + this.m32;\n    let qz = z + this.m33;\n    let qw = w + this.m34;\n\n    if (w == 0) w = 0.0001;\n    x /= w;\n    y /= w;\n    z /= w;\n\n    if (qw == 0) qw = 0.0001;\n    qx /= qw;\n    qy /= qw;\n    qz /= qw;\n\n    let wz = qz - z;\n    if (wz == 0) {\n      ret.x = x;\n      ret.y = y;\n      ret.z = z;\n      ret.w = z;\n      return ret;\n    }\n\n    let t = -z / wz;\n    x += t * (qx - x);\n    y += t * (qy - y);\n\n    ret.x = x;\n    ret.y = y;\n    ret.z = z;\n    ret.w = z;\n    return ret;\n  }\n\n  project(point: IPoint3D, ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 }): IPoint3D {\n    let z = point.z;\n    let w = point.x * this.m14 + point.y * this.m24 + z * this.m34 + this.m44;\n    let x = point.x * this.m11 + point.y * this.m21 + z * this.m31 + this.m41;\n    let y = point.x * this.m12 + point.y * this.m22 + z * this.m32 + this.m42;\n\n    if (w == 0) w = 0.0001;\n\n    x /= w;\n    y /= w;\n\n    if (w < 0) {\n      x -= this.m41;\n      y -= this.m42;\n      x *= 1 / w;\n      y *= 1 / w;\n      x += this.m41;\n      y += this.m42;\n    }\n\n    ret.x = x;\n    ret.y = y;\n    ret.z = z;\n    ret.w = z;\n    return ret;\n  }\n\n  append(b: IMatrix3D): Matrix3D {\n    return Matrix3D.multiply(this, b, this);\n  }\n\n  setPosition(position: IPoint3D): Matrix3D {\n    this.m41 = position.x;\n    this.m42 = position.y;\n    this.m43 = position.z;\n    return this;\n  }\n\n  getPosition(ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 }): IPoint3D {\n    ret.x = this.m41;\n    ret.y = this.m42;\n    ret.z = this.m43;\n    return ret;\n  }\n  static makePosition(position: IPoint3D, ret = new Matrix3D()): Matrix3D {\n    ret.identity();\n    ret.setPosition(position);\n    return ret;\n  }\n\n  appendPosition(position: IPoint3D): Matrix3D\n  appendPosition(x: number, y: number, z: number): Matrix3D\n  appendPosition(...args: any[]): Matrix3D {\n    let position;\n    if (args.length === 1) {\n      position = args[0];\n    } else {\n      position = { x: args[0], y: args[1], z: args[2], w: 1 };\n    }\n    return this.append(Matrix3D.makePosition(position, Matrix3D.MATRIX3D));\n  }\n\n  static makePerspective(perspective: number, ret = new Matrix3D()): Matrix3D {\n    ret.identity();\n    ret.m34 = perspective ? -(1 / perspective) : 0;\n    return ret;\n  }\n\n  appendPerspective(perspective: number): Matrix3D {\n    if (!perspective)\n      return this;\n    return this.append(Matrix3D.makePerspective(perspective, Matrix3D.MATRIX3D));\n  }\n\n  /**\n  * Inverts the matrix.\n  * -> based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n  * -> based on https://github.com/mrdoob/three.js/blob/master/src/math/Matrix4.js\n  */\n  invert(target?: Matrix3D): Matrix3D {\n    target = target || this;\n    let data: number[] = [];\n\n    let n11 = this.m11, n12 = this.m12, n13 = this.m13, n14 = this.m14;\n    let n21 = this.m21, n22 = this.m22, n23 = this.m23, n24 = this.m24;\n    let n31 = this.m31, n32 = this.m32, n33 = this.m33, n34 = this.m34;\n    let n41 = this.m41, n42 = this.m42, n43 = this.m43, n44 = this.m44;\n\n    data[0] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\n    data[1] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\n    data[2] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\n    data[3] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n    let det = n11 * data[0] + n21 * data[1] + n31 * data[2] + n41 * data[3];\n    if (det == 0) {\n      console.warn('Can not invert matrix, determinant is 0');\n      return this;\n    }\n\n    data[4] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\n    data[5] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\n    data[6] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\n    data[7] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\n    data[8] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\n    data[9] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\n    data[10] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\n    data[11] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\n    data[12] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\n    data[13] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\n    data[14] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\n    data[15] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\n\n    target.setData(data);\n    target.scalar(1 / det);\n    return target;\n  }\n\n  setCSS(cssString: string): Matrix3D {\n    if (!cssString || cssString == 'none') return this.identity();\n    let trans: any = cssString.replace('matrix3d(', '').replace('matrix(', '').replace(')', '').split(',');\n    let l = trans.length;\n    for (let i = 0; i < l; ++i) {\n      trans[i] = CSSNumber.parse(trans[i]);\n    }\n    return this.setData(trans);\n  }\n\n  appendCSS(cssString: string, force2D: boolean = false): Matrix3D {\n    if (!cssString || cssString == 'none') return this;\n    if (force2D && cssString.indexOf('matrix3d') >= 0) {\n      return this.append(Matrix3D.MATRIX3D.setCSS(cssString).flatten());\n    }\n    return this.append(Matrix3D.MATRIX3D.setCSS(cssString));\n  }\n\n  flatten(): Matrix3D {\n    this.m31 = 0;\n    this.m32 = 0;\n    this.m33 = 1;\n    this.m34 = 0;\n    this.m44 = 1;\n    this.m14 = 0;\n    this.m24 = 0;\n    this.m43 = 0;\n    return this;\n  }\n\n  static multiply(a: IMatrix3D, b: IMatrix3D, ret: Matrix3D = new Matrix3D()): Matrix3D {\n    let m11 = a.m11 * b.m11 + a.m12 * b.m21 + a.m13 * b.m31 + a.m14 * b.m41;\n    let m12 = a.m11 * b.m12 + a.m12 * b.m22 + a.m13 * b.m32 + a.m14 * b.m42;\n    let m13 = a.m11 * b.m13 + a.m12 * b.m23 + a.m13 * b.m33 + a.m14 * b.m43;\n    let m14 = a.m11 * b.m14 + a.m12 * b.m24 + a.m13 * b.m34 + a.m14 * b.m44;\n    let m21 = a.m21 * b.m11 + a.m22 * b.m21 + a.m23 * b.m31 + a.m24 * b.m41;\n    let m22 = a.m21 * b.m12 + a.m22 * b.m22 + a.m23 * b.m32 + a.m24 * b.m42;\n    let m23 = a.m21 * b.m13 + a.m22 * b.m23 + a.m23 * b.m33 + a.m24 * b.m43;\n    let m24 = a.m21 * b.m14 + a.m22 * b.m24 + a.m23 * b.m34 + a.m24 * b.m44;\n    let m31 = a.m31 * b.m11 + a.m32 * b.m21 + a.m33 * b.m31 + a.m34 * b.m41;\n    let m32 = a.m31 * b.m12 + a.m32 * b.m22 + a.m33 * b.m32 + a.m34 * b.m42;\n    let m33 = a.m31 * b.m13 + a.m32 * b.m23 + a.m33 * b.m33 + a.m34 * b.m43;\n    let m34 = a.m31 * b.m14 + a.m32 * b.m24 + a.m33 * b.m34 + a.m34 * b.m44;\n    let m41 = a.m41 * b.m11 + a.m42 * b.m21 + a.m43 * b.m31 + a.m44 * b.m41;\n    let m42 = a.m41 * b.m12 + a.m42 * b.m22 + a.m43 * b.m32 + a.m44 * b.m42;\n    let m43 = a.m41 * b.m13 + a.m42 * b.m23 + a.m43 * b.m33 + a.m44 * b.m43;\n    let m44 = a.m41 * b.m14 + a.m42 * b.m24 + a.m43 * b.m34 + a.m44 * b.m44;\n\n    ret.m11 = m11;\n    ret.m12 = m12;\n    ret.m13 = m13;\n    ret.m14 = m14;\n    ret.m21 = m21;\n    ret.m22 = m22;\n    ret.m23 = m23;\n    ret.m24 = m24;\n    ret.m31 = m31;\n    ret.m32 = m32;\n    ret.m33 = m33;\n    ret.m34 = m34;\n    ret.m41 = m41;\n    ret.m42 = m42;\n    ret.m43 = m43;\n    ret.m44 = m44;\n\n    return ret;\n  }\n\n  public toString(fractionalDigits: number = 3): string {\n    return \"m11=\" + this.m11.toFixed(fractionalDigits)\n      + \"\\tm21=\" + this.m21.toFixed(fractionalDigits)\n      + \"\\tm31=\" + this.m31.toFixed(fractionalDigits)\n      + \"\\tm41=\" + this.m41.toFixed(fractionalDigits)\n      + \"\\nm12=\" + this.m12.toFixed(fractionalDigits)\n      + \"\\tm22=\" + this.m22.toFixed(fractionalDigits)\n      + \"\\tm32=\" + this.m32.toFixed(fractionalDigits)\n      + \"\\tm42=\" + this.m42.toFixed(fractionalDigits)\n      + \"\\nm13=\" + this.m13.toFixed(fractionalDigits)\n      + \"\\tm23=\" + this.m23.toFixed(fractionalDigits)\n      + \"\\tm33=\" + this.m33.toFixed(fractionalDigits)\n      + \"\\tm43=\" + this.m43.toFixed(fractionalDigits)\n      + \"\\nm14=\" + this.m14.toFixed(fractionalDigits)\n      + \"\\tm24=\" + this.m24.toFixed(fractionalDigits)\n      + \"\\tm34=\" + this.m34.toFixed(fractionalDigits)\n      + \"\\tm44=\" + this.m44.toFixed(fractionalDigits);\n  }\n  private static MATRIX3D = new Matrix3D();\n}","import { CSSNumber } from './css-number';\nimport { Matrix3D } from './matrix-3d';\n\nexport interface IPoint2D {\n  x: number;\n  y: number;\n}\nexport interface IPoint3D extends IPoint2D {\n  z: number;\n  w: number;\n}\nexport class Transform {\n  private element: HTMLElement;\n  private matrix: Matrix3D = new Matrix3D();\n  private sceneTransform: Matrix3D = new Matrix3D();\n  private inverseSceneTransform: Matrix3D = new Matrix3D();\n\n  private paddingLeft: number;\n  private paddingTop: number;\n  private marginLeft: number;\n  private marginTop: number;\n  private borderLeft: number;\n  private borderTop: number;\n\n  constructor(element: HTMLElement) {\n    this.initialize(element);\n  }\n\n  clear(): Transform {\n    this.element = null;\n    this.matrix.identity();\n\n    return this;\n  }\n\n  private initialize(element: HTMLElement) {\n    if (!element) return;\n\n    this.element = element;\n\n    let style = window.getComputedStyle(element);\n\n    let parentWidth = 0;\n    let parentHeight = 0;\n    if (this.element.parentElement) {\n      parentWidth = this.element.parentElement.clientWidth;\n      parentHeight = this.element.parentElement.clientHeight;\n    } else {\n      parentWidth = window.innerWidth;\n      parentHeight = window.innerHeight;\n    }\n    this.paddingLeft = CSSNumber.relation(style.paddingTop, parentWidth);\n    this.paddingTop = CSSNumber.relation(style.paddingTop, parentHeight);\n    this.marginLeft = CSSNumber.relation(style.marginLeft, parentWidth);\n    this.marginTop = CSSNumber.relation(style.marginTop, parentHeight);\n    this.borderLeft = CSSNumber.relation(style.borderLeft, parentWidth);\n    this.borderTop = CSSNumber.relation(style.borderTop, parentHeight);\n\n    this.matrix.setCSS(style.transform);\n    this.sceneTransform.identity();\n    this.extract(this, this.sceneTransform);\n    this.sceneTransform.invert(this.inverseSceneTransform);\n\n    return this;\n  }\n\n  globalToLocal(x: number, y: number, z: number = 0): IPoint3D {\n    let ret: IPoint3D = { x: x, y: y, z: z, w: 1 };\n    this.inverseSceneTransform.unproject(ret, ret);\n    this.fromBorderBox(ret);\n    return ret;\n  }\n\n  localToGlobal(x: number, y: number, z: number = 0): IPoint3D {\n    let ret: IPoint3D = { x: x, y: y, z: z, w: 1 };\n    this.sceneTransform.project(ret, ret);\n    this.fromBorderBox(ret);\n    return ret;\n  }\n\n  localToLocal(x: number, y: number, z: number, to: HTMLElement): IPoint3D {\n    let local: IPoint3D = { x: x, y: y, z: z, w: 1 };\n    let transformer: Transform = new Transform(to);\n    let matrix = Matrix3D.multiply(this.sceneTransform, transformer.inverseSceneTransform);\n    let ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 };\n\n    ret.x = local.x * matrix.m11 + local.y * matrix.m21 + local.z * matrix.m31 + local.w * matrix.m41;\n    ret.y = local.x * matrix.m12 + local.y * matrix.m22 + local.z * matrix.m32 + local.w * matrix.m42;\n    ret.z = local.x * matrix.m13 + local.y * matrix.m23 + local.z * matrix.m33 + local.w * matrix.m43;\n    ret.w = local.x * matrix.m14 + local.y * matrix.m24 + local.z * matrix.m34 + local.w * matrix.m44;\n\n    transformer.clear();\n    this.toBorderBox(ret);\n    return ret;\n  }\n\n  private extract(transform: Transform, matrix: Matrix3D): void {\n    let element = transform.element;\n    let node = element;\n\n    while (node) {\n      this.extractMatrix(node, matrix);\n      if (node && node.style.position === 'fixed') {\n        console.warn('fixed領域は計算が不正確');\n        matrix.appendPosition(window.pageXOffset, window.pageYOffset, 0);\n      }\n      node = node.parentElement;\n    }\n  }\n\n  private extractMatrix(node: HTMLElement, matrix: Matrix3D = null): Matrix3D {\n    if (!matrix)\n      matrix = new Matrix3D();\n    if (!node)\n      return matrix;\n\n    let element: HTMLElement = node;\n    let style: CSSStyleDeclaration = window.getComputedStyle(node);\n\n    if (style.transform != 'none') {\n      let origin = style.transformOrigin ? style.transformOrigin.split(' ') : [];\n      let originX = CSSNumber.relation(origin[0], element.offsetWidth, element.offsetWidth * 0.5);\n      let originY = CSSNumber.relation(origin[1], element.offsetHeight, element.offsetHeight * 0.5);\n      let originZ = CSSNumber.relation(origin[2], 0, 0);\n\n      matrix.appendPosition(-originX, -originY, -originZ);\n      matrix.appendCSS(style.transform);\n      matrix.appendPosition(originX, originY, originZ);\n    }\n\n    let position = this.getPosition(node);\n    matrix.appendPosition(position.x, position.y, 0);\n\n    let perspective = 0;\n    if (node.parentElement) {\n      let parentStyle: CSSStyleDeclaration = window.getComputedStyle(node.parentElement);\n      perspective = CSSNumber.parse(parentStyle.perspective);\n    }\n\n    if (node.parentElement && perspective) {\n      let parentStyle: CSSStyleDeclaration = window.getComputedStyle(node.parentElement);\n      let perspectiveOrigin = parentStyle.perspectiveOrigin.split(' ');\n      let perspectiveOriginX = CSSNumber.relation(perspectiveOrigin[0], element.parentElement.offsetWidth);\n      let perspectiveOriginY = CSSNumber.relation(perspectiveOrigin[1], element.parentElement.offsetHeight);\n\n      matrix.appendPosition(-perspectiveOriginX, -perspectiveOriginY, 0);\n      matrix.appendPerspective(perspective);\n      matrix.appendPosition(perspectiveOriginX, perspectiveOriginY, 0);\n    }\n\n    return matrix;\n  }\n\n  private getPosition(node: HTMLElement): IPoint2D {\n    let ret: IPoint2D = { x: 0, y: 0 };\n    ret.x = !node.offsetParent ? node.offsetLeft : node.parentElement === node.offsetParent ? node.offsetLeft : node.parentElement.offsetParent === node.offsetParent ? node.offsetLeft - node.parentElement.offsetLeft : 0;\n    ret.y = !node.offsetParent ? node.offsetTop : node.parentElement === node.offsetParent ? node.offsetTop : node.parentElement.offsetParent === node.offsetParent ? node.offsetTop - node.parentElement.offsetTop : 0;\n\n    ret.x += node.offsetParent ? node.offsetParent.clientLeft : 0;\n    ret.y += node.offsetParent ? node.offsetParent.clientTop : 0;\n    return ret;\n  }\n\n  private fromBorderBox(point: IPoint3D): void {\n    point.x += this.paddingLeft;\n    point.y += this.paddingTop;\n    point.x += this.marginLeft;\n    point.y += this.marginTop;\n    point.x -= this.borderLeft;\n    point.y -= this.borderTop;\n  }\n\n  private toBorderBox(point: IPoint3D): void {\n    point.x -= this.paddingLeft;\n    point.y -= this.paddingTop;\n    point.x -= this.marginLeft;\n    point.y -= this.marginTop;\n    point.x += this.borderLeft;\n    point.y += this.borderTop;\n  }\n}","export default \".badge {\\n  min-width: 8px;\\n  min-height: 8px;\\n  font-size: 8px;\\n  padding: 2px 4px;\\n  border-radius: 100px;\\n  text-align: center;\\n  color: #eee; \\n  background-color: rgb(207, 82, 82);\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2JhZGdlL2JhZGdlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGNBQWM7RUFDZCxnQkFBZ0I7RUFDaEIsb0JBQW9CO0VBQ3BCLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsa0NBQWtDO0FBQ3BDIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L2JhZGdlL2JhZGdlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYmFkZ2Uge1xuICBtaW4td2lkdGg6IDhweDtcbiAgbWluLWhlaWdodDogOHB4O1xuICBmb250LXNpemU6IDhweDtcbiAgcGFkZGluZzogMnB4IDRweDtcbiAgYm9yZGVyLXJhZGl1czogMTAwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICNlZWU7IFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjA3LCA4MiwgODIpO1xufVxuIl19 */\"","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\nimport { Component, Input, OnChanges } from '@angular/core';\n\n@Component({\n  selector: 'badge',\n  templateUrl: './badge.component.html',\n  styleUrls: ['./badge.component.css'],\n  animations: [\n    trigger('bounce', [\n      state('active', style({ transform: '' })),\n      transition('* => active', [\n        animate('600ms ease', keyframes([\n          style({ transform: 'scale3d(0.5, 0.5, 0.5)', offset: 0 }),\n          style({ transform: 'scale3d(2, 2, 2)', offset: 0.5 }),\n          style({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),\n          style({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),\n          style({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })\n        ]))\n      ])\n    ])\n  ]\n})\nexport class BadgeComponent implements OnChanges {\n  @Input() count: number = 0;\n  animeState: string = 'active';\n\n  ngOnChanges() {\n    this.animeState = 'inactive';\n    setTimeout(() => { this.animeState = 'active'; });\n  }\n\n  animationShuffleDone(event: any) {\n    this.animeState = 'inactive';\n  }\n\n}\n","export default \".box {\\n  border-bottom:1px dotted #888;\\n}\\n\\n.image-box {\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n\\n.image {\\n  padding: 0px;\\n  width: 64px;\\n  height: 64px;\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n\\n.contain {\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NhcmQtc3RhY2stbGlzdC9jYXJkLXN0YWNrLWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztFQUNYLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usa0NBQWtDO0VBQ2xDLDRCQUE0QjtFQUM1Qix3QkFBd0I7QUFDMUIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvY2FyZC1zdGFjay1saXN0L2NhcmQtc3RhY2stbGlzdC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJveCB7XG4gIGJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjODg4O1xufVxuXG4uaW1hZ2UtYm94IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xufVxuXG4uaW1hZ2Uge1xuICBwYWRkaW5nOiAwcHg7XG4gIHdpZHRoOiA2NHB4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmNvbnRhaW4ge1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG59Il19 */\"","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnDestroy, OnInit } from '@angular/core';\n\nimport { Card } from '@udonarium/card';\nimport { CardStack } from '@udonarium/card-stack';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\n\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\n\nimport { PanelOption, PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'card-stack-list',\n  templateUrl: './card-stack-list.component.html',\n  styleUrls: ['./card-stack-list.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CardStackListComponent implements OnInit, OnDestroy {\n  @Input() cardStack: CardStack = null;\n\n  owner: string = Network.peerId;\n\n  constructor(\n    private panelService: PanelService,\n    private changeDetector: ChangeDetectorRef,\n  ) { }\n\n  ngOnInit() {\n    this.panelService.title = this.cardStack.name + ' のカード一覧';\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.cardStack || !object) return;\n        if ((this.cardStack === object)\n          || (object instanceof ObjectNode && this.cardStack.contains(object))) {\n          this.changeDetector.markForCheck();\n        }\n        if (event.data.identifier === this.cardStack.identifier && this.cardStack.owner !== this.owner) {\n          this.panelService.close();\n        }\n      })\n      .on('DELETE_GAME_OBJECT', -1000, event => {\n        if (this.cardStack && this.cardStack.identifier === event.data.identifier) {\n          this.panelService.close();\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n    if (this.cardStack.owner === this.owner) {\n      this.cardStack.owner = '';\n    }\n  }\n\n  drawCard(card: Card) {\n    card.parent.removeChild(card);\n    card.location.x = this.cardStack.location.x + 100 + (Math.random() * 50);\n    card.location.y = this.cardStack.location.y + 25 + (Math.random() * 50);\n    card.location.name = this.cardStack.location.name;\n    card.rotate += this.cardStack.rotate;\n    if (360 < card.rotate) card.rotate -= 360;\n    card.toTopmost();\n    SoundEffect.play(PresetSound.cardDraw);\n  }\n\n  up(card: Card) {\n    let parent = card.parent;\n    let index: number = parent.children.indexOf(card);\n    if (0 < index) {\n      let prev = parent.children[index - 1];\n      parent.insertBefore(card, prev);\n    }\n  }\n\n  down(card: Card) {\n    let parent = card.parent;\n    let index: number = parent.children.indexOf(card);\n    if (index < parent.children.length - 1) {\n      let next = parent.children[index + 1];\n      parent.insertBefore(next, card);\n    }\n  }\n\n  close(needShuffle: boolean = false) {\n    if (needShuffle) {\n      this.cardStack.shuffle();\n      EventSystem.call('SHUFFLE_CARD_STACK', { identifier: this.cardStack.identifier });\n      SoundEffect.play(PresetSound.cardShuffle);\n    }\n    this.panelService.close();\n  }\n\n  showDetail(gameObject: Card) {\n    let coordinate = {\n      x: this.panelService.left,\n      y: this.panelService.top\n    };\n    let title = 'カード設定';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x + 10, top: coordinate.y + 20, width: 600, height: 600 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n\n  trackByCard(index: number, card: Card) {\n    return card.identifier;\n  }\n}\n","export default \".is-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab;\\n}\\n\\n.is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-transition {\\n  -webkit-transition: -webkit-transform 132ms linear;\\n  transition: -webkit-transform 132ms linear;\\n  transition: transform 132ms linear;\\n  transition: transform 132ms linear, -webkit-transform 132ms linear;\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.is-pointer-events-auto {\\n  pointer-events: auto;\\n}\\n\\n.is-empty {\\n  height: 100px;\\n  width: 100px;\\n}\\n\\n.component {\\n  position: absolute;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  \\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n}\\n\\n.component-content {\\n  height: 100%;\\n  width: 100%;\\n  margin-top: -5px;\\n  margin-left: -5px;\\n  border: solid 5px #CCCCCC;\\n  border-radius: 5px;\\n  background-color: #CCCCCC;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n}\\n\\n.card-image {\\n  display: block;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  margin: auto;\\n  height: auto;\\n  width: 100%;\\n}\\n\\n.rotate-grab {\\n  position: absolute;\\n  width: 28px;\\n  height: 28px;\\n  box-sizing: border-box;\\n  cursor: -moz-default;\\n  cursor: -webkit-default;\\n  cursor: default;\\n  z-index: 1;\\n  padding: 2px;\\n  background-color: #CCCCCC;\\n  border-radius: 100%;\\n  color: #444;\\n  font-size: 8px;\\n}\\n\\n.rotate-grab {\\n  display: none;\\n}\\n\\n.component:hover .rotate-grab {\\n  display: block;\\n  opacity: 0.5;\\n}\\n\\n.component:active .rotate-grab {\\n  display: none;\\n}\\n\\n.component .rotate-grab:hover, .component .rotate-grab:active {\\n  display: block;\\n  opacity: 1;\\n}\\n\\n.of-left-top {\\n  top: -14px;\\n  left: -14px;\\n}\\n\\n.of-left-bottom {\\n  bottom: -14px;\\n  left: -14px;\\n}\\n\\n.of-right-bottom {\\n  bottom: -14px;\\n  right: -14px;\\n}\\n\\n.of-right-top {\\n  top: -14px;\\n  right: -14px;\\n}\\n\\n.name-tag {\\n  box-sizing: border-box;\\n  font-size: 15px;\\n  padding: 3px 9px;\\n  border-radius: 24px;\\n  position: absolute;\\n  top: 50%\\n}\\n\\n.has-length-limit {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  max-width: 18em;\\n}\\n\\n.is-nowrap {\\n  white-space: nowrap;\\n}\\n\\n.is-black-background {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\n.material-icons {\\n  display: none;\\n}\\n\\n.component:hover .material-icons, .component:active .material-icons {\\n  display: inline;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NhcmQtc3RhY2svY2FyZC1zdGFjay5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUUsb0JBQW9CO0VBQ3BCLFlBQVk7QUFDZDs7QUFFQTtFQUVFLHdCQUF3QjtFQUN4QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxrREFBa0Q7RUFDbEQsMENBQWtDO0VBQWxDLGtDQUFrQztFQUFsQyxrRUFBa0M7QUFDcEM7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIscUJBQWlCO01BQWpCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQix5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLHlCQUF5QjtFQUN6QixtQ0FBMkI7VUFBM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsY0FBYztFQUNkLE1BQU07RUFDTixPQUFPO0VBQ1AsU0FBUztFQUNULFFBQVE7RUFDUixZQUFZO0VBQ1osWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixVQUFVO0VBQ1YsWUFBWTtFQUNaLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsWUFBWTtBQUNkOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztFQUNkLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFVBQVU7RUFDVixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFVBQVU7RUFDVixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCO0FBQ0Y7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsV0FBVztFQUNYLHVDQUF1QztBQUN6Qzs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFDQTtFQUNFLGVBQWU7QUFDakIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvY2FyZC1zdGFjay9jYXJkLXN0YWNrLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaXMtZ3JhYiB7XG4gIGN1cnNvcjogLW1vei1ncmFiO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYjtcbiAgY3Vyc29yOiBncmFiO1xufVxuXG4uaXMtZ3JhYmJpbmcge1xuICBjdXJzb3I6IC1tb3otZ3JhYmJpbmc7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcbiAgY3Vyc29yOiBncmFiYmluZztcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbn1cblxuLmlzLTNkIHtcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xufVxuXG4uaXMtcG9pbnRlci1ldmVudHMtbm9uZSB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uaXMtcG9pbnRlci1ldmVudHMtYXV0byB7XG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xufVxuXG4uaXMtZW1wdHkge1xuICBoZWlnaHQ6IDEwMHB4O1xuICB3aWR0aDogMTAwcHg7XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIFxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG59XG5cbi5jb21wb25lbnQtY29udGVudCB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIG1hcmdpbi10b3A6IC01cHg7XG4gIG1hcmdpbi1sZWZ0OiAtNXB4O1xuICBib3JkZXI6IHNvbGlkIDVweCAjQ0NDQ0NDO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxuLmNhcmQtaW1hZ2Uge1xuICBkaXNwbGF5OiBibG9jaztcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IGF1dG87XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5yb3RhdGUtZ3JhYiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDI4cHg7XG4gIGhlaWdodDogMjhweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XG4gIGN1cnNvcjogLXdlYmtpdC1kZWZhdWx0O1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIHotaW5kZXg6IDE7XG4gIHBhZGRpbmc6IDJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgY29sb3I6ICM0NDQ7XG4gIGZvbnQtc2l6ZTogOHB4O1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5yb3RhdGUtZ3JhYiB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBvcGFjaXR5OiAwLjU7XG59XG5cbi5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmhvdmVyLCAuY29tcG9uZW50IC5yb3RhdGUtZ3JhYjphY3RpdmUge1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3BhY2l0eTogMTtcbn1cblxuLm9mLWxlZnQtdG9wIHtcbiAgdG9wOiAtMTRweDtcbiAgbGVmdDogLTE0cHg7XG59XG5cbi5vZi1sZWZ0LWJvdHRvbSB7XG4gIGJvdHRvbTogLTE0cHg7XG4gIGxlZnQ6IC0xNHB4O1xufVxuXG4ub2YtcmlnaHQtYm90dG9tIHtcbiAgYm90dG9tOiAtMTRweDtcbiAgcmlnaHQ6IC0xNHB4O1xufVxuXG4ub2YtcmlnaHQtdG9wIHtcbiAgdG9wOiAtMTRweDtcbiAgcmlnaHQ6IC0xNHB4O1xufVxuXG4ubmFtZS10YWcge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDE1cHg7XG4gIHBhZGRpbmc6IDNweCA5cHg7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCVcbn1cblxuLmhhcy1sZW5ndGgtbGltaXQge1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgbWF4LXdpZHRoOiAxOGVtO1xufVxuXG4uaXMtbm93cmFwIHtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuXG4ubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBub25lO1xufVxuLmNvbXBvbmVudDpob3ZlciAubWF0ZXJpYWwtaWNvbnMsIC5jb21wb25lbnQ6YWN0aXZlIC5tYXRlcmlhbC1pY29ucyB7XG4gIGRpc3BsYXk6IGlubGluZTtcbn1cbiJdfQ== */\"","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Card } from '@udonarium/card';\nimport { CardStack } from '@udonarium/card-stack';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerCursor } from '@udonarium/peer-cursor';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { CardStackListComponent } from 'component/card-stack-list/card-stack-list.component';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { InputHandler } from 'directive/input-handler';\nimport { MovableOption } from 'directive/movable.directive';\nimport { RotableOption } from 'directive/rotable.directive';\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'card-stack',\n  templateUrl: './card-stack.component.html',\n  styleUrls: ['./card-stack.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('shuffle', [\n      state('active', style({ transform: '' })),\n      transition('* => active', [\n        animate('800ms ease', keyframes([\n          style({ transform: 'scale3d(0, 0, 0) rotateZ(0deg)', offset: 0 }),\n          style({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),\n          style({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),\n          style({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),\n          style({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })\n        ]))\n      ])\n    ])\n  ]\n})\nexport class CardStackComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() cardStack: CardStack = null;\n  @Input() is3D: boolean = false;\n\n  get name(): string { return this.cardStack.name; }\n  get rotate(): number { return this.cardStack.rotate; }\n  set rotate(rotate: number) { this.cardStack.rotate = rotate; }\n  get zindex(): number { return this.cardStack.zindex; }\n  get isShowTotal(): boolean { return this.cardStack.isShowTotal; }\n  get cards(): Card[] { return this.cardStack.cards; }\n  get isEmpty(): boolean { return this.cardStack.isEmpty; }\n  get size(): number {\n    let card = this.cardStack.topCard;\n    return (card ? card.size : 2);\n  }\n\n  get hasOwner(): boolean { return this.cardStack.hasOwner; }\n  get ownerName(): string { return this.cardStack.ownerName; }\n\n  get topCard(): Card { return this.cardStack.topCard; }\n  get imageFile(): ImageFile { return this.cardStack.imageFile; }\n\n  animeState: string = 'inactive';\n\n  private iconHiddenTimer: NodeJS.Timer = null;\n  get isIconHidden(): boolean { return this.iconHiddenTimer != null };\n\n  gridSize: number = 50;\n\n  movableOption: MovableOption = {};\n  rotableOption: RotableOption = {};\n\n  private doubleClickTimer: NodeJS.Timer = null;\n  private doubleClickPoint = { x: 0, y: 0 };\n\n  private input: InputHandler = null;\n\n  constructor(\n    private ngZone: NgZone,\n    private contextMenuService: ContextMenuService,\n    private panelService: PanelService,\n    private elementRef: ElementRef<HTMLElement>,\n    private changeDetector: ChangeDetectorRef,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('SHUFFLE_CARD_STACK', -1000, event => {\n        if (event.data.identifier === this.cardStack.identifier) {\n          this.animeState = 'active';\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.cardStack || !object) return;\n        if ((this.cardStack === object)\n          || (object instanceof ObjectNode && this.cardStack.contains(object))\n          || (object instanceof PeerCursor && object.peerId === this.cardStack.owner)) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('CARD_STACK_DECREASED', event => {\n        if (event.data.cardStackIdentifier === this.cardStack.identifier && this.cardStack) this.changeDetector.markForCheck();\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('DISCONNECT_PEER', event => {\n        if (this.cardStack.owner === event.data.peer) this.changeDetector.markForCheck();\n      });\n    this.movableOption = {\n      tabletopObject: this.cardStack,\n      transformCssOffset: 'translateZ(0.15px)',\n      colideLayers: ['terrain']\n    };\n    this.rotableOption = {\n      tabletopObject: this.cardStack\n    };\n  }\n\n  ngAfterViewInit() {\n    this.input = new InputHandler(this.elementRef.nativeElement);\n    this.input.onStart = this.onInputStart.bind(this);\n  }\n\n  ngOnDestroy() {\n    this.input.destroy();\n    EventSystem.unregister(this);\n  }\n\n  animationShuffleStarted(event: any) {\n\n  }\n\n  animationShuffleDone(event: any) {\n    this.animeState = 'inactive';\n    this.changeDetector.markForCheck();\n  }\n\n  @HostListener('carddrop', ['$event'])\n  onCardDrop(e) {\n    if (this.cardStack === e.detail || (e.detail instanceof Card === false && e.detail instanceof CardStack === false)) {\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (e.detail instanceof Card) {\n      let card: Card = e.detail;\n      let distance: number = (card.location.x - this.cardStack.location.x) ** 2 + (card.location.y - this.cardStack.location.y) ** 2 + (card.posZ - this.cardStack.posZ) ** 2;\n      if (distance < 50 ** 2) this.cardStack.putOnTop(card);\n    } else if (e.detail instanceof CardStack) {\n      let cardStack: CardStack = e.detail;\n      let distance: number = (cardStack.location.x - this.cardStack.location.x) ** 2 + (cardStack.location.y - this.cardStack.location.y) ** 2 + (cardStack.posZ - this.cardStack.posZ) ** 2;\n      if (distance < 25 ** 2) this.concatStack(cardStack);\n    }\n  }\n\n  onDoubleClick(e) {\n    if (!this.doubleClickTimer) {\n      this.doubleClickTimer = setTimeout(() => {\n        clearTimeout(this.doubleClickTimer);\n        this.doubleClickTimer = null;\n      }, 300);\n      this.doubleClickPoint = this.input.pointer;\n      return;\n    }\n    clearTimeout(this.doubleClickTimer);\n    this.doubleClickTimer = null;\n    let distance = (this.doubleClickPoint.x - this.input.pointer.x) ** 2 + (this.doubleClickPoint.y - this.input.pointer.y) ** 2;\n    if (distance < 10 ** 2) {\n      console.log('onDoubleClick !!!!');\n      if (this.drawCard() != null) {\n        SoundEffect.play(PresetSound.cardDraw);\n      }\n    }\n  }\n\n  @HostListener('dragstart', ['$event'])\n  onDragstart(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  onInputStart(e: MouseEvent | TouchEvent) {\n    this.input.cancel();\n    this.cardStack.toTopmost();\n    this.onDoubleClick(e);\n\n    if (e instanceof MouseEvent) this.startIconHiddenTimer();\n\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: this.cardStack.identifier, className: 'GameCharacter' });\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n    let position = this.pointerDeviceService.pointers[0];\n    this.contextMenuService.open(position, [\n      {\n        name: '１枚引く', action: () => {\n          if (this.drawCard() != null) {\n            SoundEffect.play(PresetSound.cardDraw);\n          }\n        }\n      },\n      {\n        name: '７枚引く', action: () => {\n          if (this.drawSeven() != null) {\n            SoundEffect.play(PresetSound.cardDraw);\n          }\n        }\n      },\n      ContextMenuSeparator,\n      {\n        name: '一番上を表にする', action: () => {\n          this.cardStack.faceUp();\n          SoundEffect.play(PresetSound.cardDraw);\n        }\n      },\n      {\n        name: '一番上を裏にする', action: () => {\n          this.cardStack.faceDown();\n          SoundEffect.play(PresetSound.cardDraw);\n        }\n      },\n      ContextMenuSeparator,\n      {\n        name: 'すべて表にする', action: () => {\n          this.cardStack.faceUpAll();\n          SoundEffect.play(PresetSound.cardDraw);\n        }\n      },\n      {\n        name: 'すべて裏にする', action: () => {\n          this.cardStack.faceDownAll();\n          SoundEffect.play(PresetSound.cardDraw);\n        }\n      },\n      {\n        name: 'すべて正位置にする', action: () => {\n          this.cardStack.uprightAll();\n          SoundEffect.play(PresetSound.cardDraw);\n        }\n      },\n      ContextMenuSeparator,\n      {\n        name: 'シャッフル', action: () => {\n          this.cardStack.shuffle();\n          SoundEffect.play(PresetSound.cardShuffle);\n          EventSystem.call('SHUFFLE_CARD_STACK', { identifier: this.cardStack.identifier });\n        }\n      },\n      { name: 'カード一覧', action: () => { this.showStackList(this.cardStack); } },\n      ContextMenuSeparator,\n      (this.isShowTotal\n        ? { name: '枚数を非表示にする', action: () => { this.cardStack.isShowTotal = false; } }\n        : { name: '枚数を表示する', action: () => { this.cardStack.isShowTotal = true; } }\n      ),\n      { name: 'カードサイズを揃える', action: () => { if (this.cardStack.topCard) this.cardStack.unifyCardsSize(this.cardStack.topCard.size); } },\n      ContextMenuSeparator,\n      {\n        name: '山札を人数分に分割する', action: () => {\n          this.splitStack(Network.peerIds.length);\n          SoundEffect.play(PresetSound.cardDraw);\n        }\n      },\n      {\n        name: '山札から７枚ずつ配る', action: () => {\n          if (this.makeSevens() != null) {\n            SoundEffect.play(PresetSound.cardDraw);\n          }\n        }\n      },\n      {\n        name: '山札を崩す', action: () => {\n          this.breakStack();\n          SoundEffect.play(PresetSound.cardShuffle);\n        }\n      },\n      ContextMenuSeparator,\n      { name: '詳細を表示', action: () => { this.showDetail(this.cardStack); } },\n      {\n        name: 'コピーを作る', action: () => {\n          let cloneObject = this.cardStack.clone();\n          cloneObject.location.x += this.gridSize;\n          cloneObject.location.y += this.gridSize;\n          cloneObject.owner = '';\n          cloneObject.toTopmost();\n          SoundEffect.play(PresetSound.cardPut);\n        }\n      },\n      {\n        name: '山札を削除する', action: () => {\n          this.cardStack.setLocation('graveyard');\n          this.cardStack.destroy();\n          SoundEffect.play(PresetSound.sweep);\n        }\n      },\n    ], this.name);\n  }\n\n  onMove() {\n    SoundEffect.play(PresetSound.cardPick);\n  }\n\n  onMoved() {\n    SoundEffect.play(PresetSound.cardPut);\n    this.ngZone.run(() => this.dispatchCardDropEvent());\n  }\n\n  private drawCard(): Card {\n    let card = this.cardStack.drawCard();\n    if (card) {\n      this.cardStack.update(); // todo\n      card.location.x += 100 + (Math.random() * 50);\n      card.location.y += 25 + (Math.random() * 50);\n      card.setLocation(this.cardStack.location.name);\n    }\n    return card;\n  }\n\n  private drawSeven(): Card[] {\n    if (this.cardStack.cards.length == 0) return;\n\n    let cardStack = CardStack.create(\"手札\");\n    cardStack.location.x = this.cardStack.location.x + 50 - (Math.random() * 100);\n    cardStack.location.y = this.cardStack.location.y + 50 - (Math.random() * 100);\n\n    let cards = this.cardStack.cards;\n    for (let i = 0; i < 7; i++) {\n      let card = this.cardStack.drawCard();\n      cardStack.putOnBottom(card);\n      if (this.cardStack.cards.length == 0) {\n        this.cardStack.setLocation('graveyard');\n        this.cardStack.destroy();\n        break;\n      }\n    }\n    return cards;\n  }\n\n  private breakStack() {\n    let cards = this.cardStack.drawCardAll().reverse();\n    for (let card of cards) {\n      card.location.x += 25 - (Math.random() * 50);\n      card.location.y += 25 - (Math.random() * 50);\n      card.toTopmost();\n      card.setLocation(this.cardStack.location.name);\n    }\n    this.cardStack.setLocation('graveyard');\n    this.cardStack.destroy();\n  }\n\n  private splitStack(split: number) {\n    if (split < 2) return;\n    let cardStacks: CardStack[] = [];\n    for (let i = 0; i < split; i++) {\n      let cardStack = CardStack.create(this.cardStack.name);\n      cardStack.location.x = this.cardStack.location.x + 50 - (Math.random() * 100);\n      cardStack.location.y = this.cardStack.location.y + 50 - (Math.random() * 100);\n      cardStack.posZ = this.cardStack.posZ;\n      cardStack.location.name = this.cardStack.location.name;\n      cardStack.rotate = this.rotate;\n      cardStack.toTopmost();\n      cardStacks.push(cardStack);\n    }\n\n    let cards = this.cardStack.drawCardAll();\n    this.cardStack.setLocation('graveyard');\n    this.cardStack.destroy();\n\n    let num = 0;\n    let splitIndex = (cards.length / split) * (num + 1);\n    for (let i = 0; i < cards.length; i++) {\n      cardStacks[num].putOnBottom(cards[i]);\n      if (splitIndex <= i + 1) {\n        num++;\n        splitIndex = (cards.length / split) * (num + 1);\n      }\n    }\n  }\n\n  private makeSevens() {\n    let cardStacks: CardStack[] = [];\n    let stack_count = Math.floor(this.cardStack.cards.length / 7);\n    let is_to_destroy = (this.cardStack.cards.length % 7 == 0);\n    if (stack_count == 0) return;\n    let delta = (2 * Math.PI / stack_count);\n    for (let i = 0; i < stack_count; i++) {\n      let cardStack = CardStack.create(\"手札\");\n      cardStack.location.x = this.cardStack.location.x + 250 * Math.sin(delta * i);\n      cardStack.location.y = this.cardStack.location.y + 250 * Math.cos(delta * i);\n      cardStack.posZ = this.cardStack.posZ;\n      cardStack.location.name = this.cardStack.location.name;\n      cardStack.rotate = this.rotate;\n      cardStack.toTopmost();\n      cardStacks.push(cardStack);\n    }\n\n    let cards = [];\n    if (is_to_destroy) {\n      cards = this.cardStack.drawCardAll();\n      this.cardStack.setLocation('graveyard');\n      this.cardStack.destroy();\n    } else {\n      cards = this.cardStack.cards;\n    }\n\n    let num = 0;\n    for (let i = 0; i < stack_count; i++) {\n      for (let j = 0; j < 7; j++) {\n        cardStacks[i].putOnBottom(cards[num]);\n        num++;\n      }\n    }\n  }\n\n  private concatStack(topStack: CardStack, bottomStack: CardStack = this.cardStack) {\n    let newCardStack = CardStack.create(topStack.name);\n    newCardStack.location.name = bottomStack.location.name;\n    newCardStack.location.x = bottomStack.location.x;\n    newCardStack.location.y = bottomStack.location.y;\n    newCardStack.posZ = bottomStack.posZ;\n    newCardStack.zindex = topStack.zindex;\n    newCardStack.rotate = bottomStack.rotate;\n\n    let bottomCards: Card[] = bottomStack.drawCardAll();\n    let topCards: Card[] = topStack.drawCardAll();\n    for (let card of topCards.concat(bottomCards)) newCardStack.putOnBottom(card);\n\n    bottomStack.setLocation('');\n    bottomStack.destroy();\n\n    topStack.setLocation('');\n    topStack.destroy();\n  }\n\n  private dispatchCardDropEvent() {\n    let element: HTMLElement = this.elementRef.nativeElement;\n    let parent = element.parentElement;\n    let children = parent.children;\n    let event = new CustomEvent('carddrop', { detail: this.cardStack, bubbles: true });\n    for (let i = 0; i < children.length; i++) {\n      children[i].dispatchEvent(event);\n    }\n  }\n\n  private showDetail(gameObject: CardStack) {\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = '山札設定';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n\n  private showStackList(gameObject: CardStack) {\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let option: PanelOption = { left: coordinate.x - 200, top: coordinate.y - 300, width: 400, height: 600 };\n\n    this.cardStack.owner = Network.peerId;\n    let component = this.panelService.open<CardStackListComponent>(CardStackListComponent, option);\n    component.cardStack = gameObject;\n  }\n\n  private startIconHiddenTimer() {\n    clearTimeout(this.iconHiddenTimer);\n    this.iconHiddenTimer = setTimeout(() => {\n      this.iconHiddenTimer = null;\n      this.changeDetector.markForCheck();\n    }, 300);\n    this.changeDetector.markForCheck();\n  }\n}\n","export default \".is-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab;\\n}\\n\\n.is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n}\\n\\n.is-transition {\\n  -webkit-transition: -webkit-transform 132ms linear;\\n  transition: -webkit-transform 132ms linear;\\n  transition: transform 132ms linear;\\n  transition: transform 132ms linear, -webkit-transform 132ms linear;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.is-pointer-events-auto {\\n  pointer-events: auto;\\n}\\n\\n.component {\\n  position: absolute;\\n  height: auto;\\n  width: auto;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n  min-width: 25px;\\n  min-height: 25px;\\n}\\n\\n.component-content {\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  height: 100%;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.card-image {\\n  display: block;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  margin: auto;\\n  height: auto;\\n  width: 100%;\\n}\\n\\n.thumbnail-transform {\\n  position: absolute;\\n  -webkit-transform: scale(0.9);\\n          transform: scale(0.9);\\n}\\n\\n.is-translucent {\\n  -webkit-filter: opacity(0.8);\\n          filter: opacity(0.8);\\n}\\n\\n.rotate-grab {\\n  position: absolute;\\n  width: 28px;\\n  height: 28px;\\n  box-sizing: border-box;\\n  cursor: -moz-default;\\n  cursor: -webkit-default;\\n  cursor: default;\\n  z-index: 1;\\n  padding: 2px;\\n  background-color: #CCCCCC;\\n  border-radius: 100%;\\n  color: #444;\\n  font-size: 8px;\\n}\\n\\n.rotate-grab {\\n  display: none;\\n}\\n\\n.component:hover .rotate-grab {\\n  display: block;\\n  opacity: 0.5;\\n}\\n\\n.component:active .rotate-grab {\\n  display: none;\\n}\\n\\n.component .rotate-grab:hover, .component .rotate-grab:active {\\n  display: block;\\n  opacity: 1;\\n}\\n\\n.of-left-top {\\n  top: -10px;\\n  left: -10px;\\n  border-radius: 14px;\\n}\\n\\n.of-left-bottom {\\n  bottom: -10px;\\n  left: -10px;\\n  border-radius: 14px;\\n}\\n\\n.of-right-bottom {\\n  bottom: -10px;\\n  right: -10px;\\n  border-radius: 14px;\\n}\\n\\n.of-right-top {\\n  top: -10px;\\n  right: -10px;\\n  border-radius: 14px;\\n}\\n\\n.border-bg {\\n  position: absolute;\\n  box-sizing: border-box;\\n  border-radius: 8px;\\n  background-color: rgba(204, 204, 204, 0.5);\\n  top: -2px;\\n  left: -2px;\\n  right: -2px;\\n  bottom: -2px;\\n  z-index: -1;\\n}\\n\\n.border-bg {\\n  display: none;\\n}\\n\\n.component:hover .border-bg {\\n  display: block;\\n}\\n\\n.component:active .border-bg {\\n  display: none;\\n}\\n\\n.name-tag {\\n  box-sizing: border-box;\\n  font-size: 15px;\\n  padding: 3px 9px;\\n  border-radius: 24px;\\n  position: absolute;\\n  top: 0;\\n}\\n\\n.has-length-limit {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  max-width: 18em;\\n}\\n\\n.is-nowrap {\\n  white-space: nowrap;\\n}\\n\\n.is-black-background {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\n.material-icons {\\n  display: none;\\n}\\n\\n.component:hover .material-icons, .component:active .material-icons {\\n  display: inline;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NhcmQvY2FyZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUUsb0JBQW9CO0VBQ3BCLFlBQVk7QUFDZDs7QUFFQTtFQUVFLHdCQUF3QjtFQUN4QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0Usa0RBQWtEO0VBQ2xELDBDQUFrQztFQUFsQyxrQ0FBa0M7RUFBbEMsa0VBQWtDO0FBQ3BDOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLHFCQUFpQjtNQUFqQixpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxNQUFNO0VBQ04sT0FBTztFQUNQLFNBQVM7RUFDVCxRQUFRO0VBQ1IsWUFBWTtFQUNaLFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsNkJBQXFCO1VBQXJCLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLDRCQUFvQjtVQUFwQixvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztFQUNkLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsV0FBVztFQUNYLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0VBQ1gsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsWUFBWTtFQUNaLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLDBDQUEwQztFQUMxQyxTQUFTO0VBQ1QsVUFBVTtFQUNWLFdBQVc7RUFDWCxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsTUFBTTtBQUNSOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBQ0E7RUFDRSxlQUFlO0FBQ2pCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L2NhcmQvY2FyZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xuICBjdXJzb3I6IC1tb3otZ3JhYjtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy0zZCB7XG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLWF1dG8ge1xuICBwb2ludGVyLWV2ZW50czogYXV0bztcbn1cblxuLmNvbXBvbmVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiBhdXRvO1xuICB3aWR0aDogYXV0bztcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgLW1vei11c2VyLWRyYWc6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xuICBtaW4td2lkdGg6IDI1cHg7XG4gIG1pbi1oZWlnaHQ6IDI1cHg7XG59XG5cbi5jb21wb25lbnQtY29udGVudCB7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuLmNhcmQtaW1hZ2Uge1xuICBkaXNwbGF5OiBibG9jaztcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IGF1dG87XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi50aHVtYm5haWwtdHJhbnNmb3JtIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7XG59XG5cbi5pcy10cmFuc2x1Y2VudCB7XG4gIGZpbHRlcjogb3BhY2l0eSgwLjgpO1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuICB6LWluZGV4OiAxO1xuICBwYWRkaW5nOiAycHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIGNvbG9yOiAjNDQ0O1xuICBmb250LXNpemU6IDhweDtcbn1cblxuLnJvdGF0ZS1ncmFiIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIge1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3BhY2l0eTogMC41O1xufVxuXG4uY29tcG9uZW50OmFjdGl2ZSAucm90YXRlLWdyYWIge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY29tcG9uZW50IC5yb3RhdGUtZ3JhYjpob3ZlciwgLmNvbXBvbmVudCAucm90YXRlLWdyYWI6YWN0aXZlIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG9wYWNpdHk6IDE7XG59XG5cbi5vZi1sZWZ0LXRvcCB7XG4gIHRvcDogLTEwcHg7XG4gIGxlZnQ6IC0xMHB4O1xuICBib3JkZXItcmFkaXVzOiAxNHB4O1xufVxuXG4ub2YtbGVmdC1ib3R0b20ge1xuICBib3R0b206IC0xMHB4O1xuICBsZWZ0OiAtMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcbn1cblxuLm9mLXJpZ2h0LWJvdHRvbSB7XG4gIGJvdHRvbTogLTEwcHg7XG4gIHJpZ2h0OiAtMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcbn1cblxuLm9mLXJpZ2h0LXRvcCB7XG4gIHRvcDogLTEwcHg7XG4gIHJpZ2h0OiAtMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcbn1cblxuLmJvcmRlci1iZyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIwNCwgMjA0LCAyMDQsIDAuNSk7XG4gIHRvcDogLTJweDtcbiAgbGVmdDogLTJweDtcbiAgcmlnaHQ6IC0ycHg7XG4gIGJvdHRvbTogLTJweDtcbiAgei1pbmRleDogLTE7XG59XG5cbi5ib3JkZXItYmcge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5ib3JkZXItYmcge1xuICBkaXNwbGF5OiBibG9jaztcbn1cblxuLmNvbXBvbmVudDphY3RpdmUgLmJvcmRlci1iZyB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5uYW1lLXRhZyB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgcGFkZGluZzogM3B4IDlweDtcbiAgYm9yZGVyLXJhZGl1czogMjRweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG59XG5cbi5oYXMtbGVuZ3RoLWxpbWl0IHtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG1heC13aWR0aDogMThlbTtcbn1cblxuLmlzLW5vd3JhcCB7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5pcy1ibGFjay1iYWNrZ3JvdW5kIHtcbiAgY29sb3I6ICNDQ0M7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcbn1cblxuLm1hdGVyaWFsLWljb25zIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cbi5jb21wb25lbnQ6aG92ZXIgLm1hdGVyaWFsLWljb25zLCAuY29tcG9uZW50OmFjdGl2ZSAubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBpbmxpbmU7XG59XG4iXX0= */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Card, CardState } from '@udonarium/card';\nimport { CardStack } from '@udonarium/card-stack';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerCursor } from '@udonarium/peer-cursor';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { InputHandler } from 'directive/input-handler';\nimport { MovableOption } from 'directive/movable.directive';\nimport { RotableOption } from 'directive/rotable.directive';\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\n@Component({\n  selector: 'card',\n  templateUrl: './card.component.html',\n  styleUrls: ['./card.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CardComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() card: Card = null;\n  @Input() is3D: boolean = false;\n\n  get name(): string { return this.card.name; }\n  get state(): CardState { return this.card.state; }\n  set state(state: CardState) { this.card.state = state; }\n  get rotate(): number { return this.card.rotate; }\n  set rotate(rotate: number) { this.card.rotate = rotate; }\n  get owner(): string { return this.card.owner; }\n  set owner(owner: string) { this.card.owner = owner; }\n  get zindex(): number { return this.card.zindex; }\n  get size(): number { return this.adjustMinBounds(this.card.size); }\n\n  get isHand(): boolean { return this.card.isHand; }\n  get isFront(): boolean { return this.card.isFront; }\n  get isVisible(): boolean { return this.card.isVisible; }\n  get hasOwner(): boolean { return this.card.hasOwner; }\n  get ownerName(): string { return this.card.ownerName; }\n\n  get imageFile(): ImageFile { return this.card.imageFile; }\n  get frontImage(): ImageFile { return this.card.frontImage; }\n  get backImage(): ImageFile { return this.card.backImage; }\n\n  private iconHiddenTimer: NodeJS.Timer = null;\n  get isIconHidden(): boolean { return this.iconHiddenTimer != null };\n\n  gridSize: number = 50;\n\n  movableOption: MovableOption = {};\n  rotableOption: RotableOption = {};\n\n  private doubleClickTimer: NodeJS.Timer = null;\n  private doubleClickPoint = { x: 0, y: 0 };\n\n  private input: InputHandler = null;\n\n  constructor(\n    private ngZone: NgZone,\n    private contextMenuService: ContextMenuService,\n    private panelService: PanelService,\n    private elementRef: ElementRef<HTMLElement>,\n    private changeDetector: ChangeDetectorRef,\n    private tabletopService: TabletopService,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.card || !object) return;\n        if ((this.card === object)\n          || (object instanceof ObjectNode && this.card.contains(object))\n          || (object instanceof PeerCursor && object.peerId === this.card.owner)) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('DISCONNECT_PEER', event => {\n        if (this.card.owner === event.data.peer) this.changeDetector.markForCheck();\n      });\n    this.movableOption = {\n      tabletopObject: this.card,\n      transformCssOffset: 'translateZ(0.15px)',\n      colideLayers: ['terrain']\n    };\n    this.rotableOption = {\n      tabletopObject: this.card\n    };\n  }\n\n  ngAfterViewInit() {\n    this.input = new InputHandler(this.elementRef.nativeElement);\n    this.input.onStart = this.onInputStart.bind(this);\n  }\n\n  ngOnDestroy() {\n    this.input.destroy();\n    EventSystem.unregister(this);\n  }\n\n  @HostListener('carddrop', ['$event'])\n  onCardDrop(e) {\n    if (this.card === e.detail || (e.detail instanceof Card === false && e.detail instanceof CardStack === false)) {\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (e.detail instanceof CardStack) {\n      let cardStack: CardStack = e.detail;\n      let distance: number = (cardStack.location.x - this.card.location.x) ** 2 + (cardStack.location.y - this.card.location.y) ** 2 + (cardStack.posZ - this.card.posZ) ** 2;\n      if (distance < 25 ** 2) {\n        cardStack.location.x = this.card.location.x;\n        cardStack.location.y = this.card.location.y;\n        cardStack.posZ = this.card.posZ;\n        cardStack.putOnBottom(this.card);\n      }\n    }\n  }\n\n  onDoubleClick(e) {\n    if (!this.doubleClickTimer) {\n      this.doubleClickTimer = setTimeout(() => {\n        clearTimeout(this.doubleClickTimer);\n        this.doubleClickTimer = null;\n      }, 300);\n      this.doubleClickPoint = this.input.pointer;\n      return;\n    }\n    clearTimeout(this.doubleClickTimer);\n    this.doubleClickTimer = null;\n    let distance = (this.doubleClickPoint.x - this.input.pointer.x) ** 2 + (this.doubleClickPoint.y - this.input.pointer.y) ** 2;\n    if (distance < 10 ** 2) {\n      console.log('onDoubleClick !!!!');\n      if (this.hasOwner && !this.isHand) return;\n      this.state = this.isVisible && !this.isHand ? CardState.BACK : CardState.FRONT;\n      this.owner = '';\n      SoundEffect.play(PresetSound.cardDraw);\n    }\n  }\n\n  @HostListener('dragstart', ['$event'])\n  onDragstart(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  onInputStart(e: MouseEvent | TouchEvent) {\n    this.input.cancel();\n    this.onDoubleClick(e);\n    this.card.toTopmost();\n    if (e instanceof MouseEvent) this.startIconHiddenTimer();\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n    let position = this.pointerDeviceService.pointers[0];\n    this.contextMenuService.open(position, [\n      (!this.isVisible || this.isHand\n        ? {\n          name: '表にする', action: () => {\n            this.card.faceUp();\n            SoundEffect.play(PresetSound.cardDraw);\n          }\n        }\n        : {\n          name: '裏にする', action: () => {\n            this.card.faceDown();\n            SoundEffect.play(PresetSound.cardDraw);\n          }\n        }\n      ),\n      (this.isHand\n        ? {\n          name: '裏にする', action: () => {\n            this.card.faceDown();\n            SoundEffect.play(PresetSound.cardDraw);\n          }\n        }\n        : {\n          name: '自分だけ見る', action: () => {\n            SoundEffect.play(PresetSound.cardDraw);\n            this.card.faceDown();\n            this.owner = Network.peerId;\n          }\n        }),\n      ContextMenuSeparator,\n      {\n        name: '重なったカードで山札を作る', action: () => {\n          this.createStack();\n          SoundEffect.play(PresetSound.cardPut);\n        }\n      },\n      ContextMenuSeparator,\n      { name: 'カードを編集', action: () => { this.showDetail(this.card); } },\n      {\n        name: 'コピーを作る', action: () => {\n          let cloneObject = this.card.clone();\n          cloneObject.location.x += this.gridSize;\n          cloneObject.location.y += this.gridSize;\n          cloneObject.toTopmost();\n          SoundEffect.play(PresetSound.cardPut);\n        }\n      },\n      {\n        name: '削除する', action: () => {\n          this.card.destroy();\n          SoundEffect.play(PresetSound.sweep);\n        }\n      },\n    ], this.isVisible ? this.name : 'カード');\n  }\n\n  onMove() {\n    SoundEffect.play(PresetSound.cardPick);\n  }\n\n  onMoved() {\n    SoundEffect.play(PresetSound.cardPut);\n    this.ngZone.run(() => this.dispatchCardDropEvent());\n  }\n\n  private createStack() {\n    let cardStack = CardStack.create('山札');\n    cardStack.location.x = this.card.location.x;\n    cardStack.location.y = this.card.location.y;\n    cardStack.posZ = this.card.posZ;\n    cardStack.location.name = this.card.location.name;\n    cardStack.rotate = this.rotate;\n    cardStack.zindex = this.card.zindex;\n\n    let cards: Card[] = this.tabletopService.cards.filter(card => {\n      let distance: number = (card.location.x - this.card.location.x) ** 2 + (card.location.y - this.card.location.y) ** 2 + (card.posZ - this.card.posZ) ** 2;\n      return distance < 100 ** 2;\n    });\n\n    cards.sort((a, b) => {\n      if (a.zindex < b.zindex) return 1;\n      if (a.zindex > b.zindex) return -1;\n      return 0;\n    });\n\n    for (let card of cards) {\n      cardStack.putOnBottom(card);\n    }\n  }\n\n  private dispatchCardDropEvent() {\n    console.log('dispatchCardDropEvent');\n    let element: HTMLElement = this.elementRef.nativeElement;\n    let parent = element.parentElement;\n    let children = parent.children;\n    let event = new CustomEvent('carddrop', { detail: this.card, bubbles: true });\n    for (let i = 0; i < children.length; i++) {\n      children[i].dispatchEvent(event);\n    }\n  }\n\n  private startIconHiddenTimer() {\n    clearTimeout(this.iconHiddenTimer);\n    this.iconHiddenTimer = setTimeout(() => {\n      this.iconHiddenTimer = null;\n      this.changeDetector.markForCheck();\n    }, 300);\n    this.changeDetector.markForCheck();\n  }\n\n  private adjustMinBounds(value: number, min: number = 0): number {\n    return value < min ? min : value;\n  }\n\n  private showDetail(gameObject: Card) {\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = 'カード設定';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n}","export default \".container {\\n  width: 100%;\\n  overflow-x: hidden;\\n}\\n.message {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n          flex-flow: row nowrap;\\n  box-sizing: border-box;\\n  padding: 5px 5px;\\n  width: 100%;\\n  word-wrap : break-word;\\n  overflow-wrap:break-word;\\n  border-bottom:1px dotted #999;\\n}\\n.direct-message {\\n  background-color: #555;\\n  color: #CCC;\\n}\\n.message .image {\\n  padding: 0px;\\n  width: 50px;\\n  height: 50px;\\n  flex-shrink: 0;\\n  vertical-align: top;\\n}\\n.message .image img {\\n  width: 100%;\\n  height: 100%;\\n  vertical-align: bottom;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  -o-object-position: 50% 0%;\\n     object-position: 50% 0%;\\n}\\n.message .body {\\n  -webkit-box-flex: 1;\\n          flex-grow: 1;\\n}\\n.message .title {\\n  vertical-align: top;\\n  font-size: 14px;\\n  padding-left: 12px;\\n}\\n.message .text {\\n  vertical-align: top;\\n  padding: 2px 12px 0 12px;\\n  font-size: 14px;\\n}\\n.message .tip {\\n  font-size: 8px;\\n  padding-left: 12px;\\n}\\n.msg-name {\\n  font-weight: bold;\\n}\\n.msg-text {\\n  white-space: pre-wrap;\\n}\\n.dicebot-message .msg-name {\\n  font-size: 8px;\\n}\\n.dicebot-message .msg-text {\\n  /*color:#22F;*/\\n}\\n.direct-message.dicebot-message .msg-text {\\n  /*color:#CCF;*/\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NoYXQtbWVzc2FnZS9jaGF0LW1lc3NhZ2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLDhCQUFxQjtFQUFyQiw2QkFBcUI7VUFBckIscUJBQXFCO0VBQ3JCLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLHNCQUFzQjtFQUN0Qix3QkFBd0I7RUFDeEIsNkJBQTZCO0FBQy9CO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztBQUNiO0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztFQUNYLFlBQVk7RUFDWixjQUFjO0VBQ2QsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixvQkFBaUI7S0FBakIsaUJBQWlCO0VBQ2pCLDBCQUF1QjtLQUF2Qix1QkFBdUI7QUFDekI7QUFDQTtFQUNFLG1CQUFZO1VBQVosWUFBWTtBQUNkO0FBQ0E7RUFDRSxtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsbUJBQW1CO0VBQ25CLHdCQUF3QjtFQUN4QixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxjQUFjO0VBQ2Qsa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7QUFFQTtFQUNFLHFCQUFxQjtBQUN2QjtBQUVBO0VBQ0UsY0FBYztBQUNoQjtBQUVBO0VBQ0UsY0FBYztBQUNoQjtBQUVBO0VBQ0UsY0FBYztBQUNoQiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9jaGF0LW1lc3NhZ2UvY2hhdC1tZXNzYWdlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIG92ZXJmbG93LXg6IGhpZGRlbjtcbn1cbi5tZXNzYWdlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1mbG93OiByb3cgbm93cmFwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBwYWRkaW5nOiA1cHggNXB4O1xuICB3aWR0aDogMTAwJTtcbiAgd29yZC13cmFwIDogYnJlYWstd29yZDtcbiAgb3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO1xuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzk5OTtcbn1cblxuLmRpcmVjdC1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi5tZXNzYWdlIC5pbWFnZSB7XG4gIHBhZGRpbmc6IDBweDtcbiAgd2lkdGg6IDUwcHg7XG4gIGhlaWdodDogNTBweDtcbiAgZmxleC1zaHJpbms6IDA7XG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XG59XG4ubWVzc2FnZSAuaW1hZ2UgaW1nIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG4gIG9iamVjdC1wb3NpdGlvbjogNTAlIDAlO1xufVxuLm1lc3NhZ2UgLmJvZHkge1xuICBmbGV4LWdyb3c6IDE7XG59XG4ubWVzc2FnZSAudGl0bGUge1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICBmb250LXNpemU6IDE0cHg7XG4gIHBhZGRpbmctbGVmdDogMTJweDtcbn1cbi5tZXNzYWdlIC50ZXh0IHtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgcGFkZGluZzogMnB4IDEycHggMCAxMnB4O1xuICBmb250LXNpemU6IDE0cHg7XG59XG4ubWVzc2FnZSAudGlwIHtcbiAgZm9udC1zaXplOiA4cHg7XG4gIHBhZGRpbmctbGVmdDogMTJweDtcbn1cblxuLm1zZy1uYW1lIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5tc2ctdGV4dCB7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLmRpY2Vib3QtbWVzc2FnZSAubXNnLW5hbWUge1xuICBmb250LXNpemU6IDhweDtcbn1cblxuLmRpY2Vib3QtbWVzc2FnZSAubXNnLXRleHQge1xuICAvKmNvbG9yOiMyMkY7Ki9cbn1cblxuLmRpcmVjdC1tZXNzYWdlLmRpY2Vib3QtbWVzc2FnZSAubXNnLXRleHQge1xuICAvKmNvbG9yOiNDQ0Y7Ki9cbn1cbiJdfQ== */\"","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\nimport { AfterViewInit, ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n\nimport { ChatMessage } from '@udonarium/chat-message';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\n\n@Component({\n  selector: 'chat-message',\n  templateUrl: './chat-message.component.html',\n  styleUrls: ['./chat-message.component.css'],\n  animations: [\n    trigger('flyInOut', [\n      transition('void => *', [\n        animate('200ms ease', keyframes([\n          style({ transform: 'translateX(100px)', opacity: '0', offset: 0 }),\n          style({ transform: 'translateX(0)', opacity: '1', offset: 1.0 })\n        ]))\n      ]),\n      transition('* => void', [\n        animate(100, style({ transform: 'translateX(100%)' }))\n      ])\n    ])\n  ],\n  changeDetection: ChangeDetectionStrategy.Default\n})\n\nexport class ChatMessageComponent implements OnInit, AfterViewInit {\n  @Input() chatMessage: ChatMessage;\n  @Output() onInit: EventEmitter<null> = new EventEmitter();\n  imageFile: ImageFile = ImageFile.Empty;\n\n  ngOnInit() {\n    let file: ImageFile = this.chatMessage.image;\n    if (file) this.imageFile = file;\n  }\n\n  ngAfterViewInit() {\n    this.onInit.emit();\n  }\n\n  discloseMessage() {\n    this.chatMessage.tag = this.chatMessage.tag.replace('secret', '');\n  }\n}\n","export default \".imagebox {\\n  display: inline-block;\\n  width: 50px;\\n  height: 50px;\\n  max-width: 50px;\\n  max-height: 50px;\\n  vertical-align: top;\\n  text-align: center;\\n}\\n.image{\\n  width: 100%;\\n  height: 100%;\\n  vertical-align: bottom;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  -o-object-position: 50% 0%;\\n     object-position: 50% 0%;\\n}\\n.table {\\n  box-sizing: border-box;\\n  padding : 5px;\\n  display: table;\\n  width: 100%;\\n}\\n.table .table-cell {\\n  display: table-cell;\\n}\\n.edit-info {\\n  width: 100%;\\n  text-align: center;\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n.palette {\\n/*.input {*/\\n  box-sizing: border-box;\\n  font-family: -apple-system, BlinkMacSystemFont, \\\"Helvetica Neue\\\", Verdana, Meiryo, sans-serif;\\n  width: 100%;\\n  height: 100%;\\n}\\n.direct-message {\\n  background-color: #555;\\n  color: #CCC;\\n}\\n.chat-input {\\n  font-family: Arial;\\n  font-size: 13px;\\n\\n  width: calc(100% - 100px);\\n  height: calc(1em + 4px);\\n  min-height: calc(1em + 7px);\\n  max-height: calc(6em + 7px);\\n  resize: none;\\n  overflow: auto;\\n\\n  padding: 1px;\\n  margin: 5px;\\n\\n  word-break: break-all;\\n  vertical-align: bottom;\\n}\\n.flex-container {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n          flex-direction: column;\\n  height: 100%;\\n}\\n.chat-tab {\\n  padding : 0 5px 5px 5px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n.chat-tab label {\\n  display: inline-block;\\n  position: relative;\\n}\\n.chat-tab input[type=\\\"radio\\\"] {\\n  display: none;\\n}\\n.chat-tab input[type=\\\"radio\\\"] + div {\\n  display: inline-block;\\n  vertical-align: middle;\\n  outline: 0;\\n  font-size: 8px;\\n  background-color: transparent;\\n  color: #444; \\n  border: solid 1px #555;\\n  padding: 2px 8px;\\n  margin: 2px;\\n  border-radius: 100px;\\n  cursor: pointer;\\n}\\n.chat-tab input[type=\\\"radio\\\"] + div:hover {\\n  background-color: #888;\\n  color: #eee;\\n  border: solid 1px #555;\\n}\\n.chat-tab input[type=\\\"radio\\\"]:checked + div {\\n  background: #555;\\n  color: #CCC;\\n}\\n.badge {\\n  position: absolute;\\n  top: -4px;\\n  right: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NoYXQtcGFsZXR0ZS9jaGF0LXBhbGV0dGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQWlCO0tBQWpCLGlCQUFpQjtFQUNqQiwwQkFBdUI7S0FBdkIsdUJBQXVCO0FBQ3pCO0FBQ0E7RUFDRSxzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLGNBQWM7RUFDZCxXQUFXO0FBQ2I7QUFDQTtFQUNFLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDO0FBQ0E7QUFDQSxXQUFXO0VBQ1Qsc0JBQXNCO0VBQ3RCLDZGQUE2RjtFQUM3RixXQUFXO0VBQ1gsWUFBWTtBQUNkO0FBQ0E7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztBQUNiO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsZUFBZTs7RUFFZix5QkFBeUI7RUFDekIsdUJBQXVCO0VBQ3ZCLDJCQUEyQjtFQUMzQiwyQkFBMkI7RUFDM0IsWUFBWTtFQUNaLGNBQWM7O0VBRWQsWUFBWTtFQUNaLFdBQVc7O0VBRVgscUJBQXFCO0VBQ3JCLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2IsNEJBQXNCO0VBQXRCLDZCQUFzQjtVQUF0QixzQkFBc0I7RUFDdEIsWUFBWTtBQUNkO0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIseUJBQWlCO0tBQWpCLHNCQUFpQjtNQUFqQixxQkFBaUI7VUFBakIsaUJBQWlCO0FBQ25CO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSxhQUFhO0FBQ2Y7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGNBQWM7RUFDZCw2QkFBNkI7RUFDN0IsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLG9CQUFvQjtFQUNwQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxRQUFRO0FBQ1YiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvY2hhdC1wYWxldHRlL2NoYXQtcGFsZXR0ZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltYWdlYm94IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB3aWR0aDogNTBweDtcbiAgaGVpZ2h0OiA1MHB4O1xuICBtYXgtd2lkdGg6IDUwcHg7XG4gIG1heC1oZWlnaHQ6IDUwcHg7XG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5pbWFnZXtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG4gIG9iamVjdC1wb3NpdGlvbjogNTAlIDAlO1xufVxuLnRhYmxlIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgcGFkZGluZyA6IDVweDtcbiAgZGlzcGxheTogdGFibGU7XG4gIHdpZHRoOiAxMDAlO1xufVxuLnRhYmxlIC50YWJsZS1jZWxsIHtcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcbn1cbi5lZGl0LWluZm8ge1xuICB3aWR0aDogMTAwJTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuLnBhbGV0dGUge1xuLyouaW5wdXQgeyovXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFwiSGVsdmV0aWNhIE5ldWVcIiwgVmVyZGFuYSwgTWVpcnlvLCBzYW5zLXNlcmlmO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuLmRpcmVjdC1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcbiAgY29sb3I6ICNDQ0M7XG59XG4uY2hhdC1pbnB1dCB7XG4gIGZvbnQtZmFtaWx5OiBBcmlhbDtcbiAgZm9udC1zaXplOiAxM3B4O1xuXG4gIHdpZHRoOiBjYWxjKDEwMCUgLSAxMDBweCk7XG4gIGhlaWdodDogY2FsYygxZW0gKyA0cHgpO1xuICBtaW4taGVpZ2h0OiBjYWxjKDFlbSArIDdweCk7XG4gIG1heC1oZWlnaHQ6IGNhbGMoNmVtICsgN3B4KTtcbiAgcmVzaXplOiBub25lO1xuICBvdmVyZmxvdzogYXV0bztcblxuICBwYWRkaW5nOiAxcHg7XG4gIG1hcmdpbjogNXB4O1xuXG4gIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbn1cblxuLmZsZXgtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2hhdC10YWIge1xuICBwYWRkaW5nIDogMCA1cHggNXB4IDVweDtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG59XG5cbi5jaGF0LXRhYiBsYWJlbCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2hhdC10YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdiB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgb3V0bGluZTogMDtcbiAgZm9udC1zaXplOiA4cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICBjb2xvcjogIzQ0NDsgXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XG4gIHBhZGRpbmc6IDJweCA4cHg7XG4gIG1hcmdpbjogMnB4O1xuICBib3JkZXItcmFkaXVzOiAxMDBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uY2hhdC10YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdICsgZGl2OmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcbiAgY29sb3I6ICNlZWU7XG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XG59XG5cbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCArIGRpdiB7XG4gIGJhY2tncm91bmQ6ICM1NTU7XG4gIGNvbG9yOiAjQ0NDO1xufVxuXG4uYmFkZ2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTRweDtcbiAgcmlnaHQ6IDA7XG59Il19 */\"","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\n\nimport { ChatPalette } from '@udonarium/chat-palette';\nimport { ChatTab } from '@udonarium/chat-tab';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\nimport { DiceBot } from '@udonarium/dice-bot';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { PeerCursor } from '@udonarium/peer-cursor';\n\nimport { TextViewComponent } from 'component/text-view/text-view.component';\nimport { ChatMessageService } from 'service/chat-message.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'chat-palette',\n  templateUrl: './chat-palette.component.html',\n  styleUrls: ['./chat-palette.component.css']\n})\nexport class ChatPaletteComponent implements OnInit, OnDestroy {\n  @ViewChild('textArea', { static: true }) textAreaElementRef: ElementRef<HTMLTextAreaElement>;\n  @ViewChild('chatPlette', { static: false }) chatPletteElementRef: ElementRef<HTMLSelectElement>;\n  @Input() character: GameCharacter = null;\n\n  get palette(): ChatPalette { return this.character.chatPalette; }\n  sendTo: string = '';\n  get isDirect(): boolean { return this.sendTo != null && this.sendTo.length ? true : false }\n  private _gameType: string = '';\n  get gameType(): string { return this._gameType };\n  set gameType(gameType: string) {\n    this._gameType = gameType;\n    if (this.character.chatPalette) this.character.chatPalette.dicebot = gameType;\n  };\n  chatTabidentifier: string = '';\n  text: string = '';\n\n  isEdit: boolean = false;\n  editPalette: string = '';\n\n  private shouldUpdateCharacterList: boolean = true;\n  private _gameCharacters: GameCharacter[] = [];\n  get gameCharacters(): GameCharacter[] {\n    if (this.shouldUpdateCharacterList) {\n      this.shouldUpdateCharacterList = false;\n      this._gameCharacters = ObjectStore.instance\n        .getObjects<GameCharacter>(GameCharacter)\n        .filter(character => this.allowsChat(character));\n    }\n    return this._gameCharacters;\n  }\n\n  private writingEventInterval: NodeJS.Timer = null;\n  private previousWritingLength: number = 0;\n\n  private doubleClickTimer: NodeJS.Timer = null;\n\n  get diceBotInfos() { return DiceBot.diceBotInfos }\n\n  get chatTab(): ChatTab { return ObjectStore.instance.get<ChatTab>(this.chatTabidentifier); }\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\n  get otherPeers(): PeerCursor[] { return ObjectStore.instance.getObjects(PeerCursor); }\n\n  constructor(\n    public chatMessageService: ChatMessageService,\n    private panelService: PanelService,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    this.panelService.title = this.character.name + ' のチャットパレット';\n    this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';\n    this.gameType = this.character.chatPalette ? this.character.chatPalette.dicebot : '';\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        if (event.data.aliasName !== GameCharacter.aliasName) return;\n        this.shouldUpdateCharacterList = true;\n        if (this.character && !this.allowsChat(this.character)) {\n          if (0 < this.gameCharacters.length) {\n            this.onSelectedCharacter(this.gameCharacters[0].identifier);\n          } else {\n            this.panelService.close();\n          }\n        }\n      })\n      .on('DELETE_GAME_OBJECT', -1000, event => {\n        if (this.character && this.character.identifier === event.data.identifier) {\n          this.panelService.close();\n        }\n        if (this.chatTabidentifier === event.data.identifier) {\n          this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';\n        }\n      })\n      .on('DISCONNECT_PEER', event => {\n        let object = ObjectStore.instance.get(this.sendTo);\n        if (object instanceof PeerCursor && object.peerId === event.data.peer) {\n          this.sendTo = '';\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n    if (this.isEdit) this.toggleEditMode();\n  }\n\n  updatePanelTitle() {\n    this.panelService.title = this.character.name + ' のチャットパレット';\n  }\n\n  onSelectedCharacter(identifier: string) {\n    if (this.isEdit) this.toggleEditMode();\n    let object = ObjectStore.instance.get(identifier);\n    if (object instanceof GameCharacter) this.character = object;\n    this.updatePanelTitle();\n  }\n\n  selectPalette(line: string) {\n    this.text = line;\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\n    textArea.value = this.text;\n  }\n\n  clickPalette(line: string) {\n    if (this.doubleClickTimer && this.text === line) {\n      clearTimeout(this.doubleClickTimer);\n      this.doubleClickTimer = null;\n      this.sendChat(null);\n    } else {\n      this.text = line;\n      let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\n      textArea.value = this.text;\n      this.doubleClickTimer = setTimeout(() => { this.doubleClickTimer = null }, 400);\n    }\n  }\n\n  onChangeGameType(gameType: string) {\n    console.log('onChangeGameType ready');\n    DiceBot.getHelpMessage(this.gameType).then(help => {\n      console.log('onChangeGameType done\\n' + help);\n    });\n  }\n\n  showDicebotHelp() {\n    DiceBot.getHelpMessage(this.gameType).then(help => {\n      let gameName: string = 'ダイスボット';\n      for (let diceBotInfo of DiceBot.diceBotInfos) {\n        if (diceBotInfo.script === this.gameType) {\n          gameName = 'ダイスボット<' + diceBotInfo.game + '＞'\n        }\n      }\n      gameName += 'の説明';\n\n      let coordinate = this.pointerDeviceService.pointers[0];\n      let option: PanelOption = { left: coordinate.x, top: coordinate.y, width: 600, height: 500 };\n      let textView = this.panelService.open(TextViewComponent, option);\n      textView.title = gameName;\n      textView.text =\n        '【ダイスボット】チャットにダイス用の文字を入力するとダイスロールが可能\\n'\n        + '入力例）２ｄ６＋１　攻撃！\\n'\n        + '出力例）2d6+1　攻撃！\\n'\n        + '　　　　  diceBot: (2d6) → 7\\n'\n        + '上記のようにダイス文字の後ろに空白を入れて発言する事も可能。\\n'\n        + '以下、使用例\\n'\n        + '　3D6+1>=9 ：3d6+1で目標値9以上かの判定\\n'\n        + '　1D100<=50 ：D100で50％目標の下方ロールの例\\n'\n        + '　3U6[5] ：3d6のダイス目が5以上の場合に振り足しして合計する(上方無限)\\n'\n        + '　3B6 ：3d6のダイス目をバラバラのまま出力する（合計しない）\\n'\n        + '　10B6>=4 ：10d6を振り4以上のダイス目の個数を数える\\n'\n        + '　(8/2)D(4+6)<=(5*3)：個数・ダイス・達成値には四則演算も使用可能\\n'\n        + '　C(10-4*3/2+2)：C(計算式）で計算だけの実行も可能\\n'\n        + '　choice[a,b,c]：列挙した要素から一つを選択表示。ランダム攻撃対象決定などに\\n'\n        + '　S3d6 ： 各コマンドの先頭に「S」を付けると他人結果の見えないシークレットロール\\n'\n        + '　3d6/2 ： ダイス出目を割り算（切り捨て）。切り上げは /2U、四捨五入は /2R。\\n'\n        + '　D66 ： D66ダイス。順序はゲームに依存。D66N：そのまま、D66S：昇順。\\n'\n        + '===================================\\n'\n        + help;\n      console.log('onChangeGameType done');\n    });\n  }\n\n  sendChat(event: KeyboardEvent) {\n    if (event) event.preventDefault();\n\n    if (!this.text.length) return;\n    if (event && event.keyCode !== 13) return;\n\n    if (this.chatTab) {\n      let text = this.palette.evaluate(this.text, this.character.rootDataElement);\n      this.chatMessageService.sendMessage(this.chatTab, text, this.gameType, this.character.identifier, this.sendTo);\n    }\n    this.text = '';\n    this.previousWritingLength = this.text.length;\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\n    textArea.value = '';\n    this.resetPletteSelect();\n    this.calcFitHeight();\n  }\n\n  resetPletteSelect() {\n    if (!this.chatPletteElementRef.nativeElement) return;\n    this.chatPletteElementRef.nativeElement.selectedIndex = -1;\n  }\n\n  toggleEditMode() {\n    this.isEdit = this.isEdit ? false : true;\n    if (this.isEdit) {\n      this.editPalette = this.palette.value + '';\n    } else {\n      this.palette.setPalette(this.editPalette);\n    }\n  }\n\n  onInput() {\n    if (this.writingEventInterval === null && this.previousWritingLength <= this.text.length) {\n      let sendTo: string = null;\n      if (this.isDirect) {\n        let object = ObjectStore.instance.get(this.sendTo);\n        if (object instanceof PeerCursor) {\n          let peer = PeerContext.create(object.peerId);\n          if (peer) sendTo = peer.id;\n        }\n      }\n      EventSystem.call('WRITING_A_MESSAGE', this.chatTabidentifier, sendTo);\n      this.writingEventInterval = setTimeout(() => {\n        this.writingEventInterval = null;\n      }, 200);\n    }\n    this.previousWritingLength = this.text.length;\n    this.calcFitHeight();\n  }\n\n  calcFitHeight() {\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\n    textArea.style.height = '';\n    if (textArea.scrollHeight >= textArea.offsetHeight) {\n      textArea.style.height = textArea.scrollHeight + 'px';\n    }\n  }\n\n  private allowsChat(gameCharacter: GameCharacter): boolean {\n    switch (gameCharacter.location.name) {\n      case 'table':\n      case this.myPeer.peerId:\n        return true;\n      case 'graveyard':\n        return false;\n      default:\n        for (const conn of Network.peerContexts) {\n          if (conn.isOpen && gameCharacter.location.name === conn.fullstring) {\n            return false;\n          }\n        }\n        return true;\n    }\n  }\n}\n","export default \".flex-container { /* Safari */\\n  display: -webkit-box;\\n  display: flex; /* Safari */\\n  -webkit-box-orient:  horizontal;\\n  -webkit-box-direction:  normal;\\n          flex-flow:  row wrap; /* Safari */\\n  -webkit-box-pack: start;\\n          justify-content: flex-start; /* Safari */\\n  -webkit-box-align: stretch;\\n          align-items: stretch;\\n\\n}\\n.flex-item {\\n  margin: 5px; /* Safari */\\n  -webkit-box-flex: 1;\\n          flex: 1 0 auto;\\n  box-sizing: border-box; /* Safari */\\n  flex-grow: 1;\\n  max-width: 100%;\\n}\\n.no-grow{ /* Safari */\\n  -webkit-box-flex: 0;\\n          flex-grow: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NoYXQtdGFiLXNldHRpbmcvY2hhdC10YWItc2V0dGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtCQUN5QixXQUFXO0VBQ2xDLG9CQUFhO0VBQWIsYUFBYSxFQUVnQixXQUFXO0VBQ3hDLCtCQUFvQjtFQUFwQiw4QkFBb0I7VUFBcEIsb0JBQW9CLEVBRWlCLFdBQVc7RUFDaEQsdUJBQTJCO1VBQTNCLDJCQUEyQixFQUVHLFdBQVc7RUFDekMsMEJBQW9CO1VBQXBCLG9CQUFvQjs7QUFFdEI7QUFDQTtFQUNFLFdBQVcsRUFDYSxXQUFXO0VBQ25DLG1CQUFjO1VBQWQsY0FBYztFQUNkLHNCQUFzQixFQUNBLFdBQVc7RUFDakMsWUFBWTtFQUNaLGVBQWU7QUFDakI7QUFFQSxVQUN3QixXQUFXO0VBQ2pDLG1CQUFZO1VBQVosWUFBWTtBQUNkIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L2NoYXQtdGFiLXNldHRpbmcvY2hhdC10YWItc2V0dGluZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZsZXgtY29udGFpbmVyIHtcbiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OyAvKiBTYWZhcmkgKi9cbiAgZGlzcGxheTogZmxleDtcblxuICAtd2Via2l0LWZsZXgtZmxvdzogcm93IHdyYXA7IC8qIFNhZmFyaSAqL1xuICBmbGV4LWZsb3c6ICByb3cgd3JhcDtcblxuICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsgLyogU2FmYXJpICovXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcblxuICAtd2Via2l0LWFsaWduLWl0ZW1zOiBzdHJldGNoOyAvKiBTYWZhcmkgKi9cbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG5cbn1cbi5mbGV4LWl0ZW0ge1xuICBtYXJnaW46IDVweDtcbiAgLXdlYmtpdC1mbGV4OiAxIDAgYXV0bzsgLyogU2FmYXJpICovXG4gIGZsZXg6IDEgMCBhdXRvO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAtd2Via2l0LWZsZXgtZ3JvdzogMTsgLyogU2FmYXJpICovXG4gIGZsZXgtZ3JvdzogMTtcbiAgbWF4LXdpZHRoOiAxMDAlO1xufVxuXG4ubm8tZ3Jvd3tcbiAgLXdlYmtpdC1mbGV4LWdyb3c6IDA7IC8qIFNhZmFyaSAqL1xuICBmbGV4LWdyb3c6IDA7XG59Il19 */\"","import { Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { ChatTab } from '@udonarium/chat-tab';\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\n\nimport { ChatMessageService } from 'service/chat-message.service';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\nimport { SaveDataService } from 'service/save-data.service';\n\n@Component({\n  selector: 'app-chat-tab-setting',\n  templateUrl: './chat-tab-setting.component.html',\n  styleUrls: ['./chat-tab-setting.component.css']\n})\nexport class ChatTabSettingComponent implements OnInit, OnDestroy {\n  selectedTab: ChatTab = null;\n  selectedTabXml: string = '';\n\n  get tabName(): string { return this.selectedTab.name; }\n  set tabName(tabName: string) { if (this.isEditable) this.selectedTab.name = tabName; }\n\n  get chatTabs(): ChatTab[] { return this.chatMessageService.chatTabs; }\n  get isEmpty(): boolean { return this.chatMessageService.chatTabs.length < 1 }\n  get isDeleted(): boolean { return this.selectedTab ? ObjectStore.instance.get(this.selectedTab.identifier) == null : false; }\n  get isEditable(): boolean { return !this.isEmpty && !this.isDeleted; }\n\n  constructor(\n    private modalService: ModalService,\n    private panelService: PanelService,\n    private chatMessageService: ChatMessageService,\n    private saveDataService: SaveDataService\n  ) { }\n\n  ngOnInit() {\n    this.modalService.title = this.panelService.title = 'チャットタブ設定';\n    EventSystem.register(this)\n      .on('DELETE_GAME_OBJECT', 1000, event => {\n        if (!this.selectedTab || event.data.identifier !== this.selectedTab.identifier) return;\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (object !== null) {\n          this.selectedTabXml = object.toXml();\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  onChangeSelectTab(identifier: string) {\n    this.selectedTab = ObjectStore.instance.get<ChatTab>(identifier);\n    this.selectedTabXml = '';\n  }\n\n  create() {\n    let chatTab = new ChatTab();\n    chatTab.name = 'タブ';\n    chatTab.initialize();\n  }\n\n  save() {\n    if (!this.selectedTab) return;\n    let fileName: string = 'chat_' + this.selectedTab.name;\n\n    this.saveDataService.saveGameObject(this.selectedTab, fileName);\n  }\n\n  delete() {\n    if (!this.isEmpty && this.selectedTab) {\n      this.selectedTabXml = this.selectedTab.toXml();\n      this.selectedTab.destroy();\n    }\n  }\n\n  restore() {\n    if (this.selectedTab && this.selectedTabXml) {\n      let restoreTable = ObjectSerializer.instance.parseXml(this.selectedTabXml);\n      this.selectedTabXml = '';\n    }\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9jaGF0LXRhYi9jaGF0LXRhYi5jb21wb25lbnQuY3NzIn0= */\"","import {\n  AfterViewChecked,\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\n\nimport { ChatMessage, ChatMessageContext } from '@udonarium/chat-message';\nimport { ChatTab } from '@udonarium/chat-tab';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\n\nimport { ChatMessageService } from 'service/chat-message.service';\nimport { PanelService } from 'service/panel.service';\n\nconst DEFAULT_MESSAGE_LENGTH = 200;\n\n@Component({\n  selector: 'chat-tab',\n  templateUrl: './chat-tab.component.html',\n  styleUrls: ['./chat-tab.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ChatTabComponent implements OnInit, AfterViewInit, OnDestroy, OnChanges, AfterViewChecked {\n  maxMessages: number = 0;\n  preScrollBottom: number = -1;\n\n  sampleMessages: ChatMessageContext[] = [\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: 'サーバーを使用しないTRPGオンセツールです。参加者同士で接続し、コマや画像ファイルなどを同期します。' },\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: '全てのデータが各参加者のブラウザ内にあるため、ルームの状態を次回に持ち越したい場合は、必ず「保存」を実行してセーブデータ（zip）を生成してください。保存したzipの読み込みはブラウザ画面へのファイルドロップで行えます。' },\n    { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル > プレイヤー', text: 'ダイレクトメッセージ（秘密会話）はセーブデータに記録されません。' },\n    { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル > プレイヤー', text: 'また、過去のダイレクトメッセージはあなたのIDが更新されると同じルーム内であっても見えなくなります。注意してください。' },\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: '動作推奨環境はデスクトップChromeです。今のところ、スマホからだと上手く操作できません。' },\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: 'チュートリアルは以上です。このチュートリアルは最初のチャットを入力すると非表示になります。' },\n  ];\n\n  private oldestTimestamp = 0;\n  private needUpdate = true;\n  private _chatMessages: ChatMessage[] = [];\n  get chatMessages(): ChatMessage[] {\n    if (!this.chatTab) return [];\n    if (this.needUpdate) {\n      let chatMessages = this.chatTab.chatMessages;\n      let length = chatMessages.length;\n      this._chatMessages = length <= this.maxMessages\n        ? chatMessages\n        : chatMessages.slice(length - this.maxMessages);\n      this.oldestTimestamp = 0 < this._chatMessages.length ? this._chatMessages[0].timestamp : 0;\n      this.needUpdate = false;\n    }\n    return this._chatMessages;\n  }\n\n  get hasMany(): boolean {\n    if (!this.chatTab) return false;\n    return this.maxMessages < this.chatTab.chatMessages.length;\n  };\n\n  private callbackOnScroll: any = (e) => this.onScroll(e);\n\n  private asyncMessagesInitializeTimer: NodeJS.Timer;\n\n  @Input() chatTab: ChatTab;\n  @Output() onAddMessage: EventEmitter<null> = new EventEmitter();\n\n  constructor(\n    private ngZone: NgZone,\n    private changeDetector: ChangeDetectorRef,\n    private chatMessageService: ChatMessageService,\n    private panelService: PanelService\n  ) { }\n\n  ngOnInit() {\n    let messages: ChatMessage[] = [];\n    for (let context of this.sampleMessages) {\n      let message = new ChatMessage();\n      for (let key in context) {\n        if (key === 'identifier') continue;\n        if (key === 'tabIdentifier') continue;\n        if (key === 'text') {\n          message.value = context[key];\n          continue;\n        }\n        if (context[key] == null || context[key] === '') continue;\n        message.setAttribute(key, context[key]);\n      }\n      messages.push(message);\n    }\n    this.sampleMessages = messages;\n\n    EventSystem.register(this)\n      .on('MESSAGE_ADDED', event => {\n        let message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\n        if (!message || message.parent !== this.chatTab) return;\n        let time = this.chatMessageService.getTime();\n\n        if (!this.needUpdate && this.oldestTimestamp < message.timestamp) this.changeDetector.markForCheck();\n        this.needUpdate = true;\n\n        if (time - (1000 * 60 * 3) < message.timestamp) {\n          let top = this.panelService.scrollablePanel.scrollHeight - this.panelService.scrollablePanel.clientHeight;\n          if (this.panelService.scrollablePanel.scrollTop < top - 150) {\n            this.maxMessages += 1;\n          }\n        } else {\n          this.maxMessages = 3;\n          clearInterval(this.asyncMessagesInitializeTimer);\n          this.asyncMessagesInitializeTimer = setInterval(() => {\n            clearInterval(this.asyncMessagesInitializeTimer);\n            this.ngZone.run(() => this.resetMessages());\n          }, 2000);\n        }\n      })\n      .on('UPDATE_GAME_OBJECT', event => {\n        let message = ObjectStore.instance.get(event.data.identifier);\n        if (message && message instanceof ChatMessage && this.oldestTimestamp <= message.timestamp && this.chatTab.contains(message)) this.changeDetector.markForCheck();\n      });\n  }\n\n  ngAfterViewInit() {\n    this.ngZone.runOutsideAngular(() => {\n      setTimeout(() => this.panelService.scrollablePanel.addEventListener('scroll', this.callbackOnScroll, false));\n    });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n    this.panelService.scrollablePanel.removeEventListener('scroll', this.callbackOnScroll, false);\n  }\n\n  ngOnChanges() {\n    this.resetMessages();\n  }\n\n  ngAfterViewChecked() {\n    if (0 <= this.preScrollBottom) {\n      this.panelService.scrollablePanel.scrollTop = this.panelService.scrollablePanel.scrollHeight - this.preScrollBottom;\n      this.preScrollBottom = -1;\n    }\n  }\n\n  moreMessages(length: number = 100) {\n    if (!this.hasMany) return;\n\n    this.maxMessages += length;\n    let maxLength = this.chatTab.chatMessages.length;\n    if (this.chatTab && maxLength < this.maxMessages) this.maxMessages = maxLength;\n    this.changeDetector.markForCheck();\n    this.needUpdate = true;\n\n    this.preScrollBottom = this.panelService.scrollablePanel.scrollHeight - this.panelService.scrollablePanel.scrollTop;\n  }\n\n  onMessageInit() {\n    this.onAddMessage.emit();\n  }\n\n  resetMessages() {\n    this.needUpdate = true;\n    this.maxMessages = 10;\n\n    clearInterval(this.asyncMessagesInitializeTimer);\n    let length = DEFAULT_MESSAGE_LENGTH;\n    this.asyncMessagesInitializeTimer = setInterval(() => {\n      if (this.hasMany && 0 < length) {\n        length -= 10;\n        this.moreMessages(10);\n      } else {\n        clearInterval(this.asyncMessagesInitializeTimer);\n      }\n    }, 0);\n  }\n\n  trackByChatMessage(index: number, message: ChatMessage) {\n    return message.identifier;\n  }\n\n  private onScroll(e: Event) {\n    if (this.hasMany && this.panelService.scrollablePanel.scrollTop <= 200) {\n      this.moreMessages(8);\n      this.ngZone.run(() => { });\n    } else if (this.chatTab.hasUnread) {\n      let top = this.panelService.scrollablePanel.scrollHeight - this.panelService.scrollablePanel.clientHeight;\n      if (top - 100 <= this.panelService.scrollablePanel.scrollTop) {\n        this.chatTab.markForRead();\n        this.ngZone.run(() => { });\n      }\n    }\n  }\n}\n","export default \".loop-anime {\\n  -webkit-animation: anime1 1.3s infinite ease-in-out;\\n  animation: anime1 1.3s infinite ease-in-out;\\n}\\n.component {\\n  min-height: 100%;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n          flex-direction: column;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n  align-content: space-between;\\n}\\n.imagebox {\\n  display: inline-block;\\n  width: 50px;\\n  height: 50px;\\n  max-width: 50px;\\n  max-height: 50px;\\n  vertical-align: top;\\n  text-align: center;\\n}\\n.image{\\n  width: 100%;\\n  height: 100%;\\n  vertical-align: bottom;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  -o-object-position: 50% 0%;\\n     object-position: 50% 0%;\\n}\\n.sticky-bottom {\\n  position: -webkit-sticky;\\n  position: sticky;\\n  bottom : 0;\\n  width: 100%;\\n  background-color: rgba(240,218,189, 0.8);\\n  border-top:1px dotted #666;\\n  margin-bottom: 0;\\n}\\n.table {\\n  box-sizing: border-box;\\n  padding : 5px;\\n  /*position : fixed;*/\\n  /*bottom : 0;*/\\n  display: table;\\n  /*width: calc(100% - 30px);*/\\n  width: 100%;\\n}\\n.table .table-cell {\\n  display: table-cell;\\n}\\n.message .body {\\n  display: table-cell;\\n}\\n.chat-input {\\n  font-family: Arial;\\n  font-size: 13px;\\n\\n  width: calc(100% - 100px);\\n  height: calc(1em + 4px);\\n  min-height: calc(1em + 7px);\\n  max-height: calc(6em + 7px);\\n  resize: none;\\n  overflow: auto;\\n\\n  padding: 1px;\\n  margin: 5px;\\n\\n  word-break: break-all;\\n  vertical-align: bottom;\\n}\\n.writing-info {\\n  font-size: 8px;\\n  height: 1.3em;\\n}\\n.direct-message {\\n  background-color: #555;\\n  color: #CCC;\\n}\\n.chat-tab {\\n  padding : 5px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n.chat-tab label {\\n  display: inline-block;\\n  position: relative;\\n}\\n.chat-tab input[type=\\\"radio\\\"] {\\n  display: none;\\n}\\n.chat-tab input[type=\\\"radio\\\"] + div {\\n  display: inline-block;\\n  vertical-align: middle;\\n  outline: 0;\\n  font-size: 12px;\\n  background-color: transparent;\\n  color: #444; \\n  border: solid 1px #555;\\n  padding: 2px 8px;\\n  margin: 2px;\\n  border-radius: 100px;\\n  cursor: pointer;\\n}\\n.chat-tab input[type=\\\"radio\\\"] + div:hover {\\n  background-color: #888;\\n  color: #eee;\\n  border: solid 1px #555;\\n}\\n.chat-tab input[type=\\\"radio\\\"]:checked + div {\\n  background: #555;\\n  color: #CCC;\\n}\\n.badge {\\n  position: absolute;\\n  top: -4px;\\n  right: 0;\\n}\\n.tab-setting {\\n  background-color: transparent;\\n  color: #444; \\n  border: solid 1px #555;\\n  padding: 2px 4px;\\n  border-radius: 5px;\\n  cursor: pointer;\\n}\\n.tab-setting:hover {\\n  background-color: #888;\\n  color: #eee;\\n  border: solid 1px #555;\\n}\\n.small-font {\\n  font-size: 12px;\\n  vertical-align: middle;\\n}\\n.material-icons {\\n  vertical-align: middle;\\n  font-size: 1.0rem;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NoYXQtd2luZG93L2NoYXQtd2luZG93LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtREFBbUQ7RUFDbkQsMkNBQTJDO0FBQzdDO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsb0JBQWE7RUFBYixhQUFhO0VBQ2IsNEJBQXNCO0VBQXRCLDZCQUFzQjtVQUF0QixzQkFBc0I7RUFDdEIseUJBQThCO1VBQTlCLDhCQUE4QjtFQUM5Qiw0QkFBNEI7QUFDOUI7QUFDQTtFQUNFLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQWlCO0tBQWpCLGlCQUFpQjtFQUNqQiwwQkFBdUI7S0FBdkIsdUJBQXVCO0FBQ3pCO0FBQ0E7RUFDRSx3QkFBZ0I7RUFBaEIsZ0JBQWdCO0VBQ2hCLFVBQVU7RUFDVixXQUFXO0VBQ1gsd0NBQXdDO0VBQ3hDLDBCQUEwQjtFQUMxQixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLHNCQUFzQjtFQUN0QixhQUFhO0VBQ2Isb0JBQW9CO0VBQ3BCLGNBQWM7RUFDZCxjQUFjO0VBQ2QsNEJBQTRCO0VBQzVCLFdBQVc7QUFDYjtBQUNBO0VBQ0UsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixlQUFlOztFQUVmLHlCQUF5QjtFQUN6Qix1QkFBdUI7RUFDdkIsMkJBQTJCO0VBQzNCLDJCQUEyQjtFQUMzQixZQUFZO0VBQ1osY0FBYzs7RUFFZCxZQUFZO0VBQ1osV0FBVzs7RUFFWCxxQkFBcUI7RUFDckIsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxjQUFjO0VBQ2QsYUFBYTtBQUNmO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztBQUNiO0FBRUE7RUFDRSxhQUFhO0VBQ2IseUJBQWlCO0tBQWpCLHNCQUFpQjtNQUFqQixxQkFBaUI7VUFBakIsaUJBQWlCO0FBQ25CO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSxhQUFhO0FBQ2Y7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGVBQWU7RUFDZiw2QkFBNkI7RUFDN0IsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLG9CQUFvQjtFQUNwQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxRQUFRO0FBQ1Y7QUFFQTtFQUNFLDZCQUE2QjtFQUM3QixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLGVBQWU7RUFDZixzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixpQkFBaUI7QUFDbkIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvY2hhdC13aW5kb3cvY2hhdC13aW5kb3cuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sb29wLWFuaW1lIHtcbiAgLXdlYmtpdC1hbmltYXRpb246IGFuaW1lMSAxLjNzIGluZmluaXRlIGVhc2UtaW4tb3V0O1xuICBhbmltYXRpb246IGFuaW1lMSAxLjNzIGluZmluaXRlIGVhc2UtaW4tb3V0O1xufVxuLmNvbXBvbmVudCB7XG4gIG1pbi1oZWlnaHQ6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24tY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cbi5pbWFnZWJveCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDUwcHg7XG4gIGhlaWdodDogNTBweDtcbiAgbWF4LXdpZHRoOiA1MHB4O1xuICBtYXgtaGVpZ2h0OiA1MHB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4uaW1hZ2V7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xuICBvYmplY3QtcG9zaXRpb246IDUwJSAwJTtcbn1cbi5zdGlja3ktYm90dG9tIHtcbiAgcG9zaXRpb246IHN0aWNreTtcbiAgYm90dG9tIDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQwLDIxOCwxODksIDAuOCk7XG4gIGJvcmRlci10b3A6MXB4IGRvdHRlZCAjNjY2O1xuICBtYXJnaW4tYm90dG9tOiAwO1xufVxuLnRhYmxlIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgcGFkZGluZyA6IDVweDtcbiAgLypwb3NpdGlvbiA6IGZpeGVkOyovXG4gIC8qYm90dG9tIDogMDsqL1xuICBkaXNwbGF5OiB0YWJsZTtcbiAgLyp3aWR0aDogY2FsYygxMDAlIC0gMzBweCk7Ki9cbiAgd2lkdGg6IDEwMCU7XG59XG4udGFibGUgLnRhYmxlLWNlbGwge1xuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xufVxuLm1lc3NhZ2UgLmJvZHkge1xuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xufVxuXG4uY2hhdC1pbnB1dCB7XG4gIGZvbnQtZmFtaWx5OiBBcmlhbDtcbiAgZm9udC1zaXplOiAxM3B4O1xuXG4gIHdpZHRoOiBjYWxjKDEwMCUgLSAxMDBweCk7XG4gIGhlaWdodDogY2FsYygxZW0gKyA0cHgpO1xuICBtaW4taGVpZ2h0OiBjYWxjKDFlbSArIDdweCk7XG4gIG1heC1oZWlnaHQ6IGNhbGMoNmVtICsgN3B4KTtcbiAgcmVzaXplOiBub25lO1xuICBvdmVyZmxvdzogYXV0bztcblxuICBwYWRkaW5nOiAxcHg7XG4gIG1hcmdpbjogNXB4O1xuXG4gIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbn1cblxuLndyaXRpbmctaW5mbyB7XG4gIGZvbnQtc2l6ZTogOHB4O1xuICBoZWlnaHQ6IDEuM2VtO1xufVxuXG4uZGlyZWN0LW1lc3NhZ2Uge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xuICBjb2xvcjogI0NDQztcbn1cblxuLmNoYXQtdGFiIHtcbiAgcGFkZGluZyA6IDVweDtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG59XG5cbi5jaGF0LXRhYiBsYWJlbCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2hhdC10YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdiB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgb3V0bGluZTogMDtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgY29sb3I6ICM0NDQ7IFxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xuICBwYWRkaW5nOiAycHggOHB4O1xuICBtYXJnaW46IDJweDtcbiAgYm9yZGVyLXJhZGl1czogMTAwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XG4gIGNvbG9yOiAjZWVlO1xuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xufVxuXG4uY2hhdC10YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdOmNoZWNrZWQgKyBkaXYge1xuICBiYWNrZ3JvdW5kOiAjNTU1O1xuICBjb2xvcjogI0NDQztcbn1cblxuLmJhZGdlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IC00cHg7XG4gIHJpZ2h0OiAwO1xufVxuXG4udGFiLXNldHRpbmcge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgY29sb3I6ICM0NDQ7IFxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xuICBwYWRkaW5nOiAycHggNHB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnRhYi1zZXR0aW5nOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcbiAgY29sb3I6ICNlZWU7XG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XG59XG5cbi5zbWFsbC1mb250IHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xufVxuXG4ubWF0ZXJpYWwtaWNvbnMge1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBmb250LXNpemU6IDEuMHJlbTtcbn1cbiJdfQ== */\"","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\nimport { AfterViewInit, Component, ElementRef, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\n\nimport { ChatMessage } from '@udonarium/chat-message';\nimport { ChatTab } from '@udonarium/chat-tab';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\nimport { DiceBot } from '@udonarium/dice-bot';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { PeerCursor } from '@udonarium/peer-cursor';\n\nimport { ChatTabSettingComponent } from 'component/chat-tab-setting/chat-tab-setting.component';\nimport { TextViewComponent } from 'component/text-view/text-view.component';\nimport { ChatMessageService } from 'service/chat-message.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'chat-window',\n  templateUrl: './chat-window.component.html',\n  styleUrls: ['./chat-window.component.css']\n})\nexport class ChatWindowComponent implements OnInit, OnDestroy, AfterViewInit {\n  @ViewChild('textArea', { static: true }) textAreaElementRef: ElementRef;\n\n  sender: string = 'Guest';\n  text: string = '';\n  sendTo: string = '';\n  get isDirect(): boolean { return this.sendTo != null && this.sendTo.length ? true : false }\n  get gameType(): string { return this.chatMessageService.gameType; }\n  set gameType(gameType: string) { this.chatMessageService.gameType = gameType; }\n  gameHelp: string = '';\n\n  private shouldUpdateCharacterList: boolean = true;\n  private _gameCharacters: GameCharacter[] = [];\n  get gameCharacters(): GameCharacter[] {\n    if (this.shouldUpdateCharacterList) {\n      this.shouldUpdateCharacterList = false;\n      this._gameCharacters = ObjectStore.instance\n        .getObjects<GameCharacter>(GameCharacter)\n        .filter(character => this.allowsChat(character));\n    }\n    return this._gameCharacters;\n  }\n\n  gameCharacter: GameCharacter = null;\n\n  private _chatTabidentifier: string = '';\n  get chatTabidentifier(): string { return this._chatTabidentifier; }\n  set chatTabidentifier(chatTabidentifier: string) {\n    let hasChanged: boolean = this._chatTabidentifier !== chatTabidentifier;\n    this._chatTabidentifier = chatTabidentifier;\n    this.updatePanelTitle();\n    if (hasChanged) {\n      this.scrollToBottom(true);\n    }\n  }\n\n  get chatTab(): ChatTab { return ObjectStore.instance.get<ChatTab>(this.chatTabidentifier); }\n  maxLogLength: number = 1000;\n  isAutoScroll: boolean = true;\n  scrollToBottomTimer: NodeJS.Timer = null;\n\n  private writingEventInterval: NodeJS.Timer = null;\n  private previousWritingLength: number = 0;\n  writingPeers: Map<string, NodeJS.Timer> = new Map();\n  writingPeerNames: string[] = [];\n\n  get diceBotInfos() { return DiceBot.diceBotInfos }\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\n  get otherPeers(): PeerCursor[] { return ObjectStore.instance.getObjects(PeerCursor); }\n\n  constructor(\n    private ngZone: NgZone,\n    public chatMessageService: ChatMessageService,\n    private panelService: PanelService,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    this.sender = this.myPeer.identifier;\n    this._chatTabidentifier = 0 < this.chatMessageService.chatTabs.length ? this.chatMessageService.chatTabs[0].identifier : '';\n\n    EventSystem.register(this)\n      .on('MESSAGE_ADDED', event => {\n        if (event.data.tabIdentifier !== this.chatTabidentifier) return;\n        let message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\n        if (message && message.isSendFromSelf) {\n          this.isAutoScroll = true;\n        } else {\n          this.checkAutoScroll();\n        }\n        if (this.isAutoScroll && this.chatTab) this.chatTab.markForRead();\n        let sendFrom = message ? message.from : '?';\n        if (this.writingPeers.has(sendFrom)) {\n          clearTimeout(this.writingPeers.get(sendFrom));\n          this.writingPeers.delete(sendFrom);\n          this.updateWritingPeerNames();\n        }\n      })\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        if (event.data.aliasName !== GameCharacter.aliasName) return;\n        this.shouldUpdateCharacterList = true;\n        if (this.gameCharacter && !this.allowsChat(this.gameCharacter)) {\n          this.gameCharacter = null;\n          this.sender = this.myPeer.identifier;\n        }\n      })\n      .on('DISCONNECT_PEER', event => {\n        let object = ObjectStore.instance.get(this.sendTo);\n        if (object instanceof PeerCursor && object.peerId === event.data.peer) {\n          this.sendTo = '';\n        }\n      })\n      .on<string>('WRITING_A_MESSAGE', event => {\n        if (event.isSendFromSelf || event.data !== this.chatTabidentifier) return;\n        this.ngZone.run(() => {\n          if (this.writingPeers.has(event.sendFrom)) clearTimeout(this.writingPeers.get(event.sendFrom));\n          this.writingPeers.set(event.sendFrom, setTimeout(() => {\n            this.writingPeers.delete(event.sendFrom);\n            this.updateWritingPeerNames();\n          }, 2000));\n          this.updateWritingPeerNames();\n        });\n      });\n    this.updatePanelTitle();\n  }\n\n  ngAfterViewInit() {\n    this.scrollToBottom(true);\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  private updateWritingPeerNames() {\n    this.writingPeerNames = Array.from(this.writingPeers.keys()).map(peerId => {\n      let peer = PeerCursor.find(peerId);\n      return peer ? peer.name : '';\n    });\n  }\n\n  // @TODO やり方はもう少し考えた方がいいい\n  scrollToBottom(isForce: boolean = false) {\n    if (isForce) this.isAutoScroll = true;\n    if (this.scrollToBottomTimer != null || !this.isAutoScroll) return;\n    this.scrollToBottomTimer = setTimeout(() => {\n      if (this.chatTab) this.chatTab.markForRead();\n      this.scrollToBottomTimer = null;\n      this.isAutoScroll = false;\n      if (this.panelService.scrollablePanel) this.panelService.scrollablePanel.scrollTop = this.panelService.scrollablePanel.scrollHeight;\n    }, 0);\n  }\n\n  // @TODO\n  checkAutoScroll() {\n    if (!this.panelService.scrollablePanel) return;\n    let top = this.panelService.scrollablePanel.scrollHeight - this.panelService.scrollablePanel.clientHeight;\n    if (top - 150 <= this.panelService.scrollablePanel.scrollTop) {\n      this.isAutoScroll = true;\n    } else {\n      this.isAutoScroll = false;\n    }\n  }\n\n  updatePanelTitle() {\n    if (this.chatTab) {\n      this.panelService.title = 'チャットウィンドウ - ' + this.chatTab.name;\n    } else {\n      this.panelService.title = 'チャットウィンドウ';\n    }\n  }\n\n  onSelectedTab(identifier: string) {\n    this.updatePanelTitle();\n  }\n\n  onSelectedCharacter(identifier: string) {\n    let object = ObjectStore.instance.get(identifier);\n    if (object instanceof GameCharacter) {\n      this.gameCharacter = object;\n    } else {\n      this.gameCharacter = null;\n    }\n    this.sender = identifier;\n  }\n\n  onChangeGameType(gameType: string) {\n    console.log('onChangeGameType ready');\n    DiceBot.getHelpMessage(this.gameType).then(help => {\n      console.log('onChangeGameType done\\n' + help);\n    });\n  }\n\n  showDicebotHelp() {\n    DiceBot.getHelpMessage(this.gameType).then(help => {\n      this.gameHelp = help;\n\n      let gameName: string = 'ダイスボット';\n      for (let diceBotInfo of DiceBot.diceBotInfos) {\n        if (diceBotInfo.script === this.gameType) {\n          gameName = 'ダイスボット<' + diceBotInfo.game + '＞'\n        }\n      }\n      gameName += 'の説明';\n\n      let coordinate = this.pointerDeviceService.pointers[0];\n      let option: PanelOption = { left: coordinate.x, top: coordinate.y, width: 600, height: 500 };\n      let textView = this.panelService.open(TextViewComponent, option);\n      textView.title = gameName;\n      textView.text =\n        '【ダイスボット】チャットにダイス用の文字を入力するとダイスロールが可能\\n'\n        + '入力例）２ｄ６＋１　攻撃！\\n'\n        + '出力例）2d6+1　攻撃！\\n'\n        + '　　　　  diceBot: (2d6) → 7\\n'\n        + '上記のようにダイス文字の後ろに空白を入れて発言する事も可能。\\n'\n        + '以下、使用例\\n'\n        + '　3D6+1>=9 ：3d6+1で目標値9以上かの判定\\n'\n        + '　1D100<=50 ：D100で50％目標の下方ロールの例\\n'\n        + '　3U6[5] ：3d6のダイス目が5以上の場合に振り足しして合計する(上方無限)\\n'\n        + '　3B6 ：3d6のダイス目をバラバラのまま出力する（合計しない）\\n'\n        + '　10B6>=4 ：10d6を振り4以上のダイス目の個数を数える\\n'\n        + '　(8/2)D(4+6)<=(5*3)：個数・ダイス・達成値には四則演算も使用可能\\n'\n        + '　C(10-4*3/2+2)：C(計算式）で計算だけの実行も可能\\n'\n        + '　choice[a,b,c]：列挙した要素から一つを選択表示。ランダム攻撃対象決定などに\\n'\n        + '　S3d6 ： 各コマンドの先頭に「S」を付けると他人結果の見えないシークレットロール\\n'\n        + '　3d6/2 ： ダイス出目を割り算（切り捨て）。切り上げは /2U、四捨五入は /2R。\\n'\n        + '　D66 ： D66ダイス。順序はゲームに依存。D66N：そのまま、D66S：昇順。\\n'\n        + '===================================\\n'\n        + this.gameHelp;\n    });\n  }\n\n  sendChat(event: KeyboardEvent) {\n    if (event) event.preventDefault();\n\n    if (!this.text.length) return;\n    if (event && event.keyCode !== 13) return;\n\n    if (!this.sender.length) this.sender = this.myPeer.identifier;\n    if (this.chatTab) {\n      this.chatMessageService.sendMessage(this.chatTab, this.text, this.gameType, this.sender, this.sendTo);\n    }\n    this.text = '';\n    this.previousWritingLength = this.text.length;\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\n    textArea.value = '';\n    this.calcFitHeight();\n  }\n\n  showTabSetting() {\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 500, height: 350 };\n    let component = this.panelService.open<ChatTabSettingComponent>(ChatTabSettingComponent, option);\n    component.selectedTab = this.chatTab;\n  }\n\n  onInput() {\n    if (this.writingEventInterval === null && this.previousWritingLength <= this.text.length) {\n      let sendTo: string = null;\n      if (this.isDirect) {\n        let object = ObjectStore.instance.get(this.sendTo);\n        if (object instanceof PeerCursor) {\n          let peer = PeerContext.create(object.peerId);\n          if (peer) sendTo = peer.id;\n        }\n      }\n      EventSystem.call('WRITING_A_MESSAGE', this.chatTabidentifier, sendTo);\n      this.writingEventInterval = setTimeout(() => {\n        this.writingEventInterval = null;\n      }, 200);\n    }\n    this.previousWritingLength = this.text.length;\n    this.calcFitHeight();\n  }\n\n  calcFitHeight() {\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\n    textArea.style.height = '';\n    if (textArea.scrollHeight >= textArea.offsetHeight) {\n      textArea.style.height = textArea.scrollHeight + 'px';\n    }\n  }\n\n  private allowsChat(gameCharacter: GameCharacter): boolean {\n    switch (gameCharacter.location.name) {\n      case 'table':\n      case this.myPeer.peerId:\n        return true;\n      case 'graveyard':\n        return false;\n      default:\n        for (const conn of Network.peerContexts) {\n          if (conn.isOpen && gameCharacter.location.name === conn.fullstring) {\n            return false;\n          }\n        }\n        return true;\n    }\n  }\n\n  trackByChatTab(index: number, chatTab: ChatTab) {\n    return chatTab.identifier;\n  }\n}\n","export default \".component {\\n  box-sizing: border-box;\\n  overflow: visible;\\n  position: absolute;\\n\\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\\n  border: solid 1px #999;\\n  padding: 0px;\\n\\n  white-space: nowrap;\\n\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n\\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n  z-index: 9900;\\n}\\n.submenu-panel {\\n  position: absolute;\\n  left: calc(100% - 4px);\\n  top: -16px;\\n}\\n.pointer-events-none {\\n  pointer-events: none;\\n}\\n.is-max-limit {\\n  max-height: 100%;\\n  max-width: 100%;\\n}\\n.title{\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  max-width: 18em;\\n  font-size: 12px;\\n  text-align: center;\\n  padding: 4px 16px;\\n  margin: 0 2px;\\n  color: #444;\\n  border-bottom: 1px solid #AAA;\\n}\\n.menu-title {\\n  display: inline-block;\\n}\\nhr.separator {\\n  margin: 0.1em -12px;\\n  height: 1px;\\n  border: 0;\\n  background-color: #AAA;\\n}\\n.sub-menu-arrow {\\n  display: inline-block;\\n  position: absolute;\\n  top: 2px;\\n  bottom: 0;\\n  right: 1px;\\n}\\nul {\\n  list-style: none;\\n  padding: 2px 0;\\n  margin: 0;\\n}\\nul > li {\\n  position: relative;\\n  cursor: -moz-default;\\n  cursor: -webkit-default;\\n  cursor: default;\\n\\n  padding: 2px 20px;\\n  font-size: 12px;\\n  color: #444;\\n}\\nul > li.hasHighlight:hover {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2NvbnRleHQtbWVudS9jb250ZXh0LW1lbnUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHNCQUFzQjtFQUN0QixpQkFBaUI7RUFDakIsa0JBQWtCOztFQUVsQixxRkFBcUY7RUFDckYsc0JBQXNCO0VBQ3RCLFlBQVk7O0VBRVosbUJBQW1COztFQUVuQixzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLHFCQUFpQjtNQUFqQixpQkFBaUI7O0VBRWpCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsYUFBYTtBQUNmO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLFVBQVU7QUFDWjtBQUNBO0VBQ0Usb0JBQW9CO0FBQ3RCO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsaUJBQWlCO0VBQ2pCLGFBQWE7RUFDYixXQUFXO0VBQ1gsNkJBQTZCO0FBQy9CO0FBQ0E7RUFDRSxxQkFBcUI7QUFDdkI7QUFDQTtFQUNFLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsU0FBUztFQUNULHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0UscUJBQXFCO0VBQ3JCLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsU0FBUztFQUNULFVBQVU7QUFDWjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxTQUFTO0FBQ1g7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7O0VBRWYsaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixXQUFXO0FBQ2I7QUFDQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekMiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvY29udGV4dC1tZW51L2NvbnRleHQtbWVudS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbXBvbmVudCB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KC0zMGRlZywgcmdiYSgyNDAsMjE4LDE4OSwgMC45KSwgcmdiYSgyNTUsIDI0NCwgMjMyLCAwLjkpKTtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzk5OTtcbiAgcGFkZGluZzogMHB4O1xuXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG5cbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG5cbiAgLW1vei11c2VyLWRyYWc6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xuICB6LWluZGV4OiA5OTAwO1xufVxuLnN1Ym1lbnUtcGFuZWwge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IGNhbGMoMTAwJSAtIDRweCk7XG4gIHRvcDogLTE2cHg7XG59XG4ucG9pbnRlci1ldmVudHMtbm9uZSB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuLmlzLW1heC1saW1pdCB7XG4gIG1heC1oZWlnaHQ6IDEwMCU7XG4gIG1heC13aWR0aDogMTAwJTtcbn1cbi50aXRsZXtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG1heC13aWR0aDogMThlbTtcbiAgZm9udC1zaXplOiAxMnB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDRweCAxNnB4O1xuICBtYXJnaW46IDAgMnB4O1xuICBjb2xvcjogIzQ0NDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNBQUE7XG59XG4ubWVudS10aXRsZSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbn1cbmhyLnNlcGFyYXRvciB7XG4gIG1hcmdpbjogMC4xZW0gLTEycHg7XG4gIGhlaWdodDogMXB4O1xuICBib3JkZXI6IDA7XG4gIGJhY2tncm91bmQtY29sb3I6ICNBQUE7XG59XG4uc3ViLW1lbnUtYXJyb3cge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAycHg7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDFweDtcbn1cbnVsIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgcGFkZGluZzogMnB4IDA7XG4gIG1hcmdpbjogMDtcbn1cbnVsID4gbGkge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuXG4gIHBhZGRpbmc6IDJweCAyMHB4O1xuICBmb250LXNpemU6IDEycHg7XG4gIGNvbG9yOiAjNDQ0O1xufVxudWwgPiBsaS5oYXNIaWdobGlnaHQ6aG92ZXIge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufSJdfQ== */\"","import { AfterViewInit, Component, ElementRef, HostListener, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ContextMenuAction, ContextMenuService } from 'service/context-menu.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'context-menu',\n  templateUrl: './context-menu.component.html',\n  styleUrls: ['./context-menu.component.css']\n})\nexport class ContextMenuComponent implements OnInit, OnDestroy, AfterViewInit {\n  @ViewChild('root', { static: true }) rootElementRef: ElementRef<HTMLElement>;\n\n  @Input() title: string = '';\n  @Input() actions: ContextMenuAction[] = [];\n\n  @Input() isSubmenu: boolean = false;\n\n  parentMenu: ContextMenuAction;\n  subMenu: ContextMenuAction[];\n\n  showSubMenuTimer: NodeJS.Timer;\n  hideSubMenuTimer: NodeJS.Timer;\n\n  private callbackOnOutsideClick = (e) => this.onOutsideClick(e);\n\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\n\n  constructor(\n    private elementRef: ElementRef<HTMLElement>,\n    public contextMenuService: ContextMenuService,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    if (!this.isSubmenu) {\n      this.title = this.contextMenuService.title;\n      this.actions = this.contextMenuService.actions;\n    }\n  }\n\n  ngAfterViewInit() {\n    if (!this.isSubmenu) {\n      this.adjustPositionRoot();\n      document.addEventListener('touchstart', this.callbackOnOutsideClick, true);\n      document.addEventListener('mousedown', this.callbackOnOutsideClick, true);\n    } else {\n      this.adjustPositionSub();\n    }\n  }\n\n  ngOnDestroy() {\n    document.removeEventListener('touchstart', this.callbackOnOutsideClick, true);\n    document.removeEventListener('mousedown', this.callbackOnOutsideClick, true);\n  }\n\n  onOutsideClick(event) {\n    if (this.rootElementRef.nativeElement.contains(event.target) === false) {\n      this.close();\n    }\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  private adjustPositionRoot() {\n    let panel: HTMLElement = this.rootElementRef.nativeElement;\n\n    panel.style.left = this.contextMenuService.position.x + 'px';\n    panel.style.top = this.contextMenuService.position.y + 'px';\n\n    let panelBox = panel.getBoundingClientRect();\n\n    let diffLeft = 0;\n    let diffTop = 0;\n\n    if (window.innerWidth < panelBox.right + diffLeft) {\n      diffLeft += window.innerWidth - (panelBox.right + diffLeft);\n    }\n    if (panelBox.left + diffLeft < 0) {\n      diffLeft += 0 - (panelBox.left + diffLeft);\n    }\n\n    if (window.innerHeight < panelBox.bottom + diffTop) {\n      diffTop += window.innerHeight - (panelBox.bottom + diffTop);\n    }\n    if (panelBox.top + diffTop < 0) {\n      diffTop += 0 - (panelBox.top + diffTop);\n    }\n\n    panel.style.left = panel.offsetLeft + diffLeft + 'px';\n    panel.style.top = panel.offsetTop + diffTop + 'px';\n  }\n\n  private adjustPositionSub() {\n    let parent: HTMLElement = this.elementRef.nativeElement.parentElement;\n    let submenu: HTMLElement = this.rootElementRef.nativeElement;\n\n    let parentBox = parent.getBoundingClientRect();\n    let submenuBox = submenu.getBoundingClientRect();\n\n    let diffLeft = 0;\n    let diffTop = 0;\n\n    if (window.innerWidth < submenuBox.right + diffLeft) {\n      diffLeft -= parentBox.width + submenuBox.width;\n      diffLeft += 8;\n    }\n    if (submenuBox.left + diffLeft < 0) {\n      diffLeft += 0 - (submenuBox.left + diffLeft);\n    }\n\n    if (window.innerHeight < submenuBox.bottom + diffTop) {\n      diffTop += window.innerHeight - (submenuBox.bottom + diffTop);\n    }\n    if (submenuBox.top + diffTop < 0) {\n      diffTop += 0 - (submenuBox.top + diffTop);\n    }\n\n    submenu.style.left = submenu.offsetLeft + diffLeft + 'px';\n    submenu.style.top = submenu.offsetTop + diffTop + 'px';\n  }\n\n  doAction(action: ContextMenuAction) {\n    this.showSubMenu(action);\n    if (action.action != null) {\n      action.action();\n      this.close();\n    }\n  }\n\n  showSubMenu(action: ContextMenuAction) {\n    this.hideSubMenu();\n    clearTimeout(this.showSubMenuTimer);\n    if (action.subActions == null || action.subActions.length < 1) return;\n    this.showSubMenuTimer = setTimeout(() => {\n      this.parentMenu = action;\n      this.subMenu = action.subActions;\n      clearTimeout(this.hideSubMenuTimer);\n    }, 250);\n  }\n\n  hideSubMenu() {\n    clearTimeout(this.hideSubMenuTimer);\n    this.hideSubMenuTimer = setTimeout(() => {\n      this.subMenu = null;\n    }, 1200);\n  }\n\n  close() {\n    if (this.contextMenuService) this.contextMenuService.close();\n  }\n}\n\nContextMenuService.UIPanelComponentClass = ContextMenuComponent;\n","export default \".is-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab;\\n}\\n\\n.is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n}\\n\\n.is-transition {\\n  -webkit-transition: -webkit-transform 132ms linear;\\n  transition: -webkit-transform 132ms linear;\\n  transition: transform 132ms linear;\\n  transition: transform 132ms linear, -webkit-transform 132ms linear;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.is-pointer-events-auto {\\n  pointer-events: auto;\\n}\\n\\n.component {\\n  position: absolute;\\n  height: 50px;\\n  width: 50px;\\n\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n}\\n\\n.component-content {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.pedestal-grab {\\n  z-index: -1;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n  top: -22px;\\n  left: -6px;\\n  height: calc(100% + 44px);\\n  width: calc(100% + 12px);\\n  cursor: default;\\n  border-radius: 37px;\\n}\\n\\n.pedestal-grab-border {\\n  pointer-events: none;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  border-top: solid 28px #999;\\n  border-left: solid 12px #999;\\n  border-right: solid 12px #CCC;\\n  border-bottom: solid 28px #CCC;\\n  border-radius: 22px;\\n}\\n\\n.pedestal-inner {\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  box-sizing: border-box;\\n  border: solid 6px rgb(216, 139, 75);\\n  border-radius: 5px;\\n}\\n\\n.is-gray-border {\\n  border-color: #999;\\n}\\n\\n.pedestal-outer {\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  box-sizing: border-box;\\n  border: solid 2px #212121;\\n  border-radius: 5px;\\n}\\n\\n.upright-transform {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  -webkit-transform: rotateX(-90deg) translateY(-50%);\\n          transform: rotateX(-90deg) translateY(-50%);\\n}\\n\\n.is-fit-width {\\n  height: auto;\\n  width: 100%;\\n}\\n\\n.fill-frame {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n\\n.image {\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  margin: auto;\\n\\n  width: 100%;\\n  height: auto;\\n  vertical-align: bottom;\\n}\\n\\n.is-black-mask {\\n  -webkit-filter: brightness(0);\\n          filter: brightness(0);\\n }\\n\\n.is-harf-black-mask {\\n  -webkit-filter: brightness(0.5);\\n          filter: brightness(0.5);\\n }\\n\\n.name-tag {\\n  box-sizing: border-box;\\n  font-size: 15px;\\n  padding: 3px 9px;\\n  border-radius: 6px;\\n  position: absolute;\\n  top: -30px;\\n}\\n\\n.owner-tag {\\n  box-sizing: border-box;\\n  font-size: 12px;\\n  padding: 3px 9px;\\n  border-radius: 6px;\\n  position: absolute;\\n  top: -55px;\\n}\\n\\n.rotate-frame {\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n\\n.rotate-inner {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n\\n  width: 100%;\\n  height: auto;\\n}\\n\\n.is-nowrap {\\n  white-space: nowrap;\\n}\\n\\n.is-black-background {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\n.fornt-tag {\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n}\\n\\n.back-tag {\\n  position: absolute;\\n  top: 3px;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  -webkit-transform: rotateY(-180deg);\\n          transform: rotateY(-180deg);\\n}\\n\\n.has-length-limit {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  max-width: 18em;\\n}\\n\\n.rotate-grab-icon {\\n  position: absolute;\\n  width: 28px;\\n  height: 28px;\\n  box-sizing: border-box;\\n  cursor: -moz-default;\\n  cursor: -webkit-default;\\n  cursor: default;\\n  z-index: 1;\\n  padding: 2px;\\n  background-color: #CCCCCC;\\n  border-radius: 100%;\\n  color: #444;\\n  font-size: 8px;\\n}\\n\\n.of-top {\\n  top: -42px;\\n}\\n\\n.of-bottom {\\n  bottom: -30px;\\n}\\n\\n.of-front {\\n  position: absolute;\\n  width: 24px;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  margin: auto;\\n  color: #444;\\n}\\n\\n.of-back {\\n  position: absolute;\\n  width: 24px;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  margin: auto;\\n  color: #444;\\n}\\n\\n.rotate-grab {\\n  opacity: 0;\\n}\\n\\n.component:hover .rotate-grab {\\n  opacity: 0.5;\\n}\\n\\n.component:active .rotate-grab {\\n  opacity: 0;\\n}\\n\\n.component .rotate-grab:hover, .component .rotate-grab:active {\\n  opacity: 1;\\n}\\n\\n.material-icons {\\n  display: none;\\n}\\n\\n.component:hover .material-icons, .component:active .material-icons {\\n  display: inline;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2RpY2Utc3ltYm9sL2RpY2Utc3ltYm9sLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFRSxvQkFBb0I7RUFDcEIsWUFBWTtBQUNkOztBQUVBO0VBRUUsd0JBQXdCO0VBQ3hCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLG9DQUFvQztFQUNwQyw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxrREFBa0Q7RUFDbEQsMENBQWtDO0VBQWxDLGtDQUFrQztFQUFsQyxrRUFBa0M7QUFDcEM7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7O0VBRVgsc0JBQXNCO0VBQ3RCLHlCQUF5QjtFQUN6QixxQkFBaUI7TUFBakIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLHdCQUF3QjtFQUN4QixlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDhCQUE4QjtFQUM5QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtFQUN0QixtQ0FBbUM7RUFDbkMsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixtREFBMkM7VUFBM0MsMkNBQTJDO0FBQzdDOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7QUFDVjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFlBQVk7O0VBRVosV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSw2QkFBcUI7VUFBckIscUJBQXFCO0NBQ3RCOztBQUVBO0VBQ0MsK0JBQXVCO1VBQXZCLHVCQUF1QjtDQUN4Qjs7QUFFRDtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsVUFBVTtBQUNaOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7QUFDVjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7O0VBRVIsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLG1DQUEyQjtVQUEzQiwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLFVBQVU7RUFDVixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsT0FBTztFQUNQLFFBQVE7RUFDUixTQUFTO0VBQ1QsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsTUFBTTtFQUNOLE9BQU87RUFDUCxRQUFRO0VBQ1IsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGVBQWU7QUFDakIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvZGljZS1zeW1ib2wvZGljZS1zeW1ib2wuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcbiAgY3Vyc29yOiAtbW96LWdyYWI7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xuICBjdXJzb3I6IGdyYWI7XG59XG5cbi5pcy1ncmFiYmluZyB7XG4gIGN1cnNvcjogLW1vei1ncmFiYmluZztcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xuICBjdXJzb3I6IGdyYWJiaW5nO1xufVxuXG4uaXMtM2Qge1xuICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG59XG5cbi5pcy10cmFuc2l0aW9uIHtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogNTBweDtcbiAgd2lkdGg6IDUwcHg7XG5cbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcbn1cblxuLmNvbXBvbmVudC1jb250ZW50IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLnBlZGVzdGFsLWdyYWIge1xuICB6LWluZGV4OiAtMTtcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTIycHg7XG4gIGxlZnQ6IC02cHg7XG4gIGhlaWdodDogY2FsYygxMDAlICsgNDRweCk7XG4gIHdpZHRoOiBjYWxjKDEwMCUgKyAxMnB4KTtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuICBib3JkZXItcmFkaXVzOiAzN3B4O1xufVxuXG4ucGVkZXN0YWwtZ3JhYi1ib3JkZXIge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXRvcDogc29saWQgMjhweCAjOTk5O1xuICBib3JkZXItbGVmdDogc29saWQgMTJweCAjOTk5O1xuICBib3JkZXItcmlnaHQ6IHNvbGlkIDEycHggI0NDQztcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMjhweCAjQ0NDO1xuICBib3JkZXItcmFkaXVzOiAyMnB4O1xufVxuXG4ucGVkZXN0YWwtaW5uZXIge1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCA2cHggcmdiKDIxNiwgMTM5LCA3NSk7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuLmlzLWdyYXktYm9yZGVyIHtcbiAgYm9yZGVyLWNvbG9yOiAjOTk5O1xufVxuXG4ucGVkZXN0YWwtb3V0ZXIge1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAycHggIzIxMjEyMTtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuXG4udXByaWdodC10cmFuc2Zvcm0ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRyYW5zZm9ybTogcm90YXRlWCgtOTBkZWcpIHRyYW5zbGF0ZVkoLTUwJSk7XG59XG5cbi5pcy1maXQtd2lkdGgge1xuICBoZWlnaHQ6IGF1dG87XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uZmlsbC1mcmFtZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbn1cblxuLmltYWdlIHtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiBhdXRvO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGF1dG87XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG59XG5cbi5pcy1ibGFjay1tYXNrIHtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDApO1xuIH1cblxuIC5pcy1oYXJmLWJsYWNrLW1hc2sge1xuICBmaWx0ZXI6IGJyaWdodG5lc3MoMC41KTtcbiB9XG5cbi5uYW1lLXRhZyB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgcGFkZGluZzogM3B4IDlweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTMwcHg7XG59XG5cbi5vd25lci10YWcge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDEycHg7XG4gIHBhZGRpbmc6IDNweCA5cHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IC01NXB4O1xufVxuXG4ucm90YXRlLWZyYW1lIHtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbn1cblxuLnJvdGF0ZS1pbm5lciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcblxuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiBhdXRvO1xufVxuXG4uaXMtbm93cmFwIHtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuXG4uZm9ybnQtdGFnIHtcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4uYmFjay10YWcge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogM3B4O1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHRyYW5zZm9ybTogcm90YXRlWSgtMTgwZGVnKTtcbn1cblxuLmhhcy1sZW5ndGgtbGltaXQge1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgbWF4LXdpZHRoOiAxOGVtO1xufVxuXG4ucm90YXRlLWdyYWItaWNvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDI4cHg7XG4gIGhlaWdodDogMjhweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XG4gIGN1cnNvcjogLXdlYmtpdC1kZWZhdWx0O1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIHotaW5kZXg6IDE7XG4gIHBhZGRpbmc6IDJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgY29sb3I6ICM0NDQ7XG4gIGZvbnQtc2l6ZTogOHB4O1xufVxuXG4ub2YtdG9wIHtcbiAgdG9wOiAtNDJweDtcbn1cblxuLm9mLWJvdHRvbSB7XG4gIGJvdHRvbTogLTMwcHg7XG59XG5cbi5vZi1mcm9udCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDI0cHg7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIG1hcmdpbjogYXV0bztcbiAgY29sb3I6ICM0NDQ7XG59XG5cbi5vZi1iYWNrIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMjRweDtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiBhdXRvO1xuICBjb2xvcjogIzQ0NDtcbn1cblxuLnJvdGF0ZS1ncmFiIHtcbiAgb3BhY2l0eTogMDtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwLjU7XG59XG5cbi5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDA7XG59XG5cbi5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmhvdmVyLCAuY29tcG9uZW50IC5yb3RhdGUtZ3JhYjphY3RpdmUge1xuICBvcGFjaXR5OiAxO1xufVxuXG4ubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5tYXRlcmlhbC1pY29ucywgLmNvbXBvbmVudDphY3RpdmUgLm1hdGVyaWFsLWljb25zIHtcbiAgZGlzcGxheTogaW5saW5lO1xufSJdfQ== */\"","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { DiceSymbol } from '@udonarium/dice-symbol';\nimport { PeerCursor } from '@udonarium/peer-cursor';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { InputHandler } from 'directive/input-handler';\nimport { MovableOption } from 'directive/movable.directive';\nimport { RotableOption } from 'directive/rotable.directive';\nimport { ContextMenuAction, ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'dice-symbol',\n  templateUrl: './dice-symbol.component.html',\n  styleUrls: ['./dice-symbol.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('diceRoll', [\n      transition('* => active', [\n        animate('800ms ease', keyframes([\n          style({ transform: 'scale3d(0.8, 0.8, 0.8) rotateZ(0deg)', offset: 0 }),\n          style({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),\n          style({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),\n          style({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),\n          style({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })\n        ]))\n      ])\n    ]),\n    trigger('bounceInOut', [\n      transition('void => *', [\n        animate('600ms ease', keyframes([\n          style({ transform: 'scale3d(0, 0, 0)', offset: 0 }),\n          style({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),\n          style({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),\n          style({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),\n          style({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })\n        ]))\n      ]),\n      transition('* => void', [\n        animate(100, style({ transform: 'scale3d(0, 0, 0)' }))\n      ])\n    ])\n  ]\n})\nexport class DiceSymbolComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() diceSymbol: DiceSymbol = null;\n  @Input() is3D: boolean = false;\n\n  get face(): string { return this.diceSymbol.face; }\n  set face(face: string) { this.diceSymbol.face = face; }\n  get owner(): string { return this.diceSymbol.owner; }\n  set owner(owner: string) { this.diceSymbol.owner = owner; }\n  get rotate(): number { return this.diceSymbol.rotate; }\n  set rotate(rotate: number) { this.diceSymbol.rotate = rotate; }\n\n  get name(): string { return this.diceSymbol.name; }\n  set name(name: string) { this.diceSymbol.name = name; }\n  get size(): number { return this.adjustMinBounds(this.diceSymbol.size); }\n\n  get faces(): string[] { return this.diceSymbol.faces; }\n  get imageFile(): ImageFile {\n    let image = this.diceSymbol.imageFile;\n    return image ? image : this.emptyImage;\n  }\n\n  get isMine(): boolean { return this.diceSymbol.isMine; }\n  get hasOwner(): boolean { return this.diceSymbol.hasOwner; }\n  get ownerName(): string { return this.diceSymbol.ownerName; }\n  get isVisible(): boolean { return this.diceSymbol.isVisible; }\n\n  animeState: string = 'inactive';\n\n  private iconHiddenTimer: NodeJS.Timer = null;\n  get isIconHidden(): boolean { return this.iconHiddenTimer != null };\n\n  private emptyImage: ImageFile = ImageFile.Empty;\n  gridSize: number = 50;\n\n  movableOption: MovableOption = {};\n  rotableOption: RotableOption = {};\n\n  private doubleClickTimer: NodeJS.Timer = null;\n  private doubleClickPoint = { x: 0, y: 0 };\n\n  private input: InputHandler = null;\n\n  constructor(\n    private ngZone: NgZone,\n    private panelService: PanelService,\n    private contextMenuService: ContextMenuService,\n    private elementRef: ElementRef<HTMLElement>,\n    private changeDetector: ChangeDetectorRef,\n    private pointerDeviceService: PointerDeviceService) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('ROLL_DICE_SYNBOL', -1000, event => {\n        if (event.data.identifier === this.diceSymbol.identifier) {\n          this.ngZone.run(() => {\n            this.animeState = 'inactive';\n            this.changeDetector.markForCheck();\n            setTimeout(() => { this.animeState = 'active'; this.changeDetector.markForCheck(); });\n          });\n        }\n      })\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.diceSymbol || !object) return;\n        if ((this.diceSymbol === object)\n          || (object instanceof ObjectNode && this.diceSymbol.contains(object))\n          || (object instanceof PeerCursor && object.peerId === this.diceSymbol.owner)) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('DISCONNECT_PEER', event => {\n        if (this.diceSymbol.owner === event.data.peer) this.changeDetector.markForCheck();\n      });\n    this.movableOption = {\n      tabletopObject: this.diceSymbol,\n      transformCssOffset: 'translateZ(1.0px)',\n      colideLayers: ['terrain']\n    };\n    this.rotableOption = {\n      tabletopObject: this.diceSymbol\n    };\n  }\n\n  ngAfterViewInit() {\n    this.input = new InputHandler(this.elementRef.nativeElement);\n    this.input.onStart = this.onInputStart.bind(this);\n  }\n\n  ngOnDestroy() {\n    this.input.destroy();\n    EventSystem.unregister(this);\n  }\n\n  @HostListener('dragstart', ['$event'])\n  onDragstart(e: any) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  animationShuffleDone(event: any) {\n    this.animeState = 'inactive';\n    this.changeDetector.markForCheck();\n  }\n\n  onInputStart(e: MouseEvent | TouchEvent) {\n    this.input.cancel();\n    this.onDoubleClick(e);\n    if (e instanceof MouseEvent) this.startIconHiddenTimer();\n  }\n\n  onDoubleClick(e) {\n    if (!this.doubleClickTimer) {\n      this.doubleClickTimer = setTimeout(() => {\n        clearTimeout(this.doubleClickTimer);\n        this.doubleClickTimer = null;\n      }, 300);\n      this.doubleClickPoint = this.input.pointer;\n      return;\n    }\n    clearTimeout(this.doubleClickTimer);\n    this.doubleClickTimer = null;\n    let distance = (this.doubleClickPoint.x - this.input.pointer.x) ** 2 + (this.doubleClickPoint.y - this.input.pointer.y) ** 2;\n    if (distance < 10 ** 2) {\n      if (this.isVisible) this.diceRoll();\n    }\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n    let position = this.pointerDeviceService.pointers[0];\n\n    let actions: ContextMenuAction[] = [];\n\n    if (this.isVisible) {\n      actions.push({\n        name: 'ダイスを振る', action: () => {\n          this.diceRoll();\n        }\n      });\n    }\n    actions.push(ContextMenuSeparator);\n    if (this.isMine || this.hasOwner) {\n      actions.push({\n        name: 'ダイスを公開', action: () => {\n          this.owner = '';\n          SoundEffect.play(PresetSound.unlock);\n        }\n      });\n    }\n    if (!this.isMine) {\n      actions.push({\n        name: '自分だけ見る', action: () => {\n          this.owner = Network.peerId;\n          SoundEffect.play(PresetSound.lock);\n        }\n      });\n    }\n\n    if (this.isVisible) {\n      let subActions: ContextMenuAction[] = [];\n      this.faces.forEach(face => {\n        subActions.push({\n          name: `${face}`, action: () => {\n            this.face = face;\n            SoundEffect.play(PresetSound.dicePut);\n          }\n        });\n      });\n      actions.push({ name: `ダイス目を設定`, action: null, subActions: subActions });\n    }\n\n    actions.push(ContextMenuSeparator);\n\n    actions.push({ name: '詳細を表示', action: () => { this.showDetail(this.diceSymbol); } });\n    actions.push({\n      name: 'コピーを作る', action: () => {\n        let cloneObject = this.diceSymbol.clone();\n        cloneObject.location.x += this.gridSize;\n        cloneObject.location.y += this.gridSize;\n        cloneObject.update();\n        SoundEffect.play(PresetSound.dicePut);\n      }\n    });\n    actions.push({\n      name: '削除する', action: () => {\n        this.diceSymbol.destroy();\n        SoundEffect.play(PresetSound.sweep);\n      }\n    });\n    this.contextMenuService.open(position, actions, this.name);\n  }\n\n  onMove() {\n    SoundEffect.play(PresetSound.dicePick);\n  }\n\n  onMoved() {\n    SoundEffect.play(PresetSound.dicePut);\n  }\n\n  diceRoll(): string {\n    EventSystem.call('ROLL_DICE_SYNBOL', { identifier: this.diceSymbol.identifier });\n    SoundEffect.play(PresetSound.diceRoll1);\n    return this.diceSymbol.diceRoll();\n  }\n\n  showDetail(gameObject: DiceSymbol) {\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = 'ダイスシンボル設定';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n\n  private startIconHiddenTimer() {\n    clearTimeout(this.iconHiddenTimer);\n    this.iconHiddenTimer = setTimeout(() => {\n      this.iconHiddenTimer = null;\n      this.changeDetector.markForCheck();\n    }, 300);\n    this.changeDetector.markForCheck();\n  }\n\n  private adjustMinBounds(value: number, min: number = 0): number {\n    return value < min ? min : value;\n  }\n}\n","export default \".image {\\n  font-size: 0;\\n}\\n\\n.image  img {\\n  vertical-align: bottom;\\n}\\n\\n.empty {\\n  line-height: 120px;\\n  vertical-align: middle;\\n}\\n\\n.empty button {\\n  height: 100px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2ZpbGUtc2VsZWN0ZXIvZmlsZS1zZWxlY3Rlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGFBQWE7QUFDZiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9maWxlLXNlbGVjdGVyL2ZpbGUtc2VsZWN0ZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pbWFnZSB7XG4gIGZvbnQtc2l6ZTogMDtcbn1cblxuLmltYWdlICBpbWcge1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xufVxuXG4uZW1wdHkge1xuICBsaW5lLWhlaWdodDogMTIwcHg7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG5cbi5lbXB0eSBidXR0b24ge1xuICBoZWlnaHQ6IDEwMHB4O1xufVxuIl19 */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'file-selector',\n  templateUrl: './file-selecter.component.html',\n  styleUrls: ['./file-selecter.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FileSelecterComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  @Input() isAllowedEmpty: boolean = false;\n  get images(): ImageFile[] { return ImageStorage.instance.images; }\n  get empty(): ImageFile { return ImageFile.Empty; }\n\n  constructor(\n    private changeDetector: ChangeDetectorRef,\n    private panelService: PanelService,\n    private modalService: ModalService\n  ) {\n    this.isAllowedEmpty = this.modalService.option && this.modalService.option.isAllowedEmpty ? true : false;\n  }\n\n  ngOnInit() {\n    this.modalService.title = this.panelService.title = 'ファイル一覧';\n  }\n\n  ngAfterViewInit() {\n    EventSystem.register(this).on('SYNCHRONIZE_FILE_LIST', event => {\n      if (event.isSendFromSelf) {\n        this.changeDetector.markForCheck();\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  onSelectedFile(file: ImageFile) {\n    console.log('onSelectedFile', file);\n    EventSystem.call('SELECT_FILE', { fileIdentifier: file.identifier }, Network.peerId);\n    this.modalService.resolve(file.identifier);\n  }\n}\n","export default \".drop-zone {\\n  border: 2px dashed #555;\\n  border-radius: 5px;\\n  padding: 25px;\\n  text-align: center;\\n  font: 24px bold 'Vollkorn';\\n  color: #444;\\n  cursor: pointer;\\n}\\n\\n.large-font {\\n  font-size: 64px;\\n}\\n\\n.small-font {\\n  font-size: 12px;\\n}\\n\\n.image {\\n  font-size: 0;\\n}\\n\\n.image img {\\n  vertical-align: bottom;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2ZpbGUtc3RvcmFnZS9maWxlLXN0b3JhZ2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHVCQUF1QjtFQUd2QixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQiwwQkFBMEI7RUFDMUIsV0FBVztFQUNYLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4QiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9maWxlLXN0b3JhZ2UvZmlsZS1zdG9yYWdlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZHJvcC16b25lIHtcbiAgYm9yZGVyOiAycHggZGFzaGVkICM1NTU7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBwYWRkaW5nOiAyNXB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQ6IDI0cHggYm9sZCAnVm9sbGtvcm4nO1xuICBjb2xvcjogIzQ0NDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4ubGFyZ2UtZm9udCB7XG4gIGZvbnQtc2l6ZTogNjRweDtcbn1cblxuLnNtYWxsLWZvbnQge1xuICBmb250LXNpemU6IDEycHg7XG59XG5cbi5pbWFnZSB7XG4gIGZvbnQtc2l6ZTogMDtcbn1cblxuLmltYWdlIGltZyB7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG59Il19 */\"","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { EventSystem, Network } from '@udonarium/core/system';\n\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'file-storage',\n  templateUrl: './file-storage.component.html',\n  styleUrls: ['./file-storage.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FileStorageComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  fileStorageService = ImageStorage.instance;\n  constructor(\n    private changeDetector: ChangeDetectorRef,\n    private panelService: PanelService\n  ) { }\n\n  ngOnInit() {\n    this.panelService.title = 'ファイル一覧';\n  }\n\n  ngAfterViewInit() {\n    EventSystem.register(this).on('SYNCHRONIZE_FILE_LIST', event => {\n      if (event.isSendFromSelf) {\n        this.changeDetector.markForCheck();\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  handleFileSelect(event: Event) {\n    let files = (<HTMLInputElement>event.target).files;\n    if (files.length) FileArchiver.instance.load(files);\n  }\n\n  onSelectedFile(file: ImageFile) {\n    console.log('onSelectedFile', file);\n    EventSystem.call('SELECT_FILE', { fileIdentifier: file.identifier }, Network.peerId);\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9nYW1lLWNoYXJhY3Rlci1nZW5lcmF0b3IvZ2FtZS1jaGFyYWN0ZXItZ2VuZXJhdG9yLmNvbXBvbmVudC5jc3MifQ== */\"","import { AfterViewInit, Component, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\n\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { GameTableMask } from '@udonarium/game-table-mask';\nimport { TableSelecter } from '@udonarium/table-selecter';\n\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'game-character-generator',\n  templateUrl: './game-character-generator.component.html',\n  styleUrls: ['./game-character-generator.component.css']\n})\nexport class GameCharacterGeneratorComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  name: string = \"ゲームキャラクター\";\n  size: number = 1;\n  xml: string = '';\n\n  minSize: number = 1;\n  maxSize: number = 20;\n\n  tableBackgroundImage: ImageFile = ImageFile.createEmpty('null');\n\n  constructor(\n    private viewContainerRef: ViewContainerRef,\n    private modalService: ModalService,\n    private panelService: PanelService\n  ) { }\n\n  ngOnInit() {\n    this.panelService.title = 'キャラクタージェネレーター'\n    EventSystem.register(this)\n      .on('SELECT_FILE', event => {\n        console.log('SELECT_FILE GameCharacterGeneratorComponent ' + event.data.fileIdentifier);\n\n        let fileIdentifier: string = event.data.fileIdentifier;\n\n        let file: ImageFile = ImageStorage.instance.get(fileIdentifier);\n        if (file) this.tableBackgroundImage = file;\n\n      });\n  }\n\n  ngAfterViewInit() { }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  createGameCharacter() {\n    GameCharacter.create(this.name, this.size, this.tableBackgroundImage.identifier);\n  }\n  createGameTableMask() {\n    let viewTable = ObjectStore.instance.get<TableSelecter>('tableSelecter').viewTable;\n    if (!viewTable) return;\n    let tableMask = GameTableMask.create('マップマスク', 5, 5, 100);\n    viewTable.appendChild(tableMask);\n  }\n\n  createGameCharacterForXML(xml: string) {\n    ObjectSerializer.instance.parseXml(xml);\n  }\n\n  openModal() {\n    this.modalService.open(FileSelecterComponent);\n  }\n}\n","export default \".main-image-box {\\n  /* position: absolute;\\n  top: 0px;\\n  left: 0;\\n  */\\n  width: 250px;\\n  height: 250px;\\n}\\n.main-image {\\n  width: 250px;\\n}\\n.table {\\n  display:table;\\n  width :100%;\\n  box-sizing: border-box;\\n  /*border:1px solid #FFFF00;*/\\n}\\n.table-row {\\n  display:table-row;\\n  box-sizing: border-box;\\n}\\n.table-row > div {\\n  display:table-cell;\\n  border:1px solid #FFF;\\n  vertical-align: top;\\n  box-sizing: border-box;\\n}\\n.box {\\n  display: inline-block;\\n  margin: 5px;\\n  /*border:1px solid #FFF;*/\\n  box-sizing: border-box;\\n}\\n.flex-container { /* Safari */\\n  display: -webkit-box;\\n  display: flex; /* Safari */\\n  -webkit-box-orient:  horizontal;\\n  -webkit-box-direction:  normal;\\n          flex-flow:  row wrap; /* Safari */\\n  -webkit-box-pack: start;\\n          justify-content: flex-start; /* Safari */\\n  -webkit-box-align: stretch;\\n          align-items: stretch;\\n\\n  /*min-width: 250px;*/\\n}\\n.flex-item {\\n  margin: 5px 0px;\\n  padding: 10px; /* Safari */\\n  -webkit-box-flex: 1;\\n          flex: 1 0 auto;\\n  /*border: 1px solid #999;*/\\n  box-sizing: border-box;\\n  min-width: 25px;\\n\\n  background-color: rgba(234,201,157, 0.8);\\n  background-color: rgba(240,218,189, 0.8);\\n  color: #444;\\n\\n  /*\\n  border-top: 1px solid #444;\\n  border-bottom: 1px solid #444;\\n  */\\n\\n  /*\\n  background-color: rgba(70, 70, 70, 0.8);\\n  color: #CCC;\\n  */\\n\\n}\\n.flex-item input, .flex-item button, .flex-item textarea, .flex-item select {\\n  /*color: #555;*/\\n  color: #CCC;\\n}\\ninput {\\n  /*color: #555;*/\\n  color: #CCC;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2dhbWUtY2hhcmFjdGVyLXNoZWV0L2dhbWUtY2hhcmFjdGVyLXNoZWV0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTs7O0dBR0M7RUFDRCxZQUFZO0VBQ1osYUFBYTtBQUNmO0FBQ0E7RUFDRSxZQUFZO0FBQ2Q7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLDRCQUE0QjtBQUM5QjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixtQkFBbUI7RUFDbkIsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsV0FBVztFQUNYLHlCQUF5QjtFQUN6QixzQkFBc0I7QUFDeEI7QUFDQSxrQkFDeUIsV0FBVztFQUNsQyxvQkFBYTtFQUFiLGFBQWEsRUFFZ0IsV0FBVztFQUN4QywrQkFBb0I7RUFBcEIsOEJBQW9CO1VBQXBCLG9CQUFvQixFQUVpQixXQUFXO0VBQ2hELHVCQUEyQjtVQUEzQiwyQkFBMkIsRUFFRyxXQUFXO0VBQ3pDLDBCQUFvQjtVQUFwQixvQkFBb0I7O0VBRXBCLG9CQUFvQjtBQUN0QjtBQUNBO0VBQ0UsZUFBZTtFQUNmLGFBQWEsRUFDVyxXQUFXO0VBQ25DLG1CQUFjO1VBQWQsY0FBYztFQUNkLDBCQUEwQjtFQUMxQixzQkFBc0I7RUFDdEIsZUFBZTs7RUFFZix3Q0FBd0M7RUFDeEMsd0NBQXdDO0VBQ3hDLFdBQVc7O0VBRVg7OztHQUdDOztFQUVEOzs7R0FHQzs7QUFFSDtBQUNBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7QUFDYjtBQUNBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7QUFDYiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9nYW1lLWNoYXJhY3Rlci1zaGVldC9nYW1lLWNoYXJhY3Rlci1zaGVldC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1haW4taW1hZ2UtYm94IHtcbiAgLyogcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDBweDtcbiAgbGVmdDogMDtcbiAgKi9cbiAgd2lkdGg6IDI1MHB4O1xuICBoZWlnaHQ6IDI1MHB4O1xufVxuLm1haW4taW1hZ2Uge1xuICB3aWR0aDogMjUwcHg7XG59XG5cbi50YWJsZSB7XG4gIGRpc3BsYXk6dGFibGU7XG4gIHdpZHRoIDoxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAvKmJvcmRlcjoxcHggc29saWQgI0ZGRkYwMDsqL1xufVxuLnRhYmxlLXJvdyB7XG4gIGRpc3BsYXk6dGFibGUtcm93O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuLnRhYmxlLXJvdyA+IGRpdiB7XG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcbiAgYm9yZGVyOjFweCBzb2xpZCAjRkZGO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuLmJveCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgbWFyZ2luOiA1cHg7XG4gIC8qYm9yZGVyOjFweCBzb2xpZCAjRkZGOyovXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG4uZmxleC1jb250YWluZXIge1xuICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7IC8qIFNhZmFyaSAqL1xuICBkaXNwbGF5OiBmbGV4O1xuXG4gIC13ZWJraXQtZmxleC1mbG93OiByb3cgd3JhcDsgLyogU2FmYXJpICovXG4gIGZsZXgtZmxvdzogIHJvdyB3cmFwO1xuXG4gIC13ZWJraXQtanVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OyAvKiBTYWZhcmkgKi9cbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuXG4gIC13ZWJraXQtYWxpZ24taXRlbXM6IHN0cmV0Y2g7IC8qIFNhZmFyaSAqL1xuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcblxuICAvKm1pbi13aWR0aDogMjUwcHg7Ki9cbn1cbi5mbGV4LWl0ZW0ge1xuICBtYXJnaW46IDVweCAwcHg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIC13ZWJraXQtZmxleDogMSAwIGF1dG87IC8qIFNhZmFyaSAqL1xuICBmbGV4OiAxIDAgYXV0bztcbiAgLypib3JkZXI6IDFweCBzb2xpZCAjOTk5OyovXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIG1pbi13aWR0aDogMjVweDtcblxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIzNCwyMDEsMTU3LCAwLjgpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0MCwyMTgsMTg5LCAwLjgpO1xuICBjb2xvcjogIzQ0NDtcblxuICAvKlxuICBib3JkZXItdG9wOiAxcHggc29saWQgIzQ0NDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM0NDQ7XG4gICovXG5cbiAgLypcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg3MCwgNzAsIDcwLCAwLjgpO1xuICBjb2xvcjogI0NDQztcbiAgKi9cblxufVxuLmZsZXgtaXRlbSBpbnB1dCwgLmZsZXgtaXRlbSBidXR0b24sIC5mbGV4LWl0ZW0gdGV4dGFyZWEsIC5mbGV4LWl0ZW0gc2VsZWN0IHtcbiAgLypjb2xvcjogIzU1NTsqL1xuICBjb2xvcjogI0NDQztcbn1cbmlucHV0IHtcbiAgLypjb2xvcjogIzU1NTsqL1xuICBjb2xvcjogI0NDQztcbn0iXX0= */\"","import { AfterViewInit, Component, Input, OnDestroy, OnInit } from '@angular/core';\n\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { DataElement } from '@udonarium/data-element';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { TabletopObject } from '@udonarium/tabletop-object';\n\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\nimport { SaveDataService } from 'service/save-data.service';\n\n@Component({\n  selector: 'game-character-sheet',\n  templateUrl: './game-character-sheet.component.html',\n  styleUrls: ['./game-character-sheet.component.css']\n})\nexport class GameCharacterSheetComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  @Input() tabletopObject: TabletopObject = null;\n  isEdit: boolean = false;\n\n  networkService = Network;\n\n  constructor(\n    private saveDataService: SaveDataService,\n    private panelService: PanelService,\n    private modalService: ModalService\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('DELETE_GAME_OBJECT', -1000, event => {\n        if (this.tabletopObject && this.tabletopObject.identifier === event.data.identifier) {\n          this.panelService.close();\n        }\n      });\n  }\n\n  ngAfterViewInit() {\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  toggleEditMode() {\n    this.isEdit = this.isEdit ? false : true;\n  }\n\n  addDataElement() {\n    if (this.tabletopObject.detailDataElement) {\n      let title = DataElement.create('見出し', '', {});\n      let tag = DataElement.create('タグ', '', {});\n      title.appendChild(tag);\n      this.tabletopObject.detailDataElement.appendChild(title);\n    }\n  }\n\n  clone() {\n    let cloneObject = this.tabletopObject.clone();\n    cloneObject.location.x += 50;\n    cloneObject.location.y += 50;\n    if (this.tabletopObject.parent) this.tabletopObject.parent.appendChild(cloneObject);\n    cloneObject.update();\n    switch (this.tabletopObject.aliasName) {\n      case 'terrain':\n        SoundEffect.play(PresetSound.blockPut);\n        (cloneObject as any).isLocked = false;\n        break;\n      case 'card':\n      case 'card-stack':\n        (cloneObject as any).owner = '';\n        (cloneObject as any).toTopmost();\n      case 'table-mask':\n        (cloneObject as any).isLock = false;\n        SoundEffect.play(PresetSound.cardPut);\n        break;\n      case 'text-note':\n        (cloneObject as any).toTopmost();\n        SoundEffect.play(PresetSound.cardPut);\n        break;\n      case 'dice-symbol':\n        SoundEffect.play(PresetSound.dicePut);\n      default:\n        SoundEffect.play(PresetSound.piecePut);\n        break;\n    }\n  }\n\n  saveToXML() {\n    if (!this.tabletopObject) return;\n\n    let element = this.tabletopObject.getElement('name', this.tabletopObject.commonDataElement);\n    let objectName: string = element ? <string>element.value : '';\n\n    this.saveDataService.saveGameObject(this.tabletopObject, 'xml_' + objectName);\n  }\n\n  setLocation(locationName: string) {\n    this.tabletopObject.setLocation(locationName);\n  }\n\n  openModal(name: string = '', isAllowedEmpty: boolean = false) {\n    this.modalService.open<string>(FileSelecterComponent, { isAllowedEmpty: isAllowedEmpty }).then(value => {\n      if (!this.tabletopObject || !this.tabletopObject.imageDataElement || !value) return;\n      let element = this.tabletopObject.imageDataElement.getFirstElementByName(name);\n      if (!element) return;\n      element.value = value;\n    });\n  }\n}\n","export default \".is-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab;\\n}\\n\\n.is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n}\\n\\n.is-transition {\\n  -webkit-transition: -webkit-transform 132ms linear;\\n  transition: -webkit-transform 132ms linear;\\n  transition: transform 132ms linear;\\n  transition: transform 132ms linear, -webkit-transform 132ms linear;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.is-pointer-events-auto {\\n  pointer-events: auto;\\n}\\n\\n.component {\\n  position: absolute;\\n  height: 50px;\\n  width: 50px;\\n\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n}\\n\\n.component-content {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.pedestal-grab {\\n  z-index: -1;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n  top: -22px;\\n  left: -6px;\\n  height: calc(100% + 44px);\\n  width: calc(100% + 12px);\\n  cursor: default;\\n  border-radius: 37px;\\n}\\n\\n.pedestal-grab-border {\\n  pointer-events: none;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  border-top: solid 28px #999;\\n  border-left: solid 12px #999;\\n  border-right: solid 12px #CCC;\\n  border-bottom: solid 28px #CCC;\\n  border-radius: 37px;\\n}\\n\\n.pedestal-inner {\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  box-sizing: border-box;\\n  border: solid 6px #FFCC80;\\n  border-radius: 25px;\\n}\\n\\n.pedestal-outer {\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  box-sizing: border-box;\\n  border: solid 2px #212121;\\n  border-radius: 25px;\\n}\\n\\n.upright-transform {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  -webkit-transform: rotateX(-90deg) translateY(-50%);\\n          transform: rotateX(-90deg) translateY(-50%);\\n}\\n\\n.is-fit-width {\\n  height: auto;\\n  width: 100%;\\n}\\n\\n.fill-frame {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n\\n.image {\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  margin: auto;\\n\\n  width: 100%;\\n  height: auto;\\n  vertical-align: bottom;\\n}\\n\\n.name-tag {\\n  box-sizing: border-box;\\n  font-size: 15px;\\n  padding: 3px 9px;\\n  border-radius: 24px;\\n  position: absolute;\\n  top: -30px;\\n}\\n\\n.rotate-frame {\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n\\n.rotate-inner {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n\\n  width: 100%;\\n  height: auto;\\n}\\n\\n.is-nowrap {\\n  white-space: nowrap;\\n}\\n\\n.is-black-background {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\n.fornt-tag {\\n -webkit-backface-visibility: hidden;\\n         backface-visibility: hidden;\\n}\\n\\n.back-tag {\\n  position: absolute;\\n  top: 3px;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  -webkit-transform: rotateY(-180deg);\\n          transform: rotateY(-180deg);\\n}\\n\\n.has-length-limit {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  max-width: 24em;\\n}\\n\\n.rotate-grab-icon {\\n  position: absolute;\\n  width: 28px;\\n  height: 28px;\\n  box-sizing: border-box;\\n  cursor: -moz-default;\\n  cursor: -webkit-default;\\n  cursor: default;\\n  z-index: 1;\\n  padding: 2px;\\n  background-color: #CCCCCC;\\n  border-radius: 100%;\\n  color: #444;\\n  font-size: 8px;\\n}\\n\\n.of-top {\\n  top: -42px;\\n}\\n\\n.of-bottom {\\n  bottom: -30px;\\n}\\n\\n.of-front {\\n  position: absolute;\\n  width: 24px;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  margin: auto;\\n  color: #444;\\n}\\n\\n.of-back {\\n  position: absolute;\\n  width: 24px;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  margin: auto;\\n  color: #444;\\n}\\n\\n.rotate-grab {\\n  opacity: 0;\\n}\\n\\n.component:hover .rotate-grab {\\n  opacity: 0.5;\\n}\\n\\n.component:active .rotate-grab {\\n  opacity: 0;\\n}\\n\\n.component .rotate-grab:hover, .component .rotate-grab:active {\\n  opacity: 1;\\n}\\n\\n.material-icons {\\n  display: none;\\n}\\n\\n.component:hover .material-icons, .component:active .material-icons {\\n  display: inline;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2dhbWUtY2hhcmFjdGVyL2dhbWUtY2hhcmFjdGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFRSxvQkFBb0I7RUFDcEIsWUFBWTtBQUNkOztBQUVBO0VBRUUsd0JBQXdCO0VBQ3hCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLG9DQUFvQztFQUNwQyw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxrREFBa0Q7RUFDbEQsMENBQWtDO0VBQWxDLGtDQUFrQztFQUFsQyxrRUFBa0M7QUFDcEM7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7O0VBRVgsc0JBQXNCO0VBQ3RCLHlCQUF5QjtFQUN6QixxQkFBaUI7TUFBakIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLHdCQUF3QjtFQUN4QixlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDhCQUE4QjtFQUM5QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixtREFBMkM7VUFBM0MsMkNBQTJDO0FBQzdDOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7QUFDVjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFlBQVk7O0VBRVosV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtBQUNWOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTs7RUFFUixXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsV0FBVztFQUNYLHVDQUF1QztBQUN6Qzs7QUFFQTtDQUNDLG1DQUEyQjtTQUEzQiwyQkFBMkI7QUFDNUI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0IsbUNBQTJCO1VBQTNCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFNBQVM7RUFDVCxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxNQUFNO0VBQ04sT0FBTztFQUNQLFFBQVE7RUFDUixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9nYW1lLWNoYXJhY3Rlci9nYW1lLWNoYXJhY3Rlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xuICBjdXJzb3I6IC1tb3otZ3JhYjtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy0zZCB7XG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLWF1dG8ge1xuICBwb2ludGVyLWV2ZW50czogYXV0bztcbn1cblxuLmNvbXBvbmVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiA1MHB4O1xuICB3aWR0aDogNTBweDtcblxuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgLW1vei11c2VyLWRyYWc6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xufVxuXG4uY29tcG9uZW50LWNvbnRlbnQge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4ucGVkZXN0YWwtZ3JhYiB7XG4gIHotaW5kZXg6IC0xO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMjJweDtcbiAgbGVmdDogLTZweDtcbiAgaGVpZ2h0OiBjYWxjKDEwMCUgKyA0NHB4KTtcbiAgd2lkdGg6IGNhbGMoMTAwJSArIDEycHgpO1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIGJvcmRlci1yYWRpdXM6IDM3cHg7XG59XG5cbi5wZWRlc3RhbC1ncmFiLWJvcmRlciB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItdG9wOiBzb2xpZCAyOHB4ICM5OTk7XG4gIGJvcmRlci1sZWZ0OiBzb2xpZCAxMnB4ICM5OTk7XG4gIGJvcmRlci1yaWdodDogc29saWQgMTJweCAjQ0NDO1xuICBib3JkZXItYm90dG9tOiBzb2xpZCAyOHB4ICNDQ0M7XG4gIGJvcmRlci1yYWRpdXM6IDM3cHg7XG59XG5cbi5wZWRlc3RhbC1pbm5lciB7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDZweCAjRkZDQzgwO1xuICBib3JkZXItcmFkaXVzOiAyNXB4O1xufVxuXG4ucGVkZXN0YWwtb3V0ZXIge1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAycHggIzIxMjEyMTtcbiAgYm9yZGVyLXJhZGl1czogMjVweDtcbn1cblxuLnVwcmlnaHQtdHJhbnNmb3JtIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0cmFuc2Zvcm06IHJvdGF0ZVgoLTkwZGVnKSB0cmFuc2xhdGVZKC01MCUpO1xufVxuXG4uaXMtZml0LXdpZHRoIHtcbiAgaGVpZ2h0OiBhdXRvO1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmZpbGwtZnJhbWUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG59XG5cbi5pbWFnZSB7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIG1hcmdpbjogYXV0bztcblxuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiBhdXRvO1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xufVxuXG4ubmFtZS10YWcge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDE1cHg7XG4gIHBhZGRpbmc6IDNweCA5cHg7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMzBweDtcbn1cblxuLnJvdGF0ZS1mcmFtZSB7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG59XG5cbi5yb3RhdGUtaW5uZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG5cbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogYXV0bztcbn1cblxuLmlzLW5vd3JhcCB7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5pcy1ibGFjay1iYWNrZ3JvdW5kIHtcbiAgY29sb3I6ICNDQ0M7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcbn1cblxuLmZvcm50LXRhZyB7XG4gYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4uYmFjay10YWcge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogM3B4O1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHRyYW5zZm9ybTogcm90YXRlWSgtMTgwZGVnKTtcbn1cblxuLmhhcy1sZW5ndGgtbGltaXQge1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgbWF4LXdpZHRoOiAyNGVtO1xufVxuXG4ucm90YXRlLWdyYWItaWNvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDI4cHg7XG4gIGhlaWdodDogMjhweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XG4gIGN1cnNvcjogLXdlYmtpdC1kZWZhdWx0O1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIHotaW5kZXg6IDE7XG4gIHBhZGRpbmc6IDJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgY29sb3I6ICM0NDQ7XG4gIGZvbnQtc2l6ZTogOHB4O1xufVxuXG4ub2YtdG9wIHtcbiAgdG9wOiAtNDJweDtcbn1cblxuLm9mLWJvdHRvbSB7XG4gIGJvdHRvbTogLTMwcHg7XG59XG5cbi5vZi1mcm9udCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDI0cHg7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIG1hcmdpbjogYXV0bztcbiAgY29sb3I6ICM0NDQ7XG59XG5cbi5vZi1iYWNrIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMjRweDtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiBhdXRvO1xuICBjb2xvcjogIzQ0NDtcbn1cblxuLnJvdGF0ZS1ncmFiIHtcbiAgb3BhY2l0eTogMDtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwLjU7XG59XG5cbi5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDA7XG59XG5cbi5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmhvdmVyLCAuY29tcG9uZW50IC5yb3RhdGUtZ3JhYjphY3RpdmUge1xuICBvcGFjaXR5OiAxO1xufVxuXG4ubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5tYXRlcmlhbC1pY29ucywgLmNvbXBvbmVudDphY3RpdmUgLm1hdGVyaWFsLWljb25zIHtcbiAgZGlzcGxheTogaW5saW5lO1xufVxuIl19 */\"","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { ChatPaletteComponent } from 'component/chat-palette/chat-palette.component';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { MovableOption } from 'directive/movable.directive';\nimport { RotableOption } from 'directive/rotable.directive';\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'game-character',\n  templateUrl: './game-character.component.html',\n  styleUrls: ['./game-character.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('bounceInOut', [\n      transition('void => *', [\n        animate('600ms ease', keyframes([\n          style({ transform: 'scale3d(0, 0, 0)', offset: 0 }),\n          style({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),\n          style({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),\n          style({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),\n          style({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })\n        ]))\n      ]),\n      transition('* => void', [\n        animate(100, style({ transform: 'scale3d(0, 0, 0)' }))\n      ])\n    ])\n  ]\n})\nexport class GameCharacterComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() gameCharacter: GameCharacter = null;\n  @Input() is3D: boolean = false;\n\n  get name(): string { return this.gameCharacter.name; }\n  get size(): number { return this.adjustMinBounds(this.gameCharacter.size); }\n  get imageFile(): ImageFile { return this.gameCharacter.imageFile; }\n  get rotate(): number { return this.gameCharacter.rotate; }\n  set rotate(rotate: number) { this.gameCharacter.rotate = rotate; }\n  get roll(): number { return this.gameCharacter.roll; }\n  set roll(roll: number) { this.gameCharacter.roll = roll; }\n\n  gridSize: number = 50;\n\n  movableOption: MovableOption = {};\n  rotableOption: RotableOption = {};\n\n  constructor(\n    private contextMenuService: ContextMenuService,\n    private panelService: PanelService,\n    private changeDetector: ChangeDetectorRef,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.gameCharacter || !object) return;\n        if (this.gameCharacter === object || (object instanceof ObjectNode && this.gameCharacter.contains(object))) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      });\n    this.movableOption = {\n      tabletopObject: this.gameCharacter,\n      transformCssOffset: 'translateZ(1.0px)',\n      colideLayers: ['terrain']\n    };\n    this.rotableOption = {\n      tabletopObject: this.gameCharacter\n    };\n  }\n\n  ngAfterViewInit() { }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  @HostListener('dragstart', ['$event'])\n  onDragstart(e: any) {\n    console.log('Dragstart Cancel !!!!');\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n\n    let position = this.pointerDeviceService.pointers[0];\n    this.contextMenuService.open(position, [\n      { name: '詳細を表示', action: () => { this.showDetail(this.gameCharacter); } },\n      { name: 'チャットパレットを表示', action: () => { this.showChatPalette(this.gameCharacter) } },\n      ContextMenuSeparator,\n      {\n        name: '共有イベントリに移動', action: () => {\n          this.gameCharacter.setLocation('common');\n          SoundEffect.play(PresetSound.piecePut);\n        }\n      },\n      {\n        name: '個人イベントリに移動', action: () => {\n          this.gameCharacter.setLocation(Network.peerId);\n          SoundEffect.play(PresetSound.piecePut);\n        }\n      },\n      {\n        name: '墓場に移動', action: () => {\n          this.gameCharacter.setLocation('graveyard');\n          SoundEffect.play(PresetSound.sweep);\n        }\n      },\n      ContextMenuSeparator,\n      {\n        name: 'コピーを作る', action: () => {\n          let cloneObject = this.gameCharacter.clone();\n          cloneObject.location.x += this.gridSize;\n          cloneObject.location.y += this.gridSize;\n          cloneObject.update();\n          SoundEffect.play(PresetSound.piecePut);\n        }\n      },\n    ], this.name);\n  }\n\n  onMove() {\n    SoundEffect.play(PresetSound.piecePick);\n  }\n\n  onMoved() {\n    SoundEffect.play(PresetSound.piecePut);\n  }\n\n  private adjustMinBounds(value: number, min: number = 0): number {\n    return value < min ? min : value;\n  }\n\n  private showDetail(gameObject: GameCharacter) {\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = 'キャラクターシート';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x - 400, top: coordinate.y - 300, width: 800, height: 600 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n\n  private showChatPalette(gameObject: GameCharacter) {\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };\n    let component = this.panelService.open<ChatPaletteComponent>(ChatPaletteComponent, option);\n    component.character = gameObject;\n  }\n}\n","export default \".game-data-element{\\n  margin-left: 10px;\\n}\\n.table {\\n  display:table; \\n  /*padding-left: 10px;*/\\n  /*border:1px solid #FF0000;*/\\n  width :100%;\\n  box-sizing: border-box;\\n\\n}\\n.table-row {\\n  padding-top: 10px;\\n  display:table-row;\\n  /*border:5px solid #00FF00;*/\\n  /*border-bottom:1px dotted #888;*/\\n  /*width :100%;*/\\n  box-sizing: border-box;\\n  }\\n.table-cell {\\n  display:table-cell;\\n  vertical-align: bottom;\\n  padding: 0.5em 0.0em 0.1em 0.5em;\\n  /*border:1px solid #0000FF;*/\\n  border-bottom:1px dotted #888;\\n  box-sizing: border-box;\\n}\\n.table-cell_solid {\\n  width :10px;\\n  white-space: nowrap;\\n}\\n.table-cell_inner-table {\\n  display:table-cell;\\n  vertical-align: bottom;\\n  padding: 0.2em 0.0em 0.1em 0.5em;\\n  border: none;\\n  /*border-bottom:1px solid #0ff;*/\\n  box-sizing: border-box;\\n}\\n.table-cell_inner-table-title {\\n  border-bottom: 1px solid #444;\\n  border-left: 8px solid #444;\\n  padding-left:8px;\\n}\\n.box {\\n  display: inline-block;\\n  margin: 10px;\\n  /*border:1px solid #FFF;*/\\n}\\n.hidden-spacer {\\n  visibility: hidden;\\n  height: 0;\\n  /*background: #0FF;*/\\n  max-width : 20em;\\n  overflow: hidden;\\n  padding: 0 3px;\\n  box-sizing: border-box;\\n}\\ninput, button, textarea, select{\\n/*.input {*/\\n  background: none;\\n  border: none;\\n  border-radius: 2px;\\n  outline: none;\\n\\n  color: #444;\\n  font-family: Cambria, Georgia;\\n  font-size: 1.0em;\\n  padding: 2px;\\n  box-sizing: border-box;\\n}\\ninput:hover, textarea:hover, select:hover  {\\n  background: #EEE;\\n}\\ninput:focus, textarea:focus, select:focus  {\\n  background: #FFF;\\n}\\nbutton i {\\n  font-size: 1.0rem;\\n}\\nbutton:hover  {\\n  background: #444;\\n  color: #CCC;\\n}\\n.table-cell button{\\n  font-size: 0.5rem;\\n}\\ninput[type='range'] {\\n  --slider-track-color: transparent; /* #ccc */\\n  --slider-fill-color: #555; /*#777 */\\n  --slider-border-color: #777;\\n  --slider-height: 0.8em;\\n  --slider-thumb-size: 1.0em;\\n  --range: calc(var(--max) - var(--min));\\n  --ratio: calc((var(--val) - var(--min))/var(--range));\\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\\n  margin: 0;\\n  padding: 0;\\n  background: transparent;\\n  font: 1em/1 arial, sans-serif;\\n  outline: 0;\\n  -webkit-appearance: none;\\n     -moz-appearance: none;\\n          appearance: none;\\n}\\ninput[type='range'], input[type='range']::-webkit-slider-thumb {\\n  -webkit-appearance: none;\\n}\\ninput[type='range']::-webkit-slider-runnable-track {\\n  box-sizing: border-box;\\n  border-top: solid 1px var(--slider-border-color);\\n  border-bottom: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\ninput[type='range']::-webkit-slider-runnable-track {\\n  background: -webkit-gradient(linear, left top, left bottom, from(var(--slider-fill-color)), to(var(--slider-fill-color))) 0/var(--sx) 100% no-repeat var(--slider-track-color);\\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\\n  cursor: pointer;\\n}\\ninput[type='range']::-moz-range-track {\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\ninput[type='range']::-ms-track {\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\ninput[type='range']::-moz-range-progress {\\n  height: var(--slider-height);\\n  background: var(--slider-fill-color);\\n  border-radius: var(--slider-height);\\n}\\ninput[type='range']::-ms-fill-lower {\\n  height: var(--slider-height);\\n  background: var(--slider-fill-color);\\n  border-radius: var(--slider-height);\\n}\\ninput[type='range']::-webkit-slider-thumb {\\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px  var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\ninput[type='range']::-moz-range-thumb {\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px  var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\ninput[type='range']::-ms-thumb {\\n  margin-top: 0;\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px  var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\ninput[type='range']::-ms-tooltip {\\n  display: none;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2dhbWUtZGF0YS1lbGVtZW50L2dhbWUtZGF0YS1lbGVtZW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsNEJBQTRCO0VBQzVCLFdBQVc7RUFDWCxzQkFBc0I7O0FBRXhCO0FBQ0E7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLDRCQUE0QjtFQUM1QixpQ0FBaUM7RUFDakMsZUFBZTtFQUNmLHNCQUFzQjtFQUN0QjtBQUNGO0VBQ0Usa0JBQWtCO0VBQ2xCLHNCQUFzQjtFQUN0QixnQ0FBZ0M7RUFDaEMsNEJBQTRCO0VBQzVCLDZCQUE2QjtFQUM3QixzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLFdBQVc7RUFDWCxtQkFBbUI7QUFDckI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsZ0NBQWdDO0VBQ2hDLFlBQVk7RUFDWixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSw2QkFBNkI7RUFDN0IsMkJBQTJCO0VBQzNCLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWix5QkFBeUI7QUFDM0I7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1Qsb0JBQW9CO0VBQ3BCLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLHNCQUFzQjtBQUN4QjtBQUVBO0FBQ0EsV0FBVztFQUNULGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7O0VBRWIsV0FBVztFQUNYLDZCQUE2QjtFQUM3QixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUVBO0VBQ0UsaUJBQWlCO0FBQ25CO0FBRUE7RUFDRSxpQ0FBaUMsRUFBRSxTQUFTO0VBQzVDLHlCQUF5QixFQUFFLFFBQVE7RUFDbkMsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsc0NBQXNDO0VBQ3RDLHFEQUFxRDtFQUNyRCx3RkFBd0Y7RUFDeEYsU0FBUztFQUNULFVBQVU7RUFDVix1QkFBdUI7RUFDdkIsNkJBQTZCO0VBQzdCLFVBQVU7RUFDVix3QkFBZ0I7S0FBaEIscUJBQWdCO1VBQWhCLGdCQUFnQjtBQUNsQjtBQUVBO0VBQ0Usd0JBQXdCO0FBQzFCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZ0RBQWdEO0VBQ2hELG1EQUFtRDtFQUNuRCxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHFDQUFxQztBQUN2QztBQUVBO0VBQ0UsOEtBQW9JO0VBQXBJLG9JQUFvSTtFQUNwSSxlQUFlO0FBQ2pCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDO0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7QUFFQTtFQUNFLDZFQUE2RTtFQUM3RSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxhQUFhO0VBQ2IsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNkNBQTZDO0VBQzdDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L2dhbWUtZGF0YS1lbGVtZW50L2dhbWUtZGF0YS1lbGVtZW50LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZ2FtZS1kYXRhLWVsZW1lbnR7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xufVxuLnRhYmxlIHtcbiAgZGlzcGxheTp0YWJsZTsgXG4gIC8qcGFkZGluZy1sZWZ0OiAxMHB4OyovXG4gIC8qYm9yZGVyOjFweCBzb2xpZCAjRkYwMDAwOyovXG4gIHdpZHRoIDoxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG59XG4udGFibGUtcm93IHtcbiAgcGFkZGluZy10b3A6IDEwcHg7XG4gIGRpc3BsYXk6dGFibGUtcm93O1xuICAvKmJvcmRlcjo1cHggc29saWQgIzAwRkYwMDsqL1xuICAvKmJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjODg4OyovXG4gIC8qd2lkdGggOjEwMCU7Ki9cbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgfVxuLnRhYmxlLWNlbGwge1xuICBkaXNwbGF5OnRhYmxlLWNlbGw7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gIHBhZGRpbmc6IDAuNWVtIDAuMGVtIDAuMWVtIDAuNWVtO1xuICAvKmJvcmRlcjoxcHggc29saWQgIzAwMDBGRjsqL1xuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzg4ODtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cbi50YWJsZS1jZWxsX3NvbGlkIHtcbiAgd2lkdGggOjEwcHg7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG4udGFibGUtY2VsbF9pbm5lci10YWJsZSB7XG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgcGFkZGluZzogMC4yZW0gMC4wZW0gMC4xZW0gMC41ZW07XG4gIGJvcmRlcjogbm9uZTtcbiAgLypib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMGZmOyovXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG4udGFibGUtY2VsbF9pbm5lci10YWJsZS10aXRsZSB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDQ0O1xuICBib3JkZXItbGVmdDogOHB4IHNvbGlkICM0NDQ7XG4gIHBhZGRpbmctbGVmdDo4cHg7XG59XG4uYm94IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBtYXJnaW46IDEwcHg7XG4gIC8qYm9yZGVyOjFweCBzb2xpZCAjRkZGOyovXG59XG4uaGlkZGVuLXNwYWNlciB7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgaGVpZ2h0OiAwO1xuICAvKmJhY2tncm91bmQ6ICMwRkY7Ki9cbiAgbWF4LXdpZHRoIDogMjBlbTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcGFkZGluZzogMCAzcHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbmlucHV0LCBidXR0b24sIHRleHRhcmVhLCBzZWxlY3R7XG4vKi5pbnB1dCB7Ki9cbiAgYmFja2dyb3VuZDogbm9uZTtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIG91dGxpbmU6IG5vbmU7XG5cbiAgY29sb3I6ICM0NDQ7XG4gIGZvbnQtZmFtaWx5OiBDYW1icmlhLCBHZW9yZ2lhO1xuICBmb250LXNpemU6IDEuMGVtO1xuICBwYWRkaW5nOiAycHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbmlucHV0OmhvdmVyLCB0ZXh0YXJlYTpob3Zlciwgc2VsZWN0OmhvdmVyICB7XG4gIGJhY2tncm91bmQ6ICNFRUU7XG59XG5pbnB1dDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMsIHNlbGVjdDpmb2N1cyAge1xuICBiYWNrZ3JvdW5kOiAjRkZGO1xufVxuYnV0dG9uIGkge1xuICBmb250LXNpemU6IDEuMHJlbTtcbn1cblxuYnV0dG9uOmhvdmVyICB7XG4gIGJhY2tncm91bmQ6ICM0NDQ7XG4gIGNvbG9yOiAjQ0NDO1xufVxuXG4udGFibGUtY2VsbCBidXR0b257XG4gIGZvbnQtc2l6ZTogMC41cmVtO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddIHtcbiAgLS1zbGlkZXItdHJhY2stY29sb3I6IHRyYW5zcGFyZW50OyAvKiAjY2NjICovXG4gIC0tc2xpZGVyLWZpbGwtY29sb3I6ICM1NTU7IC8qIzc3NyAqL1xuICAtLXNsaWRlci1ib3JkZXItY29sb3I6ICM3Nzc7XG4gIC0tc2xpZGVyLWhlaWdodDogMC44ZW07XG4gIC0tc2xpZGVyLXRodW1iLXNpemU6IDEuMGVtO1xuICAtLXJhbmdlOiBjYWxjKHZhcigtLW1heCkgLSB2YXIoLS1taW4pKTtcbiAgLS1yYXRpbzogY2FsYygodmFyKC0tdmFsKSAtIHZhcigtLW1pbikpL3ZhcigtLXJhbmdlKSk7XG4gIC0tc3g6IGNhbGMoLjUqdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpICsgdmFyKC0tcmF0aW8pKigxMDAlIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSk7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGZvbnQ6IDFlbS8xIGFyaWFsLCBzYW5zLXNlcmlmO1xuICBvdXRsaW5lOiAwO1xuICBhcHBlYXJhbmNlOiBub25lO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddLCBpbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItdG9wOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNrIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHZhcigtLXNsaWRlci1maWxsLWNvbG9yKSwgdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpKSAwL3ZhcigtLXN4KSAxMDAlIG5vLXJlcGVhdCB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdHJhY2sge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS1wcm9ncmVzcyB7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy1maWxsLWxvd2VyIHtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xuICBtYXJnaW4tdG9wOiBjYWxjKCh2YXIoLS1zbGlkZXItaGVpZ2h0KSAtIHZhcigtLXNsaWRlci10aHVtYi1zaXplKSkgLyAyIC0gMXB4KTtcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4ICB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdGh1bWIge1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIGJhY2tncm91bmQ6ICNkZGQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRodW1iIHtcbiAgbWFyZ2luLXRvcDogMDtcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4ICB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10b29sdGlwIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cbiJdfQ== */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { EventSystem } from '@udonarium/core/system';\nimport { DataElement } from '@udonarium/data-element';\n\n@Component({\n  selector: 'game-data-element, [game-data-element]',\n  templateUrl: './game-data-element.component.html',\n  styleUrls: ['./game-data-element.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GameDataElementComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() gameDataElement: DataElement = null;\n  @Input() isEdit: boolean = false;\n  @Input() isTagLocked: boolean = false;\n  @Input() isValueLocked: boolean = false;\n\n  private _name: string = '';\n  get name(): string { return this._name; }\n  set name(name: string) { this._name = name; this.setUpdateTimer(); }\n\n  private _value: number | string = 0;\n  get value(): number | string { return this._value; }\n  set value(value: number | string) { this._value = value; this.setUpdateTimer(); }\n\n  private _currentValue: number | string = 0;\n  get currentValue(): number | string { return this._currentValue; }\n  set currentValue(currentValue: number | string) { this._currentValue = currentValue; this.setUpdateTimer(); }\n\n  private updateTimer: NodeJS.Timer = null;\n\n  constructor(\n    private changeDetector: ChangeDetectorRef\n  ) { }\n\n  ngOnInit() {\n    if (this.gameDataElement) this.setValues(this.gameDataElement);\n\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        if (this.gameDataElement && event.data.identifier === this.gameDataElement.identifier) {\n          this.setValues(this.gameDataElement);\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('DELETE_GAME_OBJECT', -1000, event => {\n        if (this.gameDataElement && this.gameDataElement.identifier === event.data.identifier) {\n          this.changeDetector.markForCheck();\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  ngAfterViewInit() {\n\n  }\n\n  addElement() {\n    this.gameDataElement.appendChild(DataElement.create('タグ', '', {}));\n  }\n\n  deleteElement() {\n    this.gameDataElement.destroy();\n  }\n\n  upElement() {\n    let parentElement = this.gameDataElement.parent;\n    let index: number = parentElement.children.indexOf(this.gameDataElement);\n    if (0 < index) {\n      let prevElement = parentElement.children[index - 1];\n      parentElement.insertBefore(this.gameDataElement, prevElement);\n    }\n  }\n\n  downElement() {\n    let parentElement = this.gameDataElement.parent;\n    let index: number = parentElement.children.indexOf(this.gameDataElement);\n    if (index < parentElement.children.length - 1) {\n      let nextElement = parentElement.children[index + 1];\n      parentElement.insertBefore(nextElement, this.gameDataElement);\n    }\n  }\n\n  setElementType(type: string) {\n    this.gameDataElement.setAttribute('type', type);\n  }\n\n  private setValues(object: DataElement) {\n    this._name = object.name;\n    this._currentValue = object.currentValue;\n    this._value = object.value;\n  }\n\n  private setUpdateTimer() {\n    clearTimeout(this.updateTimer);\n    this.updateTimer = setTimeout(() => {\n      if (this.gameDataElement.name !== this.name) this.gameDataElement.name = this.name;\n      if (this.gameDataElement.currentValue !== this.currentValue) this.gameDataElement.currentValue = this.currentValue;\n      if (this.gameDataElement.value !== this.value) this.gameDataElement.value = this.value;\n      this.updateTimer = null;\n    }, 66);\n  }\n}\n","export default \".component {\\n  width: 100%;\\n}\\n\\n.box {\\n  border: transparent 2px solid;\\n  border-left: transparent 6px solid;\\n  margin-top: 2px;\\n  padding: 2px;\\n  padding-bottom: 3px;\\n  box-sizing: border-box;\\n\\n  border-bottom: 1px dotted #666;\\n}\\n\\n.selected {\\n  padding: 2px;\\n  border: 2px dotted #666;\\n  border-left: 6px solid #444;\\n}\\n\\n.hidden-spacer {\\n  visibility: hidden;\\n  height: 0;\\n  font-size: 1.0em;\\n  min-width:1em; \\n  max-width : 12em;\\n  overflow: hidden;\\n  padding: 0 2px;\\n  box-sizing: border-box;\\n  white-space: nowrap;\\n}\\n\\n.input {\\n  background: none;\\n  border: none;\\n  border-radius: 2px;\\n  outline: none;\\n  color: #444;\\n  padding: 2px;\\n  box-sizing: border-box;\\n}\\n\\n.input:hover {\\n  background: #EEE;\\n}\\n\\n.input:focus {\\n  background: #FFF;\\n}\\n\\ninput[type=number] {\\n  -moz-appearance: textfield;\\n}\\n\\ninput[type=number]:hover, input[type=number]:focus {\\n  -moz-appearance: number-input;\\n}\\n\\ninput[type='range'] {\\n  --slider-track-color: transparent; /* #ccc */\\n  --slider-fill-color: #555; /*#777 */\\n  --slider-border-color: #777;\\n  --slider-height: 0.8em;\\n  --slider-thumb-size: 1.0em;\\n  --range: calc(var(--max) - var(--min));\\n  --ratio: calc((var(--val) - var(--min))/var(--range));\\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\\n  margin: 0;\\n  padding: 0;\\n  background: transparent;\\n  font: 1em/1 arial, sans-serif;\\n  outline: 0;\\n  -webkit-appearance: none;\\n     -moz-appearance: none;\\n          appearance: none;\\n}\\n\\ninput[type='range'], input[type='range']::-webkit-slider-thumb {\\n  -webkit-appearance: none;\\n}\\n\\ninput[type='range']::-webkit-slider-runnable-track {\\n  box-sizing: border-box;\\n  border-top: solid 1px var(--slider-border-color);\\n  border-bottom: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\n\\ninput[type='range']::-webkit-slider-runnable-track {\\n  background: -webkit-gradient(linear, left top, left bottom, from(var(--slider-fill-color)), to(var(--slider-fill-color))) 0/var(--sx) 100% no-repeat var(--slider-track-color);\\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-moz-range-track {\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\n\\ninput[type='range']::-ms-track {\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\n\\ninput[type='range']::-moz-range-progress {\\n  height: var(--slider-height);\\n  background: var(--slider-fill-color);\\n  border-radius: var(--slider-height);\\n}\\n\\ninput[type='range']::-ms-fill-lower {\\n  height: var(--slider-height);\\n  background: var(--slider-fill-color);\\n  border-radius: var(--slider-height);\\n}\\n\\ninput[type='range']::-webkit-slider-thumb {\\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-moz-range-thumb {\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-ms-thumb {\\n  margin-top: 0;\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px  var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-ms-tooltip {\\n  display: none;\\n}\\n\\n.tab {\\n  padding : 5px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n\\n.tab {\\n  padding : 0px;\\n  border: solid 1px #555;\\n  border-radius: 0.3em;\\n  overflow: hidden;\\n\\n  display: -webkit-box;\\n\\n  display: flex;\\n  -webkit-box-orient:  horizontal;\\n  -webkit-box-direction:  normal;\\n          flex-flow:  row nowrap;\\n  justify-content: space-around;\\n  -webkit-box-align: stretch;\\n          align-items: stretch;\\n\\n  text-align: center;\\n\\n  margin: 0px; \\n  max-width: 500px;\\n\\n  background-color: rgba(240,218,189, 0.9);\\n}\\n\\n.tab label {\\n  display: inline-block;\\n  -webkit-box-flex: 1;\\n          flex: 1 0 auto;\\n  flex-grow: 1;\\n}\\n\\n.tab label:hover {\\n  background-color: #888;\\n  color: #eee;\\n  border-color: #555;\\n}\\n\\n.tab label:checked {\\n  background: #555;\\n  color: #CCC;\\n}\\n\\n.tab input[type=\\\"radio\\\"] {\\n  display: none;\\n}\\n\\n.tab input[type=\\\"radio\\\"] + div {\\n  vertical-align: middle;\\n  outline: 0;\\n  font-size: 0.6em;\\n  background-color: transparent;\\n  color: #444; \\n  \\n  box-sizing: border-box;\\n\\n  margin: 0px; \\n  padding: 2px 8px;\\n\\n  cursor: pointer;\\n}\\n\\n.tab input[type=\\\"radio\\\"] + div:hover {\\n  background-color: #888;\\n  color: #eee;\\n  border-color: #555;\\n}\\n\\n.tab input[type=\\\"radio\\\"]:checked + div {\\n  background: #555;\\n  color: #CCC;\\n}\\n\\n.is-sticky-top {\\n  position: -webkit-sticky;\\n  position: sticky;\\n  top : 0;\\n}\\n\\n.tab-setting {\\n  background-color: transparent;\\n  color: #444; \\n  border: solid 1px #555;\\n  padding: 2px 8px;\\n  border-radius: 5px;\\n  cursor: pointer;\\n}\\n\\n.tab-setting:hover {\\n  background-color: #888;\\n  color: #eee;\\n  border: solid 1px #555;\\n}\\n\\n.small-font {\\n  font-size: 12px;\\n  vertical-align: middle;\\n}\\n\\n.material-icons {\\n  vertical-align: middle;\\n  font-size: 1.0rem;\\n}\\n\\n.table-cell {\\n  display: table-cell;\\n}\\n\\n.image-box {\\n  padding: 0px;\\n  width: 32px;\\n  height: 32px;\\n  display: table-cell;\\n  vertical-align: top;\\n}\\n\\n.image-box img{\\n  width: 100%;\\n  height: 100%;\\n  vertical-align: bottom;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  -o-object-position: 50% 0%;\\n     object-position: 50% 0%;\\n}\\n\\n.inventory-object {\\n  font-size: 14px;\\n  display: inline-block;\\n  vertical-align: text-top;\\n}\\n\\n.object-name {\\n  font-size: 0.8em;\\n  font-weight: bold;\\n  padding: 0 0.25em;\\n}\\n\\n.object-tags-box {\\n  display: table;\\n  table-layout: fixed;\\n}\\n\\n.object-tag {\\n  display: inline-block;\\n  padding: 0 0.25em;\\n  vertical-align: middle;\\n}\\n\\n.resource-tag {\\n  text-align: center;\\n  vertical-align: bottom;\\n  overflow: hidden;\\n  white-space: nowrap;\\n}\\n\\n.resource-value {\\n  font-weight: bold;\\n  width: 4em;\\n  text-align: right;\\n  font-family: inherit;\\n}\\n\\n.tag-name {\\n  font-size: 0.8em;\\n  text-align: left;\\n  vertical-align: bottom;\\n  min-width:1em;\\n  max-width: 12em;\\n  overflow: hidden;\\n  white-space: nowrap;\\n}\\n\\n.tag-value-box{\\n  display: table-cell;\\n  width: 10px;\\n}\\n\\n.tag-value {\\n  font-size: 1.0em;\\n  font-weight: bold;\\n  width: 100%;\\n  min-width: 1em;\\n  max-width: 12em;\\n  text-align: center;\\n  font-family: inherit;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2dhbWUtb2JqZWN0LWludmVudG9yeS9nYW1lLW9iamVjdC1pbnZlbnRvcnkuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLDZCQUE2QjtFQUM3QixrQ0FBa0M7RUFDbEMsZUFBZTtFQUNmLFlBQVk7RUFDWixtQkFBbUI7RUFDbkIsc0JBQXNCOztFQUV0Qiw4QkFBOEI7QUFDaEM7O0FBQ0E7RUFDRSxZQUFZO0VBQ1osdUJBQXVCO0VBQ3ZCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxzQkFBc0I7RUFDdEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsaUNBQWlDLEVBQUUsU0FBUztFQUM1Qyx5QkFBeUIsRUFBRSxRQUFRO0VBQ25DLDJCQUEyQjtFQUMzQixzQkFBc0I7RUFDdEIsMEJBQTBCO0VBQzFCLHNDQUFzQztFQUN0QyxxREFBcUQ7RUFDckQsd0ZBQXdGO0VBQ3hGLFNBQVM7RUFDVCxVQUFVO0VBQ1YsdUJBQXVCO0VBQ3ZCLDZCQUE2QjtFQUM3QixVQUFVO0VBQ1Ysd0JBQWdCO0tBQWhCLHFCQUFnQjtVQUFoQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZ0RBQWdEO0VBQ2hELG1EQUFtRDtFQUNuRCxt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d0I7QUFDMUI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsaUJBQWlCO0VBQ2pCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixVQUFVO0VBQ1YsaUJBQWlCO0VBQ2pCLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxjQUFjO0VBQ2QsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixvQkFBb0I7QUFDdEIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvZ2FtZS1vYmplY3QtaW52ZW50b3J5L2dhbWUtb2JqZWN0LWludmVudG9yeS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbXBvbmVudCB7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uYm94IHtcbiAgYm9yZGVyOiB0cmFuc3BhcmVudCAycHggc29saWQ7XG4gIGJvcmRlci1sZWZ0OiB0cmFuc3BhcmVudCA2cHggc29saWQ7XG4gIG1hcmdpbi10b3A6IDJweDtcbiAgcGFkZGluZzogMnB4O1xuICBwYWRkaW5nLWJvdHRvbTogM3B4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG4gIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzY2Njtcbn1cbi5zZWxlY3RlZCB7XG4gIHBhZGRpbmc6IDJweDtcbiAgYm9yZGVyOiAycHggZG90dGVkICM2NjY7XG4gIGJvcmRlci1sZWZ0OiA2cHggc29saWQgIzQ0NDtcbn1cblxuLmhpZGRlbi1zcGFjZXIge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIGhlaWdodDogMDtcbiAgZm9udC1zaXplOiAxLjBlbTtcbiAgbWluLXdpZHRoOjFlbTsgXG4gIG1heC13aWR0aCA6IDEyZW07XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHBhZGRpbmc6IDAgMnB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uaW5wdXQge1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgb3V0bGluZTogbm9uZTtcbiAgY29sb3I6ICM0NDQ7XG4gIHBhZGRpbmc6IDJweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuLmlucHV0OmhvdmVyIHtcbiAgYmFja2dyb3VuZDogI0VFRTtcbn1cblxuLmlucHV0OmZvY3VzIHtcbiAgYmFja2dyb3VuZDogI0ZGRjtcbn1cblxuaW5wdXRbdHlwZT1udW1iZXJdIHtcbiAgLW1vei1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XG59XG5cbmlucHV0W3R5cGU9bnVtYmVyXTpob3ZlciwgaW5wdXRbdHlwZT1udW1iZXJdOmZvY3VzIHtcbiAgLW1vei1hcHBlYXJhbmNlOiBudW1iZXItaW5wdXQ7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ10ge1xuICAtLXNsaWRlci10cmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7IC8qICNjY2MgKi9cbiAgLS1zbGlkZXItZmlsbC1jb2xvcjogIzU1NTsgLyojNzc3ICovXG4gIC0tc2xpZGVyLWJvcmRlci1jb2xvcjogIzc3NztcbiAgLS1zbGlkZXItaGVpZ2h0OiAwLjhlbTtcbiAgLS1zbGlkZXItdGh1bWItc2l6ZTogMS4wZW07XG4gIC0tcmFuZ2U6IGNhbGModmFyKC0tbWF4KSAtIHZhcigtLW1pbikpO1xuICAtLXJhdGlvOiBjYWxjKCh2YXIoLS12YWwpIC0gdmFyKC0tbWluKSkvdmFyKC0tcmFuZ2UpKTtcbiAgLS1zeDogY2FsYyguNSp2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkgKyB2YXIoLS1yYXRpbykqKDEwMCUgLSB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkpKTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgZm9udDogMWVtLzEgYXJpYWwsIHNhbnMtc2VyaWY7XG4gIG91dGxpbmU6IDA7XG4gIGFwcGVhcmFuY2U6IG5vbmU7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ10sIGlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci10b3A6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpLCB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcikpIDAvdmFyKC0tc3gpIDEwMCUgbm8tcmVwZWF0IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRyYWNrIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXByb2dyZXNzIHtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLWZpbGwtbG93ZXIge1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XG4gIG1hcmdpbi10b3A6IGNhbGMoKHZhcigtLXNsaWRlci1oZWlnaHQpIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSAvIDIgLSAxcHgpO1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcbiAgYmFja2dyb3VuZDogI2RkZDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXRodW1iIHtcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIGJhY2tncm91bmQ6ICNkZGQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRodW1iIHtcbiAgbWFyZ2luLXRvcDogMDtcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4ICB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10b29sdGlwIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLnRhYiB7XG4gIHBhZGRpbmcgOiA1cHg7XG4gIHVzZXItc2VsZWN0OiBub25lO1xufVxuXG4udGFiIHtcbiAgcGFkZGluZyA6IDBweDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcbiAgYm9yZGVyLXJhZGl1czogMC4zZW07XG4gIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1mbG93OiAgcm93IG5vd3JhcDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcblxuICBtYXJnaW46IDBweDsgXG4gIG1heC13aWR0aDogNTAwcHg7XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC45KTtcbn1cblxuLnRhYiBsYWJlbCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgZmxleDogMSAwIGF1dG87XG4gIGZsZXgtZ3JvdzogMTtcbn1cblxuLnRhYiBsYWJlbDpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XG4gIGNvbG9yOiAjZWVlO1xuICBib3JkZXItY29sb3I6ICM1NTU7XG59XG5cbi50YWIgbGFiZWw6Y2hlY2tlZCB7XG4gIGJhY2tncm91bmQ6ICM1NTU7XG4gIGNvbG9yOiAjQ0NDO1xufVxuXG4udGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi50YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdICsgZGl2IHtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgb3V0bGluZTogMDtcbiAgZm9udC1zaXplOiAwLjZlbTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjNDQ0OyBcbiAgXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgbWFyZ2luOiAwcHg7IFxuICBwYWRkaW5nOiAycHggOHB4O1xuXG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXY6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xuICBjb2xvcjogI2VlZTtcbiAgYm9yZGVyLWNvbG9yOiAjNTU1O1xufVxuXG4udGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcbiAgYmFja2dyb3VuZDogIzU1NTtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi5pcy1zdGlja3ktdG9wIHtcbiAgcG9zaXRpb246IHN0aWNreTtcbiAgdG9wIDogMDtcbn1cblxuLnRhYi1zZXR0aW5nIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjNDQ0OyBcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcbiAgcGFkZGluZzogMnB4IDhweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi50YWItc2V0dGluZzpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XG4gIGNvbG9yOiAjZWVlO1xuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xufVxuXG4uc21hbGwtZm9udCB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cblxuLm1hdGVyaWFsLWljb25zIHtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgZm9udC1zaXplOiAxLjByZW07XG59XG5cbi50YWJsZS1jZWxsIHtcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcbn1cblxuLmltYWdlLWJveCB7XG4gIHBhZGRpbmc6IDBweDtcbiAgd2lkdGg6IDMycHg7XG4gIGhlaWdodDogMzJweDtcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmltYWdlLWJveCBpbWd7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xuICBvYmplY3QtcG9zaXRpb246IDUwJSAwJTtcbn1cblxuLmludmVudG9yeS1vYmplY3Qge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRleHQtdG9wO1xufVxuXG4ub2JqZWN0LW5hbWUge1xuICBmb250LXNpemU6IDAuOGVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgcGFkZGluZzogMCAwLjI1ZW07XG59XG5cbi5vYmplY3QtdGFncy1ib3gge1xuICBkaXNwbGF5OiB0YWJsZTtcbiAgdGFibGUtbGF5b3V0OiBmaXhlZDtcbn1cblxuLm9iamVjdC10YWcge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHBhZGRpbmc6IDAgMC4yNWVtO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xufVxuXG4ucmVzb3VyY2UtdGFnIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4ucmVzb3VyY2UtdmFsdWUge1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgd2lkdGg6IDRlbTtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xufVxuXG4udGFnLW5hbWUge1xuICBmb250LXNpemU6IDAuOGVtO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICBtaW4td2lkdGg6MWVtO1xuICBtYXgtd2lkdGg6IDEyZW07XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi50YWctdmFsdWUtYm94e1xuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xuICB3aWR0aDogMTBweDtcbn1cblxuLnRhZy12YWx1ZSB7XG4gIGZvbnQtc2l6ZTogMS4wZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB3aWR0aDogMTAwJTtcbiAgbWluLXdpZHRoOiAxZW07XG4gIG1heC13aWR0aDogMTJlbTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbn0iXX0= */\"","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { GameObject } from '@udonarium/core/synchronize-object/game-object';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { DataElement } from '@udonarium/data-element';\nimport { SortOrder } from '@udonarium/data-summary-setting';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { TabletopObject } from '@udonarium/tabletop-object';\n\nimport { ChatPaletteComponent } from 'component/chat-palette/chat-palette.component';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { ContextMenuAction, ContextMenuService, ContextMenuSeparator } from 'service/context-menu.service';\nimport { GameObjectInventoryService } from 'service/game-object-inventory.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'game-object-inventory',\n  templateUrl: './game-object-inventory.component.html',\n  styleUrls: ['./game-object-inventory.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GameObjectInventoryComponent implements OnInit, AfterViewInit, OnDestroy {\n  inventoryTypes: string[] = ['table', 'common', 'graveyard'];\n\n  selectTab: string = 'table';\n  selectedIdentifier: string = '';\n\n  isEdit: boolean = false;\n\n  get sortTag(): string { return this.inventoryService.sortTag; }\n  set sortTag(sortTag: string) { this.inventoryService.sortTag = sortTag; }\n  get sortOrder(): SortOrder { return this.inventoryService.sortOrder; }\n  set sortOrder(sortOrder: SortOrder) { this.inventoryService.sortOrder = sortOrder; }\n  get dataTag(): string { return this.inventoryService.dataTag; }\n  set dataTag(dataTag: string) { this.inventoryService.dataTag = dataTag; }\n  get dataTags(): string[] { return this.inventoryService.dataTags; }\n\n  get sortOrderName(): string { return this.sortOrder === SortOrder.ASC ? '昇順' : '降順'; }\n\n  get newLineString(): string { return this.inventoryService.newLineString; }\n\n  constructor(\n    private changeDetector: ChangeDetectorRef,\n    private panelService: PanelService,\n    private inventoryService: GameObjectInventoryService,\n    private contextMenuService: ContextMenuService,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    this.panelService.title = 'インベントリ';\n    EventSystem.register(this)\n      .on('SELECT_TABLETOP_OBJECT', -1000, event => {\n        if (ObjectStore.instance.get(event.data.identifier) instanceof TabletopObject) {\n          this.selectedIdentifier = event.data.identifier;\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        if (event.isSendFromSelf) this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_INVENTORY', event => {\n        if (event.isSendFromSelf) this.changeDetector.markForCheck();\n      })\n      .on('OPEN_NETWORK', event => {\n        this.inventoryTypes = ['table', 'common', Network.peerId, 'graveyard'];\n        if (!this.inventoryTypes.includes(this.selectTab)) {\n          this.selectTab = Network.peerId;\n        }\n      });\n    this.inventoryTypes = ['table', 'common', Network.peerId, 'graveyard'];\n  }\n\n  ngAfterViewInit() {\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  getTabTitle(inventoryType: string) {\n    switch (inventoryType) {\n      case 'table':\n        return 'テーブル';\n      case Network.peerId:\n        return '個人';\n      case 'graveyard':\n        return '墓場';\n      default:\n        return '共有';\n    }\n  }\n\n  getInventory(inventoryType: string) {\n    switch (inventoryType) {\n      case 'table':\n        return this.inventoryService.tableInventory;\n      case Network.peerId:\n        return this.inventoryService.privateInventory;\n      case 'graveyard':\n        return this.inventoryService.graveyardInventory;\n      default:\n        return this.inventoryService.commonInventory;\n    }\n  }\n\n  getGameObjects(inventoryType: string): TabletopObject[] {\n    return this.getInventory(inventoryType).tabletopObjects;\n  }\n\n  getInventoryTags(gameObject: GameCharacter): DataElement[] {\n    return this.getInventory(gameObject.location.name).dataElementMap.get(gameObject.identifier);\n  }\n\n  onContextMenu(e: Event, gameObject: GameCharacter) {\n    if (document.activeElement instanceof HTMLInputElement && document.activeElement.getAttribute('type') !== 'range') return;\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n\n    this.selectGameObject(gameObject);\n\n    let position = this.pointerDeviceService.pointers[0];\n\n    let actions: ContextMenuAction[] = [];\n\n    actions.push({ name: '詳細を表示', action: () => { this.showDetail(gameObject); } });\n    if (gameObject.location.name !== 'graveyard') {\n      actions.push({ name: 'チャットパレットを表示', action: () => { this.showChatPalette(gameObject) } });\n    }\n    actions.push(ContextMenuSeparator);\n    let locations = [\n      { name: 'table', alias: 'テーブルに移動' },\n      { name: 'common', alias: '共有イベントリに移動' },\n      { name: Network.peerId, alias: '個人イベントリに移動' },\n      { name: 'graveyard', alias: '墓場に移動' }\n    ];\n    for (let location of locations) {\n      if (gameObject.location.name === location.name) continue;\n      actions.push({\n        name: location.alias, action: () => {\n          gameObject.setLocation(location.name);\n          SoundEffect.play(PresetSound.piecePut);\n        }\n      });\n    }\n\n    if (gameObject.location.name === 'graveyard') {\n      actions.push({\n        name: '削除する', action: () => {\n          this.deleteGameObject(gameObject);\n          SoundEffect.play(PresetSound.sweep);\n        }\n      });\n    }\n    actions.push(ContextMenuSeparator);\n    actions.push({\n      name: 'コピーを作る', action: () => {\n        this.cloneGameObject(gameObject);\n        SoundEffect.play(PresetSound.piecePut);\n      }\n    });\n\n    this.contextMenuService.open(position, actions, gameObject.name);\n  }\n\n  toggleEdit() {\n    this.isEdit = !this.isEdit;\n  }\n\n  cleanInventory() {\n    let tabTitle = this.getTabTitle(this.selectTab);\n    let gameObjects = this.getGameObjects(this.selectTab);\n    if (!confirm(`${tabTitle}に存在する${gameObjects.length}個の要素を完全に削除しますか？`)) return;\n    for (const gameObject of gameObjects) {\n      this.deleteGameObject(gameObject);\n    }\n    SoundEffect.play(PresetSound.sweep);\n  }\n\n  private cloneGameObject(gameObject: TabletopObject) {\n    gameObject.clone();\n  }\n\n  private showDetail(gameObject: GameCharacter) {\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = 'キャラクターシート';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x - 800, top: coordinate.y - 300, width: 800, height: 600 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n\n  private showChatPalette(gameObject: GameCharacter) {\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };\n    let component = this.panelService.open<ChatPaletteComponent>(ChatPaletteComponent, option);\n    component.character = gameObject;\n  }\n\n  selectGameObject(gameObject: GameObject) {\n    let aliasName: string = gameObject.aliasName;\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n  }\n\n  private deleteGameObject(gameObject: GameObject) {\n    gameObject.destroy();\n    this.changeDetector.markForCheck();\n  }\n\n  trackByGameObject(index: number, gameObject: GameObject) {\n    return gameObject ? gameObject.identifier : index;\n  }\n}\n","export default \".is-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab;\\n}\\n\\n.is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-transition {\\n  -webkit-transition: -webkit-transform 132ms linear;\\n  transition: -webkit-transform 132ms linear;\\n  transition: transform 132ms linear;\\n  transition: transform 132ms linear, -webkit-transform 132ms linear;\\n}\\n\\n.component {\\n  position: absolute;\\n  height: 50px;\\n  width: 50px;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  \\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n}\\n\\n.image {\\n  display: block;\\n}\\n\\n.lock-icon {\\n  background-color: #CCCCCC;\\n  border-radius: 100%;\\n  color: #444;\\n  width: 25px;\\n  height: 25px;\\n}\\n\\n.is-center {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  margin: auto;\\n}\\n\\n.border {\\n  box-sizing: border-box;\\n  border: solid 2px #CCCCCC;\\n}\\n\\n.is-fit-full {\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2dhbWUtdGFibGUtbWFzay9nYW1lLXRhYmxlLW1hc2suY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVFLG9CQUFvQjtFQUNwQixZQUFZO0FBQ2Q7O0FBRUE7RUFFRSx3QkFBd0I7RUFDeEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0Usa0RBQWtEO0VBQ2xELDBDQUFrQztFQUFsQyxrQ0FBa0M7RUFBbEMsa0VBQWtDO0FBQ3BDOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLHFCQUFpQjtNQUFqQixpQkFBaUI7O0VBRWpCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsWUFBWTtBQUNkOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0FBQ2IiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvZ2FtZS10YWJsZS1tYXNrL2dhbWUtdGFibGUtbWFzay5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xuICBjdXJzb3I6IC1tb3otZ3JhYjtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy10cmFuc2l0aW9uIHtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogNTBweDtcbiAgd2lkdGg6IDUwcHg7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIFxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG59XG5cbi5pbWFnZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4ubG9jay1pY29uIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgY29sb3I6ICM0NDQ7XG4gIHdpZHRoOiAyNXB4O1xuICBoZWlnaHQ6IDI1cHg7XG59XG5cbi5pcy1jZW50ZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiBhdXRvO1xufVxuXG4uYm9yZGVyIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAycHggI0NDQ0NDQztcbn1cblxuLmlzLWZpdC1mdWxsIHtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbn1cbiJdfQ== */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { GameTableMask } from '@udonarium/game-table-mask';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { InputHandler } from 'directive/input-handler';\nimport { MovableOption } from 'directive/movable.directive';\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\n@Component({\n  selector: 'game-table-mask',\n  templateUrl: './game-table-mask.component.html',\n  styleUrls: ['./game-table-mask.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GameTableMaskComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() gameTableMask: GameTableMask = null;\n  @Input() is3D: boolean = false;\n\n  get name(): string { return this.gameTableMask.name; }\n  get width(): number { return this.adjustMinBounds(this.gameTableMask.width); }\n  get height(): number { return this.adjustMinBounds(this.gameTableMask.height); }\n  get opacity(): number { return this.gameTableMask.opacity; }\n  get imageFile(): ImageFile { return this.gameTableMask.imageFile; }\n  get isLock(): boolean { return this.gameTableMask.isLock; }\n  set isLock(isLock: boolean) { this.gameTableMask.isLock = isLock; }\n\n  gridSize: number = 50;\n\n  movableOption: MovableOption = {};\n\n  private input: InputHandler = null;\n\n  constructor(\n    private tabletopService: TabletopService,\n    private contextMenuService: ContextMenuService,\n    private elementRef: ElementRef<HTMLElement>,\n    private panelService: PanelService,\n    private changeDetector: ChangeDetectorRef,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.gameTableMask || !object) return;\n        if (this.gameTableMask === object || (object instanceof ObjectNode && this.gameTableMask.contains(object))) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      });\n    this.movableOption = {\n      tabletopObject: this.gameTableMask,\n      transformCssOffset: 'translateZ(0.15px)',\n      colideLayers: ['terrain']\n    };\n  }\n\n  ngAfterViewInit() {\n    this.input = new InputHandler(this.elementRef.nativeElement);\n    this.input.onStart = this.onInputStart.bind(this);\n  }\n\n  ngOnDestroy() {\n    this.input.destroy();\n    EventSystem.unregister(this);\n  }\n\n  @HostListener('dragstart', ['$event'])\n  onDragstart(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  onInputStart(e: any) {\n    this.input.cancel();\n\n    // TODO:もっと良い方法考える\n    if (this.isLock) {\n      EventSystem.trigger('DRAG_LOCKED_OBJECT', {});\n    }\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n    let menuPosition = this.pointerDeviceService.pointers[0];\n    let objectPosition = this.tabletopService.calcTabletopLocalCoordinate();\n    this.contextMenuService.open(menuPosition, [\n      (this.isLock\n        ? {\n          name: '固定解除', action: () => {\n            this.isLock = false;\n            SoundEffect.play(PresetSound.unlock);\n          }\n        }\n        : {\n          name: '固定する', action: () => {\n            this.isLock = true;\n            SoundEffect.play(PresetSound.lock);\n          }\n        }\n      ),\n      ContextMenuSeparator,\n      { name: 'マップマスクを編集', action: () => { this.showDetail(this.gameTableMask); } },\n      {\n        name: 'コピーを作る', action: () => {\n          let cloneObject = this.gameTableMask.clone();\n          console.log('コピー', cloneObject);\n          cloneObject.location.x += this.gridSize;\n          cloneObject.location.y += this.gridSize;\n          cloneObject.isLock = false;\n          if (this.gameTableMask.parent) this.gameTableMask.parent.appendChild(cloneObject);\n          SoundEffect.play(PresetSound.cardPut);\n        }\n      },\n      {\n        name: '削除する', action: () => {\n          this.gameTableMask.destroy();\n          SoundEffect.play(PresetSound.sweep);\n        }\n      },\n      ContextMenuSeparator,\n      { name: 'オブジェクト作成', action: null, subActions: this.tabletopService.getContextMenuActionsForCreateObject(objectPosition) }\n    ], this.name);\n  }\n\n  onMove() {\n    SoundEffect.play(PresetSound.cardPick);\n  }\n\n  onMoved() {\n    SoundEffect.play(PresetSound.cardPut);\n  }\n\n  private adjustMinBounds(value: number, min: number = 0): number {\n    return value < min ? min : value;\n  }\n\n  private showDetail(gameObject: GameTableMask) {\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = 'マップマスク設定';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x - 200, top: coordinate.y - 150, width: 400, height: 300 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n}\n","export default \".flex-container { /* Safari */\\n  display: -webkit-box;\\n  display: flex; /* Safari */\\n  -webkit-box-orient:  horizontal;\\n  -webkit-box-direction:  normal;\\n          flex-flow:  row wrap; /* Safari */\\n  -webkit-box-pack: start;\\n          justify-content: flex-start; /* Safari */\\n  -webkit-box-align: stretch;\\n          align-items: stretch;\\n\\n}\\n.flex-item {\\n  margin: 5px; /* Safari */\\n  -webkit-box-flex: 1;\\n          flex: 1 0 auto;\\n  box-sizing: border-box; /* Safari */\\n  flex-grow: 1;\\n  max-width: 100%;\\n}\\n.no-grow{ /* Safari */\\n  -webkit-box-flex: 0;\\n          flex-grow: 0;\\n}\\n.images-select {\\n  display: -webkit-box;\\n  display: flex;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2dhbWUtdGFibGUtc2V0dGluZy9nYW1lLXRhYmxlLXNldHRpbmcuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQkFDeUIsV0FBVztFQUNsQyxvQkFBYTtFQUFiLGFBQWEsRUFFZ0IsV0FBVztFQUN4QywrQkFBb0I7RUFBcEIsOEJBQW9CO1VBQXBCLG9CQUFvQixFQUVpQixXQUFXO0VBQ2hELHVCQUEyQjtVQUEzQiwyQkFBMkIsRUFFRyxXQUFXO0VBQ3pDLDBCQUFvQjtVQUFwQixvQkFBb0I7O0FBRXRCO0FBQ0E7RUFDRSxXQUFXLEVBQ2EsV0FBVztFQUNuQyxtQkFBYztVQUFkLGNBQWM7RUFDZCxzQkFBc0IsRUFDQSxXQUFXO0VBQ2pDLFlBQVk7RUFDWixlQUFlO0FBQ2pCO0FBRUEsVUFDd0IsV0FBVztFQUNqQyxtQkFBWTtVQUFaLFlBQVk7QUFDZDtBQUVBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0FBQ2YiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvZ2FtZS10YWJsZS1zZXR0aW5nL2dhbWUtdGFibGUtc2V0dGluZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZsZXgtY29udGFpbmVyIHtcbiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OyAvKiBTYWZhcmkgKi9cbiAgZGlzcGxheTogZmxleDtcblxuICAtd2Via2l0LWZsZXgtZmxvdzogcm93IHdyYXA7IC8qIFNhZmFyaSAqL1xuICBmbGV4LWZsb3c6ICByb3cgd3JhcDtcblxuICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsgLyogU2FmYXJpICovXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcblxuICAtd2Via2l0LWFsaWduLWl0ZW1zOiBzdHJldGNoOyAvKiBTYWZhcmkgKi9cbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG5cbn1cbi5mbGV4LWl0ZW0ge1xuICBtYXJnaW46IDVweDtcbiAgLXdlYmtpdC1mbGV4OiAxIDAgYXV0bzsgLyogU2FmYXJpICovXG4gIGZsZXg6IDEgMCBhdXRvO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAtd2Via2l0LWZsZXgtZ3JvdzogMTsgLyogU2FmYXJpICovXG4gIGZsZXgtZ3JvdzogMTtcbiAgbWF4LXdpZHRoOiAxMDAlO1xufVxuXG4ubm8tZ3Jvd3tcbiAgLXdlYmtpdC1mbGV4LWdyb3c6IDA7IC8qIFNhZmFyaSAqL1xuICBmbGV4LWdyb3c6IDA7XG59XG5cbi5pbWFnZXMtc2VsZWN0IHtcbiAgZGlzcGxheTogZmxleDtcbn1cbiJdfQ== */\"","import { AfterViewInit, Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { GameTable, GridType, FilterType } from '@udonarium/game-table';\nimport { TableSelecter } from '@udonarium/table-selecter';\n\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\nimport { SaveDataService } from 'service/save-data.service';\n\n@Component({\n  selector: 'game-table-setting',\n  templateUrl: './game-table-setting.component.html',\n  styleUrls: ['./game-table-setting.component.css']\n})\nexport class GameTableSettingComponent implements OnInit, OnDestroy, AfterViewInit {\n  minSize: number = 1;\n  maxSize: number = 100;\n  get tableBackgroundImage(): ImageFile {\n    if (!this.selectedTable) return ImageFile.Empty;\n    let file = ImageStorage.instance.get(this.selectedTable.imageIdentifier);\n    return file ? file : ImageFile.Empty;\n  }\n\n  get tableDistanceviewImage(): ImageFile {\n    if (!this.selectedTable) return ImageFile.Empty;\n    let file = ImageStorage.instance.get(this.selectedTable.backgroundImageIdentifier);\n    return file ? file : ImageFile.Empty;\n  }\n\n  get tableName(): string { return this.selectedTable.name; }\n  set tableName(tableName: string) { if (this.isEditable) this.selectedTable.name = tableName; }\n\n  get tableWidth(): number { return this.selectedTable.width; }\n  set tableWidth(tableWidth: number) { if (this.isEditable) this.selectedTable.width = tableWidth; }\n\n  get tableHeight(): number { return this.selectedTable.height; }\n  set tableHeight(tableHeight: number) { if (this.isEditable) this.selectedTable.height = tableHeight; }\n\n  get tableGridColor(): string { return this.selectedTable.gridColor; }\n  set tableGridColor(tableGridColor: string) { if (this.isEditable) this.selectedTable.gridColor = tableGridColor; }\n\n  get tableGridShow(): boolean { return this.tableSelecter.gridShow; }\n  set tableGridShow(tableGridShow: boolean) {\n    this.tableSelecter.gridShow = tableGridShow;\n  }\n\n  get tableGridSnap(): boolean { return this.tableSelecter.gridSnap; }\n  set tableGridSnap(tableGridSnap: boolean) {\n    this.tableSelecter.gridSnap = tableGridSnap;\n  }\n\n  get tableGridType(): GridType { return this.selectedTable.gridType; }\n  set tableGridType(gridType: GridType) { if (this.isEditable) this.selectedTable.gridType = Number(gridType); }\n\n  get tableDistanceviewFilter(): FilterType { return this.selectedTable.backgroundFilterType; }\n  set tableDistanceviewFilter(filterType: FilterType) { if (this.isEditable) this.selectedTable.backgroundFilterType = filterType; }\n\n  get tableSelecter(): TableSelecter { return ObjectStore.instance.get<TableSelecter>('tableSelecter'); }\n\n  selectedTable: GameTable = null;\n  selectedTableXml: string = '';\n\n  get isEmpty(): boolean { return this.tableSelecter ? (this.tableSelecter.viewTable ? false : true) : true; }\n  get isDeleted(): boolean {\n    if (!this.selectedTable) return true;\n    return ObjectStore.instance.get<GameTable>(this.selectedTable.identifier) == null;\n  }\n  get isEditable(): boolean {\n    return !this.isEmpty && !this.isDeleted;\n  }\n\n  constructor(\n    private modalService: ModalService,\n    private saveDataService: SaveDataService,\n    private panelService: PanelService\n  ) { }\n\n  ngOnInit() {\n    this.modalService.title = this.panelService.title = 'テーブル設定';\n    this.selectedTable = this.tableSelecter.viewTable;\n    EventSystem.register(this)\n      .on('DELETE_GAME_OBJECT', 1000, event => {\n        if (!this.selectedTable || event.data.identifier !== this.selectedTable.identifier) return;\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (object !== null) {\n          this.selectedTableXml = object.toXml();\n        }\n      });\n  }\n\n  ngAfterViewInit() { }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  selectGameTable(identifier: string) {\n    EventSystem.call('SELECT_GAME_TABLE', { identifier: identifier }, Network.peerId);\n    this.selectedTable = ObjectStore.instance.get<GameTable>(identifier);\n    this.selectedTableXml = '';\n  }\n\n  getGameTables(): GameTable[] {\n    return ObjectStore.instance.getObjects(GameTable);\n  }\n\n  createGameTable() {\n    let gameTable = new GameTable();\n    gameTable.name = '白紙のテーブル';\n    gameTable.imageIdentifier = 'testTableBackgroundImage_image';\n    gameTable.initialize();\n    this.selectGameTable(gameTable.identifier);\n  }\n\n  save() {\n    if (!this.selectedTable) return;\n    this.selectedTable.selected = true;\n    this.saveDataService.saveGameObject(this.selectedTable, 'map_' + this.selectedTable.name);\n  }\n\n  delete() {\n    if (!this.isEmpty && this.selectedTable) {\n      this.selectedTableXml = this.selectedTable.toXml();\n      this.selectedTable.destroy();\n    }\n  }\n\n  restore() {\n    if (this.selectedTable && this.selectedTableXml) {\n      let restoreTable = ObjectSerializer.instance.parseXml(this.selectedTableXml);\n      this.selectGameTable(restoreTable.identifier);\n      this.selectedTableXml = '';\n    }\n  }\n\n  openBgImageModal() {\n    if (this.isDeleted) return;\n    this.modalService.open<string>(FileSelecterComponent).then(value => {\n      if (!this.selectedTable || !value) return;\n      this.selectedTable.imageIdentifier = value;\n    });\n  }\n\n  openDistanceViewImageModal() {\n    if (this.isDeleted) return;\n    this.modalService.open<string>(FileSelecterComponent, { isAllowedEmpty: true }).then(value => {\n      if (!this.selectedTable || !value) return;\n      this.selectedTable.backgroundImageIdentifier = value;\n    });\n  }\n}\n","export default \".is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-perspective {\\n  -webkit-perspective: 1000px;\\n  perspective: 1000px;\\n}\\n\\n.is-fill {\\n  display: block;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  margin: auto;\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.component {\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n\\n  touch-action: manipulation;\\n\\n  height: 100%;\\n  width: 100%;\\n\\n  overflow: hidden;\\n}\\n\\n.component-content {\\n  height: 2000px;\\n  width: 2000px;\\n}\\n\\n.grid-canvas {\\n  opacity: 0.0;\\n  -webkit-transform: translateZ(0.15px);\\n          transform: translateZ(0.15px);\\n  -webkit-transition: 0.3s ease-out;\\n  transition: 0.3s ease-out;\\n\\n  -webkit-backface-visibility: hidden;\\n\\n          backface-visibility: hidden;\\n}\\n\\n.game-table {\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n.table-image {\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background-repeat: no-repeat;\\n  background-size: 100% 100%;\\n}\\n\\n.background-image {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  margin: -5px;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-size: cover;\\n}\\n\\n.background-image.is-filter {\\n  will-change: filter;\\n}\\n\\n.background-image.is-filter.white {\\n  -webkit-filter: blur(5px) contrast(1);\\n          filter: blur(5px) contrast(1);\\n}\\n\\n.background-image.is-filter.black {\\n  -webkit-filter: blur(5px) contrast(1);\\n          filter: blur(5px) contrast(1);\\n}\\n\\n.background-image.is-filter::after {\\n  display: block;\\n  content: '';\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.background-image.is-filter.white::after {\\n  background-color: hsl(0, 0%, 97%);\\n  -webkit-filter: opacity(0.2);\\n          filter: opacity(0.2);\\n}\\n\\n.background-image.is-filter.black::after {\\n  background-color: hsl(0, 0%, 10%);\\n  -webkit-filter: opacity(0.3);\\n          filter: opacity(0.3);\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2dhbWUtdGFibGUvZ2FtZS10YWJsZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUUsd0JBQXdCO0VBQ3hCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLDJCQUEyQjtFQUMzQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixPQUFPO0VBQ1AsU0FBUztFQUNULFFBQVE7RUFDUixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsNEJBQTRCO0VBQzVCLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLHlCQUF5QjtFQUN6QixxQkFBaUI7TUFBakIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQix1QkFBdUI7O0VBRXZCLDBCQUEwQjs7RUFFMUIsWUFBWTtFQUNaLFdBQVc7O0VBRVgsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsY0FBYztFQUNkLGFBQWE7QUFDZjs7QUFFQTtFQUNFLFlBQVk7RUFDWixxQ0FBNkI7VUFBN0IsNkJBQTZCO0VBQzdCLGlDQUFpQztFQUdqQyx5QkFBeUI7O0VBRXpCLG1DQUEyQjs7VUFBM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsNEJBQTRCO0VBQzVCLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFNBQVM7RUFDVCxRQUFRO0VBQ1IsWUFBWTtFQUNaLDRCQUE0QjtFQUM1QiwyQkFBMkI7RUFDM0Isc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UscUNBQTZCO1VBQTdCLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLHFDQUE2QjtVQUE3Qiw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsV0FBVztFQUNYLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxpQ0FBaUM7RUFDakMsNEJBQW9CO1VBQXBCLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGlDQUFpQztFQUNqQyw0QkFBb0I7VUFBcEIsb0JBQW9CO0FBQ3RCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L2dhbWUtdGFibGUvZ2FtZS10YWJsZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy1wZXJzcGVjdGl2ZSB7XG4gIC13ZWJraXQtcGVyc3BlY3RpdmU6IDEwMDBweDtcbiAgcGVyc3BlY3RpdmU6IDEwMDBweDtcbn1cblxuLmlzLWZpbGwge1xuICBkaXNwbGF5OiBibG9jaztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIG1hcmdpbjogYXV0bztcbn1cblxuLmlzLTNkIHtcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmNvbXBvbmVudCB7XG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG5cbiAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG5cbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcblxuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4uY29tcG9uZW50LWNvbnRlbnQge1xuICBoZWlnaHQ6IDIwMDBweDtcbiAgd2lkdGg6IDIwMDBweDtcbn1cblxuLmdyaWQtY2FudmFzIHtcbiAgb3BhY2l0eTogMC4wO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMC4xNXB4KTtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAwLjNzIGVhc2Utb3V0O1xuICAtbW96LXRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XG4gIC1vLXRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XG4gIHRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XG5cbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4uZ2FtZS10YWJsZSB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi50YWJsZS1pbWFnZSB7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTtcbn1cblxuLmJhY2tncm91bmQtaW1hZ2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiAtNXB4O1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG59XG5cbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlciB7XG4gIHdpbGwtY2hhbmdlOiBmaWx0ZXI7XG59XG5cbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlci53aGl0ZSB7XG4gIGZpbHRlcjogYmx1cig1cHgpIGNvbnRyYXN0KDEpO1xufVxuXG4uYmFja2dyb3VuZC1pbWFnZS5pcy1maWx0ZXIuYmxhY2sge1xuICBmaWx0ZXI6IGJsdXIoNXB4KSBjb250cmFzdCgxKTtcbn1cblxuLmJhY2tncm91bmQtaW1hZ2UuaXMtZmlsdGVyOjphZnRlciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBjb250ZW50OiAnJztcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLmJhY2tncm91bmQtaW1hZ2UuaXMtZmlsdGVyLndoaXRlOjphZnRlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IGhzbCgwLCAwJSwgOTclKTtcbiAgZmlsdGVyOiBvcGFjaXR5KDAuMik7XG59XG5cbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlci5ibGFjazo6YWZ0ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2woMCwgMCUsIDEwJSk7XG4gIGZpbHRlcjogb3BhY2l0eSgwLjMpO1xufVxuIl19 */\"","import { AfterViewInit, Component, ElementRef, HostListener, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\n\nimport { Card } from '@udonarium/card';\nimport { CardStack } from '@udonarium/card-stack';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { GameObject } from '@udonarium/core/synchronize-object/game-object';\nimport { EventSystem } from '@udonarium/core/system';\nimport { DiceSymbol } from '@udonarium/dice-symbol';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { FilterType, GameTable, GridType } from '@udonarium/game-table';\nimport { GameTableMask } from '@udonarium/game-table-mask';\nimport { PeerCursor } from '@udonarium/peer-cursor';\nimport { TableSelecter } from '@udonarium/table-selecter';\nimport { Terrain } from '@udonarium/terrain';\nimport { TextNote } from '@udonarium/text-note';\n\nimport { GameTableSettingComponent } from 'component/game-table-setting/game-table-setting.component';\nimport { InputHandler } from 'directive/input-handler';\nimport { ContextMenuAction, ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\nimport { ModalService } from 'service/modal.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\n@Component({\n  selector: 'game-table',\n  templateUrl: './game-table.component.html',\n  styleUrls: ['./game-table.component.css'],\n  providers: [\n    TabletopService,\n  ],\n})\nexport class GameTableComponent implements OnInit, OnDestroy, AfterViewInit {\n  @ViewChild('root', { static: true }) rootElementRef: ElementRef<HTMLElement>;\n  @ViewChild('gameTable', { static: true }) gameTable: ElementRef<HTMLElement>;\n  @ViewChild('gameObjects', { static: true }) gameObjects: ElementRef<HTMLElement>;\n  @ViewChild('gridCanvas', { static: true }) gridCanvas: ElementRef<HTMLCanvasElement>;\n\n  get tableSelecter(): TableSelecter { return this.tabletopService.tableSelecter; }\n  get currentTable(): GameTable { return this.tabletopService.currentTable; }\n\n  get tableImage(): ImageFile {\n    let file: ImageFile = ImageStorage.instance.get(this.currentTable.imageIdentifier);\n    return file ? file : ImageFile.Empty;\n  }\n\n  get backgroundImage(): ImageFile {\n    let file: ImageFile = ImageStorage.instance.get(this.currentTable.backgroundImageIdentifier);\n    return file ? file : ImageFile.Empty;\n  }\n\n  get backgroundFilterType(): FilterType {\n    return this.currentTable.backgroundFilterType\n  }\n\n  private isTransformMode: boolean = false;\n\n  private currentPositionX: number = 0;\n  private currentPositionY: number = 0;\n\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\n\n  private viewPotisonX: number = 100;\n  private viewPotisonY: number = 0;\n  private viewPotisonZ: number = 0;\n\n  private viewRotateX: number = 50;\n  private viewRotateY: number = 0;\n  private viewRotateZ: number = 10;\n\n  private buttonCode: number = 0;\n  private input: InputHandler = null;\n\n  private hammer: HammerManager = null;\n  private deltaHammerDeltaX: number = 0;\n  private deltaHammerDeltaY = 1.0;\n  private deltaHammerScale = 1.0;\n  private deltaHammerRotation = 0;\n\n  private prevHammerDeltaX: number = 0;\n  private prevHammerDeltaY: number = 0;\n  private prevHammerScale: number = 0;\n  private prevHammerRotation: number = 0;\n\n  private tappedPanTimer: NodeJS.Timer = null;\n  private tappedPanCenter: HammerPoint = { x: 0, y: 0 };\n\n  get characters(): GameCharacter[] { return this.tabletopService.characters; }\n  get tableMasks(): GameTableMask[] { return this.tabletopService.tableMasks; }\n  get cards(): Card[] { return this.tabletopService.cards; }\n  get cardStacks(): CardStack[] { return this.tabletopService.cardStacks; }\n  get terrains(): Terrain[] { return this.tabletopService.terrains; }\n  get textNotes(): TextNote[] { return this.tabletopService.textNotes; }\n  get diceSymbols(): DiceSymbol[] { return this.tabletopService.diceSymbols; }\n  get peerCursors(): PeerCursor[] { return this.tabletopService.peerCursors; }\n\n  constructor(\n    private ngZone: NgZone,\n    private contextMenuService: ContextMenuService,\n    private elementRef: ElementRef,\n    private pointerDeviceService: PointerDeviceService,\n    private tabletopService: TabletopService,\n    private modalService: ModalService,\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        if (event.data.identifier !== this.currentTable.identifier && event.data.identifier !== this.tableSelecter.identifier) return;\n        console.log('UPDATE_GAME_OBJECT GameTableComponent ' + this.currentTable.identifier);\n\n        this.setGameTableGrid(this.currentTable.width, this.currentTable.height, this.currentTable.gridSize, this.currentTable.gridType, this.currentTable.gridColor);\n      })\n      .on('DRAG_LOCKED_OBJECT', event => {\n        this.isTransformMode = true;\n        this.pointerDeviceService.isDragging = false;\n        let opacity: number = this.tableSelecter.gridShow ? 1.0 : 0.0;\n        this.gridCanvas.nativeElement.style.opacity = opacity + '';\n      });\n    this.tabletopService.makeDefaultTable();\n    this.tabletopService.makeDefaultTabletopObjects();\n  }\n\n  ngAfterViewInit() {\n    this.ngZone.runOutsideAngular(() => {\n      this.input = new InputHandler(this.elementRef.nativeElement, { capture: true });\n      this.initializeHammer();\n    });\n    this.input.onStart = this.onInputStart.bind(this);\n    this.input.onMove = this.onInputMove.bind(this);\n    this.input.onEnd = this.onInputEnd.bind(this);\n\n    this.setGameTableGrid(this.currentTable.width, this.currentTable.height, this.currentTable.gridSize, this.currentTable.gridType, this.currentTable.gridColor);\n    this.setTransform(0, 0, 0, 0, 0, 0);\n    this.tabletopService.dragAreaElement = this.gameObjects.nativeElement;\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n    this.input.destroy();\n    this.hammer.destroy();\n  }\n\n  initializeHammer() {\n    this.hammer = new Hammer.Manager(this.rootElementRef.nativeElement, { inputClass: Hammer.TouchInput });\n\n    let tap = new Hammer.Tap();\n    let pan1p = new Hammer.Pan({ event: 'pan1p', pointers: 1, threshold: 0 });\n    let pan2p = new Hammer.Pan({ event: 'pan2p', pointers: 2, threshold: 0 });\n    let pinch = new Hammer.Pinch();\n    let rotate = new Hammer.Rotate();\n\n    pan1p.recognizeWith(pan2p);\n    pan1p.recognizeWith(rotate);\n    pan1p.recognizeWith(pinch);\n\n    pan2p.recognizeWith(pinch);\n    pan2p.recognizeWith(rotate);\n    pinch.recognizeWith(rotate);\n\n    this.hammer.add([tap, pan1p, pan2p, pinch, rotate]);\n\n    this.hammer.on('hammer.input', this.onHammer.bind(this));\n    this.hammer.on('tap', this.onTap.bind(this));\n    this.hammer.on('pan1pstart', this.onTappedPanStart.bind(this));\n    this.hammer.on('pan1pmove', this.onTappedPanMove.bind(this));\n    this.hammer.on('pan1pend', this.onTappedPanEnd.bind(this));\n    this.hammer.on('pan1pcancel', this.onTappedPanEnd.bind(this));\n    this.hammer.on('pan2pmove', this.onPanMove.bind(this));\n    this.hammer.on('pinchmove', this.onPinchMove.bind(this));\n    this.hammer.on('rotatemove', this.onRotateMove.bind(this));\n\n    // iOS で contextmenu が発火しない問題へのworkaround.\n    let ua = window.navigator.userAgent.toLowerCase();\n    let isiOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;\n    if (!isiOS) return;\n    this.hammer.add(new Hammer.Press({ time: 251 }));\n    this.hammer.on('press', ev => {\n      let event = new MouseEvent('contextmenu', {\n        bubbles: true,\n        cancelable: true,\n        clientX: ev.center.x,\n        clientY: ev.center.y,\n      });\n      this.ngZone.run(() => ev.srcEvent.target.dispatchEvent(event));\n    });\n  }\n\n  onHammer(ev: HammerInput) {\n    if (ev.isFirst) {\n      this.deltaHammerScale = ev.scale;\n      this.deltaHammerRotation = ev.rotation;\n      this.deltaHammerDeltaX = ev.deltaX;\n      this.deltaHammerDeltaY = ev.deltaY;\n    } else {\n      this.deltaHammerScale = ev.scale - this.prevHammerScale;\n      this.deltaHammerRotation = ev.rotation - this.prevHammerRotation;\n      this.deltaHammerDeltaX = ev.deltaX - this.prevHammerDeltaX;\n      this.deltaHammerDeltaY = ev.deltaY - this.prevHammerDeltaY;\n    }\n    this.prevHammerScale = ev.scale;\n    this.prevHammerRotation = ev.rotation;\n    this.prevHammerDeltaX = ev.deltaX;\n    this.prevHammerDeltaY = ev.deltaY;\n\n    if (this.tappedPanTimer == null || ev.eventType != Hammer.INPUT_START) return;\n    let distance = (this.tappedPanCenter.x - ev.center.x) ** 2 + (this.tappedPanCenter.y - ev.center.y) ** 2;\n    if (50 ** 2 < distance) {\n      clearTimeout(this.tappedPanTimer);\n      this.tappedPanTimer = null;\n    }\n  }\n\n  onTap(ev: HammerInput) {\n    this.cancelInput();\n    this.tappedPanCenter = ev.center;\n    this.tappedPanTimer = setTimeout(() => { this.tappedPanTimer = null; }, 400);\n  }\n\n  onTappedPanStart(ev: HammerInput) {\n    if (this.tappedPanTimer == null) return;\n    clearTimeout(this.tappedPanTimer);\n    this.cancelInput();\n  }\n\n  onTappedPanEnd(ev: HammerInput) {\n    clearTimeout(this.tappedPanTimer);\n    this.tappedPanTimer = null;\n  }\n\n  onTappedPanMove(ev: HammerInput) {\n    if (this.tappedPanTimer == null) {\n      if (!this.isTransformMode || this.input.isGrabbing) return;\n\n      let transformX = 0;\n      let transformY = 0;\n      let transformZ = 0;\n\n      let scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;\n      transformX = this.deltaHammerDeltaX * scale;\n      transformY = this.deltaHammerDeltaY * scale;\n\n      if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {\n        this.ngZone.run(() => { this.contextMenuService.close(); });\n      }\n\n      this.setTransform(transformX, transformY, transformZ, 0, 0, 0);\n\n    } else {\n      clearTimeout(this.tappedPanTimer);\n      this.cancelInput();\n\n      let scale = this.deltaHammerDeltaY;\n      let transformZ = scale * 7.5;\n\n      if (750 < transformZ + this.viewPotisonZ) transformZ += 750 - (transformZ + this.viewPotisonZ);\n\n      this.setTransform(0, 0, transformZ, 0, 0, 0);\n    }\n  }\n\n  onPanMove(ev: HammerInput) {\n    clearTimeout(this.tappedPanTimer);\n    this.tappedPanTimer = null;\n    this.cancelInput();\n    let rotateX = -this.deltaHammerDeltaY / window.innerHeight * 100;\n\n    if (80 < rotateX + this.viewRotateX) rotateX += 80 - (rotateX + this.viewRotateX);\n    if (rotateX + this.viewRotateX < 0) rotateX += 0 - (rotateX + this.viewRotateX);\n\n    this.setTransform(0, 0, 0, rotateX, 0, 0);\n  }\n\n  onPinchMove(ev: HammerInput) {\n    clearTimeout(this.tappedPanTimer);\n    this.tappedPanTimer = null;\n    this.cancelInput();\n    let transformZ = this.deltaHammerScale * 500;\n\n    if (750 < transformZ + this.viewPotisonZ) transformZ += 750 - (transformZ + this.viewPotisonZ);\n\n    this.setTransform(0, 0, transformZ, 0, 0, 0);\n  }\n\n  onRotateMove(ev: HammerInput) {\n    clearTimeout(this.tappedPanTimer);\n    this.tappedPanTimer = null;\n    this.cancelInput();\n    let rotateZ = this.deltaHammerRotation;\n    this.setTransform(0, 0, 0, 0, 0, rotateZ);\n  }\n\n  onInputStart(e: any) {\n    this.currentPositionX = this.input.pointer.x;\n    this.currentPositionY = this.input.pointer.y;\n\n    if (e.target.contains(this.gameObjects.nativeElement) || e.button === 1 || e.button === 2) {\n      this.isTransformMode = true;\n    } else {\n      this.isTransformMode = false;\n      this.pointerDeviceService.isDragging = true;\n      this.gridCanvas.nativeElement.style.opacity = 1.0 + '';\n    }\n\n    this.buttonCode = e.button;\n\n    if (!document.activeElement.contains(e.target)) {\n      this.removeSelectionRanges();\n      this.removeFocus();\n    }\n  }\n\n  onInputEnd(e: any) {\n    this.cancelInput();\n  }\n\n  onInputMove(e: any) {\n    if (!this.isTransformMode || this.tappedPanTimer != null) return;\n\n    let x = this.input.pointer.x;\n    let y = this.input.pointer.y;\n    let deltaX = x - this.currentPositionX;\n    let deltaY = y - this.currentPositionY;\n\n    let transformX = 0;\n    let transformY = 0;\n    let transformZ = 0;\n\n    let rotateX = 0;\n    let rotateY = 0;\n    let rotateZ = 0;\n\n    if (this.buttonCode === 2) {\n      rotateZ = -deltaX / 5;\n      rotateX = -deltaY / 5;\n    } else {\n      let scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;\n      transformX = deltaX * scale;\n      transformY = deltaY * scale;\n    }\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {\n      this.ngZone.run(() => { this.contextMenuService.close(); });\n    }\n\n    this.currentPositionX = x;\n    this.currentPositionY = y;\n\n    this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);\n  }\n\n  cancelInput() {\n    this.input.cancel();\n    this.pointerDeviceService.isDragging = false;\n    let opacity: number = this.tableSelecter.gridShow ? 1.0 : 0.0;\n    this.gridCanvas.nativeElement.style.opacity = opacity + '';\n  }\n\n  @HostListener('wheel', ['$event'])\n  onWheel(e: WheelEvent) {\n    let transformX = 0;\n    let transformY = 0;\n    let transformZ = 0;\n\n    let rotateX = 0;\n    let rotateY = 0;\n    let rotateZ = 0;\n\n    if (e.deltaY < 0) {\n      transformZ = 150;\n    } else if (0 < e.deltaY) {\n      transformZ = -150;\n    }\n\n    this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);\n  }\n\n  @HostListener('document:keydown', ['$event'])\n  onKeydown(e: KeyboardEvent) {\n    if (document.body !== document.activeElement) return;\n    let transformX = 0;\n    let transformY = 0;\n    let transformZ = 0;\n\n    let rotateX = 0;\n    let rotateY = 0;\n    let rotateZ = 0;\n\n    if (e.keyCode === 37) {//←\n      if (e.shiftKey) {\n        rotateZ = -2;\n      } else {\n        transformX = 10;\n      }\n    }\n    if (e.keyCode === 38) {//↑\n      if (e.shiftKey) {\n        rotateX = -2;\n      } else {\n        transformY = 10;\n      }\n    }\n    if (e.keyCode === 39) {//→\n      if (e.shiftKey) {\n        rotateZ = 2;\n      } else {\n        transformX = -10;\n      }\n    }\n    if (e.keyCode === 40) {//↓\n      if (e.shiftKey) {\n        rotateX = 2;\n      } else {\n        transformY = -10;\n      }\n    }\n    this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: any) {\n    if (!document.activeElement.contains(this.gameObjects.nativeElement)) return;\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n\n    let menuPosition = this.pointerDeviceService.pointers[0];\n    let objectPosition = this.tabletopService.calcTabletopLocalCoordinate();\n    let menuActions: ContextMenuAction[] = [];\n\n    Array.prototype.push.apply(menuActions, this.tabletopService.getContextMenuActionsForCreateObject(objectPosition));\n    menuActions.push(ContextMenuSeparator);\n    menuActions.push({\n      name: 'テーブル設定', action: () => {\n        this.modalService.open(GameTableSettingComponent);\n      }\n    });\n    this.contextMenuService.open(menuPosition, menuActions, this.currentTable.name);\n  }\n\n  private setTransform(transformX: number, transformY: number, transformZ: number, rotateX: number, rotateY: number, rotateZ: number) {\n    this.viewRotateX += rotateX;\n    this.viewRotateY += rotateY;\n    this.viewRotateZ += rotateZ;\n\n    this.viewPotisonX += transformX;\n    this.viewPotisonY += transformY;\n    this.viewPotisonZ += transformZ;\n\n    this.gameTable.nativeElement.style.transform = 'translateZ(' + this.viewPotisonZ + 'px) translateY(' + this.viewPotisonY + 'px) translateX(' + this.viewPotisonX + 'px) rotateY(' + this.viewRotateY + 'deg) rotateX(' + this.viewRotateX + 'deg) rotateZ(' + this.viewRotateZ + 'deg) ';\n  }\n\n  private setGameTableGrid(width: number, height: number, gridSize: number = 50, gridType: GridType = GridType.SQUARE, gridColor: string = '#000000e6') {\n    this.gameTable.nativeElement.style.width = width * gridSize + 'px';\n    this.gameTable.nativeElement.style.height = height * gridSize + 'px';\n\n    let canvasElement: HTMLCanvasElement = this.gridCanvas.nativeElement;\n    canvasElement.width = width * gridSize;\n    canvasElement.height = height * gridSize;\n    let context: CanvasRenderingContext2D = canvasElement.getContext('2d');\n    context.strokeStyle = gridColor;\n    context.fillStyle = context.strokeStyle;\n    context.lineWidth = 1;\n\n    // 座標描画用font設定\n    let fontSize: number = Math.floor(gridSize / 5);\n    context.font = 'bold ' + fontSize + 'px sans-serif';\n    context.textBaseline = 'top';\n    context.textAlign = 'center';\n\n    let gx: number; // グリッド用Rect描画開始位置(x)\n    let gy: number; // 同上(y)\n\n    let calcGridPosition: { (w: number, h: number): void };\n\n    switch (gridType) {\n      case GridType.HEX_VERTICAL: // ヘクス縦揃え\n        calcGridPosition = (w, h) => {\n          if ((w % 2) === 1) {\n            gx = w * gridSize;\n            gy = h * gridSize;\n          } else {\n            gx = w * gridSize;\n            gy = h * gridSize + (gridSize / 2);\n          }\n        }\n        break;\n      case GridType.HEX_HORIZONTAL: // ヘクス横揃え(どどんとふ互換)\n        calcGridPosition = (w, h) => {\n          if ((h % 2) === 1) {\n            gx = w * gridSize;\n            gy = h * gridSize;\n          } else {\n            gx = w * gridSize + (gridSize / 2);\n            gy = h * gridSize;\n          }\n        }\n        break;\n      default: // スクエア(default)\n        calcGridPosition = (w, h) => {\n          gx = w * gridSize;\n          gy = h * gridSize;\n        }\n        break;\n    }\n\n    for (let h = 0; h <= height; h++) {\n      for (let w = 0; w <= width; w++) {\n        calcGridPosition(w, h);\n        context.beginPath();\n        context.strokeRect(gx, gy, gridSize, gridSize);\n        context.fillText((w + 1).toString() + '-' + (h + 1).toString(), gx + (gridSize / 2), gy + (gridSize / 2));\n      }\n    }\n\n    let opacity: number = this.tableSelecter.gridShow ? 1.0 : 0.0;\n    this.gridCanvas.nativeElement.style.opacity = opacity + '';\n  }\n\n  private removeSelectionRanges() {\n    let selection = window.getSelection();\n    if (!selection.isCollapsed) {\n      selection.removeAllRanges();\n    }\n  }\n\n  private removeFocus() {\n    if (document.activeElement instanceof HTMLElement) {\n      document.activeElement.blur();\n    }\n  }\n\n  trackByGameObject(index: number, gameObject: GameObject) {\n    return gameObject.identifier;\n  }\n}\n","export default \".drop-zone {\\n  border: 2px dashed #555;\\n  border-radius: 5px;\\n  padding: 25px;\\n  text-align: center;\\n  font: 24px bold 'Vollkorn';\\n  color: #444;\\n  cursor: pointer;\\n}\\n\\n.large-font {\\n  font-size: 64px;\\n}\\n\\n.small-font {\\n  font-size: 12px;\\n}\\n\\n.box {\\n  border-bottom:1px dotted #888;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2p1a2Vib3gvanVrZWJveC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQXVCO0VBR3ZCLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLDBCQUEwQjtFQUMxQixXQUFXO0VBQ1gsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsNkJBQTZCO0FBQy9CIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L2p1a2Vib3gvanVrZWJveC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRyb3Atem9uZSB7XG4gIGJvcmRlcjogMnB4IGRhc2hlZCAjNTU1O1xuICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgcGFkZGluZzogMjVweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250OiAyNHB4IGJvbGQgJ1ZvbGxrb3JuJztcbiAgY29sb3I6ICM0NDQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLmxhcmdlLWZvbnQge1xuICBmb250LXNpemU6IDY0cHg7XG59XG5cbi5zbWFsbC1mb250IHtcbiAgZm9udC1zaXplOiAxMnB4O1xufVxuXG4uYm94IHtcbiAgYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7XG59Il19 */\"","import { Component, NgZone, OnDestroy, OnInit } from '@angular/core';\n\nimport { AudioFile } from '@udonarium/core/file-storage/audio-file';\nimport { AudioPlayer, VolumeType } from '@udonarium/core/file-storage/audio-player';\nimport { AudioStorage } from '@udonarium/core/file-storage/audio-storage';\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { Jukebox } from '@udonarium/Jukebox';\n\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'app-jukebox',\n  templateUrl: './jukebox.component.html',\n  styleUrls: ['./jukebox.component.css']\n})\nexport class JukeboxComponent implements OnInit, OnDestroy {\n\n  get volume(): number { return AudioPlayer.volume; }\n  set volume(volume: number) { AudioPlayer.volume = volume; }\n\n  get auditionVolume(): number { return AudioPlayer.auditionVolume; }\n  set auditionVolume(auditionVolume: number) { AudioPlayer.auditionVolume = auditionVolume; }\n\n  get audios(): AudioFile[] { return AudioStorage.instance.audios.filter(audio => !audio.isHidden); }\n  get jukebox(): Jukebox { return ObjectStore.instance.get<Jukebox>('Jukebox'); }\n\n  readonly auditionPlayer: AudioPlayer = new AudioPlayer();\n  private lazyUpdateTimer: NodeJS.Timer = null;\n\n  constructor(\n    private modalService: ModalService,\n    private panelService: PanelService,\n    private ngZone: NgZone\n  ) { }\n\n  ngOnInit() {\n    this.modalService.title = this.panelService.title = 'ジュークボックス'\n    this.auditionPlayer.volumeType = VolumeType.AUDITION;\n    EventSystem.register(this)\n      .on('*', event => {\n        if (event.eventName.startsWith('FILE_')) this.lazyNgZoneUpdate();\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n    this.stop();\n  }\n\n  play(audio: AudioFile) {\n    this.auditionPlayer.play(audio);\n  }\n\n  stop() {\n    this.auditionPlayer.stop();\n  }\n\n  playBGM(audio: AudioFile) {\n    this.jukebox.play(audio.identifier, true);\n  }\n\n  stopBGM(audio: AudioFile) {\n    if (this.jukebox.audio === audio) this.jukebox.stop();\n  }\n\n  handleFileSelect(event: Event) {\n    let files = (<HTMLInputElement>event.target).files;\n    if (files.length) FileArchiver.instance.load(files);\n  }\n\n  private lazyNgZoneUpdate() {\n    if (this.lazyUpdateTimer !== null) return;\n    this.lazyUpdateTimer = setTimeout(() => {\n      this.lazyUpdateTimer = null;\n      this.ngZone.run(() => { });\n    }, 100);\n  }\n}\n","export default \".box {\\n  border-bottom:1px dotted #888;\\n}\\n.image {\\n  padding: 0px;\\n  width: 64px;\\n  height: 64px;\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n.contain {\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L2xvYmJ5L2xvYmJ5LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyw0QkFBNEI7RUFDNUIsd0JBQXdCO0FBQzFCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L2xvYmJ5L2xvYmJ5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYm94IHtcbiAgYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7XG59XG4uaW1hZ2Uge1xuICBwYWRkaW5nOiAwcHg7XG4gIHdpZHRoOiA2NHB4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmNvbnRhaW4ge1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG59Il19 */\"","import { Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerCursor } from '@udonarium/peer-cursor';\n\nimport { PasswordCheckComponent } from 'component/password-check/password-check.component';\nimport { RoomSettingComponent } from 'component/room-setting/room-setting.component';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'lobby',\n  templateUrl: './lobby.component.html',\n  styleUrls: ['./lobby.component.css'],\n})\nexport class LobbyComponent implements OnInit, OnDestroy {\n  rooms: { alias: string, roomName: string, peers: PeerContext[] }[] = [];\n\n  isReloading: boolean = false;\n\n  help: string = '「一覧を更新」ボタンを押すと接続可能なルーム一覧を表示します。';\n\n  get currentRoom(): string { return Network.peerContext.room };\n  get peerId(): string { return Network.peerId; }\n  get isConnected(): boolean {\n    return Network.peerIds.length <= 1 ? false : true;\n  }\n  constructor(\n    private panelService: PanelService,\n    private modalService: ModalService\n  ) { }\n\n  ngOnInit() {\n    this.changeTitle();\n    EventSystem.register(this)\n      .on('OPEN_NETWORK', event => {\n        this.changeTitle();\n      })\n      .on('CONNECT_PEER', event => {\n        this.changeTitle();\n      });\n    this.reload();\n  }\n\n  private changeTitle() {\n    this.modalService.title = this.panelService.title = 'ロビー';\n    if (Network.peerContext.roomName.length) {\n      this.modalService.title = this.panelService.title = '＜' + Network.peerContext.roomName + '/' + Network.peerContext.room + '＞'\n    }\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  async reload() {\n    this.isReloading = true;\n    this.help = '検索中...';\n    this.rooms = [];\n    let peersOfroom: { [room: string]: PeerContext[] } = {};\n    let peerIds = await Network.listAllPeers();\n    for (let id of peerIds) {\n      let context = new PeerContext(id);\n      if (context.isRoom) {\n        let alias = context.room + context.roomName;\n        if (!(alias in peersOfroom)) {\n          peersOfroom[alias] = [];\n        }\n        peersOfroom[alias].push(context);\n      }\n    }\n    for (let alias in peersOfroom) {\n      this.rooms.push({ alias: alias, roomName: peersOfroom[alias][0].roomName, peers: peersOfroom[alias] });\n    }\n    this.rooms.sort((a, b) => {\n      if (a.alias < b.alias) return -1;\n      if (a.alias > b.alias) return 1;\n      return 0;\n    });\n    this.help = '接続可能なルームが見つかりませんでした。「新しいルームを作成する」で新規ルームを作成できます。';\n    this.isReloading = false;\n  }\n\n  async connect(peerContexts: PeerContext[]) {\n    let context = peerContexts[0];\n\n    if (context.password.length) {\n      let input = await this.modalService.open(PasswordCheckComponent, { password: context.password });\n      if (input !== context.password) return;\n    }\n\n    let peerId = Network.peerContext ? Network.peerContext.id : PeerContext.generateId();\n    Network.open(peerId, context.room, context.roomName, context.password);\n    PeerCursor.myCursor.peerId = Network.peerId;\n\n    let triedPeer: string[] = [];\n    EventSystem.register(triedPeer)\n      .on('OPEN_NETWORK', event => {\n        console.log('LobbyComponent OPEN_PEER', event.data.peer);\n        EventSystem.unregister(triedPeer);\n        ObjectStore.instance.clearDeleteHistory();\n        for (let peer of peerContexts) {\n          Network.connect(peer.fullstring);\n        }\n        EventSystem.register(triedPeer)\n          .on('CONNECT_PEER', event => {\n            console.log('接続成功！', event.data.peer);\n            triedPeer.push(event.data.peer);\n            console.log('接続成功 ' + triedPeer.length + '/' + peerContexts.length);\n            if (peerContexts.length <= triedPeer.length) {\n              this.resetNetwork();\n              EventSystem.unregister(triedPeer);\n            }\n          })\n          .on('DISCONNECT_PEER', event => {\n            console.warn('接続失敗', event.data.peer);\n            triedPeer.push(event.data.peer);\n            console.warn('接続失敗 ' + triedPeer.length + '/' + peerContexts.length);\n            if (peerContexts.length <= triedPeer.length) {\n              this.resetNetwork();\n              EventSystem.unregister(triedPeer);\n            }\n          });\n      });\n  }\n\n  private resetNetwork() {\n    if (Network.peerContexts.length < 1) {\n      Network.open();\n      PeerCursor.myCursor.peerId = Network.peerId;\n    }\n  }\n\n  async showRoomSetting() {\n    await this.modalService.open(RoomSettingComponent, { width: 700, height: 400, left: 0, top: 400 });\n    this.reload();\n    this.help = '「一覧を更新」ボタンを押すと接続可能なルーム一覧を表示します。';\n  }\n}","export default \".component {\\n  box-sizing: border-box;\\n  position: absolute;\\n  top :0;\\n  bottom :0;\\n  left :0;\\n  right :0;\\n  z-index: 9999;\\n\\n  display: -webkit-box;\\n\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n\\n  -ms-scroll-chaining: none;\\n\\n      overscroll-behavior: contain;\\n  -webkit-overflow-scrolling: touch;\\n}\\n\\n.modal-background {\\n  box-sizing: border-box;\\n  position: absolute;\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.3);\\n  top :0;\\n  bottom :0;\\n  left :0;\\n  right :0;\\n  z-index: -1;\\n}\\n\\n.modal-panel {\\n  box-sizing: border-box;\\n  overflow: hidden;\\n\\n  color: #444;\\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\\n  border:solid 1px #999;\\n\\n  height: auto;\\n  max-height: calc(100% - 10px);\\n  width: 800px;\\n  max-width: 100%;\\n}\\n\\n.title{\\n  position: relative;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  box-sizing: border-box;\\n  font-size: 12px;\\n  height: 25px;\\n  padding: 2px 5px;\\n  width: 100%;\\n  background-color: #CCC;\\n  color: #444;\\n}\\n\\n.title-button {\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n}\\n\\n.title button {\\n  background: none;\\n  border: none;\\n  border-radius: 0;\\n  outline: none;\\n  color: #444;\\n}\\n\\n.header, .content, footer{\\n  padding: 10px;\\n}\\n\\n.scrollable-panel {\\n  box-sizing: border-box;\\n  overflow: auto;\\n  max-height: calc(100vh - 41px);\\n  width: 100%;\\n  padding: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L21vZGFsL21vZGFsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixhQUFhOztFQUViLG9CQUFhOztFQUFiLGFBQWE7RUFDYix5QkFBbUI7VUFBbkIsbUJBQW1CO0VBQ25CLHdCQUF1QjtVQUF2Qix1QkFBdUI7O0VBRXZCLHlCQUE0Qjs7TUFBNUIsNEJBQTRCO0VBQzVCLGlDQUFpQztBQUNuQzs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsV0FBVztFQUNYLHVDQUF1QztFQUN2QyxNQUFNO0VBQ04sU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsV0FBVztBQUNiOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGdCQUFnQjs7RUFFaEIsV0FBVztFQUNYLHFGQUFxRjtFQUNyRixxQkFBcUI7O0VBRXJCLFlBQVk7RUFDWiw2QkFBNkI7RUFDN0IsWUFBWTtFQUNaLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLE1BQU07QUFDUjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsY0FBYztFQUNkLDhCQUE4QjtFQUM5QixXQUFXO0VBQ1gsWUFBWTtBQUNkIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L21vZGFsL21vZGFsLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tcG9uZW50IHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3AgOjA7XG4gIGJvdHRvbSA6MDtcbiAgbGVmdCA6MDtcbiAgcmlnaHQgOjA7XG4gIHotaW5kZXg6IDk5OTk7XG5cbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgb3ZlcnNjcm9sbC1iZWhhdmlvcjogY29udGFpbjtcbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xufVxuXG4ubW9kYWwtYmFja2dyb3VuZCB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgY29sb3I6ICNDQ0M7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC4zKTtcbiAgdG9wIDowO1xuICBib3R0b20gOjA7XG4gIGxlZnQgOjA7XG4gIHJpZ2h0IDowO1xuICB6LWluZGV4OiAtMTtcbn1cblxuLm1vZGFsLXBhbmVsIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICBjb2xvcjogIzQ0NDtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KC0zMGRlZywgcmdiYSgyNDAsMjE4LDE4OSwgMC45KSwgcmdiYSgyNTUsIDI0NCwgMjMyLCAwLjkpKTtcbiAgYm9yZGVyOnNvbGlkIDFweCAjOTk5O1xuXG4gIGhlaWdodDogYXV0bztcbiAgbWF4LWhlaWdodDogY2FsYygxMDAlIC0gMTBweCk7XG4gIHdpZHRoOiA4MDBweDtcbiAgbWF4LXdpZHRoOiAxMDAlO1xufVxuXG4udGl0bGV7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBoZWlnaHQ6IDI1cHg7XG4gIHBhZGRpbmc6IDJweCA1cHg7XG4gIHdpZHRoOiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDO1xuICBjb2xvcjogIzQ0NDtcbn1cblxuLnRpdGxlLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbn1cblxuLnRpdGxlIGJ1dHRvbiB7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMDtcbiAgb3V0bGluZTogbm9uZTtcbiAgY29sb3I6ICM0NDQ7XG59XG5cbi5oZWFkZXIsIC5jb250ZW50LCBmb290ZXJ7XG4gIHBhZGRpbmc6IDEwcHg7XG59XG5cbi5zY3JvbGxhYmxlLXBhbmVsIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSA0MXB4KTtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDhweDtcbn0iXX0= */\"","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\nimport { Component, ViewChild, ViewContainerRef } from '@angular/core';\nimport { ModalService } from 'service/modal.service';\n\n@Component({\n  selector: 'modal',\n  templateUrl: './modal.component.html',\n  styleUrls: ['./modal.component.css'],\n  animations: [\n    trigger('flyInOut', [\n      transition('void => *', [\n        animate('100ms ease-out', keyframes([\n          style({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),\n          style({ transform: 'scale(1.0, 1.0)', opacity: '1.0', offset: 1.0 })\n        ]))\n      ]),\n      transition('* => void', [\n        animate(100, style({ transform: 'scale(0, 0)' }))\n      ])\n    ]),\n    trigger('bgInOut', [\n      state('in', style({ 'background-color': 'rgba(30, 30, 30, 0.4)' })),\n      transition('void => *', [\n        style({ 'background-color': 'rgba(30, 30, 30, 0.0)' }), animate(200)\n      ]),\n      transition('* => void', [\n        animate(200, style({ 'background-color': 'rgba(30, 30, 30, 0.0)' }))\n      ])\n    ]),\n  ]\n})\nexport class ModalComponent {\n  @ViewChild('content', { read: ViewContainerRef, static: true }) content: ViewContainerRef;\n\n  constructor(\n    public modalService: ModalService) { }\n\n  clickBackground(event: MouseEvent) {\n    if (event.target === event.currentTarget) this.resolve();\n  }\n\n  resolve() {\n    this.modalService.resolve(null);\n  }\n\n  reject() {\n    this.modalService.reject();\n  }\n}\n\nModalService.ModalComponentClass = ModalComponent;\n","export default \".sk-cube-grid {\\n  font-size: 8px;\\n  color: #444;\\n  height: 100%;\\n  width: 100%;\\n  background-color: rgba(247, 247, 247, 0.6);\\n}\\n\\n.sk-cube {\\n  background-color: #555;\\n}\\n\\n.sk-title {\\n  padding: 2px 0;\\n  background-color: rgba(247, 247, 247, 0.6);\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L25ldHdvcmstaW5kaWNhdG9yL25ldHdvcmstaW5kaWNhdG9yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsV0FBVztFQUNYLFlBQVk7RUFDWixXQUFXO0VBQ1gsMENBQTBDO0FBQzVDOztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsY0FBYztFQUNkLDBDQUEwQztBQUM1QyIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9uZXR3b3JrLWluZGljYXRvci9uZXR3b3JrLWluZGljYXRvci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNrLWN1YmUtZ3JpZCB7XG4gIGZvbnQtc2l6ZTogOHB4O1xuICBjb2xvcjogIzQ0NDtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDcsIDI0NywgMjQ3LCAwLjYpO1xufVxuXG4uc2stY3ViZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG59XG5cbi5zay10aXRsZSB7XG4gIHBhZGRpbmc6IDJweCAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0NywgMjQ3LCAyNDcsIDAuNik7XG59XG4iXX0= */\"","import { AfterViewInit, Component, ElementRef, OnDestroy } from '@angular/core';\n\nimport { EventSystem, Network } from '@udonarium/core/system';\n\n@Component({\n  selector: 'network-indicator',\n  templateUrl: './network-indicator.component.html',\n  styleUrls: ['./network-indicator.component.css']\n})\nexport class NetworkIndicatorComponent implements AfterViewInit, OnDestroy {\n  private timer: NodeJS.Timer = null;\n  private needRepeat = false;\n\n  constructor(private elementRef: ElementRef, ) { }\n\n  ngAfterViewInit() {\n    let repeatFunc = () => {\n      if (this.needRepeat) {\n        this.timer = setTimeout(repeatFunc, 650);\n        this.needRepeat = false;\n      } else {\n        this.timer = null;\n        this.elementRef.nativeElement.style.display = 'none';\n      }\n    };\n\n    EventSystem.register(this)\n      .on('*', event => {\n        if (this.needRepeat || Network.bandwidthUsage < 3 * 1024) return;\n        if (this.timer === null) {\n          this.elementRef.nativeElement.style.display = 'block';\n          this.timer = setTimeout(repeatFunc, 650);\n        } else {\n          this.needRepeat = true;\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n}\n","export default \".component {\\n  position: absolute;\\n  max-height: 100%;\\n  max-width: 100%;\\n  box-sizing: border-box;\\n  overflow: visible;\\n  color: #444;\\n  z-index: 9000;\\n  -ms-scroll-chaining: none;\\n      overscroll-behavior: contain;\\n  -webkit-overflow-scrolling: touch;\\n}\\n\\n.component-content {\\n  font-size: 12px;\\n}\\n\\n.is-large-size {\\n  max-width: 350px;\\n}\\n\\n.is-middle-size {\\n  max-width: 270px;\\n}\\n\\n.is-small-size {\\n  max-width: 250px;\\n}\\n\\n.is-middle-size .grid-container-root {\\n  width: 270px;\\n}\\n\\n.is-small-size .grid-container-root {\\n  width: 250px;\\n}\\n\\n.component-background {\\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\\n  border-bottom: solid 1px #999;\\n}\\n\\n.component-title {\\n  color: #ccc;\\n  font-size: 1em;\\n  text-align: right;\\n  vertical-align: middle; \\n  height: 32px;\\n  line-height: 32px; \\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  padding: 0 1em;\\n}\\n\\n.title-background {\\n  background-color: #555;\\n  border-top: solid 1px #999;\\n  border-left: solid 1px #999;\\n  border-right: solid 1px #999;\\n}\\n\\n.component-owner {\\n  font-size: 0.8em;\\n  padding: 10px;\\n  color: #ccc;\\n  vertical-align: middle; \\n  overflow: hidden;\\n  text-align: right;\\n  padding: 2px 1em;\\n  max-width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.owner-tag {\\n  width: -webkit-min-content;\\n  width: -moz-min-content;\\n  width: min-content;\\n  max-width: 100%;\\n  margin-left: auto;\\n  margin-right: 0; \\n  overflow: hidden;\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n  box-sizing: border-box;\\n  padding: 3px 9px;\\n  border-radius: 6px;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n\\n.card-image {\\n  width: 250px;\\n  max-height: 330px;\\n  padding: 8px;\\n  vertical-align: bottom;\\n  -o-object-fit: contain;\\n     object-fit: contain;\\n  box-sizing: border-box;\\n  background-color: rgba(204, 204, 204, 0.5);\\n}\\n\\n.zoom-button {\\n  position: absolute;\\n  left : 8px;\\n  bottom: -21px;\\n  width: 42px;\\n  height: 42px; \\n  border-radius: 100px; \\n  padding: 4px;\\n}\\n\\n.zoom-button > .material-icons {\\n  font-size: 24px;\\n  vertical-align: bottom;\\n}\\n\\n.position-right-bottom {\\n  position: absolute;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n.image-view-background {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.3);\\n  z-index: 9900;\\n}\\n\\n.image-view-background .close-button {\\n  position: absolute;\\n  right: 16px;\\n  top: 16px;\\n}\\n\\n.image-view-background .close-button > .material-icons {\\n  font-size: 36px;\\n}\\n\\n.contain-image {\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  padding: 16px;\\n  vertical-align: bottom;\\n  -o-object-fit: contain;\\n     object-fit: contain;\\n}\\n\\n.text-note-container {\\n  width: 100%;\\n  max-height: 400px; \\n  padding: 0.5em 1.5em;\\n  box-sizing: border-box;\\n  overflow: hidden auto;\\n  line-height: 1.8;\\n  border-left: solid 1px #999;\\n  border-right: solid 1px #999;\\n}\\n\\n.character-image-box {\\n  width: 100px;\\n  max-height: 120px;\\n  overflow: hidden;\\n  vertical-align: bottom;\\n  margin-left: 0.5em;\\n  margin-bottom: -6px;\\n  border-radius: 1em;\\n  z-index: 1;\\n}\\n\\n.character-image {\\n  padding: 0;\\n  width: 100%;\\n  vertical-align: bottom;\\n}\\n\\n.is-black-mask {\\n  -webkit-filter: brightness(0);\\n          filter: brightness(0);\\n }\\n\\n.is-harf-black-mask {\\n  -webkit-filter: brightness(0.5);\\n          filter: brightness(0.5);\\n }\\n\\n.character-grid-container {\\n  display: grid;\\n  grid-template-columns: -webkit-min-content auto;\\n  grid-template-columns: min-content auto;\\n  grid-template-rows: 1fr auto auto auto;\\n}\\n\\n.title-bg-area {\\n  grid-area: 3 / 1 / 4 / 3;\\n}\\n\\n.title-area {\\n  grid-area: 3 / 2 / 4 / 3;\\n}\\n\\n.owner-name-area {\\n  grid-area: 2 / 2 / 3 / 3;\\n}\\n\\n.image-area {\\n  grid-area: 1 / 1 / 4 / 2;\\n}\\n\\n.void-area {\\n  grid-area: 1 / 2 / 3 / 3;\\n}\\n\\n.dataElm-area {\\n  grid-area: 4 / 1 / 5 / 3;\\n}\\n\\n.grid-container-root {\\n  padding: 0.5em 1.2em;\\n  max-height: 250px;\\n  overflow: hidden auto;\\n  box-sizing: border-box;\\n  border-left: solid 1px #999;\\n  border-right: solid 1px #999;\\n}\\n\\n.grid-container {\\n  display: grid;\\n  grid-template-columns: 1fr fit-content(80%);\\n}\\n\\n.grid-container > div {\\n  box-sizing: border-box;\\n  line-height: 24px;\\n}\\n\\n.indetnt {\\n  padding-left: 0.5em;\\n}\\n\\n.section {\\n  max-width: 100%;\\n  grid-column: 1 / span 2;\\n}\\n\\n.section-text {\\n  font-size: 1.1em;\\n  font-weight: bold;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n}\\n\\n.note {\\n  margin-left: 0.5em;\\n  white-space: pre-wrap;\\n  overflow-wrap: break-word;\\n  font-size: 1em;\\n  line-height: 1.8;\\n}\\n\\n.textarea {\\n  width: 100%;\\n  height: 100%;\\n  font: inherit;\\n  font-size: inherit;\\n  line-height: inherit;\\n  background: none;\\n  border: none;\\n  border-radius: 2px;\\n  outline: none;\\n  color: #444;\\n  padding: 0;\\n  box-sizing: border-box;\\n  resize: none;\\n  overflow: hidden;\\n}\\n\\n.textarea:hover {\\n  background: #EEE;\\n}\\n\\n.textarea:focus {\\n  background: #FFF;\\n}\\n\\n.tag {\\n  padding-right: 1em;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n\\n.value {\\n  font-size: 1.2em;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  text-align: right;\\n}\\n\\n.hidden-spacer {\\n  visibility: hidden;\\n  height: 0px;\\n  min-width: 3em; \\n  overflow: hidden;\\n  white-space: pre-wrap;\\n}\\n\\n.textarea-spacer {\\n  visibility: hidden;\\n  min-width: 3em; \\n  height: auto;\\n  min-height: 24px;\\n  overflow: hidden;\\n  white-space: pre-wrap;\\n}\\n\\n.input {\\n  width: 100%;\\n  min-width: 3em; \\n  text-align: right;\\n  font: inherit;\\n  font-size: inherit;\\n  line-height: inherit;\\n  background: none;\\n  border: none;\\n  border-radius: 2px;\\n  outline: none;\\n  color: #444;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\n.input:hover {\\n  background: #EEE;\\n}\\n\\n.input:focus {\\n  background: #FFF;\\n}\\n\\ninput[type=number] {\\n  -moz-appearance: textfield;\\n}\\n\\ninput[type=number]:hover, input[type=number]:focus {\\n  -moz-appearance: number-input;\\n}\\n\\n.border {\\n  border-bottom: 1px dotted #888;\\n}\\n\\n.separator {\\n  padding: 2px 0 2px 0;\\n  border-bottom: 1px solid #888;\\n}\\n\\n.with-button-marign {\\n  padding-left : 60px;\\n}\\n\\n.is-fill {\\n  position: absolute;\\n  top: 0; \\n  left: 0; \\n  right: 0;\\n  bottom: 0;\\n}\\n\\n.is-bold {\\n  font-weight: bold;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.is-pointer-events-auto {\\n  pointer-events: auto;\\n}\\n\\n/**************** input-range ****************/\\n\\ninput[type='range'] {\\n  --slider-track-color: transparent; /* #ccc */\\n  --slider-fill-color: #555; /*#777 */\\n  --slider-border-color: #777;\\n  --slider-height: 0.8em;\\n  --slider-thumb-size: 1.0em;\\n  --range: calc(var(--max) - var(--min));\\n  --ratio: calc((var(--val) - var(--min))/var(--range));\\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\\n  margin: 0;\\n  padding: 0;\\n  background: transparent;\\n  font: 1em/1 arial, sans-serif;\\n  outline: 0;\\n  -webkit-appearance: none;\\n     -moz-appearance: none;\\n          appearance: none;\\n}\\n\\ninput[type='range'], input[type='range']::-webkit-slider-thumb {\\n  -webkit-appearance: none;\\n}\\n\\ninput[type='range']::-webkit-slider-runnable-track {\\n  box-sizing: border-box;\\n  border-top: solid 1px var(--slider-border-color);\\n  border-bottom: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\n\\ninput[type='range']::-webkit-slider-runnable-track {\\n  background: -webkit-gradient(linear, left top, left bottom, from(var(--slider-fill-color)), to(var(--slider-fill-color))) 0/var(--sx) 100% no-repeat var(--slider-track-color);\\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-moz-range-track {\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\n\\ninput[type='range']::-ms-track {\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: var(--slider-height);\\n  height: var(--slider-height);\\n  background: var(--slider-track-color);\\n}\\n\\ninput[type='range']::-moz-range-progress {\\n  height: var(--slider-height);\\n  background: var(--slider-fill-color);\\n  border-radius: var(--slider-height);\\n}\\n\\ninput[type='range']::-ms-fill-lower {\\n  height: var(--slider-height);\\n  background: var(--slider-fill-color);\\n  border-radius: var(--slider-height);\\n}\\n\\ninput[type='range']::-webkit-slider-thumb {\\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px  var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-moz-range-thumb {\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-ms-thumb {\\n  margin-top: 0;\\n  width: var(--slider-thumb-size);\\n  height: var(--slider-thumb-size);\\n  box-sizing: border-box;\\n  border: solid 1px var(--slider-border-color);\\n  border-radius: 2em;\\n  background: #ddd;\\n  cursor: pointer;\\n}\\n\\ninput[type='range']::-ms-tooltip {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L292ZXJ2aWV3LXBhbmVsL292ZXJ2aWV3LXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxhQUFhO0VBQ2IseUJBQTRCO01BQTVCLDRCQUE0QjtFQUM1QixpQ0FBaUM7QUFDbkM7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UscUZBQXFGO0VBQ3JGLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxjQUFjO0VBQ2QsaUJBQWlCO0VBQ2pCLHNCQUFzQjtFQUN0QixZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsMEJBQTBCO0VBQzFCLDJCQUEyQjtFQUMzQiw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLDBCQUFrQjtFQUFsQix1QkFBa0I7RUFBbEIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsdUNBQXVDO0VBQ3ZDLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQix1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RCxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHFDQUFxQztBQUN2Qzs7QUFFQTtFQUNFLDhLQUFvSTtFQUFwSSxvSUFBb0k7RUFDcEksZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQzs7QUFFQTtFQUNFLDZFQUE2RTtFQUM3RSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L292ZXJ2aWV3LXBhbmVsL292ZXJ2aWV3LXBhbmVsLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tcG9uZW50IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBtYXgtaGVpZ2h0OiAxMDAlO1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICBjb2xvcjogIzQ0NDtcbiAgei1pbmRleDogOTAwMDtcbiAgb3ZlcnNjcm9sbC1iZWhhdmlvcjogY29udGFpbjtcbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xufVxuXG4uY29tcG9uZW50LWNvbnRlbnQge1xuICBmb250LXNpemU6IDEycHg7XG59XG5cbi5pcy1sYXJnZS1zaXplIHtcbiAgbWF4LXdpZHRoOiAzNTBweDtcbn1cblxuLmlzLW1pZGRsZS1zaXplIHtcbiAgbWF4LXdpZHRoOiAyNzBweDtcbn1cblxuLmlzLXNtYWxsLXNpemUge1xuICBtYXgtd2lkdGg6IDI1MHB4O1xufVxuXG4uaXMtbWlkZGxlLXNpemUgLmdyaWQtY29udGFpbmVyLXJvb3Qge1xuICB3aWR0aDogMjcwcHg7XG59XG5cbi5pcy1zbWFsbC1zaXplIC5ncmlkLWNvbnRhaW5lci1yb290IHtcbiAgd2lkdGg6IDI1MHB4O1xufVxuXG4uY29tcG9uZW50LWJhY2tncm91bmQge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoLTMwZGVnLCByZ2JhKDI0MCwyMTgsMTg5LCAwLjkpLCByZ2JhKDI1NSwgMjQ0LCAyMzIsIDAuOSkpO1xuICBib3JkZXItYm90dG9tOiBzb2xpZCAxcHggIzk5OTtcbn1cblxuLmNvbXBvbmVudC10aXRsZSB7XG4gIGNvbG9yOiAjY2NjO1xuICBmb250LXNpemU6IDFlbTtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IFxuICBoZWlnaHQ6IDMycHg7XG4gIGxpbmUtaGVpZ2h0OiAzMnB4OyBcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIHBhZGRpbmc6IDAgMWVtO1xufVxuXG4udGl0bGUtYmFja2dyb3VuZCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG4gIGJvcmRlci10b3A6IHNvbGlkIDFweCAjOTk5O1xuICBib3JkZXItbGVmdDogc29saWQgMXB4ICM5OTk7XG4gIGJvcmRlci1yaWdodDogc29saWQgMXB4ICM5OTk7XG59XG5cbi5jb21wb25lbnQtb3duZXIge1xuICBmb250LXNpemU6IDAuOGVtO1xuICBwYWRkaW5nOiAxMHB4O1xuICBjb2xvcjogI2NjYztcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgXG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBwYWRkaW5nOiAycHggMWVtO1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbi5vd25lci10YWcge1xuICB3aWR0aDogbWluLWNvbnRlbnQ7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gIG1hcmdpbi1yaWdodDogMDsgXG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGNvbG9yOiAjQ0NDO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBhZGRpbmc6IDNweCA5cHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG59XG5cbi5jYXJkLWltYWdlIHtcbiAgd2lkdGg6IDI1MHB4O1xuICBtYXgtaGVpZ2h0OiAzMzBweDtcbiAgcGFkZGluZzogOHB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICBvYmplY3QtZml0OiBjb250YWluO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIwNCwgMjA0LCAyMDQsIDAuNSk7XG59XG5cbi56b29tLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdCA6IDhweDtcbiAgYm90dG9tOiAtMjFweDtcbiAgd2lkdGg6IDQycHg7XG4gIGhlaWdodDogNDJweDsgXG4gIGJvcmRlci1yYWRpdXM6IDEwMHB4OyBcbiAgcGFkZGluZzogNHB4O1xufVxuXG4uem9vbS1idXR0b24gPiAubWF0ZXJpYWwtaWNvbnMge1xuICBmb250LXNpemU6IDI0cHg7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG59XG5cbi5wb3NpdGlvbi1yaWdodC1ib3R0b20ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbi5pbWFnZS12aWV3LWJhY2tncm91bmQge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjMpO1xuICB6LWluZGV4OiA5OTAwO1xufVxuXG4uaW1hZ2Utdmlldy1iYWNrZ3JvdW5kIC5jbG9zZS1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAxNnB4O1xuICB0b3A6IDE2cHg7XG59XG5cbi5pbWFnZS12aWV3LWJhY2tncm91bmQgLmNsb3NlLWJ1dHRvbiA+IC5tYXRlcmlhbC1pY29ucyB7XG4gIGZvbnQtc2l6ZTogMzZweDtcbn1cblxuLmNvbnRhaW4taW1hZ2Uge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBwYWRkaW5nOiAxNnB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICBvYmplY3QtZml0OiBjb250YWluO1xufVxuXG4udGV4dC1ub3RlLWNvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtaGVpZ2h0OiA0MDBweDsgXG4gIHBhZGRpbmc6IDAuNWVtIDEuNWVtO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogaGlkZGVuIGF1dG87XG4gIGxpbmUtaGVpZ2h0OiAxLjg7XG4gIGJvcmRlci1sZWZ0OiBzb2xpZCAxcHggIzk5OTtcbiAgYm9yZGVyLXJpZ2h0OiBzb2xpZCAxcHggIzk5OTtcbn1cblxuLmNoYXJhY3Rlci1pbWFnZS1ib3gge1xuICB3aWR0aDogMTAwcHg7XG4gIG1heC1oZWlnaHQ6IDEyMHB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICBtYXJnaW4tbGVmdDogMC41ZW07XG4gIG1hcmdpbi1ib3R0b206IC02cHg7XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgei1pbmRleDogMTtcbn1cblxuLmNoYXJhY3Rlci1pbWFnZSB7XG4gIHBhZGRpbmc6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xufVxuXG4uaXMtYmxhY2stbWFzayB7XG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwKTtcbiB9XG5cbiAuaXMtaGFyZi1ibGFjay1tYXNrIHtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuNSk7XG4gfVxuXG4uY2hhcmFjdGVyLWdyaWQtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtaW4tY29udGVudCBhdXRvO1xuICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmciBhdXRvIGF1dG8gYXV0bztcbn1cblxuLnRpdGxlLWJnLWFyZWEge1xuICBncmlkLWFyZWE6IDMgLyAxIC8gNCAvIDM7XG59XG5cbi50aXRsZS1hcmVhIHtcbiAgZ3JpZC1hcmVhOiAzIC8gMiAvIDQgLyAzO1xufVxuXG4ub3duZXItbmFtZS1hcmVhIHtcbiAgZ3JpZC1hcmVhOiAyIC8gMiAvIDMgLyAzO1xufVxuXG4uaW1hZ2UtYXJlYSB7XG4gIGdyaWQtYXJlYTogMSAvIDEgLyA0IC8gMjtcbn1cblxuLnZvaWQtYXJlYSB7XG4gIGdyaWQtYXJlYTogMSAvIDIgLyAzIC8gMztcbn1cblxuLmRhdGFFbG0tYXJlYSB7XG4gIGdyaWQtYXJlYTogNCAvIDEgLyA1IC8gMztcbn1cblxuLmdyaWQtY29udGFpbmVyLXJvb3Qge1xuICBwYWRkaW5nOiAwLjVlbSAxLjJlbTtcbiAgbWF4LWhlaWdodDogMjUwcHg7XG4gIG92ZXJmbG93OiBoaWRkZW4gYXV0bztcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLWxlZnQ6IHNvbGlkIDFweCAjOTk5O1xuICBib3JkZXItcmlnaHQ6IHNvbGlkIDFweCAjOTk5O1xufVxuXG4uZ3JpZC1jb250YWluZXIge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBmaXQtY29udGVudCg4MCUpO1xufVxuXG4uZ3JpZC1jb250YWluZXIgPiBkaXYge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBsaW5lLWhlaWdodDogMjRweDtcbn1cblxuLmluZGV0bnQge1xuICBwYWRkaW5nLWxlZnQ6IDAuNWVtO1xufVxuXG4uc2VjdGlvbiB7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgZ3JpZC1jb2x1bW46IDEgLyBzcGFuIDI7XG59XG5cbi5zZWN0aW9uLXRleHQge1xuICBmb250LXNpemU6IDEuMWVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5ub3RlIHtcbiAgbWFyZ2luLWxlZnQ6IDAuNWVtO1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gIGZvbnQtc2l6ZTogMWVtO1xuICBsaW5lLWhlaWdodDogMS44O1xufVxuXG4udGV4dGFyZWEge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBmb250OiBpbmhlcml0O1xuICBmb250LXNpemU6IGluaGVyaXQ7XG4gIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgb3V0bGluZTogbm9uZTtcbiAgY29sb3I6ICM0NDQ7XG4gIHBhZGRpbmc6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHJlc2l6ZTogbm9uZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLnRleHRhcmVhOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogI0VFRTtcbn1cblxuLnRleHRhcmVhOmZvY3VzIHtcbiAgYmFja2dyb3VuZDogI0ZGRjtcbn1cblxuLnRhZyB7XG4gIHBhZGRpbmctcmlnaHQ6IDFlbTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG59XG5cbi52YWx1ZSB7XG4gIGZvbnQtc2l6ZTogMS4yZW07XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuLmhpZGRlbi1zcGFjZXIge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIGhlaWdodDogMHB4O1xuICBtaW4td2lkdGg6IDNlbTsgXG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLnRleHRhcmVhLXNwYWNlciB7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgbWluLXdpZHRoOiAzZW07IFxuICBoZWlnaHQ6IGF1dG87XG4gIG1pbi1oZWlnaHQ6IDI0cHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLmlucHV0IHtcbiAgd2lkdGg6IDEwMCU7XG4gIG1pbi13aWR0aDogM2VtOyBcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIGZvbnQ6IGluaGVyaXQ7XG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcbiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xuICBvdXRsaW5lOiBub25lO1xuICBjb2xvcjogIzQ0NDtcbiAgcGFkZGluZzogMDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuLmlucHV0OmhvdmVyIHtcbiAgYmFja2dyb3VuZDogI0VFRTtcbn1cblxuLmlucHV0OmZvY3VzIHtcbiAgYmFja2dyb3VuZDogI0ZGRjtcbn1cblxuaW5wdXRbdHlwZT1udW1iZXJdIHtcbiAgLW1vei1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XG59XG5cbmlucHV0W3R5cGU9bnVtYmVyXTpob3ZlciwgaW5wdXRbdHlwZT1udW1iZXJdOmZvY3VzIHtcbiAgLW1vei1hcHBlYXJhbmNlOiBudW1iZXItaW5wdXQ7XG59XG5cbi5ib3JkZXIge1xuICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkICM4ODg7XG59XG5cbi5zZXBhcmF0b3Ige1xuICBwYWRkaW5nOiAycHggMCAycHggMDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM4ODg7XG59XG5cbi53aXRoLWJ1dHRvbi1tYXJpZ24ge1xuICBwYWRkaW5nLWxlZnQgOiA2MHB4O1xufVxuXG4uaXMtZmlsbCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwOyBcbiAgbGVmdDogMDsgXG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbi5pcy1ib2xkIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG59XG5cbi8qKioqKioqKioqKioqKioqIGlucHV0LXJhbmdlICoqKioqKioqKioqKioqKiovXG5cbmlucHV0W3R5cGU9J3JhbmdlJ10ge1xuICAtLXNsaWRlci10cmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7IC8qICNjY2MgKi9cbiAgLS1zbGlkZXItZmlsbC1jb2xvcjogIzU1NTsgLyojNzc3ICovXG4gIC0tc2xpZGVyLWJvcmRlci1jb2xvcjogIzc3NztcbiAgLS1zbGlkZXItaGVpZ2h0OiAwLjhlbTtcbiAgLS1zbGlkZXItdGh1bWItc2l6ZTogMS4wZW07XG4gIC0tcmFuZ2U6IGNhbGModmFyKC0tbWF4KSAtIHZhcigtLW1pbikpO1xuICAtLXJhdGlvOiBjYWxjKCh2YXIoLS12YWwpIC0gdmFyKC0tbWluKSkvdmFyKC0tcmFuZ2UpKTtcbiAgLS1zeDogY2FsYyguNSp2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkgKyB2YXIoLS1yYXRpbykqKDEwMCUgLSB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkpKTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgZm9udDogMWVtLzEgYXJpYWwsIHNhbnMtc2VyaWY7XG4gIG91dGxpbmU6IDA7XG4gIGFwcGVhcmFuY2U6IG5vbmU7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ10sIGlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci10b3A6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpLCB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcikpIDAvdmFyKC0tc3gpIDEwMCUgbm8tcmVwZWF0IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRyYWNrIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXByb2dyZXNzIHtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLWZpbGwtbG93ZXIge1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XG4gIG1hcmdpbi10b3A6IGNhbGMoKHZhcigtLXNsaWRlci1oZWlnaHQpIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSAvIDIgLSAxcHgpO1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIGJhY2tncm91bmQ6ICNkZGQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS10aHVtYiB7XG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10aHVtYiB7XG4gIG1hcmdpbi10b3A6IDA7XG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10b29sdGlwIHtcbiAgZGlzcGxheTogbm9uZTtcbn0iXX0= */\"","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  ViewChild,\n} from '@angular/core';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { DataElement } from '@udonarium/data-element';\nimport { TabletopObject } from '@udonarium/tabletop-object';\nimport { GameObjectInventoryService } from 'service/game-object-inventory.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'overview-panel',\n  templateUrl: './overview-panel.component.html',\n  styleUrls: ['./overview-panel.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('fadeInOut', [\n      transition('void => *', [\n        animate('100ms ease-out', keyframes([\n          style({ opacity: 0, offset: 0 }),\n          style({ opacity: 1, offset: 1.0 })\n        ]))\n      ]),\n      transition('* => void', [\n        animate('100ms ease-in', keyframes([\n          style({ opacity: 1, offset: 0 }),\n          style({ opacity: 0, offset: 1.0 })\n        ]))\n      ])\n    ])\n  ]\n})\nexport class OverviewPanelComponent implements AfterViewInit, OnDestroy {\n  @ViewChild('draggablePanel', { static: true }) draggablePanel: ElementRef<HTMLElement>;\n  @Input() tabletopObject: TabletopObject = null;\n\n  @Input() left: number = 0;\n  @Input() top: number = 0;\n\n  get imageUrl(): string { return this.tabletopObject && this.tabletopObject.imageFile ? this.tabletopObject.imageFile.url : ''; }\n  get hasImage(): boolean { return 0 < this.imageUrl.length; }\n\n  get inventoryDataElms(): DataElement[] { return this.tabletopObject ? this.getInventoryTags(this.tabletopObject) : []; }\n  get dataElms(): DataElement[] { return this.tabletopObject && this.tabletopObject.detailDataElement ? this.tabletopObject.detailDataElement.children as DataElement[] : []; }\n  get hasDataElms(): boolean { return 0 < this.dataElms.length; }\n\n  get newLineString(): string { return this.inventoryService.newLineString; }\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\n\n  get pointerEventsStyle(): any { return { 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }; }\n\n  isOpenImageView: boolean = false;\n\n  constructor(\n    private inventoryService: GameObjectInventoryService,\n    private changeDetector: ChangeDetectorRef,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngAfterViewInit() {\n    this.initPanelPosition();\n    setTimeout(() => {\n      this.adjustPositionRoot();\n    }, 16);\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.tabletopObject || !object || !(object instanceof ObjectNode)) return;\n        if (this.tabletopObject === object || this.tabletopObject.contains(object)) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  private initPanelPosition() {\n    let panel: HTMLElement = this.draggablePanel.nativeElement;\n    let outerWidth = panel.offsetWidth;\n    let outerHeight = panel.offsetHeight;\n\n    let offsetLeft = this.left + 100;\n    let offsetTop = this.top - outerHeight - 50;\n\n    let isCollideLeft = false;\n    let isCollideTop = false;\n\n    if (window.innerWidth < offsetLeft + outerWidth) {\n      offsetLeft = window.innerWidth - outerWidth;\n      isCollideLeft = true;\n    }\n\n    if (offsetTop <= 0) {\n      offsetTop = 0;\n      isCollideTop = true;\n    }\n\n    if (isCollideLeft) {\n      offsetLeft = this.left - outerWidth - 100;\n    }\n\n    if (offsetLeft < 0) offsetLeft = 0;\n    if (offsetTop < 0) offsetTop = 0;\n\n    panel.style.left = offsetLeft + 'px';\n    panel.style.top = offsetTop + 'px';\n  }\n\n  private adjustPositionRoot() {\n    let panel: HTMLElement = this.draggablePanel.nativeElement;\n\n    let panelBox = panel.getBoundingClientRect();\n\n    let diffLeft = 0;\n    let diffTop = 0;\n\n    if (window.innerWidth < panelBox.right + diffLeft) {\n      diffLeft += window.innerWidth - (panelBox.right + diffLeft);\n    }\n    if (panelBox.left + diffLeft < 0) {\n      diffLeft += 0 - (panelBox.left + diffLeft);\n    }\n\n    if (window.innerHeight < panelBox.bottom + diffTop) {\n      diffTop += window.innerHeight - (panelBox.bottom + diffTop);\n    }\n    if (panelBox.top + diffTop < 0) {\n      diffTop += 0 - (panelBox.top + diffTop);\n    }\n\n    panel.style.left = panel.offsetLeft + diffLeft + 'px';\n    panel.style.top = panel.offsetTop + diffTop + 'px';\n  }\n\n  chanageImageView(isOpen: boolean) {\n    this.isOpenImageView = isOpen;\n  }\n\n  private getInventoryTags(gameObject: TabletopObject): DataElement[] {\n    return this.inventoryService.tableInventory.dataElementMap.get(gameObject.identifier);\n  }\n}\n","export default \".box {\\n  border-bottom:1px dotted #888;\\n}\\n.image {\\n  padding: 0px;\\n  width: 64px;\\n  height: 64px;\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n.contain {\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3Bhc3N3b3JkLWNoZWNrL3Bhc3N3b3JkLWNoZWNrLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyw0QkFBNEI7RUFDNUIsd0JBQXdCO0FBQzFCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L3Bhc3N3b3JkLWNoZWNrL3Bhc3N3b3JkLWNoZWNrLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYm94IHtcbiAgYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7XG59XG4uaW1hZ2Uge1xuICBwYWRkaW5nOiAwcHg7XG4gIHdpZHRoOiA2NHB4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmNvbnRhaW4ge1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG59Il19 */\"","import { Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { EventSystem, Network } from '@udonarium/core/system';\n\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'password-check',\n  templateUrl: './password-check.component.html',\n  styleUrls: ['./password-check.component.css']\n})\nexport class PasswordCheckComponent implements OnInit, OnDestroy {\n  password: string = '';\n  help: string = '';\n\n  private needPassword: string = '';\n\n  get peerId(): string { return Network.peerId; }\n  get isConnected(): boolean {\n    return Network.peerIds.length <= 1 ? false : true;\n  }\n\n  constructor(\n    private panelService: PanelService,\n    private modalService: ModalService\n  ) {\n    this.needPassword = modalService.option.password ? modalService.option.password : '';\n  }\n\n  ngOnInit() {\n    this.modalService.title = this.panelService.title = 'パスワード'\n    EventSystem.register(this);\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  onInputChange(value: string) {\n    this.help = '';\n  }\n\n  submit() {\n    if (this.needPassword === this.password) this.modalService.resolve(this.password);\n    this.help = 'パスワードが違います';\n  }\n}","export default \".component {\\n  position: absolute;\\n  overflow: visible;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n}\\n\\n.is-transition {\\n  -webkit-transition: opacity 0.5s ease-out, -webkit-transform 133ms linear;\\n  transition: opacity 0.5s ease-out, -webkit-transform 133ms linear;\\n  transition: transform 133ms linear, opacity 0.5s ease-out;\\n  transition: transform 133ms linear, opacity 0.5s ease-out, -webkit-transform 133ms linear;\\n}\\n\\n.peer-cursor {\\n  height: 45px;\\n  width: 45px;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  box-sizing: border-box;\\n  border: solid 1px rgba(240, 218, 189);\\n  border-radius: 50% 50% 5% 50%;\\n  background-color: rgba(240, 218, 189, 0.9);\\n  -webkit-transform-origin: 100% 100%;\\n          transform-origin: 100% 100%;\\n  -webkit-transform: translateX(-100%) translateY(-100%)  rotateX(-90deg) rotateZ(45deg);\\n          transform: translateX(-100%) translateY(-100%)  rotateX(-90deg) rotateZ(45deg);\\n}\\n\\n.icon {\\n  overflow: visible;\\n  height: 100%;\\n  width: 100%;\\n  border-radius: 100%;\\n  background-position: top, center;\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n  -webkit-transform: rotateZ(-45deg) scale(0.85);\\n          transform: rotateZ(-45deg) scale(0.85);\\n}\\n\\n.name {\\n  box-sizing: border-box;\\n  font-size: 7px;\\n  padding: 2px 5px;\\n  border-radius: 14px;\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\n.is-center {\\n  position: absolute;\\n  left: 50%;\\n  top: -26px;\\n  -webkit-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3BlZXItY3Vyc29yL3BlZXItY3Vyc29yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsaUJBQWlCO0VBQ2pCLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIscUJBQWlCO01BQWpCLGlCQUFpQjtFQUNqQixvQkFBb0I7RUFDcEIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UseUVBQXlEO0VBQXpELGlFQUF5RDtFQUF6RCx5REFBeUQ7RUFBekQseUZBQXlEO0FBQzNEOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsT0FBTztFQUNQLE1BQU07RUFDTixzQkFBc0I7RUFDdEIscUNBQXFDO0VBQ3JDLDZCQUE2QjtFQUM3QiwwQ0FBMEM7RUFDMUMsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixzRkFBOEU7VUFBOUUsOEVBQThFO0FBQ2hGOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWixXQUFXO0VBQ1gsbUJBQW1CO0VBQ25CLGdDQUFnQztFQUNoQyw0QkFBNEI7RUFDNUIsc0JBQXNCO0VBQ3RCLDhDQUFzQztVQUF0QyxzQ0FBc0M7QUFDeEM7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsY0FBYztFQUNkLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLHVDQUF1QztBQUN6Qzs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsVUFBVTtFQUNWLG1DQUEyQjtVQUEzQiwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L3BlZXItY3Vyc29yL3BlZXItY3Vyc29yLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tcG9uZW50IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTMzbXMgbGluZWFyLCBvcGFjaXR5IDAuNXMgZWFzZS1vdXQ7XG59XG5cbi5wZWVyLWN1cnNvciB7XG4gIGhlaWdodDogNDVweDtcbiAgd2lkdGg6IDQ1cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgdG9wOiAwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCByZ2JhKDI0MCwgMjE4LCAxODkpO1xuICBib3JkZXItcmFkaXVzOiA1MCUgNTAlIDUlIDUwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsIDIxOCwgMTg5LCAwLjkpO1xuICB0cmFuc2Zvcm0tb3JpZ2luOiAxMDAlIDEwMCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSkgdHJhbnNsYXRlWSgtMTAwJSkgIHJvdGF0ZVgoLTkwZGVnKSByb3RhdGVaKDQ1ZGVnKTtcbn1cblxuLmljb24ge1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogdG9wLCBjZW50ZXI7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gIHRyYW5zZm9ybTogcm90YXRlWigtNDVkZWcpIHNjYWxlKDAuODUpO1xufVxuXG4ubmFtZSB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtc2l6ZTogN3B4O1xuICBwYWRkaW5nOiAycHggNXB4O1xuICBib3JkZXItcmFkaXVzOiAxNHB4O1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuXG4uaXMtY2VudGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiA1MCU7XG4gIHRvcDogLTI2cHg7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbn1cblxuLmlzLTNkIHtcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xufVxuXG4uaXMtcG9pbnRlci1ldmVudHMtbm9uZSB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufSJdfQ== */\"","import { AfterViewInit, Component, ElementRef, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\n\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerCursor } from '@udonarium/peer-cursor';\n\nimport { PointerCoordinate, PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\n@Component({\n  selector: 'peer-cursor, [peer-cursor]',\n  templateUrl: './peer-cursor.component.html',\n  styleUrls: ['./peer-cursor.component.css']\n})\nexport class PeerCursorComponent implements OnInit, AfterViewInit, OnDestroy {\n\n  @ViewChild('cursor', { static: false }) cursorElementRef: ElementRef;\n  @ViewChild('opacity', { static: false }) opacityElementRef: ElementRef;\n  @Input() cursor: PeerCursor = PeerCursor.myCursor;\n\n  get iconUrl(): string { return this.cursor.image.url; }\n  get name(): string { return this.cursor.name }\n  get isMine(): boolean { return this.cursor.isMine; }\n\n  private cursorElement: HTMLElement = null;\n  private opacityElement: HTMLElement = null;\n  private fadeOutTimer: NodeJS.Timer = null;\n\n  private updateInterval: NodeJS.Timer = null;\n  private callcack: any = (e) => this.onMouseMove(e);\n\n  private _x: number = 0;\n  private _y: number = 0;\n  private _target: HTMLElement;\n\n  get delayMs(): number {\n    let maxDelay = Network.peerIds.length * 16.6;\n    return maxDelay < 100 ? 100 : maxDelay;\n  }\n\n  constructor(\n    private tabletopService: TabletopService,\n    private ngZone: NgZone\n  ) { }\n\n  ngOnInit() {\n    if (!this.isMine) {\n      EventSystem.register(this)\n        .on('CURSOR_MOVE', event => {\n          if (event.sendFrom !== this.cursor.peerId) return;\n          this.tabletopService.addBatch(() => {\n            this.stopTransition();\n            this.setAnimatedTransition();\n            this.setPosition(event.data[0], event.data[1], event.data[2]);\n            this.resetFadeOut();\n          }, this);\n        });\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.isMine) {\n      this.ngZone.runOutsideAngular(() => {\n        document.body.addEventListener('mousemove', this.callcack);\n        document.body.addEventListener('touchmove', this.callcack);\n      });\n    } else {\n      this.cursorElement = this.cursorElementRef.nativeElement;\n      this.opacityElement = this.opacityElementRef.nativeElement;\n      this.setAnimatedTransition();\n      this.setPosition(0, 0, 0);\n      this.resetFadeOut();\n    }\n  }\n\n  ngOnDestroy() {\n    document.body.removeEventListener('mousemove', this.callcack);\n    document.body.removeEventListener('touchmove', this.callcack);\n    EventSystem.unregister(this);\n    this.tabletopService.removeBatch(this);\n  }\n\n  private onMouseMove(e: any) {\n    let x = e.touches ? e.changedTouches[0].pageX : e.pageX;\n    let y = e.touches ? e.changedTouches[0].pageY : e.pageY;\n    if (x === this._x && y === this._y) return;\n    this._x = x;\n    this._y = y;\n    this._target = e.target;\n    if (!this.updateInterval) {\n      this.updateInterval = setTimeout(() => {\n        this.updateInterval = null;\n        this.calcLocalCoordinate(this._x, this._y, this._target);\n      }, this.delayMs);\n    }\n  }\n\n  private calcLocalCoordinate(x: number, y: number, target: HTMLElement) {\n    if (!document.getElementById('app-table-layer').contains(target)) return;\n\n    let dragArea = document.getElementById('app-game-table');\n    let coordinate: PointerCoordinate = { x: x, y: y, z: 0 };\n    if (target.contains(dragArea)) {\n      coordinate = PointerDeviceService.convertToLocal(coordinate, dragArea);\n      coordinate.z = 0;\n    } else {\n      coordinate = PointerDeviceService.convertLocalToLocal(coordinate, target, dragArea);\n    }\n\n    EventSystem.call('CURSOR_MOVE', [coordinate.x, coordinate.y, coordinate.z]);\n  }\n\n  private resetFadeOut() {\n    this.opacityElement.style.opacity = '1.0';\n    clearTimeout(this.fadeOutTimer);\n    this.fadeOutTimer = setTimeout(() => {\n      this.opacityElement.style.opacity = '0.0';\n    }, 3000);\n  }\n\n  private stopTransition() {\n    this.cursorElement.style.transform = window.getComputedStyle(this.cursorElement).transform;\n  }\n\n  private setAnimatedTransition() {\n    this.cursorElement.style.transition = `transform ${this.delayMs + 33}ms linear, opacity 0.5s ease-out`;\n  }\n\n  private setPosition(x: number, y: number, z: number) {\n    this.cursorElement.style.transform = 'translateX(' + x + 'px) translateY(' + y + 'px) translateZ(' + z + 'px)';\n  }\n}\n","export default \".image {\\n  padding: 0px;\\n  width: 128px;\\n  height: 128px;\\n  display: table-cell;\\n  vertical-align: top;\\n}\\n\\n.image img{\\n  width: auto;\\n  height: auto;\\n  max-width:100%;\\n  max-height:100%;\\n  vertical-align: bottom;\\n}\\n\\n.cover {\\n  background-position: center top;\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3BlZXItbWVudS9wZWVyLW1lbnUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7RUFDWixZQUFZO0VBQ1osYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGNBQWM7RUFDZCxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsK0JBQStCO0VBQy9CLDRCQUE0QjtFQUM1QixzQkFBc0I7QUFDeEIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvcGVlci1tZW51L3BlZXItbWVudS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltYWdlIHtcbiAgcGFkZGluZzogMHB4O1xuICB3aWR0aDogMTI4cHg7XG4gIGhlaWdodDogMTI4cHg7XG4gIGRpc3BsYXk6IHRhYmxlLWNlbGw7XG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XG59XG5cbi5pbWFnZSBpbWd7XG4gIHdpZHRoOiBhdXRvO1xuICBoZWlnaHQ6IGF1dG87XG4gIG1heC13aWR0aDoxMDAlO1xuICBtYXgtaGVpZ2h0OjEwMCU7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG59XG5cbi5jb3ZlciB7XG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciB0b3A7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG59Il19 */\"","import { AfterViewInit, Component, NgZone, OnDestroy, OnInit } from '@angular/core';\n\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerCursor } from '@udonarium/peer-cursor';\n\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\nimport { LobbyComponent } from 'component/lobby/lobby.component';\nimport { AppConfigService } from 'service/app-config.service';\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'peer-menu',\n  templateUrl: './peer-menu.component.html',\n  styleUrls: ['./peer-menu.component.css']\n})\nexport class PeerMenuComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  targetPeerId: string = '';\n  networkService = Network\n  gameRoomService = ObjectStore.instance;\n  help: string = '';\n\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\n\n  constructor(\n    private ngZone: NgZone,\n    private modalService: ModalService,\n    private panelService: PanelService,\n    public appConfigService: AppConfigService\n  ) { }\n\n  ngOnInit() {\n    this.panelService.title = '接続情報';\n  }\n\n  ngAfterViewInit() {\n    EventSystem.register(this)\n      .on('OPEN_NETWORK', event => {\n        this.ngZone.run(() => { });\n      });\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  changeIcon() {\n    this.modalService.open<string>(FileSelecterComponent).then(value => {\n      if (!this.myPeer || !value) return;\n      this.myPeer.imageIdentifier = value;\n    });\n  }\n\n  private resetPeerIfNeeded() {\n    if (Network.peerContexts.length < 1) {\n      Network.open();\n      PeerCursor.myCursor.peerId = Network.peerId;\n    }\n  }\n\n  connectPeer() {\n    this.help = '';\n    let context = PeerContext.create(this.targetPeerId);\n    if (!context.isRoom) {\n      ObjectStore.instance.clearDeleteHistory();\n      Network.connect(this.targetPeerId);\n    } else {\n      if (Network.peerContexts.length) {\n        this.help = '入力されたIDはルーム用のIDのようですが、ルーム用IDと通常のIDを混在させることはできません。プライベート接続を切ってください。（※ページリロードで切断ができます）';\n        return;\n      }\n\n      Network.open(Network.peerContext.id, context.room, context.roomName, context.password);\n      PeerCursor.myCursor.peerId = Network.peerId;\n\n      let dummy = {};\n      EventSystem.register(dummy)\n        .on('OPEN_NETWORK', event => {\n          ObjectStore.instance.clearDeleteHistory();\n          Network.connect(this.targetPeerId);\n          EventSystem.unregister(dummy);\n          EventSystem.register(dummy)\n            .on('CONNECT_PEER', event => {\n              console.log('接続成功！', event.data.peer);\n              this.resetPeerIfNeeded();\n              EventSystem.unregister(dummy);\n            })\n            .on('DISCONNECT_PEER', event => {\n              console.warn('接続失敗', event.data.peer);\n              this.resetPeerIfNeeded();\n              EventSystem.unregister(dummy);\n            });\n        });\n    }\n  }\n\n  async connectPeerHistory() {\n    this.help = '';\n    let conectPeers: PeerContext[] = [];\n    let room: string = '';\n\n    for (let peer of this.appConfigService.peerHistory) {\n      let context = PeerContext.create(peer);\n      if (context.isRoom) {\n        if (room !== context.room) conectPeers = [];\n        room = context.room;\n        conectPeers.push(context);\n      } else {\n        if (room !== context.room) conectPeers = [];\n        conectPeers.push(context);\n      }\n    }\n\n    if (room.length) {\n      console.warn('connectPeerRoom <' + room + '>');\n      let conectPeers = [];\n      let peerIds = await Network.listAllPeers();\n      for (let id of peerIds) {\n        console.log(id);\n        let context = new PeerContext(id);\n        if (context.room === room) {\n          conectPeers.push(context);\n        }\n      }\n      if (conectPeers.length < 1) {\n        this.help = '前回接続していたルームが見つかりませんでした。既に解散しているかもしれません。';\n        console.warn('Room is already closed...');\n        return;\n      }\n      Network.open(PeerContext.generateId(), conectPeers[0].room, conectPeers[0].roomName, conectPeers[0].password);\n    } else {\n      console.warn('connectPeers ' + conectPeers.length);\n      Network.open();\n    }\n\n    PeerCursor.myCursor.peerId = Network.peerId;\n\n    let listener = EventSystem.register(this);\n    listener.on('OPEN_NETWORK', event => {\n      console.log('OPEN_NETWORK', event.data.peer);\n      EventSystem.unregisterListener(listener);\n      ObjectStore.instance.clearDeleteHistory();\n      for (let context of conectPeers) {\n        Network.connect(context.fullstring);\n      }\n    });\n  }\n\n  showLobby() {\n    this.modalService.open(LobbyComponent, { width: 700, height: 400, left: 0, top: 400 });\n  }\n\n  findPeerName(peerId: string) {\n    const peerCursor = PeerCursor.find(peerId);\n    return peerCursor ? peerCursor.name : '';\n  }\n}\n","export default \".box {\\n  border-bottom:1px dotted #888;\\n}\\n.image {\\n  padding: 0px;\\n  width: 64px;\\n  height: 64px;\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n.contain {\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n}\\n.input {\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3Jvb20tc2V0dGluZy9yb29tLXNldHRpbmcuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDZCQUE2QjtBQUMvQjtBQUNBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7RUFDWCxZQUFZO0VBQ1oscUJBQXFCO0VBQ3JCLG1CQUFtQjtBQUNyQjtBQUVBO0VBQ0Usa0NBQWtDO0VBQ2xDLDRCQUE0QjtFQUM1Qix3QkFBd0I7QUFDMUI7QUFFQTtFQUNFLFdBQVc7QUFDYiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9yb29tLXNldHRpbmcvcm9vbS1zZXR0aW5nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYm94IHtcbiAgYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7XG59XG4uaW1hZ2Uge1xuICBwYWRkaW5nOiAwcHg7XG4gIHdpZHRoOiA2NHB4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmNvbnRhaW4ge1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG59XG5cbi5pbnB1dCB7XG4gIHdpZHRoOiAxMDAlO1xufSJdfQ== */\"","import { Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { PeerCursor } from '@udonarium/peer-cursor';\n\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'room-setting',\n  templateUrl: './room-setting.component.html',\n  styleUrls: ['./room-setting.component.css']\n})\nexport class RoomSettingComponent implements OnInit, OnDestroy {\n  peers: PeerContext[] = [];\n  isReloading: boolean = false;\n\n  roomName: string = 'ふつうの部屋';\n  password: string = '';\n  isPrivate: boolean = false;\n\n  get peerId(): string { return Network.peerId; }\n  get isConnected(): boolean { return Network.peerIds.length <= 1 ? false : true; }\n  validateLength: boolean = false;\n\n  constructor(\n    private panelService: PanelService,\n    private modalService: ModalService\n  ) { }\n\n  ngOnInit() {\n    this.modalService.title = this.panelService.title = 'ルーム作成'\n    EventSystem.register(this);\n    this.calcPeerId(this.roomName, this.password);\n  }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  calcPeerId(roomName: string, password: string) {\n    let peerId = Network.peerContext ? Network.peerContext.id : PeerContext.generateId();\n    let context = PeerContext.create(peerId, PeerContext.generateId('***'), roomName, password);\n    this.validateLength = context.fullstring.length < 64 ? true : false;\n  }\n\n  createRoom() {\n    let peerId = Network.peerContext ? Network.peerContext.id : PeerContext.generateId();\n    Network.open(peerId, PeerContext.generateId('***'), this.roomName, this.password);\n    PeerCursor.myCursor.peerId = Network.peerId;\n\n    this.modalService.resolve();\n  }\n}","export default \".is-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab;\\n}\\n\\n.is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n}\\n\\n.is-transition {\\n  -webkit-transition: -webkit-transform 132ms linear;\\n  transition: -webkit-transform 132ms linear;\\n  transition: transform 132ms linear;\\n  transition: transform 132ms linear, -webkit-transform 132ms linear;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.is-pointer-events-auto {\\n  pointer-events: auto;\\n}\\n\\n.component {\\n  position: absolute;\\n  height: 50px;\\n  width: 50px;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  \\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n}\\n\\n.component-content {\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n.texture {\\n  position: absolute;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  background-repeat: no-repeat;\\n  background-size: 100% 100%;\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n.of-wall-top {\\n  top: 0px;\\n  left: 0px;\\n\\n  -webkit-transform-origin: 50% 100%;\\n\\n          transform-origin: 50% 100%;\\n  -webkit-transform: translateY(-100%) rotateX(90deg) rotateZ(180deg) scaleX(-1.0);\\n          transform: translateY(-100%) rotateX(90deg) rotateZ(180deg) scaleX(-1.0);\\n  -webkit-filter: brightness(0.3);\\n          filter: brightness(0.3);\\n}\\n\\n.of-wall-bottom {\\n  bottom: 0px;\\n  left: 0px;\\n\\n  -webkit-transform-origin: 50% 100%;\\n\\n          transform-origin: 50% 100%;\\n  -webkit-transform: rotateX(-90deg);\\n          transform: rotateX(-90deg);\\n  -webkit-filter: brightness(1.0);\\n          filter: brightness(1.0);\\n}\\n\\n.of-wall-left {\\n  top: 0px;\\n  left: 0px;\\n\\n  -webkit-transform-origin: 0% 0%;\\n\\n          transform-origin: 0% 0%;\\n  -webkit-transform: rotateZ(90deg) rotateX(-90deg) scaleX(-1.0) translateX(-100%) translateY(-100%);\\n          transform: rotateZ(90deg) rotateX(-90deg) scaleX(-1.0) translateX(-100%) translateY(-100%);\\n  -webkit-filter: brightness(0.5);\\n          filter: brightness(0.5);\\n}\\n\\n.of-wall-right {\\n  top: 0px;\\n  right: 0px;\\n\\n  -webkit-transform-origin: 100% 0%;\\n\\n          transform-origin: 100% 0%;\\n  -webkit-transform: rotateZ(-90deg) rotateX(-90deg) translateY(-100%);\\n          transform: rotateZ(-90deg) rotateX(-90deg) translateY(-100%);\\n  -webkit-filter: brightness(0.8);\\n          filter: brightness(0.8);\\n}\\n\\n.pedestal-grab {\\n  z-index: -1;\\n  position: absolute;\\n  top: -14px;\\n  left: -14px;\\n  right: -14px;\\n  bottom: -14px;\\n  cursor: default;\\n\\n  box-sizing: border-box;\\n  border-top: solid 7px #CCC;\\n  border-left: solid 7px #CCC;\\n  border-right: solid 7px #CCC;\\n  border-bottom: solid 7px #CCC;\\n  border-radius: 14px;\\n}\\n\\n.rotate-grab {\\n  opacity: 0;\\n  z-index: -1;\\n}\\n\\n.rotate-grab-icon {\\n  position: absolute;\\n  width: 28px;\\n  height: 28px;\\n  box-sizing: border-box;\\n  border: solid 2px #CCCCCC;\\n  cursor: -moz-default;\\n  cursor: -webkit-default;\\n  cursor: default;\\n  z-index: 1;\\n  padding: 0;\\n  background-color: #CCCCCC;\\n  border-radius: 100%;\\n  color: #444;\\n  font-size: 8px;\\n\\n  -webkit-transform-style: preserve-3d;\\n\\n          transform-style: preserve-3d;\\n  -webkit-transform: translateZ(0.1px);\\n          transform: translateZ(0.1px);\\n}\\n\\n.component:hover .rotate-grab, .component:active .rotate-grab {\\n  opacity: 1;\\n}\\n\\n.of-left-top {\\n  top: -14px;\\n  left: -14px;\\n  border-radius: 14px 7px 14px 7px;\\n}\\n\\n.of-left-bottom {\\n  bottom: -14px;\\n  left: -14px;\\n  border-radius: 7px 14px 7px 14px;\\n}\\n\\n.of-right-bottom {\\n  bottom: -14px;\\n  right: -14px;\\n  border-radius: 14px 7px 14px 7px;\\n}\\n\\n.of-right-top {\\n  top: -14px;\\n  right: -14px;\\n  border-radius: 7px 14px 7px 14px;\\n}\\n\\n.blinking-animation {\\n\\t-webkit-animation: blink 1.0s linear infinite alternate;\\n   animation: blink 1.0s linear infinite alternate;\\n}\\n\\n@-webkit-keyframes blink {\\n  0% { opacity:0.9; }\\n  100% { opacity:0.5; }\\n}\\n\\n@keyframes blink {\\n  0% { opacity:0.9; }\\n  100% { opacity:0.5; }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3RlcnJhaW4vdGVycmFpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUUsb0JBQW9CO0VBQ3BCLFlBQVk7QUFDZDs7QUFFQTtFQUVFLHdCQUF3QjtFQUN4QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0Usa0RBQWtEO0VBQ2xELDBDQUFrQztFQUFsQyxrQ0FBa0M7RUFBbEMsa0VBQWtDO0FBQ3BDOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLHFCQUFpQjtNQUFqQixpQkFBaUI7O0VBRWpCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0IsNEJBQTRCO0VBQzVCLDBCQUEwQjtFQUMxQixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsUUFBUTtFQUNSLFNBQVM7O0VBRVQsa0NBQTBCOztVQUExQiwwQkFBMEI7RUFDMUIsZ0ZBQXdFO1VBQXhFLHdFQUF3RTtFQUN4RSwrQkFBdUI7VUFBdkIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFNBQVM7O0VBRVQsa0NBQTBCOztVQUExQiwwQkFBMEI7RUFDMUIsa0NBQTBCO1VBQTFCLDBCQUEwQjtFQUMxQiwrQkFBdUI7VUFBdkIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsUUFBUTtFQUNSLFNBQVM7O0VBRVQsK0JBQXVCOztVQUF2Qix1QkFBdUI7RUFDdkIsa0dBQTBGO1VBQTFGLDBGQUEwRjtFQUMxRiwrQkFBdUI7VUFBdkIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsUUFBUTtFQUNSLFVBQVU7O0VBRVYsaUNBQXlCOztVQUF6Qix5QkFBeUI7RUFDekIsb0VBQTREO1VBQTVELDREQUE0RDtFQUM1RCwrQkFBdUI7VUFBdkIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixVQUFVO0VBQ1YsV0FBVztFQUNYLFlBQVk7RUFDWixhQUFhO0VBQ2IsZUFBZTs7RUFFZixzQkFBc0I7RUFDdEIsMEJBQTBCO0VBQzFCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLFVBQVU7RUFDVixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsY0FBYzs7RUFFZCxvQ0FBNEI7O1VBQTVCLDRCQUE0QjtFQUM1QixvQ0FBNEI7VUFBNUIsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFdBQVc7RUFDWCxnQ0FBZ0M7QUFDbEM7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsV0FBVztFQUNYLGdDQUFnQztBQUNsQzs7QUFFQTtFQUNFLGFBQWE7RUFDYixZQUFZO0VBQ1osZ0NBQWdDO0FBQ2xDOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFlBQVk7RUFDWixnQ0FBZ0M7QUFDbEM7O0FBRUE7Q0FDQyx1REFBdUQ7R0FFckQsK0NBQStDO0FBQ2xEOztBQUVBO0VBQ0UsS0FBSyxXQUFXLEVBQUU7RUFDbEIsT0FBTyxXQUFXLEVBQUU7QUFDdEI7O0FBT0E7RUFDRSxLQUFLLFdBQVcsRUFBRTtFQUNsQixPQUFPLFdBQVcsRUFBRTtBQUN0QiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC90ZXJyYWluL3RlcnJhaW4uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcbiAgY3Vyc29yOiAtbW96LWdyYWI7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xuICBjdXJzb3I6IGdyYWI7XG59XG5cbi5pcy1ncmFiYmluZyB7XG4gIGN1cnNvcjogLW1vei1ncmFiYmluZztcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xuICBjdXJzb3I6IGdyYWJiaW5nO1xufVxuXG4uaXMtM2Qge1xuICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG59XG5cbi5pcy10cmFuc2l0aW9uIHtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogNTBweDtcbiAgd2lkdGg6IDUwcHg7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIFxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG59XG5cbi5jb21wb25lbnQtY29udGVudCB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi50ZXh0dXJlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4ub2Ytd2FsbC10b3Age1xuICB0b3A6IDBweDtcbiAgbGVmdDogMHB4O1xuXG4gIHRyYW5zZm9ybS1vcmlnaW46IDUwJSAxMDAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwMCUpIHJvdGF0ZVgoOTBkZWcpIHJvdGF0ZVooMTgwZGVnKSBzY2FsZVgoLTEuMCk7XG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwLjMpO1xufVxuXG4ub2Ytd2FsbC1ib3R0b20ge1xuICBib3R0b206IDBweDtcbiAgbGVmdDogMHB4O1xuXG4gIHRyYW5zZm9ybS1vcmlnaW46IDUwJSAxMDAlO1xuICB0cmFuc2Zvcm06IHJvdGF0ZVgoLTkwZGVnKTtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDEuMCk7XG59XG5cbi5vZi13YWxsLWxlZnQge1xuICB0b3A6IDBweDtcbiAgbGVmdDogMHB4O1xuXG4gIHRyYW5zZm9ybS1vcmlnaW46IDAlIDAlO1xuICB0cmFuc2Zvcm06IHJvdGF0ZVooOTBkZWcpIHJvdGF0ZVgoLTkwZGVnKSBzY2FsZVgoLTEuMCkgdHJhbnNsYXRlWCgtMTAwJSkgdHJhbnNsYXRlWSgtMTAwJSk7XG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwLjUpO1xufVxuXG4ub2Ytd2FsbC1yaWdodCB7XG4gIHRvcDogMHB4O1xuICByaWdodDogMHB4O1xuXG4gIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMCU7XG4gIHRyYW5zZm9ybTogcm90YXRlWigtOTBkZWcpIHJvdGF0ZVgoLTkwZGVnKSB0cmFuc2xhdGVZKC0xMDAlKTtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOCk7XG59XG5cbi5wZWRlc3RhbC1ncmFiIHtcbiAgei1pbmRleDogLTE7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMTRweDtcbiAgbGVmdDogLTE0cHg7XG4gIHJpZ2h0OiAtMTRweDtcbiAgYm90dG9tOiAtMTRweDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci10b3A6IHNvbGlkIDdweCAjQ0NDO1xuICBib3JkZXItbGVmdDogc29saWQgN3B4ICNDQ0M7XG4gIGJvcmRlci1yaWdodDogc29saWQgN3B4ICNDQ0M7XG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDdweCAjQ0NDO1xuICBib3JkZXItcmFkaXVzOiAxNHB4O1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwO1xuICB6LWluZGV4OiAtMTtcbn1cblxuLnJvdGF0ZS1ncmFiLWljb24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMnB4ICNDQ0NDQ0M7XG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuICB6LWluZGV4OiAxO1xuICBwYWRkaW5nOiAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1zaXplOiA4cHg7XG5cbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDAuMXB4KTtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIsIC5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbi5vZi1sZWZ0LXRvcCB7XG4gIHRvcDogLTE0cHg7XG4gIGxlZnQ6IC0xNHB4O1xuICBib3JkZXItcmFkaXVzOiAxNHB4IDdweCAxNHB4IDdweDtcbn1cblxuLm9mLWxlZnQtYm90dG9tIHtcbiAgYm90dG9tOiAtMTRweDtcbiAgbGVmdDogLTE0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDdweCAxNHB4IDdweCAxNHB4O1xufVxuXG4ub2YtcmlnaHQtYm90dG9tIHtcbiAgYm90dG9tOiAtMTRweDtcbiAgcmlnaHQ6IC0xNHB4O1xuICBib3JkZXItcmFkaXVzOiAxNHB4IDdweCAxNHB4IDdweDtcbn1cblxuLm9mLXJpZ2h0LXRvcCB7XG4gIHRvcDogLTE0cHg7XG4gIHJpZ2h0OiAtMTRweDtcbiAgYm9yZGVyLXJhZGl1czogN3B4IDE0cHggN3B4IDE0cHg7XG59XG5cbi5ibGlua2luZy1hbmltYXRpb24ge1xuXHQtd2Via2l0LWFuaW1hdGlvbjogYmxpbmsgMS4wcyBsaW5lYXIgaW5maW5pdGUgYWx0ZXJuYXRlO1xuICAtbW96LWFuaW1hdGlvbjogYmxpbmsgMS4wcyBsaW5lYXIgaW5maW5pdGUgYWx0ZXJuYXRlO1xuICAgYW5pbWF0aW9uOiBibGluayAxLjBzIGxpbmVhciBpbmZpbml0ZSBhbHRlcm5hdGU7XG59XG5cbkAtd2Via2l0LWtleWZyYW1lcyBibGluayB7XG4gIDAlIHsgb3BhY2l0eTowLjk7IH1cbiAgMTAwJSB7IG9wYWNpdHk6MC41OyB9XG59XG5cbkAtbW96LWtleWZyYW1lcyBibGluayB7XG4gIDAlIHsgb3BhY2l0eTowLjk7IH1cbiAgMTAwJSB7IG9wYWNpdHk6MC41OyB9XG59XG5cbkBrZXlmcmFtZXMgYmxpbmsge1xuICAwJSB7IG9wYWNpdHk6MC45OyB9XG4gIDEwMCUgeyBvcGFjaXR5OjAuNTsgfVxufSJdfQ== */\"","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, HostListener, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { Terrain, TerrainViewState } from '@udonarium/terrain';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { InputHandler } from 'directive/input-handler';\nimport { MovableOption } from 'directive/movable.directive';\nimport { RotableOption } from 'directive/rotable.directive';\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\n@Component({\n  selector: 'terrain',\n  templateUrl: './terrain.component.html',\n  styleUrls: ['./terrain.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TerrainComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() terrain: Terrain = null;\n  @Input() is3D: boolean = false;\n\n  get name(): string { return this.terrain.name; }\n  get mode(): TerrainViewState { return this.terrain.mode; }\n  set mode(mode: TerrainViewState) { this.terrain.mode = mode; }\n\n  get isLocked(): boolean { return this.terrain.isLocked; }\n  set isLocked(isLocked: boolean) { this.terrain.isLocked = isLocked; }\n  get hasWall(): boolean { return this.terrain.hasWall; }\n  get hasFloor(): boolean { return this.terrain.hasFloor; }\n\n  get wallImage(): ImageFile { return this.terrain.wallImage; }\n  get floorImage(): ImageFile { return this.terrain.floorImage; }\n\n  get height(): number { return this.adjustMinBounds(this.terrain.height); }\n  get width(): number { return this.adjustMinBounds(this.terrain.width); }\n  get depth(): number { return this.adjustMinBounds(this.terrain.depth); }\n\n  gridSize: number = 50;\n\n  movableOption: MovableOption = {};\n  rotableOption: RotableOption = {};\n\n  private input: InputHandler = null;\n\n  constructor(\n    private tabletopService: TabletopService,\n    private contextMenuService: ContextMenuService,\n    private elementRef: ElementRef<HTMLElement>,\n    private panelService: PanelService,\n    private changeDetector: ChangeDetectorRef,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.terrain || !object) return;\n        if (this.terrain === object || (object instanceof ObjectNode && this.terrain.contains(object))) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      });\n    this.movableOption = {\n      tabletopObject: this.terrain,\n      colideLayers: ['terrain']\n    };\n    this.rotableOption = {\n      tabletopObject: this.terrain\n    };\n  }\n\n  ngAfterViewInit() {\n    this.input = new InputHandler(this.elementRef.nativeElement);\n    this.input.onStart = this.onInputStart.bind(this);\n  }\n\n  ngOnDestroy() {\n    this.input.destroy();\n    EventSystem.unregister(this);\n  }\n\n  @HostListener('dragstart', ['$event'])\n  onDragstart(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  onInputStart(e: any) {\n    this.input.cancel();\n\n    // TODO:もっと良い方法考える\n    if (this.isLocked) {\n      EventSystem.trigger('DRAG_LOCKED_OBJECT', {});\n    }\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n\n    let menuPosition = this.pointerDeviceService.pointers[0];\n    let objectPosition = this.tabletopService.calcTabletopLocalCoordinate();\n    this.contextMenuService.open(menuPosition, [\n      (this.isLocked\n        ? {\n          name: '固定解除', action: () => {\n            this.isLocked = false;\n            SoundEffect.play(PresetSound.unlock);\n          }\n        } : {\n          name: '固定する', action: () => {\n            this.isLocked = true;\n            SoundEffect.play(PresetSound.lock);\n          }\n        }),\n      ContextMenuSeparator,\n      (this.hasWall\n        ? {\n          name: '壁を非表示', action: () => {\n            this.mode = TerrainViewState.FLOOR;\n            if (this.depth * this.width === 0) {\n              this.terrain.width = this.width <= 0 ? 1 : this.width;\n              this.terrain.depth = this.depth <= 0 ? 1 : this.depth;\n            }\n          }\n        } : {\n          name: '壁を表示', action: () => {\n            this.mode = TerrainViewState.ALL;\n          }\n        }),\n      ContextMenuSeparator,\n      { name: '地形設定を編集', action: () => { this.showDetail(this.terrain); } },\n      {\n        name: 'コピーを作る', action: () => {\n          let cloneObject = this.terrain.clone();\n          cloneObject.location.x += this.gridSize;\n          cloneObject.location.y += this.gridSize;\n          cloneObject.isLocked = false;\n          if (this.terrain.parent) this.terrain.parent.appendChild(cloneObject);\n          SoundEffect.play(PresetSound.blockPut);\n        }\n      },\n      {\n        name: '削除する', action: () => {\n          this.terrain.destroy();\n          SoundEffect.play(PresetSound.sweep);\n        }\n      },\n      ContextMenuSeparator,\n      { name: 'オブジェクト作成', action: null, subActions: this.tabletopService.getContextMenuActionsForCreateObject(objectPosition) }\n    ], this.name);\n  }\n\n  onMove() {\n    SoundEffect.play(PresetSound.blockPick);\n  }\n\n  onMoved() {\n    SoundEffect.play(PresetSound.blockPut);\n  }\n\n  private adjustMinBounds(value: number, min: number = 0): number {\n    return value < min ? min : value;\n  }\n\n  private showDetail(gameObject: Terrain) {\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = '地形設定';\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\n    let option: PanelOption = { title: title, left: coordinate.x - 250, top: coordinate.y - 150, width: 500, height: 300 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n}\n","export default \".is-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab;\\n}\\n\\n.is-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing;\\n}\\n\\n.is-3d {\\n  -webkit-transform-style: preserve-3d;\\n  transform-style: preserve-3d;\\n}\\n\\n.is-transition {\\n  -webkit-transition: -webkit-transform 132ms linear;\\n  transition: -webkit-transform 132ms linear;\\n  transition: transform 132ms linear;\\n  transition: transform 132ms linear, -webkit-transform 132ms linear;\\n}\\n\\n.is-pointer-events-none {\\n  pointer-events: none;\\n}\\n\\n.is-pointer-events-auto {\\n  pointer-events: auto;\\n}\\n\\n.component {\\n  position: absolute;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n      user-select: none;\\n  \\n  -moz-user-drag: none;\\n  -webkit-user-drag: none;\\n\\n  width: 0;\\n  height:0;\\n}\\n\\n.component-content {\\n  height: 100%;\\n  width: 100%;\\n  -webkit-transform : translateX(-50%);\\n          transform : translateX(-50%);\\n}\\n\\n.upright-transform {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  -webkit-transform-origin: 50% 100%;\\n          transform-origin: 50% 100%;\\n  -webkit-transform: rotateX(-90deg);\\n          transform: rotateX(-90deg);\\n}\\n\\n.is-bg-texture {\\n  background-repeat: no-repeat;\\n  background-size: 100% 100%;\\n}\\n\\n.is-bg-color {\\n  box-sizing: border-box;\\n  color: #444;\\n  background-color: rgba(240,218,189, 0.9);\\n  border: solid 1px #999;\\n}\\n\\n.title {\\n  box-sizing: border-box;\\n  font-size: 15px;\\n  padding: 3px 9px;\\n  white-space: nowrap;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n}\\n\\n.is-black-background {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\ntextarea {\\n  width: 100%;\\n  height: 100%;\\n  resize: none;\\n  overflow: hidden;\\n  \\n  box-sizing: border-box;\\n  background: none;\\n  border: none;\\n  border-radius: 0px;\\n  outline: none;\\n\\n  color: #444;\\n  font-family: Cambria, Georgia;\\n  font-size: 1.0rem;\\n  padding: 2px;\\n  margin: 0;\\n  word-break: break-all;\\n\\n  -webkit-backface-visibility: hidden;\\n\\n          backface-visibility: hidden;\\n}\\n\\ntextarea:focus {\\n  background: rgba(255, 255, 255, 0.75);\\n}\\n\\n.is-black-background {\\n  color: #CCC;\\n  background-color: rgba(30, 30, 30, 0.8);\\n}\\n\\n.is-outline-text {\\n  font-size: 24px;\\n  color: #444;\\n  text-shadow: \\n  #f2f2f2 0px 0px 0.5px, \\n  #f2f2f2 0px 0px 0.5px, \\n  #f2f2f2 0px 0px 0.5px, \\n  #f2f2f2 0px 0px 0.5px, \\n  #f2f2f2 0px 0px 0.5px, \\n  #f2f2f2 0px 0px 0.5px,\\n  #f2f2f2 0px 0px 0.5px,\\n  #f2f2f2 0px 0px 0.5px;\\n}\\n\\n.rotate-grab {\\n  position: absolute;\\n  width: 42px;\\n  height: 28px;\\n  box-sizing: border-box;\\n  cursor: -moz-default;\\n  cursor: -webkit-default;\\n  cursor: default;\\n  z-index: 1;\\n  text-align: center;\\n  padding: 2px;\\n  background-color: #CCCCCC;\\n  border-radius: 28px;\\n  color: #444;\\n  font-size: 8px;\\n}\\n\\n.of-left-top {\\n  top: -14px;\\n  left: -21px;\\n}\\n\\n.of-right-top {\\n  top: -14px;\\n  right: -21px;\\n}\\n\\n.rotate-grab {\\n  opacity: 0;\\n}\\n\\n.component:hover .rotate-grab {\\n  opacity: 0.5;\\n}\\n\\n.component:active .rotate-grab {\\n  opacity: 0;\\n}\\n\\n.component .rotate-grab:hover, .component .rotate-grab:active {\\n  opacity: 1;\\n}\\n\\n.material-icons {\\n  display: none;\\n}\\n\\n.component:hover .material-icons, .component:active .material-icons {\\n  display: inline;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3RleHQtbm90ZS90ZXh0LW5vdGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVFLG9CQUFvQjtFQUNwQixZQUFZO0FBQ2Q7O0FBRUE7RUFFRSx3QkFBd0I7RUFDeEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLGtEQUFrRDtFQUNsRCwwQ0FBa0M7RUFBbEMsa0NBQWtDO0VBQWxDLGtFQUFrQztBQUNwQzs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIscUJBQWlCO01BQWpCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1Qjs7RUFFdkIsUUFBUTtFQUNSLFFBQVE7QUFDVjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsb0NBQTRCO1VBQTVCLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixrQ0FBMEI7VUFBMUIsMEJBQTBCO0VBQzFCLGtDQUEwQjtVQUExQiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCx3Q0FBd0M7RUFDeEMsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLG1DQUEyQjtVQUEzQiwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixZQUFZO0VBQ1osZ0JBQWdCOztFQUVoQixzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsYUFBYTs7RUFFYixXQUFXO0VBQ1gsNkJBQTZCO0VBQzdCLGlCQUFpQjtFQUNqQixZQUFZO0VBQ1osU0FBUztFQUNULHFCQUFxQjs7RUFFckIsbUNBQTJCOztVQUEzQiwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7RUFDWDs7Ozs7Ozs7dUJBUXFCO0FBQ3ZCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLFVBQVU7RUFDVixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsV0FBVztBQUNiOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGVBQWU7QUFDakIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnQvdGV4dC1ub3RlL3RleHQtbm90ZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xuICBjdXJzb3I6IC1tb3otZ3JhYjtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy0zZCB7XG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLWF1dG8ge1xuICBwb2ludGVyLWV2ZW50czogYXV0bztcbn1cblxuLmNvbXBvbmVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgXG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcblxuICB3aWR0aDogMDtcbiAgaGVpZ2h0OjA7XG59XG5cbi5jb21wb25lbnQtY29udGVudCB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIHRyYW5zZm9ybSA6IHRyYW5zbGF0ZVgoLTUwJSk7XG59XG5cbi51cHJpZ2h0LXRyYW5zZm9ybSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDEwMCU7XG4gIHRyYW5zZm9ybTogcm90YXRlWCgtOTBkZWcpO1xufVxuXG4uaXMtYmctdGV4dHVyZSB7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlO1xufVxuXG4uaXMtYmctY29sb3Ige1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBjb2xvcjogIzQ0NDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC45KTtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzk5OTtcbn1cblxuLnRpdGxlIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBwYWRkaW5nOiAzcHggOXB4O1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi5pcy1ibGFjay1iYWNrZ3JvdW5kIHtcbiAgY29sb3I6ICNDQ0M7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcbn1cblxudGV4dGFyZWEge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICByZXNpemU6IG5vbmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDBweDtcbiAgb3V0bGluZTogbm9uZTtcblxuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1mYW1pbHk6IENhbWJyaWEsIEdlb3JnaWE7XG4gIGZvbnQtc2l6ZTogMS4wcmVtO1xuICBwYWRkaW5nOiAycHg7XG4gIG1hcmdpbjogMDtcbiAgd29yZC1icmVhazogYnJlYWstYWxsO1xuXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxudGV4dGFyZWE6Zm9jdXMge1xuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpO1xufVxuXG4uaXMtYmxhY2stYmFja2dyb3VuZCB7XG4gIGNvbG9yOiAjQ0NDO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG59XG5cbi5pcy1vdXRsaW5lLXRleHQge1xuICBmb250LXNpemU6IDI0cHg7XG4gIGNvbG9yOiAjNDQ0O1xuICB0ZXh0LXNoYWRvdzogXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCwgXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCwgXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCwgXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCwgXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCwgXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCxcbiAgI2YyZjJmMiAwcHggMHB4IDAuNXB4LFxuICAjZjJmMmYyIDBweCAwcHggMC41cHg7XG59XG5cbi5yb3RhdGUtZ3JhYiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDQycHg7XG4gIGhlaWdodDogMjhweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XG4gIGN1cnNvcjogLXdlYmtpdC1kZWZhdWx0O1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIHotaW5kZXg6IDE7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xuICBib3JkZXItcmFkaXVzOiAyOHB4O1xuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1zaXplOiA4cHg7XG59XG5cbi5vZi1sZWZ0LXRvcCB7XG4gIHRvcDogLTE0cHg7XG4gIGxlZnQ6IC0yMXB4O1xufVxuXG4ub2YtcmlnaHQtdG9wIHtcbiAgdG9wOiAtMTRweDtcbiAgcmlnaHQ6IC0yMXB4O1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDAuNTtcbn1cblxuLmNvbXBvbmVudDphY3RpdmUgLnJvdGF0ZS1ncmFiIHtcbiAgb3BhY2l0eTogMDtcbn1cblxuLmNvbXBvbmVudCAucm90YXRlLWdyYWI6aG92ZXIsIC5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmFjdGl2ZSB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbi5tYXRlcmlhbC1pY29ucyB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5jb21wb25lbnQ6aG92ZXIgLm1hdGVyaWFsLWljb25zLCAuY29tcG9uZW50OmFjdGl2ZSAubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBpbmxpbmU7XG59Il19 */\"","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, HostListener, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { TextNote } from '@udonarium/text-note';\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\nimport { MovableOption } from 'directive/movable.directive';\nimport { RotableOption } from 'directive/rotable.directive';\nimport { ContextMenuService } from 'service/context-menu.service';\nimport { PanelOption, PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'text-note',\n  templateUrl: './text-note.component.html',\n  styleUrls: ['./text-note.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TextNoteComponent implements OnInit, OnDestroy, AfterViewInit {\n  @ViewChild('textArea', { static: true }) textAreaElementRef: ElementRef;\n\n  @Input() textNote: TextNote = null;\n  @Input() is3D: boolean = false;\n\n  get title(): string { return this.textNote.title; }\n  get text(): string { this.calcFitHeightIfNeeded(); return this.textNote.text; }\n  set text(text: string) { this.calcFitHeightIfNeeded(); this.textNote.text = text; }\n  get fontSize(): number { this.calcFitHeightIfNeeded(); return this.textNote.fontSize; }\n  get imageFile(): ImageFile { return this.textNote.imageFile; }\n  get rotate(): number { return this.textNote.rotate; }\n  set rotate(rotate: number) { this.textNote.rotate = rotate; }\n  get height(): number { return this.adjustMinBounds(this.textNote.height); }\n  get width(): number { return this.adjustMinBounds(this.textNote.width); }\n\n  get isSelected(): boolean { return document.activeElement === this.textAreaElementRef.nativeElement; }\n\n  private callbackOnMouseUp = (e) => this.onMouseUp(e);\n\n  gridSize: number = 50;\n\n  private calcFitHeightTimer: NodeJS.Timer = null;\n\n  movableOption: MovableOption = {};\n  rotableOption: RotableOption = {};\n\n  constructor(\n    private ngZone: NgZone,\n    private contextMenuService: ContextMenuService,\n    private panelService: PanelService,\n    private changeDetector: ChangeDetectorRef,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!this.textNote || !object) return;\n        if (this.textNote === object || (object instanceof ObjectNode && this.textNote.contains(object))) {\n          this.changeDetector.markForCheck();\n        }\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        this.changeDetector.markForCheck();\n      })\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\n        this.changeDetector.markForCheck();\n      });\n    this.movableOption = {\n      tabletopObject: this.textNote,\n      transformCssOffset: 'translateZ(0.15px)',\n      colideLayers: ['terrain']\n    };\n    this.rotableOption = {\n      tabletopObject: this.textNote\n    };\n  }\n\n  ngAfterViewInit() { }\n\n  ngOnDestroy() {\n    EventSystem.unregister(this);\n  }\n\n  @HostListener('dragstart', ['$event'])\n  onDragstart(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMouseDown(e: any) {\n    if (this.isSelected) return;\n    e.preventDefault();\n    this.textNote.toTopmost();\n\n    // TODO:もっと良い方法考える\n    if (e.button === 2) {\n      EventSystem.trigger('DRAG_LOCKED_OBJECT', {});\n      return;\n    }\n\n    this.addMouseEventListeners();\n  }\n\n  onMouseUp(e: any) {\n    if (this.pointerDeviceService.isAllowedToOpenContextMenu) {\n      let selection = window.getSelection();\n      if (!selection.isCollapsed) selection.removeAllRanges();\n      this.textAreaElementRef.nativeElement.focus();\n    }\n    this.removeMouseEventListeners();\n    e.preventDefault();\n  }\n\n  onRotateMouseDown(e: any) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextMenu(e: Event) {\n    this.removeMouseEventListeners();\n    if (this.isSelected) return;\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\n    let position = this.pointerDeviceService.pointers[0];\n    this.contextMenuService.open(position, [\n      { name: 'メモを編集', action: () => { this.showDetail(this.textNote); } },\n      {\n        name: 'コピーを作る', action: () => {\n          let cloneObject = this.textNote.clone();\n          console.log('コピー', cloneObject);\n          cloneObject.location.x += this.gridSize;\n          cloneObject.location.y += this.gridSize;\n          cloneObject.toTopmost();\n          SoundEffect.play(PresetSound.cardPut);\n        }\n      },\n      {\n        name: '削除する', action: () => {\n          this.textNote.destroy();\n          SoundEffect.play(PresetSound.sweep);\n        }\n      },\n    ], this.title);\n  }\n\n  onMove() {\n    SoundEffect.play(PresetSound.cardPick);\n  }\n\n  onMoved() {\n    SoundEffect.play(PresetSound.cardPut);\n  }\n\n  calcFitHeightIfNeeded() {\n    if (this.calcFitHeightTimer) return;\n    this.ngZone.runOutsideAngular(() => {\n      this.calcFitHeightTimer = setTimeout(() => {\n        this.calcFitHeight();\n        this.calcFitHeightTimer = null;\n      }, 0);\n    });\n  }\n\n  calcFitHeight() {\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\n    textArea.style.height = '0';\n    if (textArea.scrollHeight > textArea.offsetHeight) {\n      textArea.style.height = textArea.scrollHeight + 'px';\n    }\n  }\n\n  private adjustMinBounds(value: number, min: number = 0): number {\n    return value < min ? min : value;\n  }\n\n  private addMouseEventListeners() {\n    document.body.addEventListener('mouseup', this.callbackOnMouseUp, false);\n  }\n\n  private removeMouseEventListeners() {\n    document.body.removeEventListener('mouseup', this.callbackOnMouseUp, false);\n  }\n\n  private showDetail(gameObject: TextNote) {\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\n    let coordinate = this.pointerDeviceService.pointers[0];\n    let title = '共有メモ設定';\n    if (gameObject.title.length) title += ' - ' + gameObject.title;\n    let option: PanelOption = { title: title, left: coordinate.x - 350, top: coordinate.y - 200, width: 700, height: 400 };\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\n    component.tabletopObject = gameObject;\n  }\n}\n","export default \".text {\\n  font-family: -apple-system, BlinkMacSystemFont, \\\"Helvetica Neue\\\", Verdana, Meiryo, sans-serif;\\n  font-size: 12px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3RleHQtdmlldy90ZXh0LXZpZXcuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDZGQUE2RjtFQUM3RixlQUFlO0FBQ2pCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50L3RleHQtdmlldy90ZXh0LXZpZXcuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi50ZXh0IHtcbiAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBWZXJkYW5hLCBNZWlyeW8sIHNhbnMtc2VyaWY7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn0iXX0= */\"","import { Component, Input, OnInit } from '@angular/core';\n\nimport { ModalService } from 'service/modal.service';\nimport { PanelService } from 'service/panel.service';\n\n@Component({\n  selector: 'text-view',\n  templateUrl: './text-view.component.html',\n  styleUrls: ['./text-view.component.css']\n})\nexport class TextViewComponent implements OnInit {\n\n  @Input() text: string = '';\n  @Input() title: string = '';\n  constructor(\n    private panelService: PanelService,\n    private modalService: ModalService\n  ) { }\n\n  ngOnInit() {\n    this.panelService.title = this.title;\n    if (this.modalService.option && this.modalService.option.title != null) {\n      this.modalService.title = this.modalService.option.title ? this.modalService.option.title : '';\n      this.text = this.modalService.option.text ? this.modalService.option.text : '';\n    }\n  }\n\n}\n","export default \".draggable-panel {\\n  box-sizing: border-box;\\n  overflow: visible;\\n  position: absolute;\\n\\n  color: #444;\\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\\n  border: solid 1px #999;\\n\\n  padding: 0px;\\n  top: 200px;\\n\\n  height: 200px;\\n  width: 300px;\\n  max-height: 100%;\\n  max-width: 100%;\\n}\\n\\n.scrollable-panel {\\n  box-sizing: border-box;\\n  overflow: auto;\\n  position: absolute;\\n  top: 25px;\\n  bottom: 0;\\n  width: 100%;\\n  padding: 8px;\\n  -ms-scroll-chaining: none;\\n      overscroll-behavior: contain;\\n  -webkit-overflow-scrolling: touch;\\n}\\n\\n.title {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  box-sizing: border-box;\\n  font-size: 12px;\\n  height: 25px;\\n  padding: 2px 5px;\\n  width: 100%;\\n  background-color: #555;\\n  color: #CCC;\\n}\\n\\n.title-button {\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n}\\n\\n.title button {\\n  background: none;\\n  border: none;\\n  border-radius: 0;\\n  outline: none;\\n  color: #CCC;\\n}\\n\\n.pointer-events-none {\\n  pointer-events: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50L3VpLXBhbmVsL3VpLXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLGtCQUFrQjs7RUFFbEIsV0FBVztFQUNYLHFGQUFxRjtFQUNyRixzQkFBc0I7O0VBRXRCLFlBQVk7RUFDWixVQUFVOztFQUVWLGFBQWE7RUFDYixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsY0FBYztFQUNkLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsU0FBUztFQUNULFdBQVc7RUFDWCxZQUFZO0VBQ1oseUJBQTRCO01BQTVCLDRCQUE0QjtFQUM1QixpQ0FBaUM7QUFDbkM7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsTUFBTTtBQUNSOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLFdBQVc7QUFDYjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0QiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC91aS1wYW5lbC91aS1wYW5lbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRyYWdnYWJsZS1wYW5lbCB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgY29sb3I6ICM0NDQ7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgtMzBkZWcsIHJnYmEoMjQwLDIxOCwxODksIDAuOSksIHJnYmEoMjU1LCAyNDQsIDIzMiwgMC45KSk7XG4gIGJvcmRlcjogc29saWQgMXB4ICM5OTk7XG5cbiAgcGFkZGluZzogMHB4O1xuICB0b3A6IDIwMHB4O1xuXG4gIGhlaWdodDogMjAwcHg7XG4gIHdpZHRoOiAzMDBweDtcbiAgbWF4LWhlaWdodDogMTAwJTtcbiAgbWF4LXdpZHRoOiAxMDAlO1xufVxuXG4uc2Nyb2xsYWJsZS1wYW5lbCB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIG92ZXJmbG93OiBhdXRvO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMjVweDtcbiAgYm90dG9tOiAwO1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogOHB4O1xuICBvdmVyc2Nyb2xsLWJlaGF2aW9yOiBjb250YWluO1xuICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XG59XG5cbi50aXRsZSB7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgaGVpZ2h0OiAyNXB4O1xuICBwYWRkaW5nOiAycHggNXB4O1xuICB3aWR0aDogMTAwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi50aXRsZS1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDA7XG59XG5cbi50aXRsZSBidXR0b24ge1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDA7XG4gIG91dGxpbmU6IG5vbmU7XG4gIGNvbG9yOiAjQ0NDO1xufVxuXG4ucG9pbnRlci1ldmVudHMtbm9uZSB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufSJdfQ== */\"","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\nimport { Component, ElementRef, Input, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { PanelService } from 'service/panel.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Component({\n  selector: 'ui-panel',\n  templateUrl: './ui-panel.component.html',\n  styleUrls: ['./ui-panel.component.css'],\n  providers: [\n    PanelService,\n  ],\n  animations: [\n    trigger('flyInOut', [\n      transition('void => *', [\n        animate('100ms ease-out', keyframes([\n          style({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),\n          style({ transform: 'scale(1.0, 1.0)', opacity: '1', offset: 1.0 })\n        ]))\n      ]),\n      transition('* => void', [\n        animate(100, style({ transform: 'scale(0, 0)' }))\n      ])\n    ])\n  ]\n})\nexport class UIPanelComponent implements OnInit {\n  @ViewChild('draggablePanel', { static: true }) draggablePanel: ElementRef<HTMLElement>;\n  @ViewChild('scrollablePanel', { static: true }) scrollablePanel: ElementRef<HTMLDivElement>;\n  @ViewChild('content', { read: ViewContainerRef, static: true }) content: ViewContainerRef;\n\n  @Input() set title(title: string) { this.panelService.title = title; }\n  @Input() set left(left: number) { this.panelService.left = left; }\n  @Input() set top(top: number) { this.panelService.top = top; }\n  @Input() set width(width: number) { this.panelService.width = width; }\n  @Input() set height(height: number) { this.panelService.height = height; }\n\n  get title(): string { return this.panelService.title; }\n  get left() { return this.panelService.left; }\n  get top() { return this.panelService.top; }\n  get width() { return this.panelService.width; }\n  get height() { return this.panelService.height; }\n\n  private preLeft: number = 0\n  private preTop: number = 0;\n  private preWidth: number = 100;\n  private preHeight: number = 100;\n\n  private isFullScreen: boolean = false;\n\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\n\n  constructor(\n    public panelService: PanelService,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() {\n    this.panelService.scrollablePanel = this.scrollablePanel.nativeElement;\n  }\n\n  toggleFullScreen() {\n    let panel = this.draggablePanel.nativeElement;\n    if (panel.offsetLeft <= 0\n      && panel.offsetTop <= 0\n      && panel.offsetWidth >= window.innerWidth\n      && panel.offsetHeight >= window.innerHeight) {\n      this.isFullScreen = false;\n    } else {\n      this.isFullScreen = true;\n    }\n\n    if (this.isFullScreen) {\n      this.preLeft = panel.offsetLeft;\n      this.preTop = panel.offsetTop;\n      this.preWidth = panel.offsetWidth;\n      this.preHeight = panel.offsetHeight;\n\n      this.left = 0;\n      this.top = 0;\n      this.width = window.innerWidth;\n      this.height = window.innerHeight;\n\n      panel.style.left = this.left + 'px';\n      panel.style.top = this.top + 'px';\n      panel.style.width = this.width + 'px';\n      panel.style.height = this.height + 'px';\n    } else {\n      this.left = this.preLeft;\n      this.top = this.preTop;\n      this.width = this.preWidth;\n      this.height = this.preHeight;\n    }\n  }\n\n  close() {\n    if (this.panelService) this.panelService.close();\n  }\n}\n\nPanelService.UIPanelComponentClass = UIPanelComponent;","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\nimport { CSSNumber } from '@udonarium/transform/css-number';\nimport { PointerCoordinate } from 'service/pointer-device.service';\n\nimport { InputHandler } from './input-handler';\n\n@Directive({\n  selector: '[appDraggable]'\n})\nexport class DraggableDirective implements AfterViewInit, OnDestroy {\n  @Input('draggable.disable') isDisable: boolean = false;\n  @Input('draggable.bounds') boundsSelector: string = 'body';\n  @Input('draggable.handle') handleSelector: string = '';\n  @Input('draggable.unhandle') unhandleSelector: string = 'input,textarea,button,select,option,span';\n  @Input('draggable.stack') stackSelector: string = '';\n  @Input('draggable.opacity') opacity: number = 0.7;\n\n  @Output('draggable.start') onstart: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\n  @Output('draggable.move') onmove: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\n  @Output('draggable.end') onend: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\n\n  private callbackOnResize = this.adjustPosition.bind(this);\n\n  private input: InputHandler = null;\n  private startPosition: PointerCoordinate = { x: 0, y: 0, z: 0 };\n  private startPointer: PointerCoordinate = { x: 0, y: 0, z: 0 };\n  private prevTrans: PointerCoordinate = { x: 0, y: 0, z: 0 };\n\n  constructor(\n    private ngZone: NgZone,\n    private elementRef: ElementRef<HTMLElement>\n  ) { }\n\n  ngAfterViewInit() {\n    this.initialize();\n    this.adjustPosition();\n    this.setForeground();\n  }\n\n  ngOnDestroy() {\n    this.cancel();\n    this.destroy();\n  }\n\n  private initialize() {\n    this.ngZone.runOutsideAngular(() => {\n      this.input = new InputHandler(this.elementRef.nativeElement);\n      window.addEventListener('resize', this.callbackOnResize, false);\n    });\n    this.input.onStart = this.onInputStart.bind(this);\n    this.input.onMove = this.onInputMove.bind(this);\n    this.input.onEnd = this.onInputEnd.bind(this);\n    this.input.onContextMenu = this.onContextMenu.bind(this);\n  }\n\n  cancel() {\n    this.input.cancel();\n  }\n\n  destroy() {\n    window.removeEventListener('resize', this.callbackOnResize, false);\n    this.input.destroy();\n  }\n\n  private onInputStart(e: MouseEvent | TouchEvent) {\n    if ((e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\n    this.setForeground();\n    this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);\n\n    this.startPointer = this.input.pointer;\n    this.prevTrans = { x: 0, y: 0, z: 0 };\n\n    let isHandle = this.isHandleElement(e.target as HTMLElement);\n    let isUnhandle = this.isUnhandleElement(e.target as HTMLElement);\n    let isScrollable = (e as TouchEvent).touches != null ? this.isScrollableElement(e.target as HTMLElement) : false;\n\n    if (!isHandle || isUnhandle || isScrollable) {\n      this.cancel();\n      return;\n    }\n    if ((e as TouchEvent).touches == null && e.cancelable) e.preventDefault();\n    e.stopPropagation();\n  }\n\n  private onInputMove(e: MouseEvent | TouchEvent) {\n    let trans = {\n      x: this.input.pointer.x - this.startPointer.x,\n      y: this.input.pointer.y - this.startPointer.y,\n      z: this.input.pointer.z - this.startPointer.z\n    };\n\n    let diff = {\n      x: trans.x - this.prevTrans.x,\n      y: trans.y - this.prevTrans.y,\n      z: trans.z - this.prevTrans.z\n    };\n\n    let correction = this.calcCorrectionPosition(diff);\n    trans.x += correction.x;\n    trans.y += correction.y;\n    trans.z += correction.z;\n\n    if (0 < trans.x ** 2 + trans.y ** 2 + trans.z ** 2) {\n      this.elementRef.nativeElement.style.opacity = this.opacity + '';\n    }\n\n    this.elementRef.nativeElement.style.left = trans.x + this.startPosition.x + 'px';\n    this.elementRef.nativeElement.style.top = trans.y + this.startPosition.y + 'px';\n\n    this.prevTrans = trans;\n    if (e.cancelable) e.preventDefault();\n    e.stopPropagation();\n  }\n\n  private onInputEnd(e: MouseEvent | TouchEvent) {\n    this.elementRef.nativeElement.style.opacity = null;\n    if (this.input.isDragging && e.cancelable) e.preventDefault();\n    e.stopPropagation();\n  }\n\n  private onContextMenu(e: MouseEvent | TouchEvent) {\n    e.stopPropagation();\n  }\n\n  private adjustPosition() {\n    let current = this.calcElementPosition(this.elementRef.nativeElement);\n    let correction = this.calcCorrectionPosition();\n    this.elementRef.nativeElement.style.left = correction.x + current.x + 'px';\n    this.elementRef.nativeElement.style.top = correction.y + current.y + 'px';\n  }\n\n  private isHandleElement(target: HTMLElement): boolean {\n    if (this.handleSelector.length < 1) return true;\n    return this.isContainsElement(target, this.unhandleSelector);\n  }\n\n  private isUnhandleElement(target: HTMLElement): boolean {\n    if (this.unhandleSelector.length < 1) return false;\n    return this.isContainsElement(target, this.unhandleSelector);\n  }\n\n  private isContainsElement(target: HTMLElement, selectors: string): boolean {\n    let elms = this.elementRef.nativeElement.querySelectorAll<HTMLElement>(selectors);\n    for (let i = 0; i < elms.length; i++) {\n      if (elms[i].contains(target)) return true;\n    }\n    return false;\n  }\n\n  private isScrollableElement(target: HTMLElement) {\n    let boundsElm = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector);\n    let node = target;\n    let overflowType = ['scroll', 'auto'];\n    let positionType = ['fixed', 'sticky', '-webkit-sticky'];\n    while (node && boundsElm !== node && this.elementRef.nativeElement !== node) {\n      let css: CSSStyleDeclaration = window.getComputedStyle(node);\n      if (0 <= overflowType.indexOf(css.overflowY) && node.offsetHeight < node.scrollHeight) return true;\n      if (0 <= positionType.indexOf(css.position)) return false;\n      node = node.parentElement;\n    }\n    return false;\n  }\n\n  private calcCorrectionPosition(diff: PointerCoordinate = { x: 0, y: 0, z: 0 }): PointerCoordinate {\n    let correction: PointerCoordinate = { x: 0, y: 0, z: 0 };\n    let box = this.elementRef.nativeElement.getBoundingClientRect();\n    let bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();\n\n    if (bounds.right < box.right + diff.x) {\n      correction.x += bounds.right - (box.right + diff.x);\n    }\n    if (box.left + diff.x < bounds.left) {\n      correction.x += bounds.left - (box.left + diff.x);\n    }\n\n    if (bounds.bottom < box.bottom + diff.y) {\n      correction.y += bounds.bottom - (box.bottom + diff.y);\n    }\n    if (box.top + diff.y < bounds.top) {\n      correction.y += bounds.top - (box.top + diff.y);\n    }\n    return correction;\n  }\n\n  private calcElementPosition(target: HTMLElement): PointerCoordinate {\n    let css: CSSStyleDeclaration = window.getComputedStyle(target);\n    return {\n      x: CSSNumber.relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),\n      y: CSSNumber.relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),\n      z: 0\n    };\n  }\n\n  private setForeground() {\n    if (this.stackSelector.length < 1) return;\n    let stacks = this.elementRef.nativeElement.ownerDocument.querySelectorAll<HTMLElement>(this.stackSelector);\n    let topZindex: number = 0;\n    let bottomZindex: number = 99999;\n    stacks.forEach(elm => {\n      let zIndex = parseInt(elm.style.zIndex);\n      if (topZindex < zIndex) topZindex = zIndex;\n      if (zIndex < bottomZindex) bottomZindex = zIndex;\n    });\n\n    if (topZindex <= parseInt(this.elementRef.nativeElement.style.zIndex)) return;\n\n    stacks.forEach(elm => {\n      elm.style.zIndex = (parseInt(elm.style.zIndex) - bottomZindex) + '';\n    });\n    this.elementRef.nativeElement.style.zIndex = (topZindex + 1) + '';\n  }\n}\n","import { PointerCoordinate, PointerData } from 'service/pointer-device.service';\n\nconst MOUSE_IDENTIFIER = -9999;\n\ninterface InputHandlerOption {\n  readonly capture?: boolean\n  readonly passive?: boolean\n  readonly always?: boolean\n}\n\nexport class InputHandler {\n  onStart: (ev: MouseEvent | TouchEvent) => void;\n  onMove: (ev: MouseEvent | TouchEvent) => void;\n  onEnd: (ev: MouseEvent | TouchEvent) => void;\n  onContextMenu: (ev: MouseEvent | TouchEvent) => void;\n\n  private callbackOnMouse = this.onMouse.bind(this);\n  private callbackOnTouch = this.onTouch.bind(this);\n  private callbackOnMenu = this.onMenu.bind(this);\n\n  private lastPointers: PointerData[] = [];\n  private primaryPointer: PointerData = { x: 0, y: 0, z: 0, identifier: MOUSE_IDENTIFIER }\n  get pointer(): PointerCoordinate { return this.primaryPointer; }\n\n  private _isDragging: boolean = false;\n  private _isGrabbing: boolean = false;\n  get isDragging(): boolean { return this._isDragging; }\n  get isGrabbing(): boolean { return this._isGrabbing; }\n\n  private _isDestroyed: boolean = false;\n  get isDestroyed(): boolean { return this._isDestroyed; }\n\n  private readonly option: InputHandlerOption = null;\n\n  constructor(readonly target: HTMLElement, option: InputHandlerOption = { capture: false, passive: false, always: false }) {\n    this.option = {\n      capture: option.capture === true,\n      passive: option.passive === true,\n      always: option.always === true\n    };\n    this.initialize();\n  }\n\n  private initialize() {\n    this.target.addEventListener('mousedown', this.callbackOnMouse, this.option.capture);\n    this.target.addEventListener('touchstart', this.callbackOnTouch, this.option.capture);\n    if (this.option.always) this.addEventListeners();\n  }\n\n  destroy() {\n    this.cancel();\n    this._isDestroyed = true;\n    this.target.removeEventListener('mousedown', this.callbackOnMouse, this.option.capture);\n    this.target.removeEventListener('touchstart', this.callbackOnTouch, this.option.capture);\n    this.removeEventListeners();\n  }\n\n  cancel() {\n    this._isDragging = this._isGrabbing = false;\n    if (!this.option.always) this.removeEventListeners();\n  }\n\n  private onMouse(e: MouseEvent) {\n    let mosuePointer: PointerData = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };\n    if (this.isSyntheticEvent(mosuePointer)) return;\n    this.lastPointers = [mosuePointer];\n    this.primaryPointer = mosuePointer;\n\n    this.onPointer(e);\n  }\n\n  private onTouch(e: TouchEvent) {\n    let length = e.changedTouches.length;\n    if (length < 1) return;\n    this.lastPointers = [];\n    for (let i = 0; i < length; i++) {\n      let touch = e.changedTouches[i];\n      let touchPointer: PointerData = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };\n      this.lastPointers.push(touchPointer);\n    }\n\n    if (e.type === 'touchstart') {\n      this.primaryPointer = this.lastPointers[0];\n    } else {\n      let changedTouches = Array.from(e.changedTouches);\n      let touch = changedTouches.find(touch => touch.identifier === this.primaryPointer.identifier);\n      if (touch == null) return;\n      let touchPointer: PointerData = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };\n      this.primaryPointer = touchPointer;\n    }\n\n    this.onPointer(e);\n  }\n\n  private onPointer(e: MouseEvent | TouchEvent) {\n    switch (e.type) {\n      case 'mousedown':\n      case 'touchstart':\n        this._isGrabbing = true;\n        this._isDragging = false;\n        this.addEventListeners();\n        if (this.onStart) this.onStart(e);\n        break;\n      case 'mousemove':\n      case 'touchmove':\n        if (this.onMove) this.onMove(e);\n        this._isDragging = this._isGrabbing;\n        break;\n      default:\n        if (this.onEnd) this.onEnd(e);\n        this.cancel();\n        break;\n    }\n  }\n\n  private onMenu(e: MouseEvent | TouchEvent) {\n    if (this.onContextMenu) this.onContextMenu(e);\n  }\n\n  private isSyntheticEvent(mosuePointer: PointerData, threshold: number = 15): boolean {\n    for (let pointer of this.lastPointers) {\n      if (pointer.identifier === mosuePointer.identifier) continue;\n      let distance = (mosuePointer.x - pointer.x) ** 2 + (mosuePointer.y - pointer.y) ** 2;\n      if (distance < threshold ** 2) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private addEventListeners() {\n    let option: AddEventListenerOptions = {\n      capture: this.option.capture,\n      passive: this.option.passive\n    }\n    this.target.ownerDocument.addEventListener('mousemove', this.callbackOnMouse, option);\n    this.target.ownerDocument.addEventListener('mouseup', this.callbackOnMouse, option);\n    this.target.ownerDocument.addEventListener('touchmove', this.callbackOnTouch, option);\n    this.target.ownerDocument.addEventListener('touchend', this.callbackOnTouch, option);\n    this.target.ownerDocument.addEventListener('touchcancel', this.callbackOnTouch, option);\n    this.target.ownerDocument.addEventListener('contextmenu', this.callbackOnMenu, option);\n    this.target.ownerDocument.addEventListener('drop', this.callbackOnMouse, option);\n  }\n\n  private removeEventListeners() {\n    let option: EventListenerOptions = {\n      capture: this.option.capture\n    }\n    this.target.ownerDocument.removeEventListener('mousemove', this.callbackOnMouse, option);\n    this.target.ownerDocument.removeEventListener('mouseup', this.callbackOnMouse, option);\n    this.target.ownerDocument.removeEventListener('touchmove', this.callbackOnTouch, option);\n    this.target.ownerDocument.removeEventListener('touchend', this.callbackOnTouch, option);\n    this.target.ownerDocument.removeEventListener('touchcancel', this.callbackOnTouch, option);\n    this.target.ownerDocument.removeEventListener('contextmenu', this.callbackOnMenu, option);\n    this.target.ownerDocument.removeEventListener('drop', this.callbackOnMouse, option);\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { TableSelecter } from '@udonarium/table-selecter';\nimport { TabletopObject } from '@udonarium/tabletop-object';\nimport { PointerCoordinate, PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\nimport { InputHandler } from './input-handler';\n\nexport interface MovableOption {\n  readonly tabletopObject?: TabletopObject;\n  readonly layerName?: string;\n  readonly colideLayers?: string[];\n  readonly transformCssOffset?: string;\n}\n\n@Directive({\n  selector: '[appMovable]'\n})\nexport class MovableDirective implements AfterViewInit, OnDestroy {\n  private static layerHash: { [layerName: string]: MovableDirective[] } = {};\n\n  private tabletopObject: TabletopObject;\n  private layerName: string = '';\n  private colideLayers: string[] = [];\n  private transformCssOffset: string = '';\n\n  @Input('movable.option') set option(option: MovableOption) {\n    this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;\n    this.layerName = option.layerName != null ? option.layerName : this.layerName;\n    this.colideLayers = option.colideLayers != null ? option.colideLayers : this.colideLayers;\n    this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;\n  }\n  @Input('movable.disable') isDisable: boolean = false;\n  @Output('movable.onstart') onstart: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('movable.ondragstart') ondragstart: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('movable.ondrag') ondrag: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('movable.ondragend') ondragend: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('movable.onend') onend: EventEmitter<PointerEvent> = new EventEmitter();\n\n  private _posX: number = 0;\n  private _posY: number = 0;\n  private _posZ: number = 0;\n\n  get posX(): number { return this._posX; }\n  set posX(posX: number) { this._posX = posX; this.setUpdateTimer(); }\n  get posY(): number { return this._posY; }\n  set posY(posY: number) { this._posY = posY; this.setUpdateTimer(); }\n  get posZ(): number { return this._posZ; }\n  set posZ(posZ: number) { this._posZ = posZ; this.setUpdateTimer(); }\n\n  private pointer3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\n  private pointerOffset3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\n  private pointerStart3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\n  private pointerPrev3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\n\n  private height: number = 0;\n  private width: number = 0;\n  private ratio: number = 1.0;\n\n  private updateTimer: NodeJS.Timer = null;\n  private collidableElements: HTMLElement[] = [];\n  private input: InputHandler = null;\n\n  constructor(\n    private ngZone: NgZone,\n    private elementRef: ElementRef,\n    private tabletopService: TabletopService,\n  ) { }\n\n  ngAfterViewInit() {\n    this.ngZone.runOutsideAngular(() => {\n      this.input = new InputHandler(this.elementRef.nativeElement);\n    });\n    this.input.onStart = this.onInputStart.bind(this);\n    this.input.onMove = this.onInputMove.bind(this);\n    this.input.onEnd = this.onInputEnd.bind(this);\n    this.input.onContextMenu = this.onContextMenu.bind(this);\n\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        if ((event.isSendFromSelf && this.input.isGrabbing) || event.data.identifier !== this.tabletopObject.identifier || !this.shouldTransition(this.tabletopObject)) return;\n        this.tabletopService.addBatch(() => {\n          if (this.input.isGrabbing) {\n            this.cancel();\n          } else {\n            this.setAnimatedTransition(true);\n          }\n          this.stopTransition();\n          this.setPosition(this.tabletopObject);\n        }, this);\n      });\n    if (this.layerName.length < 1 && this.tabletopObject) this.layerName = this.tabletopObject.aliasName;\n    this.register();\n    this.findCollidableElements();\n    this.setPosition(this.tabletopObject);\n  }\n\n  ngOnDestroy() {\n    this.cancel();\n    this.input.destroy();\n    this.unregister();\n    EventSystem.unregister(this);\n    this.tabletopService.removeBatch(this);\n  }\n\n  cancel() {\n    this.input.cancel();\n    this.setPointerEvents(true);\n    this.setAnimatedTransition(true);\n    this.setCollidableLayer(false);\n  }\n\n  onInputStart(e: MouseEvent | TouchEvent) {\n    this.callSelectedEvent();\n    if (this.collidableElements.length < 1) this.findCollidableElements(); // 稀にcollidableElementsの取得に失敗している\n\n    if (this.isDisable || (e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\n    this.onstart.emit(e as PointerEvent);\n\n    this.setPointerEvents(false);\n    this.setAnimatedTransition(false);\n    this.setCollidableLayer(true);\n\n    let target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y) as HTMLElement;\n    this.pointer3d = this.calcLocalCoordinate(target, this.input.pointer);\n    this.setPointerEvents(true);\n\n    this.pointerOffset3d.x = this.posX - this.pointer3d.x;\n    this.pointerOffset3d.y = this.posY - this.pointer3d.y;\n    this.pointerOffset3d.z = this.posZ - this.pointer3d.z;\n\n    this.pointerStart3d.x = this.pointerPrev3d.x = this.pointer3d.x;\n    this.pointerStart3d.y = this.pointerPrev3d.y = this.pointer3d.y;\n    this.pointerStart3d.z = this.pointerPrev3d.z = this.pointer3d.z;\n\n    this.ratio = 1.0;\n    if (this.pointer3d.z !== this.posZ) {\n      this.ratio /= Math.abs(this.pointer3d.z - this.posZ) / 2;\n    }\n\n    this.width = this.input.target.clientWidth;\n    this.height = this.input.target.clientHeight;\n  }\n\n  onInputMove(e: MouseEvent | TouchEvent) {\n    if (this.input.isGrabbing && !this.tabletopService.pointerDeviceService.isDragging) {\n      return this.cancel(); // todo\n    }\n    if (this.isDisable || !this.input.isGrabbing) return this.cancel();\n\n    if (!this.input.isDragging) this.setPointerEvents(false);\n    let target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y) as HTMLElement;\n    if (target == null) return;\n\n    this.pointer3d = this.calcLocalCoordinate(target, this.input.pointer);\n    if (this.pointerPrev3d.x === this.pointer3d.x && this.pointerPrev3d.y === this.pointer3d.y && this.pointerPrev3d.z === this.pointer3d.z) return;\n\n    if (!this.input.isDragging) this.ondragstart.emit(e as PointerEvent);\n    this.ondrag.emit(e as PointerEvent);\n\n    let ratio = this.calcDistanceRatio(this.pointerStart3d, this.pointer3d);\n    if (ratio < this.ratio) this.ratio = ratio;\n\n    this.pointerPrev3d.x = this.pointer3d.x;\n    this.pointerPrev3d.y = this.pointer3d.y;\n    this.pointerPrev3d.z = this.pointer3d.z;\n\n    this.posX = this.pointer3d.x + (this.pointerOffset3d.x * this.ratio) + (-(this.width / 2) * (1.0 - this.ratio));\n    this.posY = this.pointer3d.y + (this.pointerOffset3d.y * this.ratio) + (-(this.height / 2) * (1.0 - this.ratio));\n    this.posZ = this.pointer3d.z;\n  }\n\n  onInputEnd(e: MouseEvent | TouchEvent) {\n    if (this.isDisable) return this.cancel();\n    if (this.input.isDragging) this.ondragend.emit(e as PointerEvent);\n    this.cancel();\n    let tableSelecter = ObjectStore.instance.get<TableSelecter>('tableSelecter');\n    if (tableSelecter.gridSnap) this.snapToGrid();\n    this.onend.emit(e as PointerEvent);\n  }\n\n  onContextMenu(e: MouseEvent | TouchEvent) {\n    if (this.isDisable) return this.cancel();\n    e.preventDefault();\n\n    let tableSelecter = ObjectStore.instance.get<TableSelecter>('tableSelecter');\n    if (tableSelecter.gridSnap) this.snapToGrid();\n\n    let needsDispatch = this.input.isGrabbing && e.isTrusted;\n    this.cancel();\n\n    if (needsDispatch) {\n      // ロングプレスによるタッチ操作でコンテキストメニューを開く場合、イベントを適切なDOMに伝搬させる\n      e.stopPropagation();\n      let ev = new MouseEvent(e.type, e);\n      this.ngZone.run(() => this.input.target.dispatchEvent(ev));\n    }\n  }\n\n  private callSelectedEvent() {\n    if (this.tabletopObject)\n      EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: this.tabletopObject.identifier, className: this.tabletopObject.aliasName });\n  }\n\n  private calcLocalCoordinate(target: HTMLElement, coordinate: PointerCoordinate): PointerCoordinate {\n    if (target.contains(this.tabletopService.dragAreaElement)) {\n      coordinate = PointerDeviceService.convertToLocal(coordinate, this.tabletopService.dragAreaElement);\n      coordinate.z = 0;\n    } else {\n      coordinate = PointerDeviceService.convertLocalToLocal(coordinate, target, this.tabletopService.dragAreaElement);\n    }\n    return { x: coordinate.x, y: coordinate.y, z: 0 < coordinate.z ? coordinate.z : 0 };\n  }\n\n  private calcDistanceRatio(start: PointerCoordinate, now: PointerCoordinate): number {\n    let width = this.collidableElements[0].clientWidth;\n    let height = this.collidableElements[0].clientHeight;\n    let ratio: number = Math.sqrt(width * width + height * height);\n    ratio = ratio < 1 ? 1 : ratio * 3;\n\n    let distanceY = start.y - now.y;\n    let distanceX = start.x - now.x;\n    let distanceZ = (start.z - now.z) * 100;\n    let distance = Math.sqrt(distanceY ** 2 + distanceX ** 2 + distanceZ ** 2);\n\n    return ratio / (distance + ratio);\n  }\n\n  snapToGrid(gridSize: number = 25) {\n    this.posX = this.calcSnapNum(this.posX, gridSize);\n    this.posY = this.calcSnapNum(this.posY, gridSize);\n  }\n\n  private calcSnapNum(num: number, interval: number): number {\n    if (interval <= 0) return num;\n    num = num < 0 ? num - interval / 2 : num + interval / 2;\n    return num - (num % interval);\n  }\n\n  private setPosition(object: TabletopObject) {\n    this._posX = object.location.x;\n    this._posY = object.location.y;\n    this._posZ = object.posZ;\n    this.updateTransformCss();\n  }\n\n  private setUpdateTimer() {\n    if (this.updateTimer === null && this.tabletopObject) {\n      this.updateTimer = setTimeout(() => {\n        this.tabletopObject.location.x = this.posX;\n        this.tabletopObject.location.y = this.posY;\n        this.tabletopObject.posZ = this.posZ;\n        this.updateTimer = null;\n      }, 66);\n    }\n    this.updateTransformCss();\n  }\n\n  private findCollidableElements() {\n    this.collidableElements = [];\n    if (getComputedStyle(this.input.target).pointerEvents !== 'none') {\n      this.collidableElements = [this.input.target];\n      return;\n    }\n    this.findNestedCollidableElements(this.input.target);\n  }\n\n  private findNestedCollidableElements(element: HTMLElement) {\n    // TODO:不完全\n    let children = element.children;\n    for (let i = 0; i < children.length; i++) {\n      let child = children[i]\n      if (!(child instanceof HTMLElement)) continue;\n      if (getComputedStyle(child).pointerEvents !== 'none') {\n        this.collidableElements.push(child);\n      }\n    }\n    if (this.collidableElements.length < 1) {\n      for (let i = 0; i < children.length; i++) {\n        let child = children[i]\n        if (!(child instanceof HTMLElement)) continue;\n        this.findNestedCollidableElements(child);\n      }\n    }\n  }\n\n  private setPointerEvents(isEnable: boolean) {\n    let css = isEnable ? 'auto' : 'none';\n    this.collidableElements.forEach(element => element.style.pointerEvents = css);\n  }\n\n  private setAnimatedTransition(isEnable: boolean) {\n    if (!this.input) return;\n    this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';\n  }\n\n  private shouldTransition(object: TabletopObject): boolean {\n    return object.location.x !== this.posX || object.location.y !== this.posY || object.posZ !== this.posZ;\n  }\n\n  private stopTransition() {\n    this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;\n  }\n\n  private updateTransformCss() {\n    if (!this.input) return;\n    let css = this.transformCssOffset + ' translateX(' + this.posX + 'px) translateY(' + this.posY + 'px) translateZ(' + this.posZ + 'px)';\n    this.input.target.style.transform = css;\n  }\n\n  private setCollidableLayer(isCollidable: boolean) {\n    // todo\n    let isEnable = isCollidable;\n    for (let layerName in MovableDirective.layerHash) {\n      if (-1 < this.colideLayers.indexOf(layerName)) {\n        isEnable = this.input.isGrabbing ? isCollidable : true;\n      } else {\n        isEnable = !isCollidable;\n      }\n      MovableDirective.layerHash[layerName].forEach(movable => {\n        if (movable === this || movable.input.isGrabbing) return;\n        movable.setPointerEvents(isEnable);\n      });\n    }\n  }\n\n  private register() {\n    if (!(this.layerName in MovableDirective.layerHash)) MovableDirective.layerHash[this.layerName] = [];\n    let index = MovableDirective.layerHash[this.layerName].indexOf(this);\n    if (index < 0) MovableDirective.layerHash[this.layerName].push(this);\n  }\n\n  private unregister() {\n    if (!(this.layerName in MovableDirective.layerHash)) return;\n    let index = MovableDirective.layerHash[this.layerName].indexOf(this);\n    if (-1 < index) MovableDirective.layerHash[this.layerName].splice(index, 1);\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\nimport { CSSNumber } from '@udonarium/transform/css-number';\nimport { PointerCoordinate } from 'service/pointer-device.service';\n\nimport { HandleType, ResizeHandler } from './resize-handler';\n\ninterface BoxSize {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n}\n\n@Directive({\n  selector: '[appResizable]'\n})\nexport class ResizableDirective implements AfterViewInit, OnDestroy {\n  @Input('resizable.disable') isDisable: boolean = false;\n  @Input('resizable.bounds') boundsSelector: string = 'body';\n  @Input('resizable.minWidth') minWidth: number = 100;\n  @Input('resizable.minHeight') minHeight: number = 100\n\n  @Output('resizable.start') ostart: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\n  @Output('resizable.move') onmove: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\n  @Output('resizable.end') onend: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\n\n  private handleMap = new Map<HandleType, ResizeHandler>();\n  private handleTypes: HandleType[] = [\n    HandleType.N,\n    HandleType.E,\n    HandleType.W,\n    HandleType.S,\n    HandleType.NE,\n    HandleType.NW,\n    HandleType.SE,\n    HandleType.SW\n  ];\n\n  private startPosition: BoxSize = { left: 0, top: 0, width: 0, height: 0 };\n\n  private startPointer: PointerCoordinate = { x: 0, y: 0, z: 0 };\n  private prevTrans: BoxSize = { left: 0, top: 0, width: 0, height: 0 };\n\n  constructor(\n    private ngZone: NgZone,\n    private elementRef: ElementRef<HTMLElement>\n  ) { }\n\n  ngAfterViewInit() {\n    this.initialize();\n  }\n\n  ngOnDestroy() {\n    this.cancel();\n    this.destroy();\n  }\n\n  private initialize() {\n    this.ngZone.runOutsideAngular(() => {\n      this.handleTypes.forEach(type => {\n        let handle = new ResizeHandler(this.elementRef.nativeElement, type);\n        this.handleMap.set(type, handle);\n        handle.input.onStart = ev => this.onResizeStart(ev, handle);\n        handle.input.onMove = ev => this.onResizeMove(ev, handle);\n        handle.input.onEnd = ev => this.onResizeEnd(ev, handle);\n        handle.input.onContextMenu = ev => this.onContextMenu(ev, handle);\n      });\n    });\n  }\n\n  cancel() {\n    this.handleMap.forEach(handle => handle.input.cancel());\n  }\n\n  destroy() {\n    this.handleMap.forEach(handle => handle.input.destroy());\n  }\n\n  private onResizeStart(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\n    if ((e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\n    this.handleMap.forEach(h => {\n      if (h !== handle) h.input.cancel();\n    });\n\n    this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);\n    this.startPointer = handle.input.pointer;\n    this.prevTrans = { left: 0, top: 0, width: 0, height: 0 };\n\n    if (e.cancelable) e.preventDefault();\n    e.stopPropagation();\n  }\n\n  private onResizeMove(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\n    let trans: BoxSize = {\n      left: 0,\n      top: 0,\n      width: handle.input.pointer.x - this.startPointer.x,\n      height: handle.input.pointer.y - this.startPointer.y\n    };\n\n    switch (handle.type) {\n      case HandleType.N:\n      case HandleType.S:\n        trans.width = 0;\n        break;\n      case HandleType.E:\n      case HandleType.W:\n        trans.height = 0;\n        break;\n    }\n\n    switch (handle.type) {\n      case HandleType.SW:\n        trans.left = trans.width;\n        trans.width *= -1;\n        break;\n      case HandleType.NE:\n        trans.top = trans.height;\n        trans.height *= -1;\n        break;\n      case HandleType.E:\n      case HandleType.S:\n      case HandleType.SE:\n        break;\n      case HandleType.N:\n      case HandleType.W:\n      case HandleType.NW:\n        trans.left = trans.width;\n        trans.top = trans.height;\n        trans.width *= -1;\n        trans.height *= -1;\n        break;\n    }\n\n    if (trans.width + this.startPosition.width < this.minWidth) {\n      trans.width = this.minWidth - this.startPosition.width;\n      trans.left = trans.left !== 0 ? -trans.width : trans.left;\n    }\n\n    if (trans.height + this.startPosition.height < this.minHeight) {\n      trans.height = this.minHeight - this.startPosition.height;\n      trans.top = trans.top !== 0 ? -trans.height : trans.top;\n    }\n\n    let diff: BoxSize = {\n      left: trans.left - this.prevTrans.left,\n      top: trans.top - this.prevTrans.top,\n      width: trans.width - this.prevTrans.width,\n      height: trans.height - this.prevTrans.height\n    };\n\n    let correction = this.calcCorrectionPosition(diff);\n    trans.left += correction.left;\n    trans.top += correction.top;\n    trans.width += correction.width;\n    trans.height += correction.height;\n\n    this.elementRef.nativeElement.style.left = trans.left + this.startPosition.left + 'px';\n    this.elementRef.nativeElement.style.top = trans.top + this.startPosition.top + 'px';\n    this.elementRef.nativeElement.style.width = trans.width + this.startPosition.width + 'px';\n    this.elementRef.nativeElement.style.height = trans.height + this.startPosition.height + 'px';\n\n    this.prevTrans = trans;\n    e.stopPropagation();\n  }\n\n  private onResizeEnd(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\n    e.stopPropagation();\n  }\n\n  private onContextMenu(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\n    e.stopPropagation();\n  }\n\n  private calcCorrectionPosition(diff: BoxSize = { left: 0, top: 0, width: 0, height: 0 }): BoxSize {\n    let correction: BoxSize = { left: 0, top: 0, width: 0, height: 0 };\n    let box = this.elementRef.nativeElement.getBoundingClientRect();\n    let bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();\n\n    if (bounds.right < box.right + diff.left + diff.width) {\n      correction.width += bounds.right - (box.right + diff.left + diff.width);\n    }\n    if (box.left + diff.left < bounds.left) {\n      correction.left += bounds.left - (box.left + diff.left);\n      correction.width -= correction.left;\n    }\n\n    if (bounds.bottom < box.bottom + diff.top + diff.height) {\n      correction.height += bounds.bottom - (box.bottom + diff.top + diff.height);\n    }\n    if (box.top + diff.top < bounds.top) {\n      correction.top += bounds.top - (box.top + diff.top);\n      correction.height -= correction.top;\n    }\n\n    return correction;\n  }\n\n  private calcElementPosition(target: HTMLElement): BoxSize {\n    let css: CSSStyleDeclaration = window.getComputedStyle(target);\n    return {\n      left: CSSNumber.relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),\n      top: CSSNumber.relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),\n      width: CSSNumber.relation(css.width, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),\n      height: CSSNumber.relation(css.height, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),\n    };\n  }\n}\n","import { InputHandler } from './input-handler';\n\nexport enum HandleType {\n  N = 'n',\n  E = 'e',\n  W = 'w',\n  S = 's',\n  NE = 'ne',\n  NW = 'nw',\n  SE = 'se',\n  SW = 'sw',\n}\n\nexport class ResizeHandler {\n  input: InputHandler = null;\n  private handle: HTMLElement = null;\n  private width = 12;\n\n  constructor(\n    readonly target: HTMLElement,\n    readonly type: HandleType\n  ) {\n    this.initialize();\n  }\n\n  private initialize() {\n    this.handle = this.target.ownerDocument.createElement('div');\n    this.handle.classList.add('ui-resize-handler-' + this.type);\n    this.input = new InputHandler(this.handle);\n    this.target.appendChild(this.handle);\n\n    let style = this.handle.style;\n    style.position = 'absolute';\n    style.zIndex = '1';\n    style.backgroundColor = 'transparent';\n\n    switch (this.type) {\n      case HandleType.N:\n        style.top = `${-this.width * 3 / 4}px`;\n        style.left = '0px';\n        style.right = '0px';\n        style.height = `${this.width}px`;\n        style.cursor = 'ns-resize';\n        break;\n      case HandleType.E:\n        style.top = '0px';\n        style.bottom = '0px';\n        style.right = `${-this.width * 3 / 4}px`;\n        style.width = `${this.width}px`;\n        style.cursor = 'ew-resize';\n        break;\n      case HandleType.W:\n        style.top = '0px';\n        style.bottom = '0px';\n        style.left = `${-this.width * 3 / 4}px`;\n        style.width = `${this.width}px`;\n        style.cursor = 'ew-resize';\n        break;\n      case HandleType.S:\n        style.bottom = `${-this.width * 3 / 4}px`;\n        style.left = '0px';\n        style.right = '0px';\n        style.height = `${this.width}px`;\n        style.cursor = 'ns-resize';\n        break;\n      case HandleType.NE:\n        style.top = `${-this.width * 3 / 4}px`;\n        style.right = `${-this.width * 3 / 4}px`;\n        style.width = `${this.width * 3 / 2}px`;\n        style.height = `${this.width * 3 / 2}px`;\n        style.cursor = 'nesw-resize';\n        style.zIndex = '2';\n        break;\n      case HandleType.NW:\n        style.top = `${-this.width * 3 / 4}px`;\n        style.left = `${-this.width * 3 / 4}px`;\n        style.width = `${this.width * 3 / 2}px`;\n        style.height = `${this.width * 3 / 2}px`;\n        style.cursor = 'nwse-resize';\n        style.zIndex = '2';\n        break;\n      case HandleType.SE:\n        style.bottom = `${-this.width * 3 / 4}px`;\n        style.right = `${-this.width * 3 / 4}px`;\n        style.width = `${this.width * 3 / 2}px`;\n        style.height = `${this.width * 3 / 2}px`;\n        style.cursor = 'nwse-resize';\n        style.zIndex = '2';\n        break;\n      case HandleType.SW:\n        style.bottom = `${-this.width * 3 / 4}px`;\n        style.left = `${-this.width * 3 / 4}px`;\n        style.width = `${this.width * 3 / 2}px`;\n        style.height = `${this.width * 3 / 2}px`;\n        style.cursor = 'nesw-resize';\n        style.zIndex = '2';\n        break;\n    }\n  }\n\n  destroy() {\n    this.handle.remove();\n    this.input.destroy();\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\nimport { EventSystem } from '@udonarium/core/system';\nimport { TabletopObject } from '@udonarium/tabletop-object';\nimport { PointerCoordinate, PointerDeviceService } from 'service/pointer-device.service';\nimport { TabletopService } from 'service/tabletop.service';\n\nimport { InputHandler } from './input-handler';\n\nexport interface RotableTabletopObject extends TabletopObject {\n  rotate: number;\n}\n\nexport interface RotableOption {\n  readonly tabletopObject?: RotableTabletopObject;\n  readonly grabbingSelecter?: string;\n  readonly transformCssOffset?: string;\n}\n\n@Directive({\n  selector: '[appRotable]'\n})\nexport class RotableDirective implements AfterViewInit, OnDestroy {\n  protected tabletopObject: RotableTabletopObject;\n\n  private transformCssOffset: string = '';\n  private grabbingSelecter: string = '.rotate-grab';\n  @Input('rotable.option') set option(option: RotableOption) {\n    this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;\n    this.grabbingSelecter = option.grabbingSelecter != null ? option.grabbingSelecter : this.grabbingSelecter;\n    this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;\n  }\n  @Input('rotable.disable') isDisable: boolean = false;\n  @Output('rotable.onstart') onstart: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('rotable.ondragstart') ondragstart: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('rotable.ondrag') ondrag: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('rotable.ondragend') ondragend: EventEmitter<PointerEvent> = new EventEmitter();\n  @Output('rotable.onend') onend: EventEmitter<PointerEvent> = new EventEmitter();\n\n  private _rotate: number = 0;\n  get rotate(): number { return this._rotate; }\n  set rotate(rotate: number) { this._rotate = rotate; this.setUpdateTimer(); }\n  @Input('rotable.value') set value(value: number) { this._rotate = value; this.updateTransformCss(); }\n  @Output('rotable.valueChange') valueChange: EventEmitter<number> = new EventEmitter();\n\n  private get isAllowedToRotate(): boolean {\n    if (!this.grabbingElement || !this.input.target) return false;\n    if (this.grabbingSelecter.length < 1) return true;\n    let elements = this.input.target.querySelectorAll(this.grabbingSelecter);\n    let macth = false;\n    for (let i = 0; i < elements.length; i++) {\n      macth = elements[i].contains(this.grabbingElement);\n      if (macth) return true;\n    }\n    return false;\n  }\n\n  private rotateOffset: number = 0;\n  private updateTimer: NodeJS.Timer = null;\n  private grabbingElement: HTMLElement = null;\n  private input: InputHandler = null;\n\n  constructor(\n    private ngZone: NgZone,\n    private elementRef: ElementRef,\n    private tabletopService: TabletopService,\n  ) { }\n\n  ngAfterViewInit() {\n    this.ngZone.runOutsideAngular(() => {\n      this.input = new InputHandler(this.elementRef.nativeElement);\n    });\n    this.input.onStart = this.onInputStart.bind(this);\n    this.input.onMove = this.onInputMove.bind(this);\n    this.input.onEnd = this.onInputEnd.bind(this);\n    this.input.onContextMenu = this.onContextMenu.bind(this);\n\n    if (this.tabletopObject) {\n      EventSystem.register(this)\n        .on('UPDATE_GAME_OBJECT', -1000, event => {\n          if ((event.isSendFromSelf && this.input.isGrabbing) || event.data.identifier !== this.tabletopObject.identifier || !this.shouldTransition(this.tabletopObject)) return;\n          this.tabletopService.addBatch(() => {\n            if (this.input.isGrabbing) {\n              this.cancel();\n            } else {\n              this.setAnimatedTransition(true);\n            }\n            this.stopTransition();\n            this.setRotate(this.tabletopObject);\n          }, this);\n        });\n      this.setRotate(this.tabletopObject);\n    } else {\n      this.updateTransformCss();\n    }\n  }\n\n  ngOnDestroy() {\n    this.cancel();\n    this.input.destroy();\n    EventSystem.unregister(this);\n    this.tabletopService.removeBatch(this);\n  }\n\n  cancel() {\n    this.input.cancel();\n    this.grabbingElement = null;\n    this.setAnimatedTransition(true);\n  }\n\n  onInputStart(e: MouseEvent | TouchEvent) {\n    this.grabbingElement = e.target as HTMLElement;\n    if (this.isDisable || !this.isAllowedToRotate || (e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\n    if (e.cancelable) e.preventDefault();\n    e.stopPropagation();\n    this.onstart.emit(e as PointerEvent);\n\n    let pointer = PointerDeviceService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);\n    this.rotateOffset = this.calcRotate(pointer, this.rotate);\n    this.setAnimatedTransition(false);\n  }\n\n  onInputMove(e: MouseEvent | TouchEvent) {\n    if (this.input.isGrabbing && !this.tabletopService.pointerDeviceService.isDragging) {\n      return this.cancel(); // todo\n    }\n    if (this.isDisable || !this.input.isGrabbing) return this.cancel();\n\n    e.stopPropagation();\n    let pointer3d = PointerDeviceService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);\n    let angle = this.calcRotate(pointer3d, this.rotateOffset);\n\n    if (!this.input.isDragging) this.ondragstart.emit(e as PointerEvent);\n    this.ondrag.emit(e as PointerEvent);\n    this.rotate = angle;\n  }\n\n  onInputEnd(e: MouseEvent | TouchEvent) {\n    if (this.isDisable) return this.cancel();\n    e.stopPropagation();\n    if (this.input.isDragging) this.ondragend.emit(e as PointerEvent);\n    this.cancel();\n    this.snapToPolygonal();\n    this.onend.emit(e as PointerEvent);\n  }\n\n  onContextMenu(e: MouseEvent | TouchEvent) {\n    if (this.isDisable) return this.cancel();\n    e.preventDefault();\n    this.cancel();\n    this.snapToPolygonal();\n  }\n\n  private calcRotate(pointer: PointerCoordinate, rotateOffset: number): number {\n    let centerX = this.input.target.clientWidth / 2;\n    let centerY = this.input.target.clientHeight / 2;\n    let x = pointer.x - centerX;\n    let y = pointer.y - centerY;\n    let rad = Math.atan2(y, x);\n    return ((rad * 180 / Math.PI) - rotateOffset) % 360;\n  }\n\n  snapToPolygonal(polygonal: number = 24) {\n    if (polygonal <= 1) return;\n    this.rotate = this.rotate < 0 ? this.rotate - (180 / polygonal) : this.rotate + (180 / polygonal);\n    this.rotate -= (this.rotate) % (360 / polygonal);\n  }\n\n  private setUpdateTimer() {\n    if (this.updateTimer === null) {\n      this.updateTimer = setTimeout(() => {\n        this.valueChange.emit(this.rotate);\n        if (this.tabletopObject) this.tabletopObject.rotate = this.rotate;\n        this.updateTimer = null;\n      }, 66);\n    }\n    this.updateTransformCss();\n  }\n\n  private setRotate(object: RotableTabletopObject) {\n    if (object) this._rotate = object.rotate;\n    this.updateTransformCss();\n  }\n\n  private setAnimatedTransition(isEnable: boolean) {\n    if (!this.input) return;\n    this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';\n  }\n\n  private shouldTransition(object: RotableTabletopObject): boolean {\n    return object.rotate !== this.rotate;\n  }\n\n  private stopTransition() {\n    this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;\n  }\n\n  private updateTransformCss() {\n    if (!this.input) return;\n    let css = this.transformCssOffset + ' rotateZ(' + this.rotate + 'deg)';\n    this.input.target.style.transform = css;\n  }\n}\n","import {\n  AfterViewInit,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Directive,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  ViewContainerRef,\n} from '@angular/core';\nimport { EventSystem } from '@udonarium/core/system';\nimport { TabletopObject } from '@udonarium/tabletop-object';\nimport { OverviewPanelComponent } from 'component/overview-panel/overview-panel.component';\nimport { ContextMenuService } from 'service/context-menu.service';\nimport { PointerDeviceService } from 'service/pointer-device.service';\n\n@Directive({\n  selector: '[appTooltip]'\n})\nexport class TooltipDirective implements OnInit, AfterViewInit, OnDestroy {\n  private static activeTooltips: ComponentRef<OverviewPanelComponent>[] = [];\n\n  @Input('appTooltip') tabletopObject: TabletopObject;\n\n  private callbackOnMouseEnter = (e) => this.onMouseEnter(e);\n  private callbackOnMouseLeave = (e) => this.onMouseLeave(e);\n  private callbackOnMouseDown = (e) => this.onMouseDown(e);\n\n  private openTooltipTimer: NodeJS.Timer;\n  private closeTooltipTimer: NodeJS.Timer;\n\n  private tooltipComponentRef: ComponentRef<OverviewPanelComponent>\n\n  constructor(\n    private ngZone: NgZone,\n    private viewContainerRef: ViewContainerRef,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private pointerDeviceService: PointerDeviceService\n  ) { }\n\n  ngOnInit() { }\n\n  ngAfterViewInit() {\n    this.addEventListeners(this.viewContainerRef.element.nativeElement);\n  }\n\n  ngOnDestroy() {\n    this.removeEventListeners(this.viewContainerRef.element.nativeElement);\n    this.clearTimer();\n    this.close();\n  }\n\n  private onMouseEnter(e: any) {\n    this.clearTimer();\n    if (!this.tooltipComponentRef) this.startOpenTimer();\n  }\n\n  private onMouseLeave(e: any) {\n    this.clearTimer();\n    if (this.tooltipComponentRef) this.startCloseTimer();\n  }\n\n  private onMouseDown(e: any) {\n    if (!this.tooltipComponentRef) return;\n    if (!this.tooltipComponentRef.location.nativeElement.contains(e.target)\n      && !this.viewContainerRef.element.nativeElement.contains(e.target)) {\n      this.ngZone.run(() => this.closeAll());\n    }\n  }\n\n  private startOpenTimer() {\n    let pointerX = this.pointerDeviceService.pointerX;\n    let pointerY = this.pointerDeviceService.pointerY;\n\n    this.openTooltipTimer = setTimeout(() => {\n      let magnitude = (pointerX - this.pointerDeviceService.pointerX) ** 2 + (pointerY - this.pointerDeviceService.pointerY) ** 2;\n      if (4 < magnitude) {\n        this.startOpenTimer();\n      } else {\n        this.ngZone.run(() => this.open());\n      }\n    }, 100);\n  }\n\n  private startCloseTimer() {\n    this.closeTooltipTimer = setTimeout(() => {\n      if (this.tooltipComponentRef && this.tooltipComponentRef.location.nativeElement.contains(document.activeElement)) {\n        this.startCloseTimer();\n      } else {\n        this.ngZone.run(() => this.closeAll());\n      }\n    }, 400);\n  }\n\n  private clearTimer() {\n    clearTimeout(this.closeTooltipTimer);\n    clearTimeout(this.openTooltipTimer);\n  }\n\n  private open() {\n    this.closeAll();\n    if (this.pointerDeviceService.isDragging) return;\n\n    let parentViewContainerRef = ContextMenuService.defaultParentViewContainerRef;\n\n    const injector = parentViewContainerRef.injector;\n    const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(OverviewPanelComponent);\n\n    this.tooltipComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\n\n    this.tooltipComponentRef.instance.tabletopObject = this.tabletopObject;\n    this.tooltipComponentRef.instance.left = this.pointerDeviceService.pointerX;\n    this.tooltipComponentRef.instance.top = this.pointerDeviceService.pointerY;\n\n    this.addEventListeners(this.tooltipComponentRef.location.nativeElement);\n    this.ngZone.runOutsideAngular(() => {\n      document.body.addEventListener('touchstart', this.callbackOnMouseDown, true);\n      document.body.addEventListener('mousedown', this.callbackOnMouseDown, true);\n    });\n\n    EventSystem.register(this)\n      .on('DELETE_GAME_OBJECT', -1000, event => {\n        if (this.tabletopObject && this.tabletopObject.identifier === event.data.identifier) this.closeAll();\n      });\n\n    this.tooltipComponentRef.onDestroy(() => {\n      this.removeEventListeners(this.tooltipComponentRef.location.nativeElement);\n      document.body.removeEventListener('touchstart', this.callbackOnMouseDown, true);\n      document.body.removeEventListener('mousedown', this.callbackOnMouseDown, true);\n      this.clearTimer();\n      this.tooltipComponentRef = null;\n      EventSystem.unregister(this);\n    });\n    TooltipDirective.activeTooltips.push(this.tooltipComponentRef);\n  }\n\n  private close() {\n    if (!this.tooltipComponentRef) return;\n    let index = TooltipDirective.activeTooltips.indexOf(this.tooltipComponentRef);\n    if (0 <= index) TooltipDirective.activeTooltips.splice(index, 1);\n\n    this.tooltipComponentRef.destroy();\n    this.tooltipComponentRef = null;\n  }\n\n  private closeAll() {\n    TooltipDirective.activeTooltips.forEach(componentRef => componentRef.destroy());\n    TooltipDirective.activeTooltips = [];\n    this.close();\n  }\n\n  private addEventListeners(element: Element) {\n    this.ngZone.runOutsideAngular(() => {\n      element.addEventListener('mouseenter', this.callbackOnMouseEnter, false);\n      element.addEventListener('mouseleave', this.callbackOnMouseLeave, false);\n    });\n  }\n\n  private removeEventListeners(element: Element) {\n    element.removeEventListener('mouseenter', this.callbackOnMouseEnter, false);\n    element.removeEventListener('mouseleave', this.callbackOnMouseLeave, false);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeResourceUrl, SafeScript, SafeStyle, SafeUrl } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'safe'\n})\nexport class SafePipe implements PipeTransform {\n\n  constructor(protected _sanitizer: DomSanitizer) {  }\n\n  public transform(value: string, type: string = 'html'): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\n    switch (type) {\n      case 'html': return this._sanitizer.bypassSecurityTrustHtml(value);\n      case 'style': return this._sanitizer.bypassSecurityTrustStyle(value);\n      case 'script': return this._sanitizer.bypassSecurityTrustScript(value);\n      case 'url': return this._sanitizer.bypassSecurityTrustUrl(value);\n      case 'resourceUrl': return this._sanitizer.bypassSecurityTrustResourceUrl(value);\n      default: throw new Error(`Invalid safe type specified: ${type}`);\n    }\n  }\n}","import { Injectable } from '@angular/core';\n\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { Database } from '@udonarium/database/database';\n\nimport * as yaml from 'js-yaml/dist/js-yaml.min.js';\n\nexport interface AppConfig {\n  webrtc: {\n    key: string,\n    config?: {\n      iceServers?: RTCIceServer[],\n      certificates?: string\n    }\n  },\n  app: {\n    title: string,\n    mode: string\n  }\n}\n\n@Injectable()\nexport class AppConfigService {\n\n  constructor() { }\n\n  peerHistory: string[] = [];\n  isOpen: boolean = false;\n\n  static appConfig: AppConfig = {\n    webrtc: {\n      key: ''\n    },\n    app: {\n      title: '',\n      mode: ''\n    }\n  }\n\n  initialize() {\n    this.initAppConfig();\n    this.initDatabase();\n  }\n\n  private async initDatabase() {\n    console.log('initDatabase...');\n    if (!window.indexedDB) {\n      console.warn('このブラウザは安定板の IndexedDB をサポートしていません。IndexedDB の機能は利用できません。');\n      return;\n    }\n\n    let db = new Database();\n\n    let history = await db.getPeerHistory();\n    history.sort((a, b) => {\n      if (a.timestamp < b.timestamp) return 1;\n      if (a.timestamp > b.timestamp) return -1;\n      return 0;\n    });\n\n    for (let i = 1; i < history.length; i++) {\n      db.deletePeerHistory(history[i].peerId);\n    }\n\n    console.log('履歴: ', history);\n\n    this.peerHistory = [];\n    if (history.length) {\n      for (let historyId of history[0].history) {\n        if (historyId !== history[0].peerId) {\n          this.peerHistory.push(historyId);\n        }\n      }\n    }\n    console.log('最終履歴: ', this.peerHistory);\n\n    EventSystem.register(this)\n      .on('CONNECT_PEER', -1000, () => {\n        console.log('AppConfigService CONNECT_PEER', Network.peerIds);\n        if (!this.isOpen) {\n          this.isOpen = true;\n        }\n        db.addPeerHistory(Network.peerId, Network.peerIds);\n      })\n      .on('DISCONNECT_PEER', -1000, () => {\n        console.log('AppConfigService DISCONNECT_PEER', Network.peerIds);\n      });\n  }\n\n  private async initAppConfig() {\n    try {\n      console.log('YAML読み込み...');\n      let config = await this.loadYaml();\n      let obj = yaml.safeLoad(config);\n      AppConfigService.applyConfig(obj);\n      console.log(AppConfigService.appConfig);\n    } catch (e) {\n      console.warn(e);\n    }\n    EventSystem.trigger('LOAD_CONFIG', AppConfigService.appConfig);\n  }\n\n  private loadYaml(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      let config = document.querySelector('script[type$=\"yaml\"]');\n      if (!config) {\n        console.warn('loadYaml element not found.');\n        resolve('');\n        return;\n      }\n\n      console.log('loadYaml ready...', config);\n      let configString = config.textContent;\n      let url = config.getAttribute('src');\n\n      if (url == null) {\n        console.warn('loadYaml url undefined.');\n        resolve(configString);\n        return;\n      }\n\n      let http = new XMLHttpRequest();\n      http.open('get', url, true);\n      http.onerror = (event) => {\n        console.error(event);\n        resolve(configString);\n      };\n      http.onreadystatechange = (event) => {\n        if (http.readyState !== 4) {\n          return;\n        }\n        if (http.status === 200) {\n          console.log('loadYaml success!');\n          configString = http.responseText;\n        } else {\n          console.warn('loadYaml fail...? status:' + http.status);\n        }\n        resolve(configString);\n      };\n      console.log('loadYaml start');\n      http.send(null);\n    });\n  }\n\n  private static applyConfig(config: Object, root: Object = AppConfigService.appConfig): Object {\n    for (let key in config) {\n      if (isArray(config[key])) {\n        root[key] = config[key];\n      } else if (typeof config[key] === 'object') {\n        if (!(key in root)) root[key] = {};\n        AppConfigService.applyConfig(config[key], root[key]);\n      } else {\n        root[key] = config[key];\n      }\n    }\n    return root;\n  }\n}\n\nfunction isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n","import { Injectable } from '@angular/core';\n\nimport { ChatMessage, ChatMessageContext } from '@udonarium/chat-message';\nimport { ChatTab } from '@udonarium/chat-tab';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { Network } from '@udonarium/core/system';\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { PeerCursor } from '@udonarium/peer-cursor';\n\nconst HOURS = 60 * 60 * 1000;\n\n@Injectable()\nexport class ChatMessageService {\n  private intervalTimer: NodeJS.Timer = null;\n  private timeOffset: number = Date.now();\n  private performanceOffset: number = performance.now();\n\n  private ntpApiUrls: string[] = [\n    'https://ntp-a1.nict.go.jp/cgi-bin/json',\n    'https://ntp-b1.nict.go.jp/cgi-bin/json',\n  ];\n\n  gameType: string = '';\n\n  constructor() { }\n\n  get chatTabs(): ChatTab[] {\n    return ObjectStore.instance.getObjects(ChatTab);\n  }\n\n  calibrateTimeOffset() {\n    if (this.intervalTimer != null) {\n      console.log('calibrateTimeOffset was canceled.');\n      return;\n    }\n    let index = Math.floor(Math.random() * this.ntpApiUrls.length);\n    let ntpApiUrl = this.ntpApiUrls[index];\n    let sendTime = performance.now();\n    fetch(ntpApiUrl)\n      .then(response => {\n        if (response.ok) return response.json();\n        throw new Error('Network response was not ok.');\n      })\n      .then(jsonObj => {\n        let endTime = performance.now();\n        let latency = (endTime - sendTime) / 2;\n        let timeobj = jsonObj;\n        let st: number = timeobj.st * 1000;\n        let fixedTime = st + latency;\n        this.timeOffset = fixedTime;\n        this.performanceOffset = endTime;\n        console.log('latency: ' + latency + 'ms');\n        console.log('st: ' + st + '');\n        console.log('timeOffset: ' + this.timeOffset);\n        console.log('performanceOffset: ' + this.performanceOffset);\n        this.setRerequest();\n      })\n      .catch(error => {\n        console.warn('There has been a problem with your fetch operation: ', error.message);\n        this.setRerequest();\n      });\n  }\n\n  private setRerequest() {\n    this.intervalTimer = setTimeout(() => {\n      this.intervalTimer = null;\n      this.calibrateTimeOffset();\n    }, 6 * HOURS);\n  }\n\n  getTime(): number {\n    return Math.floor(this.timeOffset + (performance.now() - this.performanceOffset));\n  }\n\n  sendMessage(chatTab: ChatTab, text: string, gameType: string, sendFrom: string, sendTo?: string): ChatMessage {\n    let chatMessage: ChatMessageContext = {\n      from: Network.peerContext.id,\n      to: this.findId(sendTo),\n      name: this.makeMessageName(sendFrom, sendTo),\n      imageIdentifier: this.findImageIdentifier(sendFrom),\n      timestamp: this.calcTimeStamp(chatTab),\n      tag: gameType,\n      text: text,\n    };\n\n    return chatTab.addMessage(chatMessage);\n  }\n\n  private findId(identifier: string): string {\n    let object = ObjectStore.instance.get(identifier);\n    if (object instanceof GameCharacter) {\n      return object.identifier;\n    } else if (object instanceof PeerCursor) {\n      return PeerContext.create(object.peerId).id;\n    }\n    return null;\n  }\n\n  private findObjectName(identifier: string): string {\n    let object = ObjectStore.instance.get(identifier);\n    if (object instanceof GameCharacter) {\n      return object.name;\n    } else if (object instanceof PeerCursor) {\n      return object.name;\n    }\n    return identifier;\n  }\n\n  private makeMessageName(sendFrom: string, sendTo?: string): string {\n    let sendFromName = this.findObjectName(sendFrom);\n    if (sendTo == null || sendTo.length < 1) return sendFromName;\n\n    let sendToName = this.findObjectName(sendTo);\n    return sendFromName + ' > ' + sendToName;\n  }\n\n  private findImageIdentifier(identifier: string): string {\n    let object = ObjectStore.instance.get(identifier);\n    if (object instanceof GameCharacter) {\n      return object.imageFile ? object.imageFile.identifier : '';\n    } else if (object instanceof PeerCursor) {\n      return object.imageIdentifier;\n    }\n    return identifier;\n  }\n\n  private calcTimeStamp(chatTab: ChatTab): number {\n    let now = this.getTime();\n    let latest = chatTab.latestTimeStamp;\n    return now <= latest ? latest + 1 : now;\n  }\n}\n","import { ComponentFactoryResolver, ComponentRef, Injectable, ViewContainerRef } from '@angular/core';\n\ninterface ContextMenuPoint {\n  x: number,\n  y: number\n}\n\nexport enum ContextMenuType {\n  ACTION = 'action',\n  SEPARATOR = 'separator',\n}\n\nexport const ContextMenuSeparator: ContextMenuAction = {\n  name: '',\n  enabled: true,\n  type: ContextMenuType.SEPARATOR\n}\n\nexport interface ContextMenuAction {\n  name: string,\n  action?: Function,\n  enabled?: boolean,\n  type?: ContextMenuType,\n  subActions?: ContextMenuAction[]\n}\n\n@Injectable()\nexport class ContextMenuService {\n  /* Todo */\n  static defaultParentViewContainerRef: ViewContainerRef;\n  static UIPanelComponentClass: { new(...args: any[]): any } = null;\n\n  private panelComponentRef: ComponentRef<any>\n\n  title: string = '';\n  actions: ContextMenuAction[] = [];\n  position: ContextMenuPoint = { x: 0, y: 0 };\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) { }\n\n  get isShow(): boolean {\n    return this.panelComponentRef ? true : false;\n  }\n\n  open(position: ContextMenuPoint, actions: ContextMenuAction[], title?: string, parentViewContainerRef?: ViewContainerRef) {\n    this.close();\n    if (!parentViewContainerRef) {\n      parentViewContainerRef = ContextMenuService.defaultParentViewContainerRef;\n      console.log('Context Open');\n    }\n    let panelComponentRef: ComponentRef<any>;\n\n    const injector = parentViewContainerRef.injector;\n    const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(ContextMenuService.UIPanelComponentClass);\n\n    panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\n\n    const childPanelService: ContextMenuService = panelComponentRef.injector.get(ContextMenuService);\n\n    childPanelService.panelComponentRef = panelComponentRef;\n    if (actions) {\n      childPanelService.actions = actions;\n    }\n    if (position) {\n      childPanelService.position.x = position.x;\n      childPanelService.position.y = position.y;\n    }\n\n    childPanelService.title = title != null ? title : '';\n\n    panelComponentRef.onDestroy(() => {\n      childPanelService.panelComponentRef = null;\n    });\n  }\n\n  close() {\n    if (this.panelComponentRef) {\n      this.panelComponentRef.destroy();\n      this.panelComponentRef = null;\n    }\n  }\n}","import { Injectable } from '@angular/core';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem, Network } from '@udonarium/core/system';\nimport { StringUtil } from '@udonarium/core/system/util/string-util';\nimport { DataElement } from '@udonarium/data-element';\nimport { DataSummarySetting, SortOrder } from '@udonarium/data-summary-setting';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { TabletopObject } from '@udonarium/tabletop-object';\n\ntype ObjectIdentifier = string;\ntype LocationName = string;\ntype ElementName = string;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GameObjectInventoryService {\n  private get summarySetting(): DataSummarySetting { return DataSummarySetting.instance; }\n\n  get sortTag(): string { return this.summarySetting.sortTag; }\n  set sortTag(sortTag: string) { this.summarySetting.sortTag = sortTag; }\n  get sortOrder(): SortOrder { return this.summarySetting.sortOrder; }\n  set sortOrder(sortOrder: SortOrder) { this.summarySetting.sortOrder = sortOrder; }\n  get dataTag(): string { return this.summarySetting.dataTag; }\n  set dataTag(dataTag: string) { this.summarySetting.dataTag = dataTag; }\n  get dataTags(): string[] { return this.summarySetting.dataTags; }\n\n  tableInventory: ObjectInventory = new ObjectInventory(object => { return object.location.name === 'table'; });\n  commonInventory: ObjectInventory = new ObjectInventory(object => { return !this.isAnyLocation(object.location.name); });\n  privateInventory: ObjectInventory = new ObjectInventory(object => { return object.location.name === Network.peerId; });\n  graveyardInventory: ObjectInventory = new ObjectInventory(object => { return object.location.name === 'graveyard'; });\n\n  private locationMap: Map<ObjectIdentifier, LocationName> = new Map();\n  private tagNameMap: Map<ObjectIdentifier, ElementName> = new Map();\n\n  readonly newLineString: string = '/';\n  readonly newLineDataElement: DataElement = DataElement.create(this.newLineString);\n\n  constructor() {\n    this.initialize();\n  }\n\n  private initialize() {\n    EventSystem.register(this)\n      .on('OPEN_NETWORK', event => { this.refresh(); })\n      .on('CONNECT_PEER', event => { this.refresh(); })\n      .on('DISCONNECT_PEER', event => { this.refresh(); })\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!object) return;\n\n        if (object instanceof GameCharacter) {\n          let prevLocation = this.locationMap.get(object.identifier);\n          if (object.location.name !== prevLocation) {\n            this.locationMap.set(object.identifier, object.location.name);\n            this.refresh();\n          }\n        } else if (object instanceof DataElement) {\n          if (!this.containsInGameCharacter(object)) return;\n\n          let prevName = this.tagNameMap.get(object.identifier);\n          if ((this.dataTags.includes(prevName) || this.dataTags.includes(object.name)) && object.name !== prevName) {\n            this.tagNameMap.set(object.identifier, object.name);\n            this.refreshDataElements();\n          }\n          if (this.sortTag === object.name) {\n            this.refreshSort();\n          }\n          if (0 < object.children.length) {\n            this.refreshDataElements();\n            this.refreshSort();\n          }\n          this.callInventoryUpdate();\n        } else if (object instanceof DataSummarySetting) {\n          this.refreshDataElements();\n          this.refreshSort();\n          this.callInventoryUpdate();\n        }\n      })\n      .on('DELETE_GAME_OBJECT', 1000, event => {\n        this.locationMap.delete(event.data.identifier);\n        this.tagNameMap.delete(event.data.identifier);\n        this.refresh();\n      })\n      .on('SYNCHRONIZE_FILE_LIST', event => {\n        if (event.isSendFromSelf) this.callInventoryUpdate();\n      });\n  }\n\n  private containsInGameCharacter(element: DataElement): boolean {\n    let parent = element.parent;\n    let aliasName = GameCharacter.aliasName;\n    while (parent) {\n      if (parent.aliasName === aliasName) return true;\n      parent = parent.parent;\n    }\n    return false;\n  }\n\n  private refresh() {\n    this.refreshObjects();\n    this.refreshDataElements();\n    this.refreshSort();\n    this.callInventoryUpdate();\n  }\n\n  private refreshObjects() {\n    this.tableInventory.refreshObjects();\n    this.commonInventory.refreshObjects();\n    this.privateInventory.refreshObjects();\n    this.graveyardInventory.refreshObjects();\n  }\n\n  private refreshDataElements() {\n    this.tableInventory.refreshDataElements();\n    this.commonInventory.refreshDataElements();\n    this.privateInventory.refreshDataElements();\n    this.graveyardInventory.refreshDataElements();\n  }\n\n  private refreshSort() {\n    this.tableInventory.refreshSort();\n    this.commonInventory.refreshSort();\n    this.privateInventory.refreshSort();\n    this.graveyardInventory.refreshSort();\n  }\n\n  private callInventoryUpdate() {\n    EventSystem.trigger('UPDATE_INVENTORY', null);\n  }\n\n  private isAnyLocation(location: string): boolean {\n    if (location === 'table' || location === Network.peerId || location === 'graveyard') return true;\n    for (let conn of Network.peerContexts) {\n      if (conn.isOpen && location === conn.fullstring) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nclass ObjectInventory {\n  newLineString: string = '/';\n  private newLineDataElement: DataElement = DataElement.create(this.newLineString);\n\n  private get summarySetting(): DataSummarySetting { return DataSummarySetting.instance; }\n\n  get sortTag(): string { return this.summarySetting.sortTag; }\n  set sortTag(sortTag: string) { this.summarySetting.sortTag = sortTag; }\n\n  get sortOrder(): SortOrder { return this.summarySetting.sortOrder; }\n  set sortOrder(sortOrder: SortOrder) { this.summarySetting.sortOrder = sortOrder; }\n\n  get dataTag(): string { return this.summarySetting.dataTag; }\n  set dataTag(dataTag: string) { this.summarySetting.dataTag = dataTag; }\n\n  get dataTags(): string[] { return this.summarySetting.dataTags; }\n\n  private _tabletopObjects: TabletopObject[] = [];\n  get tabletopObjects(): TabletopObject[] {\n    if (this.needsRefreshObjects) {\n      this._tabletopObjects = this.searchTabletopObjects();\n      this.needsRefreshObjects = false;\n    }\n    if (this.needsSort) {\n      this._tabletopObjects = this.sortTabletopObjects(this._tabletopObjects);\n      this.needsSort = false;\n    }\n    return this._tabletopObjects;\n  }\n\n  get length(): number {\n    if (this.needsRefreshObjects) {\n      this._tabletopObjects = this.searchTabletopObjects();\n      this.needsRefreshObjects = false;\n    }\n    return this._tabletopObjects.length;\n  }\n\n  private _dataElementMap: Map<ObjectIdentifier, DataElement[]> = new Map();\n  get dataElementMap(): Map<ObjectIdentifier, DataElement[]> {\n    if (this.needsRefreshElements) {\n      this._dataElementMap.clear();\n      let caches = this.tabletopObjects;\n      for (let object of caches) {\n        if (!object.rootDataElement) continue;\n        let elements = this.dataTags.map(tag => tag === this.newLineString ? this.newLineDataElement : object.rootDataElement.getFirstElementByName(tag));\n        this._dataElementMap.set(object.identifier, elements);\n      }\n      this.needsRefreshElements = false;\n    }\n    return this._dataElementMap;\n  }\n\n  private needsRefreshObjects: boolean = true;\n  private needsRefreshElements: boolean = true;\n  private needsSort: boolean = true;\n\n  constructor(\n    readonly classifier: (object: TabletopObject) => boolean\n  ) { }\n\n  refreshObjects() {\n    this.needsRefreshObjects = true;\n  }\n\n  refreshDataElements() {\n    this.needsRefreshElements = true;\n  }\n\n  refreshSort() {\n    this.needsSort = true;\n  }\n\n  private searchTabletopObjects(): TabletopObject[] {\n    let objects: TabletopObject[] = ObjectStore.instance.getObjects(GameCharacter);\n    let caches: TabletopObject[] = [];\n    for (let object of objects) {\n      if (this.classifier(object)) caches.push(object);\n    }\n    return caches;\n  }\n\n  private sortTabletopObjects(objects: TabletopObject[]): TabletopObject[] {\n    let sortTag = this.sortTag.length ? this.sortTag.trim() : '';\n    let sortOrder = this.sortOrder === 'ASC' ? -1 : 1;\n    if (sortTag.length < 1) return objects;\n\n    objects.sort((a, b) => {\n      let aElm = a.rootDataElement.getFirstElementByName(sortTag);\n      let bElm = b.rootDataElement.getFirstElementByName(sortTag);\n      if (!aElm && !bElm) return 0;\n      if (!bElm) return -1;\n      if (!aElm) return 1;\n\n      let aValue = this.convertToSortableValue(aElm);\n      let bValue = this.convertToSortableValue(bElm);\n      if (aValue < bValue) return sortOrder;\n      if (aValue > bValue) return sortOrder * -1;\n      return 0;\n    });\n    return objects;\n  }\n\n  private convertToSortableValue(dataElement: DataElement): number | string {\n    let value = dataElement.isNumberResource ? dataElement.currentValue : dataElement.value;\n    let resultStr = StringUtil.toHalfWidth((value + '').trim());\n    let resultNum = +resultStr;\n    return Number.isNaN(resultNum) ? resultStr : resultNum;\n  }\n}\n","import { ComponentFactoryResolver, ComponentRef, Injectable, Injector, ViewContainerRef } from '@angular/core';\n\n/*\nthanks\nhttp://qiita.com/Quramy/items/ccfcfa0e45dd9e43f041\nhttp://qiita.com/alclimb/items/1c740a432c10b6dc700a\n*/\n\nclass ModalContext {\n  constructor(\n    private _resolve: Function,\n    private _reject: Function,\n    public option?: any\n  ) {\n  }\n  resolve(value: any) {\n    this._resolve(value);\n    this._resolve = null;\n  }\n  reject(reason?: any) {\n    this._reject(reason);\n    this._reject = null;\n  }\n}\n\n@Injectable()\nexport class ModalService {\n  private modalContext: ModalContext = null;\n  private count = 0;\n\n  title: string = '無名のモーダル';\n\n  /* Todo */\n  static defaultParentViewContainerRef: ViewContainerRef;\n  static ModalComponentClass: { new(...args: any[]): any } = null;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) { }\n\n  get option(): any {\n    return this.modalContext ? this.modalContext.option : null;\n  }\n\n  get isShow(): boolean {\n    return this.count > 0;\n  }\n\n  open<T>(childComponent: { new(...args: any[]) }, option?, parentViewContainerRef?: ViewContainerRef): Promise<T> {\n    if (!parentViewContainerRef) {\n      parentViewContainerRef = ModalService.defaultParentViewContainerRef;\n    }\n    let panelComponentRef: ComponentRef<any>;\n    return new Promise<T>((resolve, reject) => {\n      // Injector 作成\n      const _resolve = (val: T) => {\n        if (panelComponentRef) {\n          panelComponentRef.destroy();\n          resolve(val);\n          this.count--;\n        }\n      };\n\n      const _reject = (reason?: any) => {\n        if (panelComponentRef) {\n          panelComponentRef.destroy();\n          reject(reason);\n          this.count--;\n        }\n      };\n\n      const childModalService: ModalService = new ModalService(this.componentFactoryResolver);\n      childModalService.modalContext = new ModalContext(_resolve, _reject, option);\n\n      const parentInjector = parentViewContainerRef.injector;//parentViewContainerRef.parentInjector;\n      const injector = Injector.create([{ provide: ModalService, useValue: childModalService }], parentInjector);\n\n      const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(ModalService.ModalComponentClass);\n      const bodyComponentFactory = this.componentFactoryResolver.resolveComponentFactory(childComponent);\n      panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\n      panelComponentRef.instance.content.createComponent(bodyComponentFactory);\n\n      panelComponentRef.onDestroy(() => {\n        this.count--;\n      });\n\n      this.count++;\n    });\n  }\n\n  resolve(value?: any) {\n    if (this.modalContext) {\n      this.modalContext.resolve(value);\n      this.modalContext = null;\n    }\n  }\n\n  reject(reason?: any) {\n    if (this.modalContext) {\n      this.modalContext.reject(reason);\n      this.modalContext = null;\n    }\n  }\n}","import { ComponentFactoryResolver, ComponentRef, Injectable, ViewContainerRef } from '@angular/core';\n\ndeclare var Type: FunctionConstructor;\ninterface Type<T> extends Function {\n  new(...args: any[]): T;\n}\n\nexport interface PanelOption {\n  title?: string;\n  left?: number;\n  top?: number;\n  width?: number;\n  height?: number;\n}\n\n@Injectable()\nexport class PanelService {\n  /* Todo */\n  static defaultParentViewContainerRef: ViewContainerRef;\n  static UIPanelComponentClass: { new(...args: any[]): any } = null;\n\n  private panelComponentRef: ComponentRef<any>\n  title: string = '無名のパネル';\n  left: number = 0;\n  top: number = 0;\n  width: number = 100;\n  height: number = 100;\n\n  scrollablePanel: HTMLDivElement = null;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) { }\n\n  get isShow(): boolean {\n    return this.panelComponentRef ? true : false;\n  }\n\n  open<T>(childComponent: Type<T>, option?: PanelOption, parentViewContainerRef?: ViewContainerRef): T {\n    if (!parentViewContainerRef) {\n      parentViewContainerRef = PanelService.defaultParentViewContainerRef;\n    }\n    let panelComponentRef: ComponentRef<any>;\n\n    const injector = parentViewContainerRef.injector;\n\n    const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(PanelService.UIPanelComponentClass);\n    const bodyComponentFactory = this.componentFactoryResolver.resolveComponentFactory(childComponent);\n\n    panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\n    let bodyComponentRef: ComponentRef<any> = panelComponentRef.instance.content.createComponent(bodyComponentFactory);\n\n    const childPanelService: PanelService = panelComponentRef.injector.get(PanelService);\n\n    childPanelService.panelComponentRef = panelComponentRef;\n    if (option) {\n      if (option.title) childPanelService.title = option.title;\n      if (option.top) childPanelService.top = option.top;\n      if (option.left) childPanelService.left = option.left;\n      if (option.width) childPanelService.width = option.width;\n      if (option.height) childPanelService.height = option.height;\n    }\n    panelComponentRef.onDestroy(() => {\n      childPanelService.panelComponentRef = null;\n    });\n\n    return <T>bodyComponentRef.instance;\n  }\n\n  close() {\n    if (this.panelComponentRef) {\n      this.panelComponentRef.destroy();\n      this.panelComponentRef = null;\n    }\n  }\n}","import { Injectable, NgZone } from '@angular/core';\n\nimport { Transform } from '@udonarium/transform/transform';\n\nexport interface PointerCoordinate {\n  x: number;\n  y: number;\n  z: number;\n}\n\nexport interface PointerData extends PointerCoordinate {\n  identifier: number;\n}\n\nconst MOUSE_IDENTIFIER = -9999;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PointerDeviceService {\n  private callbackOnPointerDown = (e) => this.onPointerDown(e);\n  private callbackOnPointerMove = (e) => this.onPointerMove(e);\n  private callbackOnPointerUp = (e) => this.onPointerUp(e);\n  private callbackOnContextMenu = (e) => this.onContextMenu(e);\n\n  private _isAllowedToOpenContextMenu: boolean = false;\n  get isAllowedToOpenContextMenu(): boolean { return this._isAllowedToOpenContextMenu; }\n\n  targetElement: HTMLElement;\n\n  pointers: PointerData[] = [{ x: 0, y: 0, z: 0, identifier: -1 }];\n  private startPostion: PointerData = this.pointers[0];\n  private primaryPointer: PointerData = this.pointers[0];\n  get pointer(): PointerCoordinate { return this.primaryPointer; }\n  get pointerX(): number { return this.primaryPointer.x; }\n  get pointerY(): number { return this.primaryPointer.y; }\n\n  isDragging: boolean = false; // todo\n\n  constructor(private ngZone: NgZone) { }\n\n  initialize() {\n    this.addEventListeners();\n  }\n\n  destroy() {\n    this.removeEventListeners();\n  }\n\n  private onPointerDown(e: any) {\n    this.onPointerMove(e);\n    this._isAllowedToOpenContextMenu = true;\n    this.startPostion = this.pointers[0];\n  }\n\n  private onPointerMove(e: MouseEvent)\n  private onPointerMove(e: TouchEvent)\n  private onPointerMove(e: any) {\n    if (e.touches) {\n      this.onTouchMove(e);\n    } else {\n      this.onMouseMove(e);\n    }\n    this.targetElement = e.target;\n  }\n\n  private onPointerUp(e: any) {\n    this.onPointerMove(e);\n  }\n\n  private onMouseMove(e: MouseEvent) {\n    let mosuePointer: PointerData = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };\n    if (this.isSyntheticEvent(mosuePointer)) return;\n    if (this._isAllowedToOpenContextMenu) this.preventContextMenuIfNeeded(mosuePointer);\n    this.pointers = [mosuePointer];\n    this.primaryPointer = mosuePointer;\n  }\n\n  private onTouchMove(e: TouchEvent) {\n    let length = e.touches.length;\n    if (length < 1) return;\n    this.pointers = [];\n    for (let i = 0; i < length; i++) {\n      let touch = e.touches[i];\n      let touchPointer: PointerData = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };\n      if (this._isAllowedToOpenContextMenu) this.preventContextMenuIfNeeded(touchPointer);\n      this.pointers.push(touchPointer);\n    }\n    this.primaryPointer = this.pointers[0];\n  }\n\n  private onContextMenu(e: any) {\n    this._isAllowedToOpenContextMenu = true;\n    this.onPointerUp(e);\n  }\n\n  private preventContextMenuIfNeeded(pointer: PointerCoordinate, threshold: number = 3) {\n    let distance = (pointer.x - this.startPostion.x) ** 2 + (pointer.y - this.startPostion.y) ** 2;\n    if (threshold ** 2 < distance) this._isAllowedToOpenContextMenu = false;\n  }\n\n  private isSyntheticEvent(mosuePointer: PointerData, threshold: number = 15): boolean {\n    for (let pointer of this.pointers) {\n      if (pointer.identifier === mosuePointer.identifier) continue;\n      let distance = (mosuePointer.x - pointer.x) ** 2 + (mosuePointer.y - pointer.y) ** 2;\n      if (distance < threshold ** 2) return true;\n    }\n    return false;\n  }\n\n  private addEventListeners() {\n    this.ngZone.runOutsideAngular(() => {\n      document.body.addEventListener('mousedown', this.callbackOnPointerDown, true);\n      document.body.addEventListener('mousemove', this.callbackOnPointerMove, true);\n      document.body.addEventListener('mouseup', this.callbackOnPointerUp, true);\n      document.body.addEventListener('touchstart', this.callbackOnPointerDown, true);\n      document.body.addEventListener('touchmove', this.callbackOnPointerMove, true);\n      document.body.addEventListener('touchend', this.callbackOnPointerUp, true);\n      document.body.addEventListener('touchcancel', this.callbackOnPointerUp, true);\n      document.body.addEventListener('drop', this.callbackOnPointerUp, true);\n      document.body.addEventListener('contextmenu', this.callbackOnContextMenu, true);\n    });\n  }\n\n  private removeEventListeners() {\n    document.body.removeEventListener('mousedown', this.callbackOnPointerDown, true);\n    document.body.removeEventListener('mousemove', this.callbackOnPointerMove, true);\n    document.body.removeEventListener('mouseup', this.callbackOnPointerUp, true);\n    document.body.removeEventListener('touchstart', this.callbackOnPointerDown, true);\n    document.body.removeEventListener('touchmove', this.callbackOnPointerMove, true);\n    document.body.removeEventListener('touchend', this.callbackOnPointerUp, true);\n    document.body.removeEventListener('touchcancel', this.callbackOnPointerUp, true);\n    document.body.removeEventListener('drop', this.callbackOnPointerUp, true);\n    document.body.removeEventListener('contextmenu', this.callbackOnContextMenu, true);\n  }\n\n  public static convertToLocal(pointer: PointerCoordinate, element: HTMLElement = document.body): PointerCoordinate {\n    let transformer: Transform = new Transform(element);\n    let ray = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);\n    transformer.clear();\n    return { x: ray.x, y: ray.y, z: ray.z };\n  }\n\n  public static convertToGlobal(pointer: PointerCoordinate, element: HTMLElement = document.body): PointerCoordinate {\n    let transformer: Transform = new Transform(element);\n    let ray = transformer.localToGlobal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);\n    transformer.clear();\n    return { x: ray.x, y: ray.y, z: ray.z };\n  }\n\n  public static convertLocalToLocal(pointer: PointerCoordinate, from: HTMLElement, to: HTMLElement): PointerCoordinate {\n    let transformer: Transform = new Transform(from);\n    let local = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);\n    let ray = transformer.localToLocal(local.x, local.y, 0, to);\n    transformer.clear();\n    return { x: ray.x, y: ray.y, z: ray.z };\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { ChatTabList } from '@udonarium/chat-tab-list';\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\nimport { ImageFile, ImageState } from '@udonarium/core/file-storage/image-file';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { MimeType } from '@udonarium/core/file-storage/mime-type';\nimport { GameObject } from '@udonarium/core/synchronize-object/game-object';\nimport { XmlUtil } from '@udonarium/core/system/util/xml-util';\nimport { DataSummarySetting } from '@udonarium/data-summary-setting';\nimport { Room } from '@udonarium/room';\n\nimport * as Beautify from 'vkbeautify';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SaveDataService {\n\n  saveRoom(fileName: string = 'ルームデータ') {\n    let files: File[] = [];\n    let roomXml = this.convertToXml(new Room());\n    let chatXml = this.convertToXml(new ChatTabList());\n    let summarySetting = this.convertToXml(DataSummarySetting.instance);\n    files.push(new File([roomXml], 'data.xml', { type: 'text/plain' }));\n    files.push(new File([chatXml], 'chat.xml', { type: 'text/plain' }));\n    files.push(new File([summarySetting], 'summary.xml', { type: 'text/plain' }));\n\n    files = files.concat(this.searchImageFiles(roomXml));\n    files = files.concat(this.searchImageFiles(chatXml));\n\n    FileArchiver.instance.save(files, fileName);\n  }\n\n  saveGameObject(gameObject: GameObject, fileName: string = 'xml_data') {\n    let files: File[] = [];\n    let xml: string = this.convertToXml(gameObject);\n\n    files.push(new File([xml], 'data.xml', { type: 'text/plain' }));\n    files = files.concat(this.searchImageFiles(xml));\n\n    FileArchiver.instance.save(files, fileName);\n  }\n\n  private convertToXml(gameObject: GameObject): string {\n    let xmlDeclaration = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n    return xmlDeclaration + '\\n' + Beautify.xml(gameObject.toXml(), 2);\n  }\n\n  private searchImageFiles(xml: string): File[] {\n    let xmlElement: Element = XmlUtil.xml2element(xml);\n    let files: File[] = [];\n    if (!xmlElement) return files;\n\n    let images: { [identifier: string]: ImageFile } = {};\n    let imageElements = xmlElement.ownerDocument.querySelectorAll('*[type=\"image\"]');\n\n    for (let i = 0; i < imageElements.length; i++) {\n      let identifier = imageElements[i].innerHTML;\n      images[identifier] = ImageStorage.instance.get(identifier);\n    }\n\n    imageElements = xmlElement.ownerDocument.querySelectorAll('*[imageIdentifier], *[backgroundImageIdentifier]');\n\n    for (let i = 0; i < imageElements.length; i++) {\n      let identifier = imageElements[i].getAttribute('imageIdentifier');\n      if (identifier) images[identifier] = ImageStorage.instance.get(identifier);\n\n      let backgroundImageIdentifier = imageElements[i].getAttribute('backgroundImageIdentifier');\n      if (backgroundImageIdentifier) images[backgroundImageIdentifier] = ImageStorage.instance.get(backgroundImageIdentifier);\n    }\n    for (let identifier in images) {\n      let image = images[identifier];\n      if (image && image.state === ImageState.COMPLETE) {\n        files.push(new File([image.blob], image.identifier + '.' + MimeType.extension(image.blob.type), { type: image.blob.type }));\n      }\n    }\n    return files;\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { Card } from '@udonarium/card';\nimport { CardStack } from '@udonarium/card-stack';\nimport { ImageContext, ImageFile } from '@udonarium/core/file-storage/image-file';\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\nimport { EventSystem } from '@udonarium/core/system';\nimport { DiceSymbol, DiceType } from '@udonarium/dice-symbol';\nimport { GameCharacter } from '@udonarium/game-character';\nimport { GameTable } from '@udonarium/game-table';\nimport { GameTableMask } from '@udonarium/game-table-mask';\nimport { PeerCursor } from '@udonarium/peer-cursor';\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\nimport { TableSelecter } from '@udonarium/table-selecter';\nimport { TabletopObject } from '@udonarium/tabletop-object';\nimport { Terrain } from '@udonarium/terrain';\nimport { TextNote } from '@udonarium/text-note';\n\nimport { ContextMenuAction } from './context-menu.service';\nimport { PointerCoordinate, PointerDeviceService } from './pointer-device.service';\n\ntype ObjectIdentifier = string;\ntype LocationName = string;\n\n@Injectable()\nexport class TabletopService {\n  dragAreaElement: HTMLElement = document.body;\n\n  private batchTask: Map<any, Function> = new Map();\n  private batchTaskTimer: NodeJS.Timer = null;\n\n  private _emptyTable: GameTable = new GameTable('');\n  get tableSelecter(): TableSelecter { return ObjectStore.instance.get<TableSelecter>('tableSelecter'); }\n  get currentTable(): GameTable {\n    let table = this.tableSelecter.viewTable;\n    return table ? table : this._emptyTable;\n  }\n\n  private locationMap: Map<ObjectIdentifier, LocationName> = new Map();\n  private parentMap: Map<ObjectIdentifier, ObjectIdentifier> = new Map();\n  private characterCache = new TabletopCache<GameCharacter>(() => ObjectStore.instance.getObjects(GameCharacter).filter(obj => obj.isVisibleOnTable));\n  private cardCache = new TabletopCache<Card>(() => ObjectStore.instance.getObjects(Card).filter(obj => obj.isVisibleOnTable));\n  private cardStackCache = new TabletopCache<CardStack>(() => ObjectStore.instance.getObjects(CardStack).filter(obj => obj.isVisibleOnTable));\n  private tableMaskCache = new TabletopCache<GameTableMask>(() => {\n    let viewTable = this.tableSelecter.viewTable;\n    return viewTable ? viewTable.masks : [];\n  });\n  private terrainCache = new TabletopCache<Terrain>(() => {\n    let viewTable = this.tableSelecter.viewTable;\n    return viewTable ? viewTable.terrains : [];\n  });\n  private textNoteCache = new TabletopCache<TextNote>(() => ObjectStore.instance.getObjects(TextNote));\n  private diceSymbolCache = new TabletopCache<DiceSymbol>(() => ObjectStore.instance.getObjects(DiceSymbol));\n\n  get characters(): GameCharacter[] { return this.characterCache.objects; }\n  get cards(): Card[] { return this.cardCache.objects; }\n  get cardStacks(): CardStack[] { return this.cardStackCache.objects; }\n  get tableMasks(): GameTableMask[] { return this.tableMaskCache.objects; }\n  get terrains(): Terrain[] { return this.terrainCache.objects; }\n  get textNotes(): TextNote[] { return this.textNoteCache.objects; }\n  get diceSymbols(): DiceSymbol[] { return this.diceSymbolCache.objects; }\n  get peerCursors(): PeerCursor[] { return ObjectStore.instance.getObjects<PeerCursor>(PeerCursor); }\n\n  constructor(\n    public ngZone: NgZone,\n    public pointerDeviceService: PointerDeviceService,\n  ) {\n    this.initialize();\n  }\n\n  private initialize() {\n    this.refreshCacheAll();\n    EventSystem.register(this)\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\n        if (event.data.identifier === this.currentTable.identifier || event.data.identifier === this.tableSelecter.identifier) {\n          this.refreshCache(GameTableMask.aliasName);\n          this.refreshCache(Terrain.aliasName);\n          return;\n        }\n\n        let object = ObjectStore.instance.get(event.data.identifier);\n        if (!object || !(object instanceof TabletopObject)) {\n          this.refreshCache(event.data.aliasName);\n        } else if (this.shouldRefreshCache(object)) {\n          this.refreshCache(event.data.aliasName);\n          this.updateMap(object);\n        }\n      })\n      .on('DELETE_GAME_OBJECT', -1000, event => {\n        let garbage = ObjectStore.instance.get(event.data.identifier);\n        if (garbage == null || garbage.aliasName.length < 1) {\n          this.refreshCacheAll();\n        } else {\n          this.refreshCache(garbage.aliasName);\n        }\n      })\n      .on('XML_LOADED', event => {\n        let xmlElement: Element = event.data.xmlElement;\n        // todo:立体地形の上にドロップした時の挙動\n        let gameObject = ObjectSerializer.instance.parseXml(xmlElement);\n        if (gameObject instanceof TabletopObject) {\n          let pointer = this.calcTabletopLocalCoordinate();\n          gameObject.location.x = pointer.x - 25;\n          gameObject.location.y = pointer.y - 25;\n          gameObject.posZ = pointer.z;\n          this.placeToTabletop(gameObject);\n          SoundEffect.play(PresetSound.piecePut);\n        }\n      });\n  }\n\n  addBatch(task: Function, key: any = {}) {\n    this.batchTask.set(key, task);\n    if (this.batchTaskTimer != null) return;\n    this.execBatch();\n    this.batchTaskTimer = setInterval(() => {\n      if (0 < this.batchTask.size) {\n        this.execBatch();\n      } else {\n        clearInterval(this.batchTaskTimer);\n        this.batchTaskTimer = null;\n      }\n    }, 66);\n  }\n\n  removeBatch(key: any = {}) {\n    this.batchTask.delete(key);\n  }\n\n  private execBatch() {\n    this.batchTask.forEach(task => task());\n    this.batchTask.clear();\n  }\n\n  private findCache(aliasName: string): TabletopCache<any> {\n    switch (aliasName) {\n      case GameCharacter.aliasName:\n        return this.characterCache;\n      case Card.aliasName:\n        return this.cardCache;\n      case CardStack.aliasName:\n        return this.cardStackCache;\n      case GameTableMask.aliasName:\n        return this.tableMaskCache;\n      case Terrain.aliasName:\n        return this.terrainCache;\n      case TextNote.aliasName:\n        return this.textNoteCache;\n      case DiceSymbol.aliasName:\n        return this.diceSymbolCache;\n      default:\n        return null;\n    }\n  }\n\n  private refreshCache(aliasName: string) {\n    let cache = this.findCache(aliasName);\n    if (cache) cache.refresh();\n  }\n\n  private refreshCacheAll() {\n    this.characterCache.refresh();\n    this.cardCache.refresh();\n    this.cardStackCache.refresh();\n    this.tableMaskCache.refresh();\n    this.terrainCache.refresh();\n    this.textNoteCache.refresh();\n    this.diceSymbolCache.refresh();\n\n    this.clearMap();\n  }\n\n  private shouldRefreshCache(object: TabletopObject) {\n    return this.locationMap.get(object.identifier) !== object.location.name || this.parentMap.get(object.identifier) !== object.parentId;\n  }\n\n  private updateMap(object: TabletopObject) {\n    this.locationMap.set(object.identifier, object.location.name);\n    this.parentMap.set(object.identifier, object.parentId);\n  }\n\n  private clearMap() {\n    this.locationMap.clear();\n    this.parentMap.clear();\n  }\n\n  private placeToTabletop(gameObject: TabletopObject) {\n    switch (gameObject.aliasName) {\n      case GameTableMask.aliasName:\n        if (gameObject instanceof GameTableMask) gameObject.isLock = false;\n      case Terrain.aliasName:\n        if (gameObject instanceof Terrain) gameObject.isLocked = false;\n        if (!this.tableSelecter || !this.tableSelecter.viewTable) return;\n        this.tableSelecter.viewTable.appendChild(gameObject);\n        break;\n      default:\n        gameObject.setLocation('table');\n        break;\n    }\n  }\n\n  calcTabletopLocalCoordinate(\n    x: number = this.pointerDeviceService.pointers[0].x,\n    y: number = this.pointerDeviceService.pointers[0].y,\n    target: HTMLElement = this.pointerDeviceService.targetElement\n  ): PointerCoordinate {\n    let coordinate: PointerCoordinate = { x: x, y: y, z: 0 };\n    if (target.contains(this.dragAreaElement)) {\n      coordinate = PointerDeviceService.convertToLocal(coordinate, this.dragAreaElement);\n      coordinate.z = 0;\n    } else {\n      coordinate = PointerDeviceService.convertLocalToLocal(coordinate, target, this.dragAreaElement);\n    }\n    return { x: coordinate.x, y: coordinate.y, z: 0 < coordinate.z ? coordinate.z : 0 };\n  }\n\n  createGameCharacter(position: PointerCoordinate): GameCharacter {\n    let character = GameCharacter.create('新しいキャラクター', 1, '');\n    character.location.x = position.x - 25;\n    character.location.y = position.y - 25;\n    character.posZ = position.z;\n    return character;\n  }\n\n  createGameTableMask(position: PointerCoordinate): GameTableMask {\n    let viewTable = this.tableSelecter.viewTable;\n    if (!viewTable) return;\n\n    let tableMask = GameTableMask.create('マップマスク', 5, 5, 100);\n    tableMask.location.x = position.x - 25;\n    tableMask.location.y = position.y - 25;\n    tableMask.posZ = position.z;\n\n    viewTable.appendChild(tableMask);\n    return tableMask;\n  }\n\n  createTerrain(position: PointerCoordinate): Terrain {\n    let url: string = './assets/images/tex.jpg';\n    let image: ImageFile = ImageStorage.instance.get(url)\n    if (!image) image = ImageStorage.instance.add(url);\n\n    let viewTable = this.tableSelecter.viewTable;\n    if (!viewTable) return;\n\n    let terrain = Terrain.create('地形', 2, 2, 2, image.identifier, image.identifier);\n    terrain.location.x = position.x - 50;\n    terrain.location.y = position.y - 50;\n    terrain.posZ = position.z;\n\n    viewTable.appendChild(terrain);\n    return terrain;\n  }\n\n  createTextNote(position: PointerCoordinate): TextNote {\n    let textNote = TextNote.create('共有メモ', 'テキストを入力してください', 5, 4, 3);\n    textNote.location.x = position.x;\n    textNote.location.y = position.y;\n    textNote.posZ = position.z;\n    return textNote;\n  }\n\n  createDiceSymbol(position: PointerCoordinate, name: string, diceType: DiceType, imagePathPrefix: string): DiceSymbol {\n    let diceSymbol = DiceSymbol.create(name, diceType, 1);\n    let image: ImageFile = null;\n\n    diceSymbol.faces.forEach(face => {\n      let url: string = `./assets/images/dice/${imagePathPrefix}/${imagePathPrefix}[${face}].png`;\n      image = ImageStorage.instance.get(url)\n      if (!image) { image = ImageStorage.instance.add(url); }\n      diceSymbol.imageDataElement.getFirstElementByName(face).value = image.identifier;\n    });\n\n    diceSymbol.location.x = position.x - 25;\n    diceSymbol.location.y = position.y - 25;\n    diceSymbol.posZ = position.z;\n    return diceSymbol;\n  }\n\n  createTrump(position: PointerCoordinate): CardStack {\n    let cardStack = CardStack.create('トランプ山札');\n    cardStack.location.x = position.x - 25;\n    cardStack.location.y = position.y - 25;\n    cardStack.posZ = position.z;\n\n    let back: string = './assets/images/trump/z02.gif';\n    if (!ImageStorage.instance.get(back)) {\n      ImageStorage.instance.add(back);\n    }\n\n    let names: string[] = ['c', 'd', 'h', 's'];\n\n    for (let name of names) {\n      for (let i = 1; i <= 13; i++) {\n        let trump: string = name + (('00' + i).slice(-2));\n        let url: string = './assets/images/trump/' + trump + '.gif';\n        if (!ImageStorage.instance.get(url)) {\n          ImageStorage.instance.add(url);\n        }\n        let card = Card.create('カード', url, back);\n        cardStack.putOnBottom(card);\n      }\n    }\n\n    for (let i = 1; i <= 2; i++) {\n      let trump: string = 'x' + (('00' + i).slice(-2));\n      let url: string = './assets/images/trump/' + trump + '.gif';\n      if (!ImageStorage.instance.get(url)) {\n        ImageStorage.instance.add(url);\n      }\n      let card = Card.create('カード', url, back);\n      cardStack.putOnBottom(card);\n    }\n    return cardStack;\n  }\n\n  makeDefaultTable() {\n    let tableSelecter = new TableSelecter('tableSelecter');\n    tableSelecter.initialize();\n\n    let gameTable = new GameTable('gameTable');\n    let testBgFile: ImageFile = null;\n    let bgFileContext = ImageFile.createEmpty('testTableBackgroundImage_image').toContext();\n    bgFileContext.url = './assets/images/BG10a_80.jpg';\n    testBgFile = ImageStorage.instance.add(bgFileContext);\n    //let testDistanceFile: ImageFile = null;\n    //let distanceFileContext = ImageFile.createEmpty('testTableDistanceviewImage_image').toContext();\n    //distanceFileContext.url = './assets/images/BG00a1_80.jpg';\n    //testDistanceFile = ImageStorage.instance.add(distanceFileContext);\n    gameTable.name = '最初のテーブル';\n    gameTable.imageIdentifier = testBgFile.identifier;\n    //gameTable.backgroundImageIdentifier = testDistanceFile.identifier;\n    gameTable.width = 20;\n    gameTable.height = 15;\n    gameTable.initialize();\n\n    tableSelecter.viewTableIdentifier = gameTable.identifier;\n  }\n\n  makeDefaultTabletopObjects() {\n    let testCharacter: GameCharacter = null;\n    let testFile: ImageFile = null;\n    let fileContext: ImageContext = null;\n\n    testCharacter = new GameCharacter('testCharacter_1');\n    fileContext = ImageFile.createEmpty('testCharacter_1_image').toContext();\n    fileContext.url = './assets/images/mon_052.gif';\n    testFile = ImageStorage.instance.add(fileContext);\n    testCharacter.location.x = 5 * 50;\n    testCharacter.location.y = 9 * 50;\n    testCharacter.initialize();\n    testCharacter.createTestGameDataElement('モンスターA', 1, testFile.identifier);\n\n    testCharacter = new GameCharacter('testCharacter_2');\n    testCharacter.location.x = 8 * 50;\n    testCharacter.location.y = 8 * 50;\n    testCharacter.initialize();\n    testCharacter.createTestGameDataElement('モンスターB', 1, testFile.identifier);\n\n    testCharacter = new GameCharacter('testCharacter_3');\n    fileContext = ImageFile.createEmpty('testCharacter_3_image').toContext();\n    fileContext.url = './assets/images/mon_128.gif';\n    testFile = ImageStorage.instance.add(fileContext);\n    testCharacter.location.x = 4 * 50;\n    testCharacter.location.y = 2 * 50;\n    testCharacter.initialize();\n    testCharacter.createTestGameDataElement('モンスターC', 3, testFile.identifier);\n\n    testCharacter = new GameCharacter('testCharacter_4');\n    fileContext = ImageFile.createEmpty('testCharacter_4_image').toContext();\n    fileContext.url = './assets/images/mon_150.gif';\n    testFile = ImageStorage.instance.add(fileContext);\n    testCharacter.location.x = 6 * 50;\n    testCharacter.location.y = 11 * 50;\n    testCharacter.initialize();\n    testCharacter.createTestGameDataElement('キャラクターA', 1, testFile.identifier);\n\n    testCharacter = new GameCharacter('testCharacter_5');\n    fileContext = ImageFile.createEmpty('testCharacter_5_image').toContext();\n    fileContext.url = './assets/images/mon_211.gif';\n    testFile = ImageStorage.instance.add(fileContext);\n    testCharacter.location.x = 12 * 50;\n    testCharacter.location.y = 12 * 50;\n    testCharacter.initialize();\n    testCharacter.createTestGameDataElement('キャラクターB', 1, testFile.identifier);\n\n    testCharacter = new GameCharacter('testCharacter_6');\n    fileContext = ImageFile.createEmpty('testCharacter_6_image').toContext();\n    fileContext.url = './assets/images/mon_135.gif';\n    testFile = ImageStorage.instance.add(fileContext);\n    testCharacter.initialize();\n    testCharacter.location.x = 5 * 50;\n    testCharacter.location.y = 13 * 50;\n    testCharacter.createTestGameDataElement('キャラクターC', 1, testFile.identifier);\n  }\n\n  getContextMenuActionsForCreateObject(position: PointerCoordinate): ContextMenuAction[] {\n    return [\n      this.getCreateCharacterMenu(position),\n      this.getCreateTableMaskMenu(position),\n      this.getCreateTerrainMenu(position),\n      this.getCreateTextNoteMenu(position),\n      this.getCreateTrumpMenu(position),\n      this.getCreateDiceSymbolMenu(position),\n    ];\n  }\n\n  private getCreateCharacterMenu(position: PointerCoordinate): ContextMenuAction {\n    return {\n      name: 'キャラクターを作成', action: () => {\n        let character = this.createGameCharacter(position);\n        EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: character.identifier, className: character.aliasName });\n        SoundEffect.play(PresetSound.piecePut);\n      }\n    }\n  }\n\n  private getCreateTableMaskMenu(position: PointerCoordinate): ContextMenuAction {\n    return {\n      name: 'マップマスクを作成', action: () => {\n        this.createGameTableMask(position);\n        SoundEffect.play(PresetSound.cardPut);\n      }\n    }\n  }\n\n  private getCreateTerrainMenu(position: PointerCoordinate): ContextMenuAction {\n    return {\n      name: '地形を作成', action: () => {\n        this.createTerrain(position);\n        SoundEffect.play(PresetSound.blockPut);\n      }\n    }\n  }\n\n  private getCreateTextNoteMenu(position: PointerCoordinate): ContextMenuAction {\n    return {\n      name: '共有メモを作成', action: () => {\n        this.createTextNote(position);\n        SoundEffect.play(PresetSound.cardPut);\n      }\n    }\n  }\n\n  private getCreateTrumpMenu(position: PointerCoordinate): ContextMenuAction {\n    return {\n      name: 'トランプの山札を作成', action: () => {\n        this.createTrump(position);\n        SoundEffect.play(PresetSound.cardPut);\n      }\n    }\n  }\n\n  private getCreateDiceSymbolMenu(position: PointerCoordinate): ContextMenuAction {\n    let dices: { menuName: string, diceName: string, type: DiceType, imagePathPrefix: string }[] = [\n      { menuName: 'D4', diceName: 'D4', type: DiceType.D4, imagePathPrefix: '4_dice' },\n      { menuName: 'D6', diceName: 'D6', type: DiceType.D6, imagePathPrefix: '6_dice' },\n      { menuName: 'D8', diceName: 'D8', type: DiceType.D8, imagePathPrefix: '8_dice' },\n      { menuName: 'D10', diceName: 'D10', type: DiceType.D10, imagePathPrefix: '10_dice' },\n      { menuName: 'D10 (00-90)', diceName: 'D10', type: DiceType.D10_10TIMES, imagePathPrefix: '100_dice' },\n      { menuName: 'D12', diceName: 'D12', type: DiceType.D12, imagePathPrefix: '12_dice' },\n      { menuName: 'D20', diceName: 'D20', type: DiceType.D20, imagePathPrefix: '20_dice' },\n    ];\n    let subMenus: ContextMenuAction[] = [];\n\n    dices.forEach(item => {\n      subMenus.push({\n        name: item.menuName, action: () => {\n          this.createDiceSymbol(position, item.diceName, item.type, item.imagePathPrefix);\n          SoundEffect.play(PresetSound.dicePut);\n        }\n      });\n    });\n    return { name: 'ダイスを作成', action: null, subActions: subMenus };\n  }\n}\n\nclass TabletopCache<T extends TabletopObject> {\n  private needsRefresh: boolean = true;\n\n  private _objects: T[] = [];\n  get objects(): T[] {\n    if (this.needsRefresh) {\n      this._objects = this.refreshCollector();\n      this._objects = this._objects ? this._objects : [];\n      this.needsRefresh = false;\n    }\n    return this._objects;\n  }\n\n  constructor(\n    readonly refreshCollector: () => T[]\n  ) { }\n\n  refresh() {\n    this.needsRefresh = true;\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import 'hammerjs';\n\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}